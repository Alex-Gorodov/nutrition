/*! For license information please see main.1684fcfd.js.LICENSE.txt */
(()=>{var e={628:(e,t)=>{"use strict";t.A=function(e,t){if(e&&t){var n=Array.isArray(t)?t:t.split(",");if(0===n.length)return!0;var r=e.name||"",i=(e.type||"").toLowerCase(),o=i.replace(/\/.*$/,"");return n.some((function(e){var t=e.trim().toLowerCase();return"."===t.charAt(0)?r.toLowerCase().endsWith(t):t.endsWith("/*")?o===t.replace(/\/.*$/,""):i===t}))}return!0}},740:e=>{"use strict";e.exports=function(e,t,n,r,i,o,a,s){if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,i,o,a,s],u=0;(l=new Error(t.replace(/%s/g,(function(){return c[u++]})))).name="Invariant Violation"}throw l.framesToPop=1,l}}},497:(e,t,n)=>{"use strict";var r=n(218);function i(){}function o(){}o.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,o,a){if(a!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:i};return n.PropTypes=n,n}},173:(e,t,n)=>{e.exports=n(497)()},218:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},730:(e,t,n)=>{"use strict";var r=n(43),i=n(853);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,s={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(s[e]=t,e=0;e<t.length;e++)a.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h={},f={};function m(e,t,n,r,i,o,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function b(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!d.call(f,e)||!d.call(h,e)&&(p.test(e)?f[e]=!0:(h[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var x=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),$=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),E=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),M=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var A=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var N,D=Object.assign;function F(e){if(void 0===N)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);N=t&&t[1]||""}return"\n"+N+e}var j=!1;function z(e,t){if(!e||j)return"";j=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),o=r.stack.split("\n"),a=i.length-1,s=o.length-1;1<=a&&0<=s&&i[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==o[s]){if(1!==a||1!==s)do{if(a--,0>--s||i[a]!==o[s]){var l="\n"+i[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=s);break}}}finally{j=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function B(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=z(e.type,!1);case 11:return e=z(e.type.render,!1);case 1:return e=z(e.type,!0);default:return""}}function U(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case S:return"Fragment";case $:return"Portal";case C:return"Profiler";case _:return"StrictMode";case I:return"Suspense";case P:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case E:return(e.displayName||"Context")+".Consumer";case k:return(e._context.displayName||"Context")+".Provider";case T:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case R:return null!==(t=e.displayName||null)?t:U(e.type)||"Memo";case M:t=e._payload,e=e._init;try{return U(e(t))}catch(n){}}return null}function W(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return U(t);case 8:return t===_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function V(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function H(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function q(e){e._valueTracker||(e._valueTracker=function(e){var t=H(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=H(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function K(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return D({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Z(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=V(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function Q(e,t){X(e,t);var n=V(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,V(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function J(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&K(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+V(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return D({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(te(n)){if(1<n.length)throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:V(n)}}function oe(e,t){var n=V(t.value),r=V(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue=function(e){return"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction((function(){return e(t,n)}))}:e}((function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}}));function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},he=["Webkit","ms","Moz","O"];function fe(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||pe.hasOwnProperty(e)&&pe[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=fe(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(pe).forEach((function(e){he.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pe[t]=pe[e]}))}));var ge=D({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ge[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function ve(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function xe(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var we=null,$e=null,Se=null;function _e(e){if(e=mi(e)){if("function"!==typeof we)throw Error(o(280));var t=e.stateNode;t&&(t=yi(t),we(e.stateNode,e.type,t))}}function Ce(e){$e?Se?Se.push(e):Se=[e]:$e=e}function ke(){if($e){var e=$e,t=Se;if(Se=$e=null,_e(e),t)for(e=0;e<t.length;e++)_e(t[e])}}function Ee(e,t){return e(t)}function Te(){}var Ie=!1;function Pe(e,t,n){if(Ie)return e(t,n);Ie=!0;try{return Ee(e,t,n)}finally{Ie=!1,(null!==$e||null!==Se)&&(Te(),ke())}}function Re(e,t){var n=e.stateNode;if(null===n)return null;var r=yi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var Me=!1;if(u)try{var Ae={};Object.defineProperty(Ae,"passive",{get:function(){Me=!0}}),window.addEventListener("test",Ae,Ae),window.removeEventListener("test",Ae,Ae)}catch(eu){Me=!1}function Oe(e,t,n,r,i,o,a,s,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Le=!1,Ne=null,De=!1,Fe=null,je={onError:function(e){Le=!0,Ne=e}};function ze(e,t,n,r,i,o,a,s,l){Le=!1,Ne=null,Oe.apply(je,arguments)}function Be(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ue(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function We(e){if(Be(e)!==e)throw Error(o(188))}function Ve(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return We(i),e;if(a===r)return We(i),t;a=a.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=a;else{for(var s=!1,l=i.child;l;){if(l===n){s=!0,n=i,r=a;break}if(l===r){s=!0,r=i,n=a;break}l=l.sibling}if(!s){for(l=a.child;l;){if(l===n){s=!0,n=a,r=i;break}if(l===r){s=!0,r=a,n=i;break}l=l.sibling}if(!s)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e))?He(e):null}function He(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=He(e);if(null!==t)return t;e=e.sibling}return null}var qe=i.unstable_scheduleCallback,Ge=i.unstable_cancelCallback,Ke=i.unstable_shouldYield,Ye=i.unstable_requestPaint,Ze=i.unstable_now,Xe=i.unstable_getCurrentPriorityLevel,Qe=i.unstable_ImmediatePriority,Je=i.unstable_UserBlockingPriority,et=i.unstable_NormalPriority,tt=i.unstable_LowPriority,nt=i.unstable_IdlePriority,rt=null,it=null;var ot=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(at(e)/st|0)|0},at=Math.log,st=Math.LN2;var lt=64,ct=4194304;function ut(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes,a=268435455&n;if(0!==a){var s=a&~i;0!==s?r=ut(s):0!==(o&=a)&&(r=ut(o))}else 0!==(a=n&~i)?r=ut(a):0!==o&&(r=ut(o));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(o=t&-t)||16===i&&0!==(4194240&o)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function pt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ht(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function ft(){var e=lt;return 0===(4194240&(lt<<=1))&&(lt=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function gt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var vt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var xt,wt,$t,St,_t,Ct=!1,kt=[],Et=null,Tt=null,It=null,Pt=new Map,Rt=new Map,Mt=[],At="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ot(e,t){switch(e){case"focusin":case"focusout":Et=null;break;case"dragenter":case"dragleave":Tt=null;break;case"mouseover":case"mouseout":It=null;break;case"pointerover":case"pointerout":Pt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rt.delete(t.pointerId)}}function Lt(e,t,n,r,i,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},null!==t&&(null!==(t=mi(t))&&wt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Nt(e){var t=fi(e.target);if(null!==t){var n=Be(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ue(n)))return e.blockedOn=t,void _t(e.priority,(function(){$t(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Dt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Kt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=mi(n))&&wt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Ft(e,t,n){Dt(e)&&n.delete(t)}function jt(){Ct=!1,null!==Et&&Dt(Et)&&(Et=null),null!==Tt&&Dt(Tt)&&(Tt=null),null!==It&&Dt(It)&&(It=null),Pt.forEach(Ft),Rt.forEach(Ft)}function zt(e,t){e.blockedOn===t&&(e.blockedOn=null,Ct||(Ct=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,jt)))}function Bt(e){function t(t){return zt(t,e)}if(0<kt.length){zt(kt[0],e);for(var n=1;n<kt.length;n++){var r=kt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Et&&zt(Et,e),null!==Tt&&zt(Tt,e),null!==It&&zt(It,e),Pt.forEach(t),Rt.forEach(t),n=0;n<Mt.length;n++)(r=Mt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Mt.length&&null===(n=Mt[0]).blockedOn;)Nt(n),null===n.blockedOn&&Mt.shift()}var Ut=x.ReactCurrentBatchConfig,Wt=!0;function Vt(e,t,n,r){var i=vt,o=Ut.transition;Ut.transition=null;try{vt=1,qt(e,t,n,r)}finally{vt=i,Ut.transition=o}}function Ht(e,t,n,r){var i=vt,o=Ut.transition;Ut.transition=null;try{vt=4,qt(e,t,n,r)}finally{vt=i,Ut.transition=o}}function qt(e,t,n,r){if(Wt){var i=Kt(e,t,n,r);if(null===i)zr(e,t,r,Gt,n),Ot(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Et=Lt(Et,e,t,n,r,i),!0;case"dragenter":return Tt=Lt(Tt,e,t,n,r,i),!0;case"mouseover":return It=Lt(It,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return Pt.set(o,Lt(Pt.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Rt.set(o,Lt(Rt.get(o)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Ot(e,r),4&t&&-1<At.indexOf(e)){for(;null!==i;){var o=mi(i);if(null!==o&&xt(o),null===(o=Kt(e,t,n,r))&&zr(e,t,r,Gt,n),o===i)break;i=o}null!==i&&r.stopPropagation()}else zr(e,t,r,null,n)}}var Gt=null;function Kt(e,t,n,r){if(Gt=null,null!==(e=fi(e=xe(r))))if(null===(t=Be(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Ue(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Gt=e,null}function Yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Qe:return 1;case Je:return 4;case et:case tt:return 16;case nt:return 536870912;default:return 16}default:return 16}}var Zt=null,Xt=null,Qt=null;function Jt(){if(Qt)return Qt;var e,t,n=Xt,r=n.length,i="value"in Zt?Zt.value:Zt.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[o-t];t++);return Qt=i.slice(e,1<t?1-t:void 0)}function en(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function tn(){return!0}function nn(){return!1}function rn(e){function t(t,n,r,i,o){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?tn:nn,this.isPropagationStopped=nn,this}return D(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=tn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=tn)},persist:function(){},isPersistent:tn}),t}var on,an,sn,ln={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cn=rn(ln),un=D({},ln,{view:0,detail:0}),dn=rn(un),pn=D({},un,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sn&&(sn&&"mousemove"===e.type?(on=e.screenX-sn.screenX,an=e.screenY-sn.screenY):an=on=0,sn=e),on)},movementY:function(e){return"movementY"in e?e.movementY:an}}),hn=rn(pn),fn=rn(D({},pn,{dataTransfer:0})),mn=rn(D({},un,{relatedTarget:0})),gn=rn(D({},ln,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=rn(D({},ln,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),vn=rn(D({},ln,{data:0})),bn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function $n(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=wn[e])&&!!t[e]}function Sn(){return $n}var _n=rn(D({},un,{key:function(e){if(e.key){var t=bn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=en(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?xn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sn,charCode:function(e){return"keypress"===e.type?en(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?en(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),Cn=rn(D({},pn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),kn=rn(D({},un,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sn})),En=rn(D({},ln,{propertyName:0,elapsedTime:0,pseudoElement:0})),Tn=rn(D({},pn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),In=[9,13,27,32],Pn=u&&"CompositionEvent"in window,Rn=null;u&&"documentMode"in document&&(Rn=document.documentMode);var Mn=u&&"TextEvent"in window&&!Rn,An=u&&(!Pn||Rn&&8<Rn&&11>=Rn),On=String.fromCharCode(32),Ln=!1;function Nn(e,t){switch(e){case"keyup":return-1!==In.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Dn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Fn=!1;var jn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!jn[e.type]:"textarea"===t}function Bn(e,t,n,r){Ce(r),0<(t=Ur(t,"onChange")).length&&(n=new cn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Un=null,Wn=null;function Vn(e){Or(e,0)}function Hn(e){if(G(gi(e)))return e}function qn(e,t){if("change"===e)return t}var Gn=!1;if(u){var Kn;if(u){var Yn="oninput"in document;if(!Yn){var Zn=document.createElement("div");Zn.setAttribute("oninput","return;"),Yn="function"===typeof Zn.oninput}Kn=Yn}else Kn=!1;Gn=Kn&&(!document.documentMode||9<document.documentMode)}function Xn(){Un&&(Un.detachEvent("onpropertychange",Qn),Wn=Un=null)}function Qn(e){if("value"===e.propertyName&&Hn(Wn)){var t=[];Bn(t,Wn,e,xe(e)),Pe(Vn,t)}}function Jn(e,t,n){"focusin"===e?(Xn(),Wn=n,(Un=t).attachEvent("onpropertychange",Qn)):"focusout"===e&&Xn()}function er(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Hn(Wn)}function tr(e,t){if("click"===e)return Hn(t)}function nr(e,t){if("input"===e||"change"===e)return Hn(t)}var rr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function ir(e,t){if(rr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!d.call(t,i)||!rr(e[i],t[i]))return!1}return!0}function or(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ar(e,t){var n,r=or(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=or(r)}}function sr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?sr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function lr(){for(var e=window,t=K();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=K((e=t.contentWindow).document)}return t}function cr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function ur(e){var t=lr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&sr(n.ownerDocument.documentElement,n)){if(null!==r&&cr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=void 0===r.end?o:Math.min(r.end,i),!e.extend&&o>r&&(i=r,r=o,o=i),i=ar(n,o);var a=ar(n,r);i&&a&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var dr=u&&"documentMode"in document&&11>=document.documentMode,pr=null,hr=null,fr=null,mr=!1;function gr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;mr||null==pr||pr!==K(r)||("selectionStart"in(r=pr)&&cr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},fr&&ir(fr,r)||(fr=r,0<(r=Ur(hr,"onSelect")).length&&(t=new cn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=pr)))}function yr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var vr={animationend:yr("Animation","AnimationEnd"),animationiteration:yr("Animation","AnimationIteration"),animationstart:yr("Animation","AnimationStart"),transitionend:yr("Transition","TransitionEnd")},br={},xr={};function wr(e){if(br[e])return br[e];if(!vr[e])return e;var t,n=vr[e];for(t in n)if(n.hasOwnProperty(t)&&t in xr)return br[e]=n[t];return e}u&&(xr=document.createElement("div").style,"AnimationEvent"in window||(delete vr.animationend.animation,delete vr.animationiteration.animation,delete vr.animationstart.animation),"TransitionEvent"in window||delete vr.transitionend.transition);var $r=wr("animationend"),Sr=wr("animationiteration"),_r=wr("animationstart"),Cr=wr("transitionend"),kr=new Map,Er="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Tr(e,t){kr.set(e,t),l(t,[e])}for(var Ir=0;Ir<Er.length;Ir++){var Pr=Er[Ir];Tr(Pr.toLowerCase(),"on"+(Pr[0].toUpperCase()+Pr.slice(1)))}Tr($r,"onAnimationEnd"),Tr(Sr,"onAnimationIteration"),Tr(_r,"onAnimationStart"),Tr("dblclick","onDoubleClick"),Tr("focusin","onFocus"),Tr("focusout","onBlur"),Tr(Cr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Rr));function Ar(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,a,s,l,c){if(ze.apply(this,arguments),Le){if(!Le)throw Error(o(198));var u=Ne;Le=!1,Ne=null,De||(De=!0,Fe=u)}}(r,t,void 0,e),e.currentTarget=null}function Or(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var a=r.length-1;0<=a;a--){var s=r[a],l=s.instance,c=s.currentTarget;if(s=s.listener,l!==o&&i.isPropagationStopped())break e;Ar(i,s,c),o=l}else for(a=0;a<r.length;a++){if(l=(s=r[a]).instance,c=s.currentTarget,s=s.listener,l!==o&&i.isPropagationStopped())break e;Ar(i,s,c),o=l}}}if(De)throw e=Fe,De=!1,Fe=null,e}function Lr(e,t){var n=t[di];void 0===n&&(n=t[di]=new Set);var r=e+"__bubble";n.has(r)||(jr(t,e,2,!1),n.add(r))}function Nr(e,t,n){var r=0;t&&(r|=4),jr(n,e,r,t)}var Dr="_reactListening"+Math.random().toString(36).slice(2);function Fr(e){if(!e[Dr]){e[Dr]=!0,a.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||Nr(t,!1,e),Nr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Dr]||(t[Dr]=!0,Nr("selectionchange",!1,t))}}function jr(e,t,n,r){switch(Yt(t)){case 1:var i=Vt;break;case 4:i=Ht;break;default:i=qt}n=i.bind(null,t,n,e),i=void 0,!Me||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function zr(e,t,n,r,i){var o=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===a)for(a=r.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;a=a.return}for(;null!==s;){if(null===(a=fi(s)))return;if(5===(l=a.tag)||6===l){r=o=a;continue e}s=s.parentNode}}r=r.return}Pe((function(){var r=o,i=xe(n),a=[];e:{var s=kr.get(e);if(void 0!==s){var l=cn,c=e;switch(e){case"keypress":if(0===en(n))break e;case"keydown":case"keyup":l=_n;break;case"focusin":c="focus",l=mn;break;case"focusout":c="blur",l=mn;break;case"beforeblur":case"afterblur":l=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=hn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=fn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=kn;break;case $r:case Sr:case _r:l=gn;break;case Cr:l=En;break;case"scroll":l=dn;break;case"wheel":l=Tn;break;case"copy":case"cut":case"paste":l=yn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Cn}var u=0!==(4&t),d=!u&&"scroll"===e,p=u?null!==s?s+"Capture":null:s;u=[];for(var h,f=r;null!==f;){var m=(h=f).stateNode;if(5===h.tag&&null!==m&&(h=m,null!==p&&(null!=(m=Re(f,p))&&u.push(Br(f,m,h)))),d)break;f=f.return}0<u.length&&(s=new l(s,c,null,n,i),a.push({event:s,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!fi(c)&&!c[ui])&&(l||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?fi(c):null)&&(c!==(d=Be(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=hn,m="onMouseLeave",p="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(u=Cn,m="onPointerLeave",p="onPointerEnter",f="pointer"),d=null==l?s:gi(l),h=null==c?s:gi(c),(s=new u(m,f+"leave",l,n,i)).target=d,s.relatedTarget=h,m=null,fi(i)===r&&((u=new u(p,f+"enter",c,n,i)).target=h,u.relatedTarget=d,m=u),d=m,l&&c)e:{for(p=c,f=0,h=u=l;h;h=Wr(h))f++;for(h=0,m=p;m;m=Wr(m))h++;for(;0<f-h;)u=Wr(u),f--;for(;0<h-f;)p=Wr(p),h--;for(;f--;){if(u===p||null!==p&&u===p.alternate)break e;u=Wr(u),p=Wr(p)}u=null}else u=null;null!==l&&Vr(a,s,l,u,!1),null!==c&&null!==d&&Vr(a,d,c,u,!0)}if("select"===(l=(s=r?gi(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===l&&"file"===s.type)var g=qn;else if(zn(s))if(Gn)g=nr;else{g=er;var y=Jn}else(l=s.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(g=tr);switch(g&&(g=g(e,r))?Bn(a,g,n,i):(y&&y(e,s,r),"focusout"===e&&(y=s._wrapperState)&&y.controlled&&"number"===s.type&&ee(s,"number",s.value)),y=r?gi(r):window,e){case"focusin":(zn(y)||"true"===y.contentEditable)&&(pr=y,hr=r,fr=null);break;case"focusout":fr=hr=pr=null;break;case"mousedown":mr=!0;break;case"contextmenu":case"mouseup":case"dragend":mr=!1,gr(a,n,i);break;case"selectionchange":if(dr)break;case"keydown":case"keyup":gr(a,n,i)}var v;if(Pn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Fn?Nn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(An&&"ko"!==n.locale&&(Fn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Fn&&(v=Jt()):(Xt="value"in(Zt=i)?Zt.value:Zt.textContent,Fn=!0)),0<(y=Ur(r,b)).length&&(b=new vn(b,e,null,n,i),a.push({event:b,listeners:y}),v?b.data=v:null!==(v=Dn(n))&&(b.data=v))),(v=Mn?function(e,t){switch(e){case"compositionend":return Dn(t);case"keypress":return 32!==t.which?null:(Ln=!0,On);case"textInput":return(e=t.data)===On&&Ln?null:e;default:return null}}(e,n):function(e,t){if(Fn)return"compositionend"===e||!Pn&&Nn(e,t)?(e=Jt(),Qt=Xt=Zt=null,Fn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return An&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Ur(r,"onBeforeInput")).length&&(i=new vn("onBeforeInput","beforeinput",null,n,i),a.push({event:i,listeners:r}),i.data=v))}Or(a,t)}))}function Br(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Ur(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,o=i.stateNode;5===i.tag&&null!==o&&(i=o,null!=(o=Re(e,n))&&r.unshift(Br(e,o,i)),null!=(o=Re(e,t))&&r.push(Br(e,o,i))),e=e.return}return r}function Wr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Vr(e,t,n,r,i){for(var o=t._reactName,a=[];null!==n&&n!==r;){var s=n,l=s.alternate,c=s.stateNode;if(null!==l&&l===r)break;5===s.tag&&null!==c&&(s=c,i?null!=(l=Re(n,o))&&a.unshift(Br(n,l,s)):i||null!=(l=Re(n,o))&&a.push(Br(n,l,s))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Hr=/\r\n?/g,qr=/\u0000|\uFFFD/g;function Gr(e){return("string"===typeof e?e:""+e).replace(Hr,"\n").replace(qr,"")}function Kr(e,t,n){if(t=Gr(t),Gr(e)!==t&&n)throw Error(o(425))}function Yr(){}var Zr=null,Xr=null;function Qr(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Jr="function"===typeof setTimeout?setTimeout:void 0,ei="function"===typeof clearTimeout?clearTimeout:void 0,ti="function"===typeof Promise?Promise:void 0,ni="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ti?function(e){return ti.resolve(null).then(e).catch(ri)}:Jr;function ri(e){setTimeout((function(){throw e}))}function ii(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Bt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Bt(t)}function oi(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ai(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var si=Math.random().toString(36).slice(2),li="__reactFiber$"+si,ci="__reactProps$"+si,ui="__reactContainer$"+si,di="__reactEvents$"+si,pi="__reactListeners$"+si,hi="__reactHandles$"+si;function fi(e){var t=e[li];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ui]||n[li]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ai(e);null!==e;){if(n=e[li])return n;e=ai(e)}return t}n=(e=n).parentNode}return null}function mi(e){return!(e=e[li]||e[ui])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function gi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function yi(e){return e[ci]||null}var vi=[],bi=-1;function xi(e){return{current:e}}function wi(e){0>bi||(e.current=vi[bi],vi[bi]=null,bi--)}function $i(e,t){bi++,vi[bi]=e.current,e.current=t}var Si={},_i=xi(Si),Ci=xi(!1),ki=Si;function Ei(e,t){var n=e.type.contextTypes;if(!n)return Si;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Ti(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ii(){wi(Ci),wi(_i)}function Pi(e,t,n){if(_i.current!==Si)throw Error(o(168));$i(_i,t),$i(Ci,n)}function Ri(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(o(108,W(e)||"Unknown",i));return D({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Si,ki=_i.current,$i(_i,e),$i(Ci,Ci.current),!0}function Ai(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=Ri(e,t,ki),r.__reactInternalMemoizedMergedChildContext=e,wi(Ci),wi(_i),$i(_i,e)):wi(Ci),$i(Ci,n)}var Oi=null,Li=!1,Ni=!1;function Di(e){null===Oi?Oi=[e]:Oi.push(e)}function Fi(){if(!Ni&&null!==Oi){Ni=!0;var e=0,t=vt;try{var n=Oi;for(vt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Oi=null,Li=!1}catch(i){throw null!==Oi&&(Oi=Oi.slice(e+1)),qe(Qe,Fi),i}finally{vt=t,Ni=!1}}return null}var ji=[],zi=0,Bi=null,Ui=0,Wi=[],Vi=0,Hi=null,qi=1,Gi="";function Ki(e,t){ji[zi++]=Ui,ji[zi++]=Bi,Bi=e,Ui=t}function Yi(e,t,n){Wi[Vi++]=qi,Wi[Vi++]=Gi,Wi[Vi++]=Hi,Hi=e;var r=qi;e=Gi;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var o=32-ot(t)+i;if(30<o){var a=i-i%5;o=(r&(1<<a)-1).toString(32),r>>=a,i-=a,qi=1<<32-ot(t)+i|n<<i|r,Gi=o+e}else qi=1<<o|n<<i|r,Gi=e}function Zi(e){null!==e.return&&(Ki(e,1),Yi(e,1,0))}function Xi(e){for(;e===Bi;)Bi=ji[--zi],ji[zi]=null,Ui=ji[--zi],ji[zi]=null;for(;e===Hi;)Hi=Wi[--Vi],Wi[Vi]=null,Gi=Wi[--Vi],Wi[Vi]=null,qi=Wi[--Vi],Wi[Vi]=null}var Qi=null,Ji=null,eo=!1,to=null;function no(e,t){var n=Ec(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ro(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,Qi=e,Ji=oi(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,Qi=e,Ji=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Hi?{id:qi,overflow:Gi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Ec(18,null,null,0)).stateNode=t,n.return=e,e.child=n,Qi=e,Ji=null,!0);default:return!1}}function io(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function oo(e){if(eo){var t=Ji;if(t){var n=t;if(!ro(e,t)){if(io(e))throw Error(o(418));t=oi(n.nextSibling);var r=Qi;t&&ro(e,t)?no(r,n):(e.flags=-4097&e.flags|2,eo=!1,Qi=e)}}else{if(io(e))throw Error(o(418));e.flags=-4097&e.flags|2,eo=!1,Qi=e}}}function ao(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Qi=e}function so(e){if(e!==Qi)return!1;if(!eo)return ao(e),eo=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!Qr(e.type,e.memoizedProps)),t&&(t=Ji)){if(io(e))throw lo(),Error(o(418));for(;t;)no(e,t),t=oi(t.nextSibling)}if(ao(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){Ji=oi(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}Ji=null}}else Ji=Qi?oi(e.stateNode.nextSibling):null;return!0}function lo(){for(var e=Ji;e;)e=oi(e.nextSibling)}function co(){Ji=Qi=null,eo=!1}function uo(e){null===to?to=[e]:to.push(e)}var po=x.ReactCurrentBatchConfig;function ho(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=r,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=i.refs;null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function fo(e,t){throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function mo(e){return(0,e._init)(e._payload)}function go(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Ic(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Ac(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var o=n.type;return o===S?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===M&&mo(o)===t.type)?((r=i(t,n.props)).ref=ho(e,t,n),r.return=e,r):((r=Pc(n.type,n.key,n.props,null,e.mode,r)).ref=ho(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Oc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,o){return null===t||7!==t.tag?((t=Rc(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function p(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Ac(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Pc(t.type,t.key,t.props,null,e.mode,n)).ref=ho(e,null,t),n.return=e,n;case $:return(t=Oc(t,e.mode,n)).return=e,t;case M:return p(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Rc(t,e.mode,n,null)).return=e,t;fo(e,t)}return null}function h(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?c(e,t,n,r):null;case $:return n.key===i?u(e,t,n,r):null;case M:return h(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:d(e,t,n,r,null);fo(e,n)}return null}function f(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case $:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case M:return f(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return d(t,e=e.get(n)||null,r,i,null);fo(t,r)}return null}function m(i,o,s,l){for(var c=null,u=null,d=o,m=o=0,g=null;null!==d&&m<s.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var y=h(i,d,s[m],l);if(null===y){null===d&&(d=g);break}e&&d&&null===y.alternate&&t(i,d),o=a(y,o,m),null===u?c=y:u.sibling=y,u=y,d=g}if(m===s.length)return n(i,d),eo&&Ki(i,m),c;if(null===d){for(;m<s.length;m++)null!==(d=p(i,s[m],l))&&(o=a(d,o,m),null===u?c=d:u.sibling=d,u=d);return eo&&Ki(i,m),c}for(d=r(i,d);m<s.length;m++)null!==(g=f(d,i,m,s[m],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),o=a(g,o,m),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach((function(e){return t(i,e)})),eo&&Ki(i,m),c}function g(i,s,l,c){var u=L(l);if("function"!==typeof u)throw Error(o(150));if(null==(l=u.call(l)))throw Error(o(151));for(var d=u=null,m=s,g=s=0,y=null,v=l.next();null!==m&&!v.done;g++,v=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var b=h(i,m,v.value,c);if(null===b){null===m&&(m=y);break}e&&m&&null===b.alternate&&t(i,m),s=a(b,s,g),null===d?u=b:d.sibling=b,d=b,m=y}if(v.done)return n(i,m),eo&&Ki(i,g),u;if(null===m){for(;!v.done;g++,v=l.next())null!==(v=p(i,v.value,c))&&(s=a(v,s,g),null===d?u=v:d.sibling=v,d=v);return eo&&Ki(i,g),u}for(m=r(i,m);!v.done;g++,v=l.next())null!==(v=f(m,i,g,v.value,c))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),s=a(v,s,g),null===d?u=v:d.sibling=v,d=v);return e&&m.forEach((function(e){return t(i,e)})),eo&&Ki(i,g),u}return function e(r,o,a,l){if("object"===typeof a&&null!==a&&a.type===S&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case w:e:{for(var c=a.key,u=o;null!==u;){if(u.key===c){if((c=a.type)===S){if(7===u.tag){n(r,u.sibling),(o=i(u,a.props.children)).return=r,r=o;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===M&&mo(c)===u.type){n(r,u.sibling),(o=i(u,a.props)).ref=ho(r,u,a),o.return=r,r=o;break e}n(r,u);break}t(r,u),u=u.sibling}a.type===S?((o=Rc(a.props.children,r.mode,l,a.key)).return=r,r=o):((l=Pc(a.type,a.key,a.props,null,r.mode,l)).ref=ho(r,o,a),l.return=r,r=l)}return s(r);case $:e:{for(u=a.key;null!==o;){if(o.key===u){if(4===o.tag&&o.stateNode.containerInfo===a.containerInfo&&o.stateNode.implementation===a.implementation){n(r,o.sibling),(o=i(o,a.children||[])).return=r,r=o;break e}n(r,o);break}t(r,o),o=o.sibling}(o=Oc(a,r.mode,l)).return=r,r=o}return s(r);case M:return e(r,o,(u=a._init)(a._payload),l)}if(te(a))return m(r,o,a,l);if(L(a))return g(r,o,a,l);fo(r,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==o&&6===o.tag?(n(r,o.sibling),(o=i(o,a)).return=r,r=o):(n(r,o),(o=Ac(a,r.mode,l)).return=r,r=o),s(r)):n(r,o)}}var yo=go(!0),vo=go(!1),bo=xi(null),xo=null,wo=null,$o=null;function So(){$o=wo=xo=null}function _o(e){var t=bo.current;wi(bo),e._currentValue=t}function Co(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function ko(e,t){xo=e,$o=wo=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(ms=!0),e.firstContext=null)}function Eo(e){var t=e._currentValue;if($o!==e)if(e={context:e,memoizedValue:t,next:null},null===wo){if(null===xo)throw Error(o(308));wo=e,xo.dependencies={lanes:0,firstContext:e}}else wo=wo.next=e;return t}var To=null;function Io(e){null===To?To=[e]:To.push(e)}function Po(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Io(t)):(n.next=i.next,i.next=n),t.interleaved=n,Ro(e,r)}function Ro(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Mo=!1;function Ao(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Oo(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Lo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function No(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&_l)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Ro(e,n)}return null===(i=r.interleaved)?(t.next=t,Io(r)):(t.next=i.next,i.next=t),r.interleaved=t,Ro(e,n)}function Do(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function Fo(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?i=o=a:o=o.next=a,n=n.next}while(null!==n);null===o?i=o=t:o=o.next=t}else i=o=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function jo(e,t,n,r){var i=e.updateQueue;Mo=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var l=s,c=l.next;l.next=null,null===a?o=c:a.next=c,a=l;var u=e.alternate;null!==u&&((s=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===s?u.firstBaseUpdate=c:s.next=c,u.lastBaseUpdate=l))}if(null!==o){var d=i.baseState;for(a=0,u=c=l=null,s=o;;){var p=s.lane,h=s.eventTime;if((r&p)===p){null!==u&&(u=u.next={eventTime:h,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var f=e,m=s;switch(p=t,h=n,m.tag){case 1:if("function"===typeof(f=m.payload)){d=f.call(h,d,p);break e}d=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(p="function"===typeof(f=m.payload)?f.call(h,d,p):f)||void 0===p)break e;d=D({},d,p);break e;case 2:Mo=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(p=i.effects)?i.effects=[s]:p.push(s))}else h={eventTime:h,lane:p,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===u?(c=u=h,l=d):u=u.next=h,a|=p;if(null===(s=s.next)){if(null===(s=i.shared.pending))break;s=(p=s).next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}if(null===u&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{a|=i.lane,i=i.next}while(i!==t)}else null===o&&(i.shared.lanes=0);Ml|=a,e.lanes=a,e.memoizedState=d}}function zo(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(o(191,i));i.call(r)}}}var Bo={},Uo=xi(Bo),Wo=xi(Bo),Vo=xi(Bo);function Ho(e){if(e===Bo)throw Error(o(174));return e}function qo(e,t){switch($i(Vo,t),$i(Wo,e),$i(Uo,Bo),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}wi(Uo),$i(Uo,t)}function Go(){wi(Uo),wi(Wo),wi(Vo)}function Ko(e){Ho(Vo.current);var t=Ho(Uo.current),n=le(t,e.type);t!==n&&($i(Wo,e),$i(Uo,n))}function Yo(e){Wo.current===e&&(wi(Uo),wi(Wo))}var Zo=xi(0);function Xo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Qo=[];function Jo(){for(var e=0;e<Qo.length;e++)Qo[e]._workInProgressVersionPrimary=null;Qo.length=0}var ea=x.ReactCurrentDispatcher,ta=x.ReactCurrentBatchConfig,na=0,ra=null,ia=null,oa=null,aa=!1,sa=!1,la=0,ca=0;function ua(){throw Error(o(321))}function da(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!rr(e[n],t[n]))return!1;return!0}function pa(e,t,n,r,i,a){if(na=a,ra=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ea.current=null===e||null===e.memoizedState?Ya:Za,e=n(r,i),sa){a=0;do{if(sa=!1,la=0,25<=a)throw Error(o(301));a+=1,oa=ia=null,t.updateQueue=null,ea.current=Xa,e=n(r,i)}while(sa)}if(ea.current=Ka,t=null!==ia&&null!==ia.next,na=0,oa=ia=ra=null,aa=!1,t)throw Error(o(300));return e}function ha(){var e=0!==la;return la=0,e}function fa(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===oa?ra.memoizedState=oa=e:oa=oa.next=e,oa}function ma(){if(null===ia){var e=ra.alternate;e=null!==e?e.memoizedState:null}else e=ia.next;var t=null===oa?ra.memoizedState:oa.next;if(null!==t)oa=t,ia=e;else{if(null===e)throw Error(o(310));e={memoizedState:(ia=e).memoizedState,baseState:ia.baseState,baseQueue:ia.baseQueue,queue:ia.queue,next:null},null===oa?ra.memoizedState=oa=e:oa=oa.next=e}return oa}function ga(e,t){return"function"===typeof t?t(e):t}function ya(e){var t=ma(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=ia,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var s=i.next;i.next=a.next,a.next=s}r.baseQueue=i=a,n.pending=null}if(null!==i){a=i.next,r=r.baseState;var l=s=null,c=null,u=a;do{var d=u.lane;if((na&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var p={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=p,s=r):c=c.next=p,ra.lanes|=d,Ml|=d}u=u.next}while(null!==u&&u!==a);null===c?s=r:c.next=l,rr(r,t.memoizedState)||(ms=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{a=i.lane,ra.lanes|=a,Ml|=a,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function va(e){var t=ma(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{a=e(a,s.action),s=s.next}while(s!==i);rr(a,t.memoizedState)||(ms=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function ba(){}function xa(e,t){var n=ra,r=ma(),i=t(),a=!rr(r.memoizedState,i);if(a&&(r.memoizedState=i,ms=!0),r=r.queue,Ma(Sa.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||null!==oa&&1&oa.memoizedState.tag){if(n.flags|=2048,Ea(9,$a.bind(null,n,r,i,t),void 0,null),null===Cl)throw Error(o(349));0!==(30&na)||wa(n,t,i)}return i}function wa(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=ra.updateQueue)?(t={lastEffect:null,stores:null},ra.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function $a(e,t,n,r){t.value=n,t.getSnapshot=r,_a(t)&&Ca(e)}function Sa(e,t,n){return n((function(){_a(t)&&Ca(e)}))}function _a(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!rr(e,n)}catch(r){return!0}}function Ca(e){var t=Ro(e,1);null!==t&&Ql(t,e,1,-1)}function ka(e){var t=fa();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ga,lastRenderedState:e},t.queue=e,e=e.dispatch=Va.bind(null,ra,e),[t.memoizedState,e]}function Ea(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=ra.updateQueue)?(t={lastEffect:null,stores:null},ra.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Ta(){return ma().memoizedState}function Ia(e,t,n,r){var i=fa();ra.flags|=e,i.memoizedState=Ea(1|t,n,void 0,void 0===r?null:r)}function Pa(e,t,n,r){var i=ma();r=void 0===r?null:r;var o=void 0;if(null!==ia){var a=ia.memoizedState;if(o=a.destroy,null!==r&&da(r,a.deps))return void(i.memoizedState=Ea(t,n,o,r))}ra.flags|=e,i.memoizedState=Ea(1|t,n,o,r)}function Ra(e,t){return Ia(8390656,8,e,t)}function Ma(e,t){return Pa(2048,8,e,t)}function Aa(e,t){return Pa(4,2,e,t)}function Oa(e,t){return Pa(4,4,e,t)}function La(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Na(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Pa(4,4,La.bind(null,t,e),n)}function Da(){}function Fa(e,t){var n=ma();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&da(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function ja(e,t){var n=ma();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&da(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function za(e,t,n){return 0===(21&na)?(e.baseState&&(e.baseState=!1,ms=!0),e.memoizedState=n):(rr(n,t)||(n=ft(),ra.lanes|=n,Ml|=n,e.baseState=!0),t)}function Ba(e,t){var n=vt;vt=0!==n&&4>n?n:4,e(!0);var r=ta.transition;ta.transition={};try{e(!1),t()}finally{vt=n,ta.transition=r}}function Ua(){return ma().memoizedState}function Wa(e,t,n){var r=Xl(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Ha(e))qa(t,n);else if(null!==(n=Po(e,t,n,r))){Ql(n,e,r,Zl()),Ga(n,t,r)}}function Va(e,t,n){var r=Xl(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ha(e))qa(t,i);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var a=t.lastRenderedState,s=o(a,n);if(i.hasEagerState=!0,i.eagerState=s,rr(s,a)){var l=t.interleaved;return null===l?(i.next=i,Io(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Po(e,t,i,r))&&(Ql(n,e,r,i=Zl()),Ga(n,t,r))}}function Ha(e){var t=e.alternate;return e===ra||null!==t&&t===ra}function qa(e,t){sa=aa=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Ga(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var Ka={readContext:Eo,useCallback:ua,useContext:ua,useEffect:ua,useImperativeHandle:ua,useInsertionEffect:ua,useLayoutEffect:ua,useMemo:ua,useReducer:ua,useRef:ua,useState:ua,useDebugValue:ua,useDeferredValue:ua,useTransition:ua,useMutableSource:ua,useSyncExternalStore:ua,useId:ua,unstable_isNewReconciler:!1},Ya={readContext:Eo,useCallback:function(e,t){return fa().memoizedState=[e,void 0===t?null:t],e},useContext:Eo,useEffect:Ra,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ia(4194308,4,La.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ia(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ia(4,2,e,t)},useMemo:function(e,t){var n=fa();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=fa();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Wa.bind(null,ra,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},fa().memoizedState=e},useState:ka,useDebugValue:Da,useDeferredValue:function(e){return fa().memoizedState=e},useTransition:function(){var e=ka(!1),t=e[0];return e=Ba.bind(null,e[1]),fa().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=ra,i=fa();if(eo){if(void 0===n)throw Error(o(407));n=n()}else{if(n=t(),null===Cl)throw Error(o(349));0!==(30&na)||wa(r,t,n)}i.memoizedState=n;var a={value:n,getSnapshot:t};return i.queue=a,Ra(Sa.bind(null,r,a,e),[e]),r.flags|=2048,Ea(9,$a.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=fa(),t=Cl.identifierPrefix;if(eo){var n=Gi;t=":"+t+"R"+(n=(qi&~(1<<32-ot(qi)-1)).toString(32)+n),0<(n=la++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=ca++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Za={readContext:Eo,useCallback:Fa,useContext:Eo,useEffect:Ma,useImperativeHandle:Na,useInsertionEffect:Aa,useLayoutEffect:Oa,useMemo:ja,useReducer:ya,useRef:Ta,useState:function(){return ya(ga)},useDebugValue:Da,useDeferredValue:function(e){return za(ma(),ia.memoizedState,e)},useTransition:function(){return[ya(ga)[0],ma().memoizedState]},useMutableSource:ba,useSyncExternalStore:xa,useId:Ua,unstable_isNewReconciler:!1},Xa={readContext:Eo,useCallback:Fa,useContext:Eo,useEffect:Ma,useImperativeHandle:Na,useInsertionEffect:Aa,useLayoutEffect:Oa,useMemo:ja,useReducer:va,useRef:Ta,useState:function(){return va(ga)},useDebugValue:Da,useDeferredValue:function(e){var t=ma();return null===ia?t.memoizedState=e:za(t,ia.memoizedState,e)},useTransition:function(){return[va(ga)[0],ma().memoizedState]},useMutableSource:ba,useSyncExternalStore:xa,useId:Ua,unstable_isNewReconciler:!1};function Qa(e,t){if(e&&e.defaultProps){for(var n in t=D({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function Ja(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:D({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var es={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Zl(),i=Xl(e),o=Lo(r,i);o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=No(e,o,i))&&(Ql(t,e,i,r),Do(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Zl(),i=Xl(e),o=Lo(r,i);o.tag=1,o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=No(e,o,i))&&(Ql(t,e,i,r),Do(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Zl(),r=Xl(e),i=Lo(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=No(e,i,r))&&(Ql(t,e,r,n),Do(t,e,r))}};function ts(e,t,n,r,i,o,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,a):!t.prototype||!t.prototype.isPureReactComponent||(!ir(n,r)||!ir(i,o))}function ns(e,t,n){var r=!1,i=Si,o=t.contextType;return"object"===typeof o&&null!==o?o=Eo(o):(i=Ti(t)?ki:_i.current,o=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ei(e,i):Si),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=es,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function rs(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&es.enqueueReplaceState(t,t.state,null)}function is(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Ao(e);var o=t.contextType;"object"===typeof o&&null!==o?i.context=Eo(o):(o=Ti(t)?ki:_i.current,i.context=Ei(e,o)),i.state=e.memoizedState,"function"===typeof(o=t.getDerivedStateFromProps)&&(Ja(e,t,o,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&es.enqueueReplaceState(i,i.state,null),jo(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function os(e,t){try{var n="",r=t;do{n+=B(r),r=r.return}while(r);var i=n}catch(o){i="\nError generating stack: "+o.message+"\n"+o.stack}return{value:e,source:t,stack:i,digest:null}}function as(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ss(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var ls="function"===typeof WeakMap?WeakMap:Map;function cs(e,t,n){(n=Lo(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){zl||(zl=!0,Bl=r),ss(0,t)},n}function us(e,t,n){(n=Lo(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){ss(0,t)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){ss(0,t),"function"!==typeof r&&(null===Ul?Ul=new Set([this]):Ul.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ds(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ls;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=wc.bind(null,e,t,n),t.then(e,e))}function ps(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function hs(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Lo(-1,1)).tag=2,No(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var fs=x.ReactCurrentOwner,ms=!1;function gs(e,t,n,r){t.child=null===e?vo(t,null,n,r):yo(t,e.child,n,r)}function ys(e,t,n,r,i){n=n.render;var o=t.ref;return ko(t,i),r=pa(e,t,n,r,o,i),n=ha(),null===e||ms?(eo&&n&&Zi(t),t.flags|=1,gs(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,zs(e,t,i))}function vs(e,t,n,r,i){if(null===e){var o=n.type;return"function"!==typeof o||Tc(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Pc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,bs(e,t,o,r,i))}if(o=e.child,0===(e.lanes&i)){var a=o.memoizedProps;if((n=null!==(n=n.compare)?n:ir)(a,r)&&e.ref===t.ref)return zs(e,t,i)}return t.flags|=1,(e=Ic(o,r)).ref=t.ref,e.return=t,t.child=e}function bs(e,t,n,r,i){if(null!==e){var o=e.memoizedProps;if(ir(o,r)&&e.ref===t.ref){if(ms=!1,t.pendingProps=r=o,0===(e.lanes&i))return t.lanes=e.lanes,zs(e,t,i);0!==(131072&e.flags)&&(ms=!0)}}return $s(e,t,n,r,i)}function xs(e,t,n){var r=t.pendingProps,i=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},$i(Il,Tl),Tl|=n;else{if(0===(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,$i(Il,Tl),Tl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==o?o.baseLanes:n,$i(Il,Tl),Tl|=r}else null!==o?(r=o.baseLanes|n,t.memoizedState=null):r=n,$i(Il,Tl),Tl|=r;return gs(e,t,i,n),t.child}function ws(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function $s(e,t,n,r,i){var o=Ti(n)?ki:_i.current;return o=Ei(t,o),ko(t,i),n=pa(e,t,n,r,o,i),r=ha(),null===e||ms?(eo&&r&&Zi(t),t.flags|=1,gs(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,zs(e,t,i))}function Ss(e,t,n,r,i){if(Ti(n)){var o=!0;Mi(t)}else o=!1;if(ko(t,i),null===t.stateNode)js(e,t),ns(t,n,r),is(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var l=a.context,c=n.contextType;"object"===typeof c&&null!==c?c=Eo(c):c=Ei(t,c=Ti(n)?ki:_i.current);var u=n.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof a.getSnapshotBeforeUpdate;d||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==r||l!==c)&&rs(t,a,r,c),Mo=!1;var p=t.memoizedState;a.state=p,jo(t,r,a,i),l=t.memoizedState,s!==r||p!==l||Ci.current||Mo?("function"===typeof u&&(Ja(t,n,u,r),l=t.memoizedState),(s=Mo||ts(t,n,s,r,p,l,c))?(d||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=c,r=s):("function"===typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Oo(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:Qa(t.type,s),a.props=c,d=t.pendingProps,p=a.context,"object"===typeof(l=n.contextType)&&null!==l?l=Eo(l):l=Ei(t,l=Ti(n)?ki:_i.current);var h=n.getDerivedStateFromProps;(u="function"===typeof h||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==d||p!==l)&&rs(t,a,r,l),Mo=!1,p=t.memoizedState,a.state=p,jo(t,r,a,i);var f=t.memoizedState;s!==d||p!==f||Ci.current||Mo?("function"===typeof h&&(Ja(t,n,h,r),f=t.memoizedState),(c=Mo||ts(t,n,c,r,p,f,l)||!1)?(u||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,f,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,f,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),a.props=r,a.state=f,a.context=l,r=c):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),r=!1)}return _s(e,t,n,r,o,i)}function _s(e,t,n,r,i,o){ws(e,t);var a=0!==(128&t.flags);if(!r&&!a)return i&&Ai(t,n,!1),zs(e,t,o);r=t.stateNode,fs.current=t;var s=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=yo(t,e.child,null,o),t.child=yo(t,null,s,o)):gs(e,t,s,o),t.memoizedState=r.state,i&&Ai(t,n,!0),t.child}function Cs(e){var t=e.stateNode;t.pendingContext?Pi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Pi(0,t.context,!1),qo(e,t.containerInfo)}function ks(e,t,n,r,i){return co(),uo(i),t.flags|=256,gs(e,t,n,r),t.child}var Es,Ts,Is,Ps,Rs={dehydrated:null,treeContext:null,retryLane:0};function Ms(e){return{baseLanes:e,cachePool:null,transitions:null}}function As(e,t,n){var r,i=t.pendingProps,a=Zo.current,s=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),$i(Zo,1&a),null===e)return oo(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,s?(i=t.mode,s=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==s?(s.childLanes=0,s.pendingProps=l):s=Mc(l,i,0,null),e=Rc(e,i,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Ms(n),t.memoizedState=Rs,e):Os(t,l));if(null!==(a=e.memoizedState)&&null!==(r=a.dehydrated))return function(e,t,n,r,i,a,s){if(n)return 256&t.flags?(t.flags&=-257,Ls(e,t,s,r=as(Error(o(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=r.fallback,i=t.mode,r=Mc({mode:"visible",children:r.children},i,0,null),(a=Rc(a,i,s,null)).flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,0!==(1&t.mode)&&yo(t,e.child,null,s),t.child.memoizedState=Ms(s),t.memoizedState=Rs,a);if(0===(1&t.mode))return Ls(e,t,s,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,Ls(e,t,s,r=as(a=Error(o(419)),r,void 0))}if(l=0!==(s&e.childLanes),ms||l){if(null!==(r=Cl)){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|s))?0:i)&&i!==a.retryLane&&(a.retryLane=i,Ro(e,i),Ql(r,e,i,-1))}return dc(),Ls(e,t,s,r=as(Error(o(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Sc.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,Ji=oi(i.nextSibling),Qi=t,eo=!0,to=null,null!==e&&(Wi[Vi++]=qi,Wi[Vi++]=Gi,Wi[Vi++]=Hi,qi=e.id,Gi=e.overflow,Hi=t),t=Os(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,a,n);if(s){s=i.fallback,l=t.mode,r=(a=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==a?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Ic(a,c)).subtreeFlags=14680064&a.subtreeFlags,null!==r?s=Ic(r,s):(s=Rc(s,l,n,null)).flags|=2,s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,l=null===(l=e.child.memoizedState)?Ms(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},s.memoizedState=l,s.childLanes=e.childLanes&~n,t.memoizedState=Rs,i}return e=(s=e.child).sibling,i=Ic(s,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Os(e,t){return(t=Mc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Ls(e,t,n,r){return null!==r&&uo(r),yo(t,e.child,null,n),(e=Os(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Ns(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Co(e.return,t,n)}function Ds(e,t,n,r,i){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function Fs(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(gs(e,t,r.children,n),0!==(2&(r=Zo.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ns(e,n,t);else if(19===e.tag)Ns(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if($i(Zo,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===Xo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Ds(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===Xo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Ds(t,!0,n,null,o);break;case"together":Ds(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function js(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function zs(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ml|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Ic(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Ic(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Bs(e,t){if(!eo)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Us(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Ws(e,t,n){var r=t.pendingProps;switch(Xi(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Us(t),null;case 1:case 17:return Ti(t.type)&&Ii(),Us(t),null;case 3:return r=t.stateNode,Go(),wi(Ci),wi(_i),Jo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(so(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==to&&(nc(to),to=null))),Ts(e,t),Us(t),null;case 5:Yo(t);var i=Ho(Vo.current);if(n=t.type,null!==e&&null!=t.stateNode)Is(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(o(166));return Us(t),null}if(e=Ho(Uo.current),so(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[li]=t,r[ci]=a,e=0!==(1&t.mode),n){case"dialog":Lr("cancel",r),Lr("close",r);break;case"iframe":case"object":case"embed":Lr("load",r);break;case"video":case"audio":for(i=0;i<Rr.length;i++)Lr(Rr[i],r);break;case"source":Lr("error",r);break;case"img":case"image":case"link":Lr("error",r),Lr("load",r);break;case"details":Lr("toggle",r);break;case"input":Z(r,a),Lr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Lr("invalid",r);break;case"textarea":ie(r,a),Lr("invalid",r)}for(var l in ye(n,a),i=null,a)if(a.hasOwnProperty(l)){var c=a[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==a.suppressHydrationWarning&&Kr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==a.suppressHydrationWarning&&Kr(r.textContent,c,e),i=["children",""+c]):s.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Lr("scroll",r)}switch(n){case"input":q(r),J(r,a,!0);break;case"textarea":q(r),ae(r);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(r.onclick=Yr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[li]=t,e[ci]=r,Es(e,t,!1,!1),t.stateNode=e;e:{switch(l=ve(n,r),n){case"dialog":Lr("cancel",e),Lr("close",e),i=r;break;case"iframe":case"object":case"embed":Lr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Rr.length;i++)Lr(Rr[i],e);i=r;break;case"source":Lr("error",e),i=r;break;case"img":case"image":case"link":Lr("error",e),Lr("load",e),i=r;break;case"details":Lr("toggle",e),i=r;break;case"input":Z(e,r),i=Y(e,r),Lr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=D({},r,{value:void 0}),Lr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Lr("invalid",e)}for(a in ye(n,i),c=i)if(c.hasOwnProperty(a)){var u=c[a];"style"===a?me(e,u):"dangerouslySetInnerHTML"===a?null!=(u=u?u.__html:void 0)&&ue(e,u):"children"===a?"string"===typeof u?("textarea"!==n||""!==u)&&de(e,u):"number"===typeof u&&de(e,""+u):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(s.hasOwnProperty(a)?null!=u&&"onScroll"===a&&Lr("scroll",e):null!=u&&b(e,a,u,l))}switch(n){case"input":q(e),J(e,r,!1);break;case"textarea":q(e),ae(e);break;case"option":null!=r.value&&e.setAttribute("value",""+V(r.value));break;case"select":e.multiple=!!r.multiple,null!=(a=r.value)?ne(e,!!r.multiple,a,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Yr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Us(t),null;case 6:if(e&&null!=t.stateNode)Ps(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));if(n=Ho(Vo.current),Ho(Uo.current),so(t)){if(r=t.stateNode,n=t.memoizedProps,r[li]=t,(a=r.nodeValue!==n)&&null!==(e=Qi))switch(e.tag){case 3:Kr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Kr(r.nodeValue,n,0!==(1&e.mode))}a&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[li]=t,t.stateNode=r}return Us(t),null;case 13:if(wi(Zo),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(eo&&null!==Ji&&0!==(1&t.mode)&&0===(128&t.flags))lo(),co(),t.flags|=98560,a=!1;else if(a=so(t),null!==r&&null!==r.dehydrated){if(null===e){if(!a)throw Error(o(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(o(317));a[li]=t}else co(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Us(t),a=!1}else null!==to&&(nc(to),to=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Zo.current)?0===Pl&&(Pl=3):dc())),null!==t.updateQueue&&(t.flags|=4),Us(t),null);case 4:return Go(),Ts(e,t),null===e&&Fr(t.stateNode.containerInfo),Us(t),null;case 10:return _o(t.type._context),Us(t),null;case 19:if(wi(Zo),null===(a=t.memoizedState))return Us(t),null;if(r=0!==(128&t.flags),null===(l=a.rendering))if(r)Bs(a,!1);else{if(0!==Pl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=Xo(e))){for(t.flags|=128,Bs(a,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(a=n).flags&=14680066,null===(l=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return $i(Zo,1&Zo.current|2),t.child}e=e.sibling}null!==a.tail&&Ze()>Fl&&(t.flags|=128,r=!0,Bs(a,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=Xo(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Bs(a,!0),null===a.tail&&"hidden"===a.tailMode&&!l.alternate&&!eo)return Us(t),null}else 2*Ze()-a.renderingStartTime>Fl&&1073741824!==n&&(t.flags|=128,r=!0,Bs(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=a.last)?n.sibling=l:t.child=l,a.last=l)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Ze(),t.sibling=null,n=Zo.current,$i(Zo,r?1&n|2:1&n),t):(Us(t),null);case 22:case 23:return sc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Tl)&&(Us(t),6&t.subtreeFlags&&(t.flags|=8192)):Us(t),null;case 24:case 25:return null}throw Error(o(156,t.tag))}function Vs(e,t){switch(Xi(t),t.tag){case 1:return Ti(t.type)&&Ii(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Go(),wi(Ci),wi(_i),Jo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Yo(t),null;case 13:if(wi(Zo),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));co()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return wi(Zo),null;case 4:return Go(),null;case 10:return _o(t.type._context),null;case 22:case 23:return sc(),null;default:return null}}Es=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ts=function(){},Is=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Ho(Uo.current);var o,a=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),a=[];break;case"select":i=D({},i,{value:void 0}),r=D({},r,{value:void 0}),a=[];break;case"textarea":i=re(e,i),r=re(e,r),a=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Yr)}for(u in ye(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var l=i[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(s.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(a||(a=[]),a.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(a=a||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(a=a||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(s.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Lr("scroll",e),a||l===c||(a=[])):(a=a||[]).push(u,c))}n&&(a=a||[]).push("style",n);var u=a;(t.updateQueue=u)&&(t.flags|=4)}},Ps=function(e,t,n,r){n!==r&&(t.flags|=4)};var Hs=!1,qs=!1,Gs="function"===typeof WeakSet?WeakSet:Set,Ks=null;function Ys(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){xc(e,t,r)}else n.current=null}function Zs(e,t,n){try{n()}catch(r){xc(e,t,r)}}var Xs=!1;function Qs(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,void 0!==o&&Zs(t,n,o)}i=i.next}while(i!==r)}}function Js(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function el(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function tl(e){var t=e.alternate;null!==t&&(e.alternate=null,tl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[li],delete t[ci],delete t[di],delete t[pi],delete t[hi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function nl(e){return 5===e.tag||3===e.tag||4===e.tag}function rl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||nl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function il(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Yr));else if(4!==r&&null!==(e=e.child))for(il(e,t,n),e=e.sibling;null!==e;)il(e,t,n),e=e.sibling}function ol(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ol(e,t,n),e=e.sibling;null!==e;)ol(e,t,n),e=e.sibling}var al=null,sl=!1;function ll(e,t,n){for(n=n.child;null!==n;)cl(e,t,n),n=n.sibling}function cl(e,t,n){if(it&&"function"===typeof it.onCommitFiberUnmount)try{it.onCommitFiberUnmount(rt,n)}catch(s){}switch(n.tag){case 5:qs||Ys(n,t);case 6:var r=al,i=sl;al=null,ll(e,t,n),sl=i,null!==(al=r)&&(sl?(e=al,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):al.removeChild(n.stateNode));break;case 18:null!==al&&(sl?(e=al,n=n.stateNode,8===e.nodeType?ii(e.parentNode,n):1===e.nodeType&&ii(e,n),Bt(e)):ii(al,n.stateNode));break;case 4:r=al,i=sl,al=n.stateNode.containerInfo,sl=!0,ll(e,t,n),al=r,sl=i;break;case 0:case 11:case 14:case 15:if(!qs&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var o=i,a=o.destroy;o=o.tag,void 0!==a&&(0!==(2&o)||0!==(4&o))&&Zs(n,t,a),i=i.next}while(i!==r)}ll(e,t,n);break;case 1:if(!qs&&(Ys(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){xc(n,t,s)}ll(e,t,n);break;case 21:ll(e,t,n);break;case 22:1&n.mode?(qs=(r=qs)||null!==n.memoizedState,ll(e,t,n),qs=r):ll(e,t,n);break;default:ll(e,t,n)}}function ul(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Gs),t.forEach((function(t){var r=_c.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function dl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var a=e,s=t,l=s;e:for(;null!==l;){switch(l.tag){case 5:al=l.stateNode,sl=!1;break e;case 3:case 4:al=l.stateNode.containerInfo,sl=!0;break e}l=l.return}if(null===al)throw Error(o(160));cl(a,s,i),al=null,sl=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(u){xc(i,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)pl(t,e),t=t.sibling}function pl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(dl(t,e),hl(e),4&r){try{Qs(3,e,e.return),Js(3,e)}catch(g){xc(e,e.return,g)}try{Qs(5,e,e.return)}catch(g){xc(e,e.return,g)}}break;case 1:dl(t,e),hl(e),512&r&&null!==n&&Ys(n,n.return);break;case 5:if(dl(t,e),hl(e),512&r&&null!==n&&Ys(n,n.return),32&e.flags){var i=e.stateNode;try{de(i,"")}catch(g){xc(e,e.return,g)}}if(4&r&&null!=(i=e.stateNode)){var a=e.memoizedProps,s=null!==n?n.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===a.type&&null!=a.name&&X(i,a),ve(l,s);var u=ve(l,a);for(s=0;s<c.length;s+=2){var d=c[s],p=c[s+1];"style"===d?me(i,p):"dangerouslySetInnerHTML"===d?ue(i,p):"children"===d?de(i,p):b(i,d,p,u)}switch(l){case"input":Q(i,a);break;case"textarea":oe(i,a);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var f=a.value;null!=f?ne(i,!!a.multiple,f,!1):h!==!!a.multiple&&(null!=a.defaultValue?ne(i,!!a.multiple,a.defaultValue,!0):ne(i,!!a.multiple,a.multiple?[]:"",!1))}i[ci]=a}catch(g){xc(e,e.return,g)}}break;case 6:if(dl(t,e),hl(e),4&r){if(null===e.stateNode)throw Error(o(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(g){xc(e,e.return,g)}}break;case 3:if(dl(t,e),hl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Bt(t.containerInfo)}catch(g){xc(e,e.return,g)}break;case 4:default:dl(t,e),hl(e);break;case 13:dl(t,e),hl(e),8192&(i=e.child).flags&&(a=null!==i.memoizedState,i.stateNode.isHidden=a,!a||null!==i.alternate&&null!==i.alternate.memoizedState||(Dl=Ze())),4&r&&ul(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(qs=(u=qs)||d,dl(t,e),qs=u):dl(t,e),hl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!==(1&e.mode))for(Ks=e,d=e.child;null!==d;){for(p=Ks=d;null!==Ks;){switch(f=(h=Ks).child,h.tag){case 0:case 11:case 14:case 15:Qs(4,h,h.return);break;case 1:Ys(h,h.return);var m=h.stateNode;if("function"===typeof m.componentWillUnmount){r=h,n=h.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){xc(r,n,g)}}break;case 5:Ys(h,h.return);break;case 22:if(null!==h.memoizedState){yl(p);continue}}null!==f?(f.return=h,Ks=f):yl(p)}d=d.sibling}e:for(d=null,p=e;;){if(5===p.tag){if(null===d){d=p;try{i=p.stateNode,u?"function"===typeof(a=i.style).setProperty?a.setProperty("display","none","important"):a.display="none":(l=p.stateNode,s=void 0!==(c=p.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=fe("display",s))}catch(g){xc(e,e.return,g)}}}else if(6===p.tag){if(null===d)try{p.stateNode.nodeValue=u?"":p.memoizedProps}catch(g){xc(e,e.return,g)}}else if((22!==p.tag&&23!==p.tag||null===p.memoizedState||p===e)&&null!==p.child){p.child.return=p,p=p.child;continue}if(p===e)break e;for(;null===p.sibling;){if(null===p.return||p.return===e)break e;d===p&&(d=null),p=p.return}d===p&&(d=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:dl(t,e),hl(e),4&r&&ul(e);case 21:}}function hl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(nl(n)){var r=n;break e}n=n.return}throw Error(o(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(de(i,""),r.flags&=-33),ol(e,rl(e),i);break;case 3:case 4:var a=r.stateNode.containerInfo;il(e,rl(e),a);break;default:throw Error(o(161))}}catch(s){xc(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function fl(e,t,n){Ks=e,ml(e,t,n)}function ml(e,t,n){for(var r=0!==(1&e.mode);null!==Ks;){var i=Ks,o=i.child;if(22===i.tag&&r){var a=null!==i.memoizedState||Hs;if(!a){var s=i.alternate,l=null!==s&&null!==s.memoizedState||qs;s=Hs;var c=qs;if(Hs=a,(qs=l)&&!c)for(Ks=i;null!==Ks;)l=(a=Ks).child,22===a.tag&&null!==a.memoizedState?vl(i):null!==l?(l.return=a,Ks=l):vl(i);for(;null!==o;)Ks=o,ml(o,t,n),o=o.sibling;Ks=i,Hs=s,qs=c}gl(e)}else 0!==(8772&i.subtreeFlags)&&null!==o?(o.return=i,Ks=o):gl(e)}}function gl(e){for(;null!==Ks;){var t=Ks;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:qs||Js(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!qs)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:Qa(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&zo(t,a,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}zo(t,s,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var p=d.dehydrated;null!==p&&Bt(p)}}}break;default:throw Error(o(163))}qs||512&t.flags&&el(t)}catch(h){xc(t,t.return,h)}}if(t===e){Ks=null;break}if(null!==(n=t.sibling)){n.return=t.return,Ks=n;break}Ks=t.return}}function yl(e){for(;null!==Ks;){var t=Ks;if(t===e){Ks=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Ks=n;break}Ks=t.return}}function vl(e){for(;null!==Ks;){var t=Ks;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Js(4,t)}catch(l){xc(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){xc(t,i,l)}}var o=t.return;try{el(t)}catch(l){xc(t,o,l)}break;case 5:var a=t.return;try{el(t)}catch(l){xc(t,a,l)}}}catch(l){xc(t,t.return,l)}if(t===e){Ks=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Ks=s;break}Ks=t.return}}var bl,xl=Math.ceil,wl=x.ReactCurrentDispatcher,$l=x.ReactCurrentOwner,Sl=x.ReactCurrentBatchConfig,_l=0,Cl=null,kl=null,El=0,Tl=0,Il=xi(0),Pl=0,Rl=null,Ml=0,Al=0,Ol=0,Ll=null,Nl=null,Dl=0,Fl=1/0,jl=null,zl=!1,Bl=null,Ul=null,Wl=!1,Vl=null,Hl=0,ql=0,Gl=null,Kl=-1,Yl=0;function Zl(){return 0!==(6&_l)?Ze():-1!==Kl?Kl:Kl=Ze()}function Xl(e){return 0===(1&e.mode)?1:0!==(2&_l)&&0!==El?El&-El:null!==po.transition?(0===Yl&&(Yl=ft()),Yl):0!==(e=vt)?e:e=void 0===(e=window.event)?16:Yt(e.type)}function Ql(e,t,n,r){if(50<ql)throw ql=0,Gl=null,Error(o(185));gt(e,n,r),0!==(2&_l)&&e===Cl||(e===Cl&&(0===(2&_l)&&(Al|=n),4===Pl&&rc(e,El)),Jl(e,r),1===n&&0===_l&&0===(1&t.mode)&&(Fl=Ze()+500,Li&&Fi()))}function Jl(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var a=31-ot(o),s=1<<a,l=i[a];-1===l?0!==(s&n)&&0===(s&r)||(i[a]=pt(s,t)):l<=t&&(e.expiredLanes|=s),o&=~s}}(e,t);var r=dt(e,e===Cl?El:0);if(0===r)null!==n&&Ge(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ge(n),1===t)0===e.tag?function(e){Li=!0,Di(e)}(ic.bind(null,e)):Di(ic.bind(null,e)),ni((function(){0===(6&_l)&&Fi()})),n=null;else{switch(bt(r)){case 1:n=Qe;break;case 4:n=Je;break;case 16:default:n=et;break;case 536870912:n=nt}n=Cc(n,ec.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ec(e,t){if(Kl=-1,Yl=0,0!==(6&_l))throw Error(o(327));var n=e.callbackNode;if(vc()&&e.callbackNode!==n)return null;var r=dt(e,e===Cl?El:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=pc(e,r);else{t=r;var i=_l;_l|=2;var a=uc();for(Cl===e&&El===t||(jl=null,Fl=Ze()+500,lc(e,t));;)try{fc();break}catch(l){cc(e,l)}So(),wl.current=a,_l=i,null!==kl?t=0:(Cl=null,El=0,t=Pl)}if(0!==t){if(2===t&&(0!==(i=ht(e))&&(r=i,t=tc(e,i))),1===t)throw n=Rl,lc(e,0),rc(e,r),Jl(e,Ze()),n;if(6===t)rc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!rr(o(),i))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=pc(e,r))&&(0!==(a=ht(e))&&(r=a,t=tc(e,a))),1===t))throw n=Rl,lc(e,0),rc(e,r),Jl(e,Ze()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(o(345));case 2:case 5:yc(e,Nl,jl);break;case 3:if(rc(e,r),(130023424&r)===r&&10<(t=Dl+500-Ze())){if(0!==dt(e,0))break;if(((i=e.suspendedLanes)&r)!==r){Zl(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Jr(yc.bind(null,e,Nl,jl),t);break}yc(e,Nl,jl);break;case 4:if(rc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-ot(r);a=1<<s,(s=t[s])>i&&(i=s),r&=~a}if(r=i,10<(r=(120>(r=Ze()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*xl(r/1960))-r)){e.timeoutHandle=Jr(yc.bind(null,e,Nl,jl),r);break}yc(e,Nl,jl);break;default:throw Error(o(329))}}}return Jl(e,Ze()),e.callbackNode===n?ec.bind(null,e):null}function tc(e,t){var n=Ll;return e.current.memoizedState.isDehydrated&&(lc(e,t).flags|=256),2!==(e=pc(e,t))&&(t=Nl,Nl=n,null!==t&&nc(t)),e}function nc(e){null===Nl?Nl=e:Nl.push.apply(Nl,e)}function rc(e,t){for(t&=~Ol,t&=~Al,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function ic(e){if(0!==(6&_l))throw Error(o(327));vc();var t=dt(e,0);if(0===(1&t))return Jl(e,Ze()),null;var n=pc(e,t);if(0!==e.tag&&2===n){var r=ht(e);0!==r&&(t=r,n=tc(e,r))}if(1===n)throw n=Rl,lc(e,0),rc(e,t),Jl(e,Ze()),n;if(6===n)throw Error(o(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,yc(e,Nl,jl),Jl(e,Ze()),null}function oc(e,t){var n=_l;_l|=1;try{return e(t)}finally{0===(_l=n)&&(Fl=Ze()+500,Li&&Fi())}}function ac(e){null!==Vl&&0===Vl.tag&&0===(6&_l)&&vc();var t=_l;_l|=1;var n=Sl.transition,r=vt;try{if(Sl.transition=null,vt=1,e)return e()}finally{vt=r,Sl.transition=n,0===(6&(_l=t))&&Fi()}}function sc(){Tl=Il.current,wi(Il)}function lc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ei(n)),null!==kl)for(n=kl.return;null!==n;){var r=n;switch(Xi(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ii();break;case 3:Go(),wi(Ci),wi(_i),Jo();break;case 5:Yo(r);break;case 4:Go();break;case 13:case 19:wi(Zo);break;case 10:_o(r.type._context);break;case 22:case 23:sc()}n=n.return}if(Cl=e,kl=e=Ic(e.current,null),El=Tl=t,Pl=0,Rl=null,Ol=Al=Ml=0,Nl=Ll=null,null!==To){for(t=0;t<To.length;t++)if(null!==(r=(n=To[t]).interleaved)){n.interleaved=null;var i=r.next,o=n.pending;if(null!==o){var a=o.next;o.next=i,r.next=a}n.pending=r}To=null}return e}function cc(e,t){for(;;){var n=kl;try{if(So(),ea.current=Ka,aa){for(var r=ra.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}aa=!1}if(na=0,oa=ia=ra=null,sa=!1,la=0,$l.current=null,null===n||null===n.return){Pl=1,Rl=t,kl=null;break}e:{var a=e,s=n.return,l=n,c=t;if(t=El,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=l,p=d.tag;if(0===(1&d.mode)&&(0===p||11===p||15===p)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var f=ps(s);if(null!==f){f.flags&=-257,hs(f,s,l,0,t),1&f.mode&&ds(a,u,t),c=u;var m=(t=f).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){ds(a,u,t),dc();break e}c=Error(o(426))}else if(eo&&1&l.mode){var y=ps(s);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),hs(y,s,l,0,t),uo(os(c,l));break e}}a=c=os(c,l),4!==Pl&&(Pl=2),null===Ll?Ll=[a]:Ll.push(a),a=s;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,Fo(a,cs(0,c,t));break e;case 1:l=c;var v=a.type,b=a.stateNode;if(0===(128&a.flags)&&("function"===typeof v.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Ul||!Ul.has(b)))){a.flags|=65536,t&=-t,a.lanes|=t,Fo(a,us(a,l,t));break e}}a=a.return}while(null!==a)}gc(n)}catch(x){t=x,kl===n&&null!==n&&(kl=n=n.return);continue}break}}function uc(){var e=wl.current;return wl.current=Ka,null===e?Ka:e}function dc(){0!==Pl&&3!==Pl&&2!==Pl||(Pl=4),null===Cl||0===(268435455&Ml)&&0===(268435455&Al)||rc(Cl,El)}function pc(e,t){var n=_l;_l|=2;var r=uc();for(Cl===e&&El===t||(jl=null,lc(e,t));;)try{hc();break}catch(i){cc(e,i)}if(So(),_l=n,wl.current=r,null!==kl)throw Error(o(261));return Cl=null,El=0,Pl}function hc(){for(;null!==kl;)mc(kl)}function fc(){for(;null!==kl&&!Ke();)mc(kl)}function mc(e){var t=bl(e.alternate,e,Tl);e.memoizedProps=e.pendingProps,null===t?gc(e):kl=t,$l.current=null}function gc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Ws(n,t,Tl)))return void(kl=n)}else{if(null!==(n=Vs(n,t)))return n.flags&=32767,void(kl=n);if(null===e)return Pl=6,void(kl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(kl=t);kl=t=e}while(null!==t);0===Pl&&(Pl=5)}function yc(e,t,n){var r=vt,i=Sl.transition;try{Sl.transition=null,vt=1,function(e,t,n,r){do{vc()}while(null!==Vl);if(0!==(6&_l))throw Error(o(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),o=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~o}}(e,a),e===Cl&&(kl=Cl=null,El=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Wl||(Wl=!0,Cc(et,(function(){return vc(),null}))),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=Sl.transition,Sl.transition=null;var s=vt;vt=1;var l=_l;_l|=4,$l.current=null,function(e,t){if(Zr=Wt,cr(e=lr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(w){n=null;break e}var s=0,l=-1,c=-1,u=0,d=0,p=e,h=null;t:for(;;){for(var f;p!==n||0!==i&&3!==p.nodeType||(l=s+i),p!==a||0!==r&&3!==p.nodeType||(c=s+r),3===p.nodeType&&(s+=p.nodeValue.length),null!==(f=p.firstChild);)h=p,p=f;for(;;){if(p===e)break t;if(h===n&&++u===i&&(l=s),h===a&&++d===r&&(c=s),null!==(f=p.nextSibling))break;h=(p=h).parentNode}p=f}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Xr={focusedElem:e,selectionRange:n},Wt=!1,Ks=t;null!==Ks;)if(e=(t=Ks).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Ks=e;else for(;null!==Ks;){t=Ks;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,y=m.memoizedState,v=t.stateNode,b=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:Qa(t.type,g),y);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var x=t.stateNode.containerInfo;1===x.nodeType?x.textContent="":9===x.nodeType&&x.documentElement&&x.removeChild(x.documentElement);break;default:throw Error(o(163))}}catch(w){xc(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Ks=e;break}Ks=t.return}m=Xs,Xs=!1}(e,n),pl(n,e),ur(Xr),Wt=!!Zr,Xr=Zr=null,e.current=n,fl(n,e,i),Ye(),_l=l,vt=s,Sl.transition=a}else e.current=n;if(Wl&&(Wl=!1,Vl=e,Hl=i),a=e.pendingLanes,0===a&&(Ul=null),function(e){if(it&&"function"===typeof it.onCommitFiberRoot)try{it.onCommitFiberRoot(rt,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),Jl(e,Ze()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(zl)throw zl=!1,e=Bl,Bl=null,e;0!==(1&Hl)&&0!==e.tag&&vc(),a=e.pendingLanes,0!==(1&a)?e===Gl?ql++:(ql=0,Gl=e):ql=0,Fi()}(e,t,n,r)}finally{Sl.transition=i,vt=r}return null}function vc(){if(null!==Vl){var e=bt(Hl),t=Sl.transition,n=vt;try{if(Sl.transition=null,vt=16>e?16:e,null===Vl)var r=!1;else{if(e=Vl,Vl=null,Hl=0,0!==(6&_l))throw Error(o(331));var i=_l;for(_l|=4,Ks=e.current;null!==Ks;){var a=Ks,s=a.child;if(0!==(16&Ks.flags)){var l=a.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Ks=u;null!==Ks;){var d=Ks;switch(d.tag){case 0:case 11:case 15:Qs(8,d,a)}var p=d.child;if(null!==p)p.return=d,Ks=p;else for(;null!==Ks;){var h=(d=Ks).sibling,f=d.return;if(tl(d),d===u){Ks=null;break}if(null!==h){h.return=f,Ks=h;break}Ks=f}}}var m=a.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}Ks=a}}if(0!==(2064&a.subtreeFlags)&&null!==s)s.return=a,Ks=s;else e:for(;null!==Ks;){if(0!==(2048&(a=Ks).flags))switch(a.tag){case 0:case 11:case 15:Qs(9,a,a.return)}var v=a.sibling;if(null!==v){v.return=a.return,Ks=v;break e}Ks=a.return}}var b=e.current;for(Ks=b;null!==Ks;){var x=(s=Ks).child;if(0!==(2064&s.subtreeFlags)&&null!==x)x.return=s,Ks=x;else e:for(s=b;null!==Ks;){if(0!==(2048&(l=Ks).flags))try{switch(l.tag){case 0:case 11:case 15:Js(9,l)}}catch($){xc(l,l.return,$)}if(l===s){Ks=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,Ks=w;break e}Ks=l.return}}if(_l=i,Fi(),it&&"function"===typeof it.onPostCommitFiberRoot)try{it.onPostCommitFiberRoot(rt,e)}catch($){}r=!0}return r}finally{vt=n,Sl.transition=t}}return!1}function bc(e,t,n){e=No(e,t=cs(0,t=os(n,t),1),1),t=Zl(),null!==e&&(gt(e,1,t),Jl(e,t))}function xc(e,t,n){if(3===e.tag)bc(e,e,n);else for(;null!==t;){if(3===t.tag){bc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Ul||!Ul.has(r))){t=No(t,e=us(t,e=os(n,e),1),1),e=Zl(),null!==t&&(gt(t,1,e),Jl(t,e));break}}t=t.return}}function wc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=Zl(),e.pingedLanes|=e.suspendedLanes&n,Cl===e&&(El&n)===n&&(4===Pl||3===Pl&&(130023424&El)===El&&500>Ze()-Dl?lc(e,0):Ol|=n),Jl(e,t)}function $c(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ct,0===(130023424&(ct<<=1))&&(ct=4194304)));var n=Zl();null!==(e=Ro(e,t))&&(gt(e,t,n),Jl(e,n))}function Sc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),$c(e,n)}function _c(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(o(314))}null!==r&&r.delete(t),$c(e,n)}function Cc(e,t){return qe(e,t)}function kc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ec(e,t,n,r){return new kc(e,t,n,r)}function Tc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ic(e,t){var n=e.alternate;return null===n?((n=Ec(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Pc(e,t,n,r,i,a){var s=2;if(r=e,"function"===typeof e)Tc(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case S:return Rc(n.children,i,a,t);case _:s=8,i|=8;break;case C:return(e=Ec(12,n,t,2|i)).elementType=C,e.lanes=a,e;case I:return(e=Ec(13,n,t,i)).elementType=I,e.lanes=a,e;case P:return(e=Ec(19,n,t,i)).elementType=P,e.lanes=a,e;case A:return Mc(n,i,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case k:s=10;break e;case E:s=9;break e;case T:s=11;break e;case R:s=14;break e;case M:s=16,r=null;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Ec(s,n,t,i)).elementType=e,t.type=r,t.lanes=a,t}function Rc(e,t,n,r){return(e=Ec(7,e,r,t)).lanes=n,e}function Mc(e,t,n,r){return(e=Ec(22,e,r,t)).elementType=A,e.lanes=n,e.stateNode={isHidden:!1},e}function Ac(e,t,n){return(e=Ec(6,e,null,t)).lanes=n,e}function Oc(e,t,n){return(t=Ec(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Lc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Nc(e,t,n,r,i,o,a,s,l){return e=new Lc(e,t,n,s,l),1===t?(t=1,!0===o&&(t|=8)):t=0,o=Ec(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ao(o),e}function Dc(e){if(!e)return Si;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(o(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ti(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(o(171))}if(1===e.tag){var n=e.type;if(Ti(n))return Ri(e,n,t)}return t}function Fc(e,t,n,r,i,o,a,s,l){return(e=Nc(n,r,!0,e,0,o,0,s,l)).context=Dc(null),n=e.current,(o=Lo(r=Zl(),i=Xl(n))).callback=void 0!==t&&null!==t?t:null,No(n,o,i),e.current.lanes=i,gt(e,i,r),Jl(e,r),e}function jc(e,t,n,r){var i=t.current,o=Zl(),a=Xl(i);return n=Dc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Lo(o,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=No(i,t,a))&&(Ql(e,i,a,o),Do(e,i,a)),a}function zc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Bc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Uc(e,t){Bc(e,t),(e=e.alternate)&&Bc(e,t)}bl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ci.current)ms=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return ms=!1,function(e,t,n){switch(t.tag){case 3:Cs(t),co();break;case 5:Ko(t);break;case 1:Ti(t.type)&&Mi(t);break;case 4:qo(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;$i(bo,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?($i(Zo,1&Zo.current),t.flags|=128,null):0!==(n&t.child.childLanes)?As(e,t,n):($i(Zo,1&Zo.current),null!==(e=zs(e,t,n))?e.sibling:null);$i(Zo,1&Zo.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Fs(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),$i(Zo,Zo.current),r)break;return null;case 22:case 23:return t.lanes=0,xs(e,t,n)}return zs(e,t,n)}(e,t,n);ms=0!==(131072&e.flags)}else ms=!1,eo&&0!==(1048576&t.flags)&&Yi(t,Ui,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;js(e,t),e=t.pendingProps;var i=Ei(t,_i.current);ko(t,n),i=pa(null,t,r,e,i,n);var a=ha();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ti(r)?(a=!0,Mi(t)):a=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Ao(t),i.updater=es,t.stateNode=i,i._reactInternals=t,is(t,r,e,n),t=_s(null,t,r,!0,a,n)):(t.tag=0,eo&&a&&Zi(t),gs(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(js(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Tc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===T)return 11;if(e===R)return 14}return 2}(r),e=Qa(r,e),i){case 0:t=$s(null,t,r,e,n);break e;case 1:t=Ss(null,t,r,e,n);break e;case 11:t=ys(null,t,r,e,n);break e;case 14:t=vs(null,t,r,Qa(r.type,e),n);break e}throw Error(o(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,$s(e,t,r,i=t.elementType===r?i:Qa(r,i),n);case 1:return r=t.type,i=t.pendingProps,Ss(e,t,r,i=t.elementType===r?i:Qa(r,i),n);case 3:e:{if(Cs(t),null===e)throw Error(o(387));r=t.pendingProps,i=(a=t.memoizedState).element,Oo(e,t),jo(t,r,null,n);var s=t.memoizedState;if(r=s.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=ks(e,t,r,n,i=os(Error(o(423)),t));break e}if(r!==i){t=ks(e,t,r,n,i=os(Error(o(424)),t));break e}for(Ji=oi(t.stateNode.containerInfo.firstChild),Qi=t,eo=!0,to=null,n=vo(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(co(),r===i){t=zs(e,t,n);break e}gs(e,t,r,n)}t=t.child}return t;case 5:return Ko(t),null===e&&oo(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,s=i.children,Qr(r,i)?s=null:null!==a&&Qr(r,a)&&(t.flags|=32),ws(e,t),gs(e,t,s,n),t.child;case 6:return null===e&&oo(t),null;case 13:return As(e,t,n);case 4:return qo(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=yo(t,null,r,n):gs(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,ys(e,t,r,i=t.elementType===r?i:Qa(r,i),n);case 7:return gs(e,t,t.pendingProps,n),t.child;case 8:case 12:return gs(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,a=t.memoizedProps,s=i.value,$i(bo,r._currentValue),r._currentValue=s,null!==a)if(rr(a.value,s)){if(a.children===i.children&&!Ci.current){t=zs(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var l=a.dependencies;if(null!==l){s=a.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===a.tag){(c=Lo(-1,n&-n)).tag=2;var u=a.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),Co(a.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===a.tag)s=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(s=a.return))throw Error(o(341));s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),Co(s,n,t),s=a.sibling}else s=a.child;if(null!==s)s.return=a;else for(s=a;null!==s;){if(s===t){s=null;break}if(null!==(a=s.sibling)){a.return=s.return,s=a;break}s=s.return}a=s}gs(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,ko(t,n),r=r(i=Eo(i)),t.flags|=1,gs(e,t,r,n),t.child;case 14:return i=Qa(r=t.type,t.pendingProps),vs(e,t,r,i=Qa(r.type,i),n);case 15:return bs(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Qa(r,i),js(e,t),t.tag=1,Ti(r)?(e=!0,Mi(t)):e=!1,ko(t,n),ns(t,r,i),is(t,r,i,n),_s(null,t,r,!0,e,n);case 19:return Fs(e,t,n);case 22:return xs(e,t,n)}throw Error(o(156,t.tag))};var Wc="function"===typeof reportError?reportError:function(e){console.error(e)};function Vc(e){this._internalRoot=e}function Hc(e){this._internalRoot=e}function qc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Gc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Kc(){}function Yc(e,t,n,r,i){var o=n._reactRootContainer;if(o){var a=o;if("function"===typeof i){var s=i;i=function(){var e=zc(a);s.call(e)}}jc(t,a,e,i)}else a=function(e,t,n,r,i){if(i){if("function"===typeof r){var o=r;r=function(){var e=zc(a);o.call(e)}}var a=Fc(t,r,e,0,null,!1,0,"",Kc);return e._reactRootContainer=a,e[ui]=a.current,Fr(8===e.nodeType?e.parentNode:e),ac(),a}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var s=r;r=function(){var e=zc(l);s.call(e)}}var l=Nc(e,0,!1,null,0,!1,0,"",Kc);return e._reactRootContainer=l,e[ui]=l.current,Fr(8===e.nodeType?e.parentNode:e),ac((function(){jc(t,l,n,r)})),l}(n,t,e,i,r);return zc(a)}Hc.prototype.render=Vc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));jc(e,t,null,null)},Hc.prototype.unmount=Vc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;ac((function(){jc(null,e,null,null)})),t[ui]=null}},Hc.prototype.unstable_scheduleHydration=function(e){if(e){var t=St();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Mt.length&&0!==t&&t<Mt[n].priority;n++);Mt.splice(n,0,e),0===n&&Nt(e)}},xt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ut(t.pendingLanes);0!==n&&(yt(t,1|n),Jl(t,Ze()),0===(6&_l)&&(Fl=Ze()+500,Fi()))}break;case 13:ac((function(){var t=Ro(e,1);if(null!==t){var n=Zl();Ql(t,e,1,n)}})),Uc(e,1)}},wt=function(e){if(13===e.tag){var t=Ro(e,134217728);if(null!==t)Ql(t,e,134217728,Zl());Uc(e,134217728)}},$t=function(e){if(13===e.tag){var t=Xl(e),n=Ro(e,t);if(null!==n)Ql(n,e,t,Zl());Uc(e,t)}},St=function(){return vt},_t=function(e,t){var n=vt;try{return vt=e,t()}finally{vt=n}},we=function(e,t,n){switch(t){case"input":if(Q(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=yi(r);if(!i)throw Error(o(90));G(r),Q(r,i)}}}break;case"textarea":oe(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ee=oc,Te=ac;var Zc={usingClientEntryPoint:!1,Events:[mi,gi,yi,Ce,ke,oc]},Xc={findFiberByHostInstance:fi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Qc={bundleType:Xc.bundleType,version:Xc.version,rendererPackageName:Xc.rendererPackageName,rendererConfig:Xc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:x.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ve(e))?null:e.stateNode},findFiberByHostInstance:Xc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Jc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Jc.isDisabled&&Jc.supportsFiber)try{rt=Jc.inject(Qc),it=Jc}catch(eu){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Zc,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!qc(t))throw Error(o(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:$,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!qc(e))throw Error(o(299));var n=!1,r="",i=Wc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Nc(e,1,!1,null,0,n,0,r,i),e[ui]=t.current,Fr(8===e.nodeType?e.parentNode:e),new Vc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return e=null===(e=Ve(t))?null:e.stateNode},t.flushSync=function(e){return ac(e)},t.hydrate=function(e,t,n){if(!Gc(t))throw Error(o(200));return Yc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!qc(e))throw Error(o(405));var r=null!=n&&n.hydratedSources||null,i=!1,a="",s=Wc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=Fc(t,null,e,1,null!=n?n:null,i,0,a,s),e[ui]=t.current,Fr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Hc(t)},t.render=function(e,t,n){if(!Gc(t))throw Error(o(200));return Yc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Gc(e))throw Error(o(40));return!!e._reactRootContainer&&(ac((function(){Yc(null,null,e,!1,(function(){e._reactRootContainer=null,e[ui]=null}))})),!0)},t.unstable_batchedUpdates=oc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Gc(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return Yc(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},391:(e,t,n)=>{"use strict";var r=n(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)},366:e=>{var t="undefined"!==typeof Element,n="function"===typeof Map,r="function"===typeof Set,i="function"===typeof ArrayBuffer&&!!ArrayBuffer.isView;function o(e,a){if(e===a)return!0;if(e&&a&&"object"==typeof e&&"object"==typeof a){if(e.constructor!==a.constructor)return!1;var s,l,c,u;if(Array.isArray(e)){if((s=e.length)!=a.length)return!1;for(l=s;0!==l--;)if(!o(e[l],a[l]))return!1;return!0}if(n&&e instanceof Map&&a instanceof Map){if(e.size!==a.size)return!1;for(u=e.entries();!(l=u.next()).done;)if(!a.has(l.value[0]))return!1;for(u=e.entries();!(l=u.next()).done;)if(!o(l.value[1],a.get(l.value[0])))return!1;return!0}if(r&&e instanceof Set&&a instanceof Set){if(e.size!==a.size)return!1;for(u=e.entries();!(l=u.next()).done;)if(!a.has(l.value[0]))return!1;return!0}if(i&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(a)){if((s=e.length)!=a.length)return!1;for(l=s;0!==l--;)if(e[l]!==a[l])return!1;return!0}if(e.constructor===RegExp)return e.source===a.source&&e.flags===a.flags;if(e.valueOf!==Object.prototype.valueOf&&"function"===typeof e.valueOf&&"function"===typeof a.valueOf)return e.valueOf()===a.valueOf();if(e.toString!==Object.prototype.toString&&"function"===typeof e.toString&&"function"===typeof a.toString)return e.toString()===a.toString();if((s=(c=Object.keys(e)).length)!==Object.keys(a).length)return!1;for(l=s;0!==l--;)if(!Object.prototype.hasOwnProperty.call(a,c[l]))return!1;if(t&&e instanceof Element)return!1;for(l=s;0!==l--;)if(("_owner"!==c[l]&&"__v"!==c[l]&&"__o"!==c[l]||!e.$$typeof)&&!o(e[c[l]],a[c[l]]))return!1;return!0}return e!==e&&a!==a}e.exports=function(e,t){try{return o(e,t)}catch(n){if((n.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw n}}},153:(e,t,n)=>{"use strict";var r=n(43),i=Symbol.for("react.element"),o=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,o={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)a.call(t,r)&&!l.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===o[r]&&(o[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:u,props:o,_owner:s.current}}t.Fragment=o,t.jsx=c,t.jsxs=c},202:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),h=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}function v(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var x=b.prototype=new v;x.constructor=b,m(x,y.prototype),x.isPureReactComponent=!0;var w=Array.isArray,$=Object.prototype.hasOwnProperty,S={current:null},_={key:!0,ref:!0,__self:!0,__source:!0};function C(e,t,r){var i,o={},a=null,s=null;if(null!=t)for(i in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(a=""+t.key),t)$.call(t,i)&&!_.hasOwnProperty(i)&&(o[i]=t[i]);var l=arguments.length-2;if(1===l)o.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];o.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===o[i]&&(o[i]=l[i]);return{$$typeof:n,type:e,key:a,ref:s,props:o,_owner:S.current}}function k(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var E=/\/+/g;function T(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function I(e,t,i,o,a){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var l=!1;if(null===e)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return a=a(l=e),e=""===o?"."+T(l,0):o,w(a)?(i="",null!=e&&(i=e.replace(E,"$&/")+"/"),I(a,t,i,"",(function(e){return e}))):null!=a&&(k(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,i+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(E,"$&/")+"/")+e)),t.push(a)),1;if(l=0,o=""===o?".":o+":",w(e))for(var c=0;c<e.length;c++){var u=o+T(s=e[c],c);l+=I(s,t,i,u,a)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=h&&e[h]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(s=e.next()).done;)l+=I(s=s.value,t,i,u=o+T(s,c++),a);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function P(e,t,n){if(null==e)return e;var r=[],i=0;return I(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function R(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var M={current:null},A={transition:null},O={ReactCurrentDispatcher:M,ReactCurrentBatchConfig:A,ReactCurrentOwner:S};function L(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:P,forEach:function(e,t,n){P(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return P(e,(function(){t++})),t},toArray:function(e){return P(e,(function(e){return e}))||[]},only:function(e){if(!k(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=a,t.PureComponent=b,t.StrictMode=o,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.act=L,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),o=e.key,a=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,s=S.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)$.call(t,c)&&!_.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:n,type:e.type,key:o,ref:a,props:i,_owner:s}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=C,t.createFactory=function(e){var t=C.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=k,t.lazy=function(e){return{$$typeof:p,_payload:{_status:-1,_result:e},_init:R}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=A.transition;A.transition={};try{e()}finally{A.transition=t}},t.unstable_act=L,t.useCallback=function(e,t){return M.current.useCallback(e,t)},t.useContext=function(e){return M.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return M.current.useDeferredValue(e)},t.useEffect=function(e,t){return M.current.useEffect(e,t)},t.useId=function(){return M.current.useId()},t.useImperativeHandle=function(e,t,n){return M.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return M.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return M.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return M.current.useMemo(e,t)},t.useReducer=function(e,t,n){return M.current.useReducer(e,t,n)},t.useRef=function(e){return M.current.useRef(e)},t.useState=function(e){return M.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return M.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return M.current.useTransition()},t.version="18.3.1"},43:(e,t,n)=>{"use strict";e.exports=n(202)},579:(e,t,n)=>{"use strict";e.exports=n(153)},234:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<o(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,a=i>>>1;r<a;){var s=2*(r+1)-1,l=e[s],c=s+1,u=e[c];if(0>o(l,n))c<i&&0>o(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[s]=n,r=s);else{if(!(c<i&&0>o(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function o(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var c=[],u=[],d=1,p=null,h=3,f=!1,m=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function x(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function w(e){if(g=!1,x(e),!m)if(null!==r(c))m=!0,A($);else{var t=r(u);null!==t&&O(w,t.startTime-e)}}function $(e,n){m=!1,g&&(g=!1,v(k),k=-1),f=!0;var o=h;try{for(x(n),p=r(c);null!==p&&(!(p.expirationTime>n)||e&&!I());){var a=p.callback;if("function"===typeof a){p.callback=null,h=p.priorityLevel;var s=a(p.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?p.callback=s:p===r(c)&&i(c),x(n)}else i(c);p=r(c)}if(null!==p)var l=!0;else{var d=r(u);null!==d&&O(w,d.startTime-n),l=!1}return l}finally{p=null,h=o,f=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,_=!1,C=null,k=-1,E=5,T=-1;function I(){return!(t.unstable_now()-T<E)}function P(){if(null!==C){var e=t.unstable_now();T=e;var n=!0;try{n=C(!0,e)}finally{n?S():(_=!1,C=null)}}else _=!1}if("function"===typeof b)S=function(){b(P)};else if("undefined"!==typeof MessageChannel){var R=new MessageChannel,M=R.port2;R.port1.onmessage=P,S=function(){M.postMessage(null)}}else S=function(){y(P,0)};function A(e){C=e,_||(_=!0,S())}function O(e,n){k=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||f||(m=!0,A($))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(h){case 1:case 2:case 3:var t=3;break;default:t=h}var n=h;h=t;try{return e()}finally{h=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=h;h=e;try{return t()}finally{h=n}},t.unstable_scheduleCallback=function(e,i,o){var a=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?a+o:a:o=a,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:d++,callback:i,priorityLevel:e,startTime:o,expirationTime:s=o+s,sortIndex:-1},o>a?(e.sortIndex=o,n(u,e),null===r(c)&&e===r(u)&&(g?(v(k),k=-1):g=!0,O(w,o-a))):(e.sortIndex=s,n(c,e),m||f||(m=!0,A($))),e},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(e){var t=h;return function(){var n=h;h=t;try{return e.apply(this,arguments)}finally{h=n}}}},853:(e,t,n)=>{"use strict";e.exports=n(234)},324:e=>{e.exports=function(e,t,n,r){var i=n?n.call(r,e,t):void 0;if(void 0!==i)return!!i;if(e===t)return!0;if("object"!==typeof e||!e||"object"!==typeof t||!t)return!1;var o=Object.keys(e),a=Object.keys(t);if(o.length!==a.length)return!1;for(var s=Object.prototype.hasOwnProperty.bind(t),l=0;l<o.length;l++){var c=o[l];if(!s(c))return!1;var u=e[c],d=t[c];if(!1===(i=n?n.call(r,u,d,c):void 0)||void 0===i&&u!==d)return!1}return!0}},895:(e,t,n)=>{"use strict";var r=n(43);var i="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},o=r.useSyncExternalStore,a=r.useRef,s=r.useEffect,l=r.useMemo,c=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,u){var d=a(null);if(null===d.current){var p={hasValue:!1,value:null};d.current=p}else p=d.current;d=l((function(){function e(e){if(!s){if(s=!0,o=e,e=r(e),void 0!==u&&p.hasValue){var t=p.value;if(u(t,e))return a=t}return a=e}if(t=a,i(o,e))return t;var n=r(e);return void 0!==u&&u(t,n)?t:(o=e,a=n)}var o,a,s=!1,l=void 0===n?null:n;return[function(){return e(t())},null===l?void 0:function(){return e(l())}]}),[t,n,r,u]);var h=o(e,d[0],d[1]);return s((function(){p.hasValue=!0,p.value=h}),[h]),c(h),h}},237:(e,t,n)=>{"use strict";e.exports=n(895)},139:(e,t)=>{var n;!function(){"use strict";var r={}.hasOwnProperty;function i(){for(var e="",t=0;t<arguments.length;t++){var n=arguments[t];n&&(e=a(e,o(n)))}return e}function o(e){if("string"===typeof e||"number"===typeof e)return e;if("object"!==typeof e)return"";if(Array.isArray(e))return i.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var n in e)r.call(e,n)&&e[n]&&(t=a(t,n));return t}function a(e,t){return t?e?e+" "+t:e+t:e}e.exports?(i.default=i,e.exports=i):void 0===(n=function(){return i}.apply(t,[]))||(e.exports=n)}()}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var o=Object.create(null);n.r(o);var a={};e=e||[null,t({}),t([]),t(t)];for(var s=2&i&&r;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((e=>a[e]=()=>r[e]));return a.default=()=>r,n.d(o,a),o}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/nutrition/",n.nc=void 0,(()=>{"use strict";var e={};n.r(e),n.d(e,{hasBrowserEnv:()=>Oi,hasStandardBrowserEnv:()=>Ni,hasStandardBrowserWebWorkerEnv:()=>Di,navigator:()=>Li,origin:()=>Fi});var t={};n.r(t),n.d(t,{FirebaseError:()=>Ks,SDK_VERSION:()=>jc,_DEFAULT_ENTRY_NAME:()=>Sc,_addComponent:()=>Tc,_addOrOverwriteComponent:()=>Ic,_apps:()=>Cc,_clearComponents:()=>Lc,_components:()=>Ec,_getProvider:()=>Rc,_isFirebaseApp:()=>Ac,_isFirebaseServerApp:()=>Oc,_registerComponent:()=>Pc,_removeServiceInstance:()=>Mc,_serverApps:()=>kc,deleteApp:()=>Vc,getApp:()=>Uc,getApps:()=>Wc,initializeApp:()=>zc,initializeServerApp:()=>Bc,onLog:()=>qc,registerVersion:()=>Hc,setLogLevel:()=>Gc});var r=n(43),i=n.t(r,2),o=n(391),a=n(366),s=n.n(a),l=n(740),c=n.n(l),u=n(324),d=n.n(u),p=(e=>(e.BASE="base",e.BODY="body",e.HEAD="head",e.HTML="html",e.LINK="link",e.META="meta",e.NOSCRIPT="noscript",e.SCRIPT="script",e.STYLE="style",e.TITLE="title",e.FRAGMENT="Symbol(react.fragment)",e))(p||{}),h={rel:["amphtml","canonical","alternate"]},f={type:["application/ld+json"]},m={charset:"",name:["generator","robots","description"],property:["og:type","og:title","og:url","og:image","og:image:alt","og:description","twitter:url","twitter:title","twitter:description","twitter:image","twitter:image:alt","twitter:card","twitter:site"]},g=Object.values(p),y={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},v=Object.entries(y).reduce(((e,t)=>{let[n,r]=t;return e[r]=n,e}),{}),b="data-rh",x="defaultTitle",w="defer",$="encodeSpecialCharacters",S="onChangeClientState",_="titleTemplate",C="prioritizeSeoTags",k=(e,t)=>{for(let n=e.length-1;n>=0;n-=1){const r=e[n];if(Object.prototype.hasOwnProperty.call(r,t))return r[t]}return null},E=e=>{let t=k(e,"title");const n=k(e,_);if(Array.isArray(t)&&(t=t.join("")),n&&t)return n.replace(/%s/g,(()=>t));const r=k(e,x);return t||r||void 0},T=e=>k(e,S)||(()=>{}),I=(e,t)=>t.filter((t=>"undefined"!==typeof t[e])).map((t=>t[e])).reduce(((e,t)=>({...e,...t})),{}),P=(e,t)=>t.filter((e=>"undefined"!==typeof e.base)).map((e=>e.base)).reverse().reduce(((t,n)=>{if(!t.length){const r=Object.keys(n);for(let i=0;i<r.length;i+=1){const o=r[i].toLowerCase();if(-1!==e.indexOf(o)&&n[o])return t.concat(n)}}return t}),[]),R=(e,t,n)=>{const r={};return n.filter((t=>{return!!Array.isArray(t[e])||("undefined"!==typeof t[e]&&(n=`Helmet: ${e} should be of type "Array". Instead found type "${typeof t[e]}"`,console&&"function"===typeof console.warn&&console.warn(n)),!1);var n})).map((t=>t[e])).reverse().reduce(((e,n)=>{const i={};n.filter((e=>{let n;const o=Object.keys(e);for(let r=0;r<o.length;r+=1){const i=o[r],a=i.toLowerCase();-1===t.indexOf(a)||"rel"===n&&"canonical"===e[n].toLowerCase()||"rel"===a&&"stylesheet"===e[a].toLowerCase()||(n=a),-1===t.indexOf(i)||"innerHTML"!==i&&"cssText"!==i&&"itemprop"!==i||(n=i)}if(!n||!e[n])return!1;const a=e[n].toLowerCase();return r[n]||(r[n]={}),i[n]||(i[n]={}),!r[n][a]&&(i[n][a]=!0,!0)})).reverse().forEach((t=>e.push(t)));const o=Object.keys(i);for(let t=0;t<o.length;t+=1){const e=o[t],n={...r[e],...i[e]};r[e]=n}return e}),[]).reverse()},M=(e,t)=>{if(Array.isArray(e)&&e.length)for(let n=0;n<e.length;n+=1){if(e[n][t])return!0}return!1},A=e=>Array.isArray(e)?e.join(""):e,O=(e,t)=>Array.isArray(e)?e.reduce(((e,n)=>(((e,t)=>{const n=Object.keys(e);for(let r=0;r<n.length;r+=1)if(t[n[r]]&&t[n[r]].includes(e[n[r]]))return!0;return!1})(n,t)?e.priority.push(n):e.default.push(n),e)),{priority:[],default:[]}):{default:e,priority:[]},L=(e,t)=>({...e,[t]:void 0}),N=["noscript","script","style"],D=function(e){return!1===(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])?String(e):String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")},F=e=>Object.keys(e).reduce(((t,n)=>{const r="undefined"!==typeof e[n]?`${n}="${e[n]}"`:`${n}`;return t?`${t} ${r}`:r}),""),j=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(e).reduce(((t,n)=>(t[y[n]||n]=e[n],t)),t)},z=(e,t)=>t.map(((t,n)=>{const i={key:n,[b]:!0};return Object.keys(t).forEach((e=>{const n=y[e]||e;if("innerHTML"===n||"cssText"===n){const e=t.innerHTML||t.cssText;i.dangerouslySetInnerHTML={__html:e}}else i[n]=t[e]})),r.createElement(e,i)})),B=function(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];switch(e){case"title":return{toComponent:()=>((e,t,n)=>{const i=j(n,{key:t,[b]:!0});return[r.createElement("title",i,t)]})(0,t.title,t.titleAttributes),toString:()=>((e,t,n,r)=>{const i=F(n),o=A(t);return i?`<${e} ${b}="true" ${i}>${D(o,r)}</${e}>`:`<${e} ${b}="true">${D(o,r)}</${e}>`})(e,t.title,t.titleAttributes,n)};case"bodyAttributes":case"htmlAttributes":return{toComponent:()=>j(t),toString:()=>F(t)};default:return{toComponent:()=>z(e,t),toString:()=>function(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return t.reduce(((t,r)=>{const i=r,o=Object.keys(i).filter((e=>!("innerHTML"===e||"cssText"===e))).reduce(((e,t)=>{const r="undefined"===typeof i[t]?t:`${t}="${D(i[t],n)}"`;return e?`${e} ${r}`:r}),""),a=i.innerHTML||i.cssText||"",s=-1===N.indexOf(e);return`${t}<${e} ${b}="true" ${o}${s?"/>":`>${a}</${e}>`}`}),"")}(e,t,n)}}},U=e=>{const{baseTag:t,bodyAttributes:n,encode:r=!0,htmlAttributes:i,noscriptTags:o,styleTags:a,title:s="",titleAttributes:l,prioritizeSeoTags:c}=e;let{linkTags:u,metaTags:d,scriptTags:p}=e,g={toComponent:()=>{},toString:()=>""};return c&&({priorityMethods:g,linkTags:u,metaTags:d,scriptTags:p}=(e=>{let{metaTags:t,linkTags:n,scriptTags:r,encode:i}=e;const o=O(t,m),a=O(n,h),s=O(r,f);return{priorityMethods:{toComponent:()=>[...z("meta",o.priority),...z("link",a.priority),...z("script",s.priority)],toString:()=>`${B("meta",o.priority,i)} ${B("link",a.priority,i)} ${B("script",s.priority,i)}`},metaTags:o.default,linkTags:a.default,scriptTags:s.default}})(e)),{priority:g,base:B("base",t,r),bodyAttributes:B("bodyAttributes",n,r),htmlAttributes:B("htmlAttributes",i,r),link:B("link",u,r),meta:B("meta",d,r),noscript:B("noscript",o,r),script:B("script",p,r),style:B("style",a,r),title:B("title",{title:s,titleAttributes:l},r)}},W=[],V=!("undefined"===typeof window||!window.document||!window.document.createElement),H=class{instances=[];canUseDOM=(()=>V)();context;value={setHelmet:e=>{this.context.helmet=e},helmetInstances:{get:()=>this.canUseDOM?W:this.instances,add:e=>{(this.canUseDOM?W:this.instances).push(e)},remove:e=>{const t=(this.canUseDOM?W:this.instances).indexOf(e);(this.canUseDOM?W:this.instances).splice(t,1)}}};constructor(e,t){this.context=e,this.canUseDOM=t||!1,t||(e.helmet=U({baseTag:[],bodyAttributes:{},encodeSpecialCharacters:!0,htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}}))}},q=r.createContext({}),G=class e extends r.Component{static canUseDOM=(()=>V)();helmetData;constructor(t){super(t),this.helmetData=new H(this.props.context||{},e.canUseDOM)}render(){return r.createElement(q.Provider,{value:this.helmetData.value},this.props.children)}},K=(e,t)=>{const n=document.head||document.querySelector("head"),r=n.querySelectorAll(`${e}[${b}]`),i=[].slice.call(r),o=[];let a;return t&&t.length&&t.forEach((t=>{const n=document.createElement(e);for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))if("innerHTML"===e)n.innerHTML=t.innerHTML;else if("cssText"===e)n.styleSheet?n.styleSheet.cssText=t.cssText:n.appendChild(document.createTextNode(t.cssText));else{const r=e,i="undefined"===typeof t[r]?"":t[r];n.setAttribute(e,i)}n.setAttribute(b,"true"),i.some(((e,t)=>(a=t,n.isEqualNode(e))))?i.splice(a,1):o.push(n)})),i.forEach((e=>e.parentNode?.removeChild(e))),o.forEach((e=>n.appendChild(e))),{oldTags:i,newTags:o}},Y=(e,t)=>{const n=document.getElementsByTagName(e)[0];if(!n)return;const r=n.getAttribute(b),i=r?r.split(","):[],o=[...i],a=Object.keys(t);for(const s of a){const e=t[s]||"";n.getAttribute(s)!==e&&n.setAttribute(s,e),-1===i.indexOf(s)&&i.push(s);const r=o.indexOf(s);-1!==r&&o.splice(r,1)}for(let s=o.length-1;s>=0;s-=1)n.removeAttribute(o[s]);i.length===o.length?n.removeAttribute(b):n.getAttribute(b)!==a.join(",")&&n.setAttribute(b,a.join(","))},Z=(e,t)=>{const{baseTag:n,bodyAttributes:r,htmlAttributes:i,linkTags:o,metaTags:a,noscriptTags:s,onChangeClientState:l,scriptTags:c,styleTags:u,title:d,titleAttributes:p}=e;Y("body",r),Y("html",i),((e,t)=>{"undefined"!==typeof e&&document.title!==e&&(document.title=A(e)),Y("title",t)})(d,p);const h={baseTag:K("base",n),linkTags:K("link",o),metaTags:K("meta",a),noscriptTags:K("noscript",s),scriptTags:K("script",c),styleTags:K("style",u)},f={},m={};Object.keys(h).forEach((e=>{const{newTags:t,oldTags:n}=h[e];t.length&&(f[e]=t),n.length&&(m[e]=h[e].oldTags)})),t&&t(),l(e,f,m)},X=null,Q=e=>{X&&cancelAnimationFrame(X),e.defer?X=requestAnimationFrame((()=>{Z(e,(()=>{X=null}))})):(Z(e),X=null)},J=class extends r.Component{rendered=!1;shouldComponentUpdate(e){return!d()(e,this.props)}componentDidUpdate(){this.emitChange()}componentWillUnmount(){const{helmetInstances:e}=this.props.context;e.remove(this),this.emitChange()}emitChange(){const{helmetInstances:e,setHelmet:t}=this.props.context;let n=null;const r=(i=e.get().map((e=>{const t={...e.props};return delete t.context,t})),{baseTag:P(["href"],i),bodyAttributes:I("bodyAttributes",i),defer:k(i,w),encode:k(i,$),htmlAttributes:I("htmlAttributes",i),linkTags:R("link",["rel","href"],i),metaTags:R("meta",["name","charset","http-equiv","property","itemprop"],i),noscriptTags:R("noscript",["innerHTML"],i),onChangeClientState:T(i),scriptTags:R("script",["src","innerHTML"],i),styleTags:R("style",["cssText"],i),title:E(i),titleAttributes:I("titleAttributes",i),prioritizeSeoTags:M(i,C)});var i;G.canUseDOM?Q(r):U&&(n=U(r)),t(n)}init(){if(this.rendered)return;this.rendered=!0;const{helmetInstances:e}=this.props.context;e.add(this),this.emitChange()}render(){return this.init(),null}},ee=class extends r.Component{static defaultProps={defer:!0,encodeSpecialCharacters:!0,prioritizeSeoTags:!1};shouldComponentUpdate(e){return!s()(L(this.props,"helmetData"),L(e,"helmetData"))}mapNestedChildrenToProps(e,t){if(!t)return null;switch(e.type){case"script":case"noscript":return{innerHTML:t};case"style":return{cssText:t};default:throw new Error(`<${e.type} /> elements are self-closing and can not contain children. Refer to our API for more information.`)}}flattenArrayTypeChildren(e,t,n,r){return{...t,[e.type]:[...t[e.type]||[],{...n,...this.mapNestedChildrenToProps(e,r)}]}}mapObjectTypeChildren(e,t,n,r){switch(e.type){case"title":return{...t,[e.type]:r,titleAttributes:{...n}};case"body":return{...t,bodyAttributes:{...n}};case"html":return{...t,htmlAttributes:{...n}};default:return{...t,[e.type]:{...n}}}}mapArrayTypeChildrenToProps(e,t){let n={...t};return Object.keys(e).forEach((t=>{n={...n,[t]:e[t]}})),n}warnOnInvalidChildren(e,t){return c()(g.some((t=>e.type===t)),"function"===typeof e.type?"You may be attempting to nest <Helmet> components within each other, which is not allowed. Refer to our API for more information.":`Only elements types ${g.join(", ")} are allowed. Helmet does not support rendering <${e.type}> elements. Refer to our API for more information.`),c()(!t||"string"===typeof t||Array.isArray(t)&&!t.some((e=>"string"!==typeof e)),`Helmet expects a string as a child of <${e.type}>. Did you forget to wrap your children in braces? ( <${e.type}>{\`\`}</${e.type}> ) Refer to our API for more information.`),!0}mapChildrenToProps(e,t){let n={};return r.Children.forEach(e,(e=>{if(!e||!e.props)return;const{children:r,...i}=e.props,o=Object.keys(i).reduce(((e,t)=>(e[v[t]||t]=i[t],e)),{});let{type:a}=e;switch("symbol"===typeof a?a=a.toString():this.warnOnInvalidChildren(e,r),a){case"Symbol(react.fragment)":t=this.mapChildrenToProps(r,t);break;case"link":case"meta":case"noscript":case"script":case"style":n=this.flattenArrayTypeChildren(e,n,o,r);break;default:t=this.mapObjectTypeChildren(e,t,o,r)}})),this.mapArrayTypeChildrenToProps(n,t)}render(){const{children:e,...t}=this.props;let n={...t},{helmetData:i}=t;if(e&&(n=this.mapChildrenToProps(e,n)),i&&!(i instanceof H)){i=new H(i.context,!0),delete n.helmetData}return i?r.createElement(J,{...n,context:i.value}):r.createElement(q.Consumer,null,(e=>r.createElement(J,{...n,context:e})))}},te=n(237),ne=r,re=Symbol.for("react-redux-context"),ie="undefined"!==typeof globalThis?globalThis:{};function oe(){if(!ne.createContext)return{};const e=ie[re]??(ie[re]=new Map);let t=e.get(ne.createContext);return t||(t=ne.createContext(null),e.set(ne.createContext,t)),t}var ae=oe(),se=()=>{throw new Error("uSES not initialized!")};function le(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae;return function(){return ne.useContext(e)}}var ce=le(),ue=se,de=(e,t)=>e===t;function pe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae;const t=e===ae?ce:le(e),n=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{equalityFn:r=de,devModeChecks:i={}}="function"===typeof n?{equalityFn:n}:n;const{store:o,subscription:a,getServerState:s,stabilityCheck:l,identityFunctionCheck:c}=t(),u=(ne.useRef(!0),ne.useCallback({[e.name]:t=>e(t)}[e.name],[e,l,i.stabilityCheck])),d=ue(a.addNestedSub,o.getState,s||o.getState,u,r);return ne.useDebugValue(d),d};return Object.assign(n,{withTypes:()=>n}),n}var he=pe();Symbol.for("react.element"),Symbol.for("react.portal"),Symbol.for("react.fragment"),Symbol.for("react.strict_mode"),Symbol.for("react.profiler"),Symbol.for("react.provider"),Symbol.for("react.context"),Symbol.for("react.server_context"),Symbol.for("react.forward_ref"),Symbol.for("react.suspense"),Symbol.for("react.suspense_list"),Symbol.for("react.memo"),Symbol.for("react.lazy"),Symbol.for("react.offscreen"),Symbol.for("react.client.reference");function fe(e){e()}var me={notify(){},get:()=>[]};function ge(e,t){let n,r=me,i=0,o=!1;function a(){c.onStateChange&&c.onStateChange()}function s(){i++,n||(n=t?t.addNestedSub(a):e.subscribe(a),r=function(){let e=null,t=null;return{clear(){e=null,t=null},notify(){fe((()=>{let t=e;for(;t;)t.callback(),t=t.next}))},get(){const t=[];let n=e;for(;n;)t.push(n),n=n.next;return t},subscribe(n){let r=!0;const i=t={callback:n,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){r&&null!==e&&(r=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}())}function l(){i--,n&&0===i&&(n(),n=void 0,r.clear(),r=me)}const c={addNestedSub:function(e){s();const t=r.subscribe(e);let n=!1;return()=>{n||(n=!0,t(),l())}},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:a,isSubscribed:function(){return o},trySubscribe:function(){o||(o=!0,s())},tryUnsubscribe:function(){o&&(o=!1,l())},getListeners:()=>r};return c}var ye=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),ve="undefined"!==typeof navigator&&"ReactNative"===navigator.product,be=ye||ve?ne.useLayoutEffect:ne.useEffect;Object.defineProperty,Object.getOwnPropertyNames,Object.getOwnPropertySymbols,Object.getOwnPropertyDescriptor,Object.getPrototypeOf,Object.prototype;var xe=function(e){let{store:t,context:n,children:r,serverState:i,stabilityCheck:o="once",identityFunctionCheck:a="once"}=e;const s=ne.useMemo((()=>{const e=ge(t);return{store:t,subscription:e,getServerState:i?()=>i:void 0,stabilityCheck:o,identityFunctionCheck:a}}),[t,i,o,a]),l=ne.useMemo((()=>t.getState()),[t]);be((()=>{const{subscription:e}=s;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),l!==t.getState()&&e.notifyNestedSubs(),()=>{e.tryUnsubscribe(),e.onStateChange=void 0}}),[s,l]);const c=n||ae;return ne.createElement(c.Provider,{value:s},r)};function we(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae;const t=e===ae?ce:le(e),n=()=>{const{store:e}=t();return e};return Object.assign(n,{withTypes:()=>n}),n}var $e=we();function Se(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae;const t=e===ae?$e:we(e),n=()=>t().dispatch;return Object.assign(n,{withTypes:()=>n}),n}var _e,Ce=Se();function ke(){return ke=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ke.apply(this,arguments)}(e=>{ue=e})(te.useSyncExternalStoreWithSelector),(e=>{0})(r.useSyncExternalStore),function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(_e||(_e={}));function Ee(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function Te(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function Ie(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function Pe(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}var Re;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(Re||(Re={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function Me(e,t,n){return void 0===n&&(n="/"),Ae(e,t,n,!1)}function Ae(e,t,n,r){let i=Ke(("string"===typeof t?Pe(t):t).pathname||"/",n);if(null==i)return null;let o=Oe(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(o);let a=null;for(let s=0;null==a&&s<o.length;++s){let e=Ge(i);a=Ve(o[s],e,r)}return a}function Oe(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let i=(e,i,o)=>{let a={relativePath:void 0===o?e.path||"":o,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};a.relativePath.startsWith("/")&&(Ee(a.relativePath.startsWith(r),'Absolute route path "'+a.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),a.relativePath=a.relativePath.slice(r.length));let s=Je([r,a.relativePath]),l=n.concat(a);e.children&&e.children.length>0&&(Ee(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+s+'".'),Oe(e.children,t,l,s)),(null!=e.path||e.index)&&t.push({path:s,score:We(s,e.index),routesMeta:l})};return e.forEach(((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of Le(e.path))i(e,t,r);else i(e,t)})),t}function Le(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(0===r.length)return i?[o,""]:[o];let a=Le(r.join("/")),s=[];return s.push(...a.map((e=>""===e?o:[o,e].join("/")))),i&&s.push(...a),s.map((t=>e.startsWith("/")&&""===t?"/":t))}const Ne=/^:[\w-]+$/,De=3,Fe=2,je=1,ze=10,Be=-2,Ue=e=>"*"===e;function We(e,t){let n=e.split("/"),r=n.length;return n.some(Ue)&&(r+=Be),t&&(r+=Fe),n.filter((e=>!Ue(e))).reduce(((e,t)=>e+(Ne.test(t)?De:""===t?je:ze)),r)}function Ve(e,t,n){void 0===n&&(n=!1);let{routesMeta:r}=e,i={},o="/",a=[];for(let s=0;s<r.length;++s){let e=r[s],l=s===r.length-1,c="/"===o?t:t.slice(o.length)||"/",u=qe({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),d=e.route;if(!u&&l&&n&&!r[r.length-1].route.index&&(u=qe({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(i,u.params),a.push({params:i,pathname:Je([o,u.pathname]),pathnameBase:et(Je([o,u.pathnameBase])),route:d}),"/"!==u.pathnameBase&&(o=Je([o,u.pathnameBase]))}return a}function He(e,t){void 0===t&&(t={});let n=e;n.endsWith("*")&&"*"!==n&&!n.endsWith("/*")&&(Te(!1,'Route path "'+n+'" will be treated as if it were "'+n.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+n.replace(/\*$/,"/*")+'".'),n=n.replace(/\*$/,"/*"));const r=n.startsWith("/")?"/":"",i=e=>null==e?"":"string"===typeof e?e:String(e);return r+n.split(/\/+/).map(((e,n,r)=>{if(n===r.length-1&&"*"===e){return i(t["*"])}const o=e.match(/^:([\w-]+)(\??)$/);if(o){const[,e,n]=o;let r=t[e];return Ee("?"===n||null!=r,'Missing ":'+e+'" param'),i(r)}return e.replace(/\?$/g,"")})).filter((e=>!!e)).join("/")}function qe(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);Te("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");let o=new RegExp(i,t?void 0:"i");return[o,r]}(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let o=i[0],a=o.replace(/(.)\/+$/,"$1"),s=i.slice(1);return{params:r.reduce(((e,t,n)=>{let{paramName:r,isOptional:i}=t;if("*"===r){let e=s[n]||"";a=o.slice(0,o.length-e.length).replace(/(.)\/+$/,"$1")}const l=s[n];return e[r]=i&&!l?void 0:(l||"").replace(/%2F/g,"/"),e}),{}),pathname:o,pathnameBase:a,pattern:e}}function Ge(e){try{return e.split("/").map((e=>decodeURIComponent(e).replace(/\//g,"%2F"))).join("/")}catch(Eu){return Te(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+Eu+")."),e}}function Ke(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function Ye(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function Ze(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function Xe(e,t){let n=Ze(e);return t?n.map(((e,t)=>t===n.length-1?e.pathname:e.pathnameBase)):n.map((e=>e.pathnameBase))}function Qe(e,t,n,r){let i;void 0===r&&(r=!1),"string"===typeof e?i=Pe(e):(i=ke({},e),Ee(!i.pathname||!i.pathname.includes("?"),Ye("?","pathname","search",i)),Ee(!i.pathname||!i.pathname.includes("#"),Ye("#","pathname","hash",i)),Ee(!i.search||!i.search.includes("#"),Ye("#","search","hash",i)));let o,a=""===e||""===i.pathname,s=a?"/":i.pathname;if(null==s)o=n;else{let e=t.length-1;if(!r&&s.startsWith("..")){let t=s.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}o=e>=0?t[e]:"/"}let l=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:i=""}="string"===typeof e?Pe(e):e,o=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:o,search:tt(r),hash:nt(i)}}(i,o),c=s&&"/"!==s&&s.endsWith("/"),u=(a||"."===s)&&n.endsWith("/");return l.pathname.endsWith("/")||!c&&!u||(l.pathname+="/"),l}const Je=e=>e.join("/").replace(/\/\/+/g,"/"),et=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),tt=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",nt=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function rt(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const it=["post","put","patch","delete"],ot=(new Set(it),["get",...it]);new Set(ot),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function at(){return at=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},at.apply(this,arguments)}const st=r.createContext(null);const lt=r.createContext(null);const ct=r.createContext(null);const ut=r.createContext(null);const dt=r.createContext({outlet:null,matches:[],isDataRoute:!1});const pt=r.createContext(null);function ht(){return null!=r.useContext(ut)}function ft(){return ht()||Ee(!1),r.useContext(ut).location}function mt(e){r.useContext(ct).static||r.useLayoutEffect(e)}function gt(){let{isDataRoute:e}=r.useContext(dt);return e?function(){let{router:e}=Et(Ct.UseNavigateStable),t=It(kt.UseNavigateStable),n=r.useRef(!1);mt((()=>{n.current=!0}));let i=r.useCallback((function(r,i){void 0===i&&(i={}),n.current&&("number"===typeof r?e.navigate(r):e.navigate(r,at({fromRouteId:t},i)))}),[e,t]);return i}():function(){ht()||Ee(!1);let e=r.useContext(st),{basename:t,future:n,navigator:i}=r.useContext(ct),{matches:o}=r.useContext(dt),{pathname:a}=ft(),s=JSON.stringify(Xe(o,n.v7_relativeSplatPath)),l=r.useRef(!1);mt((()=>{l.current=!0}));let c=r.useCallback((function(n,r){if(void 0===r&&(r={}),!l.current)return;if("number"===typeof n)return void i.go(n);let o=Qe(n,JSON.parse(s),a,"path"===r.relative);null==e&&"/"!==t&&(o.pathname="/"===o.pathname?t:Je([t,o.pathname])),(r.replace?i.replace:i.push)(o,r.state,r)}),[t,i,s,a,e]);return c}()}function yt(){let{matches:e}=r.useContext(dt),t=e[e.length-1];return t?t.params:{}}function vt(e,t){let{relative:n}=void 0===t?{}:t,{future:i}=r.useContext(ct),{matches:o}=r.useContext(dt),{pathname:a}=ft(),s=JSON.stringify(Xe(o,i.v7_relativeSplatPath));return r.useMemo((()=>Qe(e,JSON.parse(s),a,"path"===n)),[e,s,a,n])}function bt(e,t,n,i){ht()||Ee(!1);let{navigator:o}=r.useContext(ct),{matches:a}=r.useContext(dt),s=a[a.length-1],l=s?s.params:{},c=(s&&s.pathname,s?s.pathnameBase:"/");s&&s.route;let u,d=ft();if(t){var p;let e="string"===typeof t?Pe(t):t;"/"===c||(null==(p=e.pathname)?void 0:p.startsWith(c))||Ee(!1),u=e}else u=d;let h=u.pathname||"/",f=h;if("/"!==c){let e=c.replace(/^\//,"").split("/");f="/"+h.replace(/^\//,"").split("/").slice(e.length).join("/")}let m=Me(e,{pathname:f});let g=_t(m&&m.map((e=>Object.assign({},e,{params:Object.assign({},l,e.params),pathname:Je([c,o.encodeLocation?o.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?c:Je([c,o.encodeLocation?o.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),a,n,i);return t&&g?r.createElement(ut.Provider,{value:{location:at({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:_e.Pop}},g):g}function xt(){let e=function(){var e;let t=r.useContext(pt),n=Tt(kt.UseRouteError),i=It(kt.UseRouteError);if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[i]}(),t=rt(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:i};return r.createElement(r.Fragment,null,r.createElement("h2",null,"Unexpected Application Error!"),r.createElement("h3",{style:{fontStyle:"italic"}},t),n?r.createElement("pre",{style:o},n):null,null)}const wt=r.createElement(xt,null);class $t extends r.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?r.createElement(dt.Provider,{value:this.props.routeContext},r.createElement(pt.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function St(e){let{routeContext:t,match:n,children:i}=e,o=r.useContext(st);return o&&o.static&&o.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=n.route.id),r.createElement(dt.Provider,{value:t},i)}function _t(e,t,n,i){var o;if(void 0===t&&(t=[]),void 0===n&&(n=null),void 0===i&&(i=null),null==e){var a;if(!n)return null;if(n.errors)e=n.matches;else{if(!(null!=(a=i)&&a.v7_partialHydration&&0===t.length&&!n.initialized&&n.matches.length>0))return null;e=n.matches}}let s=e,l=null==(o=n)?void 0:o.errors;if(null!=l){let e=s.findIndex((e=>e.route.id&&void 0!==(null==l?void 0:l[e.route.id])));e>=0||Ee(!1),s=s.slice(0,Math.min(s.length,e+1))}let c=!1,u=-1;if(n&&i&&i.v7_partialHydration)for(let r=0;r<s.length;r++){let e=s[r];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(u=r),e.route.id){let{loaderData:t,errors:r}=n,i=e.route.loader&&void 0===t[e.route.id]&&(!r||void 0===r[e.route.id]);if(e.route.lazy||i){c=!0,s=u>=0?s.slice(0,u+1):[s[0]];break}}}return s.reduceRight(((e,i,o)=>{let a,d=!1,p=null,h=null;var f;n&&(a=l&&i.route.id?l[i.route.id]:void 0,p=i.route.errorElement||wt,c&&(u<0&&0===o?(f="route-fallback",!1||Pt[f]||(Pt[f]=!0),d=!0,h=null):u===o&&(d=!0,h=i.route.hydrateFallbackElement||null)));let m=t.concat(s.slice(0,o+1)),g=()=>{let t;return t=a?p:d?h:i.route.Component?r.createElement(i.route.Component,null):i.route.element?i.route.element:e,r.createElement(St,{match:i,routeContext:{outlet:e,matches:m,isDataRoute:null!=n},children:t})};return n&&(i.route.ErrorBoundary||i.route.errorElement||0===o)?r.createElement($t,{location:n.location,revalidation:n.revalidation,component:p,error:a,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):g()}),null)}var Ct=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Ct||{}),kt=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(kt||{});function Et(e){let t=r.useContext(st);return t||Ee(!1),t}function Tt(e){let t=r.useContext(lt);return t||Ee(!1),t}function It(e){let t=function(){let e=r.useContext(dt);return e||Ee(!1),e}(),n=t.matches[t.matches.length-1];return n.route.id||Ee(!1),n.route.id}const Pt={};i.startTransition;function Rt(e){let{to:t,replace:n,state:i,relative:o}=e;ht()||Ee(!1);let{future:a,static:s}=r.useContext(ct),{matches:l}=r.useContext(dt),{pathname:c}=ft(),u=gt(),d=Qe(t,Xe(l,a.v7_relativeSplatPath),c,"path"===o),p=JSON.stringify(d);return r.useEffect((()=>u(JSON.parse(p),{replace:n,state:i,relative:o})),[u,p,o,n,i]),null}function Mt(e){Ee(!1)}function At(e){let{basename:t="/",children:n=null,location:i,navigationType:o=_e.Pop,navigator:a,static:s=!1,future:l}=e;ht()&&Ee(!1);let c=t.replace(/^\/*/,"/"),u=r.useMemo((()=>({basename:c,navigator:a,static:s,future:at({v7_relativeSplatPath:!1},l)})),[c,l,a,s]);"string"===typeof i&&(i=Pe(i));let{pathname:d="/",search:p="",hash:h="",state:f=null,key:m="default"}=i,g=r.useMemo((()=>{let e=Ke(d,c);return null==e?null:{location:{pathname:e,search:p,hash:h,state:f,key:m},navigationType:o}}),[c,d,p,h,f,m,o]);return null==g?null:r.createElement(ct.Provider,{value:u},r.createElement(ut.Provider,{children:n,value:g}))}function Ot(e){let{children:t,location:n}=e;return bt(Lt(t),n)}new Promise((()=>{}));r.Component;function Lt(e,t){void 0===t&&(t=[]);let n=[];return r.Children.forEach(e,((e,i)=>{if(!r.isValidElement(e))return;let o=[...t,i];if(e.type===r.Fragment)return void n.push.apply(n,Lt(e.props.children,o));e.type!==Mt&&Ee(!1),e.props.index&&e.props.children&&Ee(!1);let a={id:e.props.id||o.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(a.children=Lt(e.props.children,o)),n.push(a)})),n}function Nt(){return Nt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Nt.apply(null,arguments)}var Dt;!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(Dt||(Dt={}));var Ft=function(e){return e};var jt="beforeunload",zt="popstate";function Bt(e){e.preventDefault(),e.returnValue=""}function Ut(){var e=[];return{get length(){return e.length},push:function(t){return e.push(t),function(){e=e.filter((function(e){return e!==t}))}},call:function(t){e.forEach((function(e){return e&&e(t)}))}}}function Wt(){return Math.random().toString(36).substr(2,8)}function Vt(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,i=void 0===r?"":r,o=e.hash,a=void 0===o?"":o;return i&&"?"!==i&&(n+="?"===i.charAt(0)?i:"?"+i),a&&"#"!==a&&(n+="#"===a.charAt(0)?a:"#"+a),n}function Ht(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}const qt=function(e){void 0===e&&(e={});var t=e.window,n=void 0===t?document.defaultView:t,r=n.history;function i(){var e=n.location,t=e.pathname,i=e.search,o=e.hash,a=r.state||{};return[a.idx,Ft({pathname:t,search:i,hash:o,state:a.usr||null,key:a.key||"default"})]}var o=null;n.addEventListener(zt,(function(){if(o)d.call(o),o=null;else{var e=Dt.Pop,t=i(),n=t[0],r=t[1];if(d.length){if(null!=n){var a=l-n;a&&(o={action:e,location:r,retry:function(){y(-1*a)}},y(a))}}else g(e)}}));var a=Dt.Pop,s=i(),l=s[0],c=s[1],u=Ut(),d=Ut();function p(e){return"string"===typeof e?e:Vt(e)}function h(e,t){return void 0===t&&(t=null),Ft(Nt({pathname:c.pathname,hash:"",search:""},"string"===typeof e?Ht(e):e,{state:t,key:Wt()}))}function f(e,t){return[{usr:e.state,key:e.key,idx:t},p(e)]}function m(e,t,n){return!d.length||(d.call({action:e,location:t,retry:n}),!1)}function g(e){a=e;var t=i();l=t[0],c=t[1],u.call({action:a,location:c})}function y(e){r.go(e)}null==l&&(l=0,r.replaceState(Nt({},r.state,{idx:l}),""));var v={get action(){return a},get location(){return c},createHref:p,push:function e(t,i){var o=Dt.Push,a=h(t,i);if(m(o,a,(function(){e(t,i)}))){var s=f(a,l+1),c=s[0],u=s[1];try{r.pushState(c,"",u)}catch(Eu){n.location.assign(u)}g(o)}},replace:function e(t,n){var i=Dt.Replace,o=h(t,n);if(m(i,o,(function(){e(t,n)}))){var a=f(o,l),s=a[0],c=a[1];r.replaceState(s,"",c),g(i)}},go:y,back:function(){y(-1)},forward:function(){y(1)},listen:function(e){return u.push(e)},block:function(e){var t=d.push(e);return 1===d.length&&n.addEventListener(jt,Bt),function(){t(),d.length||n.removeEventListener(jt,Bt)}}};return v}(),Gt=qt;var Kt=n(579);function Yt(e){let{basename:t,children:n,history:i}=e;const[o,a]=(0,r.useState)({action:i.action,location:i.location});return(0,r.useLayoutEffect)((()=>i.listen(a)),[i]),(0,Kt.jsx)(At,{basename:t,location:o.location,navigationType:o.action,navigator:i,children:n})}function Zt(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var Xt=(()=>"function"===typeof Symbol&&Symbol.observable||"@@observable")(),Qt=()=>Math.random().toString(36).substring(7).split("").join("."),Jt={INIT:`@@redux/INIT${Qt()}`,REPLACE:`@@redux/REPLACE${Qt()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Qt()}`};function en(e){if("object"!==typeof e||null===e)return!1;let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||null===Object.getPrototypeOf(e)}function tn(e,t,n){if("function"!==typeof e)throw new Error(Zt(2));if("function"===typeof t&&"function"===typeof n||"function"===typeof n&&"function"===typeof arguments[3])throw new Error(Zt(0));if("function"===typeof t&&"undefined"===typeof n&&(n=t,t=void 0),"undefined"!==typeof n){if("function"!==typeof n)throw new Error(Zt(1));return n(tn)(e,t)}let r=e,i=t,o=new Map,a=o,s=0,l=!1;function c(){a===o&&(a=new Map,o.forEach(((e,t)=>{a.set(t,e)})))}function u(){if(l)throw new Error(Zt(3));return i}function d(e){if("function"!==typeof e)throw new Error(Zt(4));if(l)throw new Error(Zt(5));let t=!0;c();const n=s++;return a.set(n,e),function(){if(t){if(l)throw new Error(Zt(6));t=!1,c(),a.delete(n),o=null}}}function p(e){if(!en(e))throw new Error(Zt(7));if("undefined"===typeof e.type)throw new Error(Zt(8));if("string"!==typeof e.type)throw new Error(Zt(17));if(l)throw new Error(Zt(9));try{l=!0,i=r(i,e)}finally{l=!1}return(o=a).forEach((e=>{e()})),e}p({type:Jt.INIT});return{dispatch:p,subscribe:d,getState:u,replaceReducer:function(e){if("function"!==typeof e)throw new Error(Zt(10));r=e,p({type:Jt.REPLACE})},[Xt]:function(){const e=d;return{subscribe(t){if("object"!==typeof t||null===t)throw new Error(Zt(11));function n(){const e=t;e.next&&e.next(u())}n();return{unsubscribe:e(n)}},[Xt](){return this}}}}}function nn(e){const t=Object.keys(e),n={};for(let a=0;a<t.length;a++){const r=t[a];0,"function"===typeof e[r]&&(n[r]=e[r])}const r=Object.keys(n);let i;try{!function(e){Object.keys(e).forEach((t=>{const n=e[t];if("undefined"===typeof n(void 0,{type:Jt.INIT}))throw new Error(Zt(12));if("undefined"===typeof n(void 0,{type:Jt.PROBE_UNKNOWN_ACTION()}))throw new Error(Zt(13))}))}(n)}catch(o){i=o}return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(i)throw i;let o=!1;const a={};for(let i=0;i<r.length;i++){const s=r[i],l=n[s],c=e[s],u=l(c,t);if("undefined"===typeof u){t&&t.type;throw new Error(Zt(14))}a[s]=u,o=o||u!==c}return o=o||r.length!==Object.keys(e).length,o?a:e}}function rn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?e=>e:1===t.length?t[0]:t.reduce(((e,t)=>function(){return e(t(...arguments))}))}function on(e){return t=>{let{dispatch:n,getState:r}=t;return t=>i=>"function"===typeof i?i(n,r,e):t(i)}}var an=on(),sn=on,ln=Symbol.for("immer-nothing"),cn=Symbol.for("immer-draftable"),un=Symbol.for("immer-state");function dn(e){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var pn=Object.getPrototypeOf;function hn(e){return!!e&&!!e[un]}function fn(e){return!!e&&(gn(e)||Array.isArray(e)||!!e[cn]||!!e.constructor?.[cn]||wn(e)||$n(e))}var mn=Object.prototype.constructor.toString();function gn(e){if(!e||"object"!==typeof e)return!1;const t=pn(e);if(null===t)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===mn}function yn(e,t){0===vn(e)?Reflect.ownKeys(e).forEach((n=>{t(n,e[n],e)})):e.forEach(((n,r)=>t(r,n,e)))}function vn(e){const t=e[un];return t?t.type_:Array.isArray(e)?1:wn(e)?2:$n(e)?3:0}function bn(e,t){return 2===vn(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function xn(e,t,n){const r=vn(e);2===r?e.set(t,n):3===r?e.add(n):e[t]=n}function wn(e){return e instanceof Map}function $n(e){return e instanceof Set}function Sn(e){return e.copy_||e.base_}function _n(e,t){if(wn(e))return new Map(e);if($n(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=gn(e);if(!0===t||"class_only"===t&&!n){const t=Object.getOwnPropertyDescriptors(e);delete t[un];let n=Reflect.ownKeys(t);for(let r=0;r<n.length;r++){const i=n[r],o=t[i];!1===o.writable&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(t[i]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[i]})}return Object.create(pn(e),t)}{const t=pn(e);if(null!==t&&n)return{...e};const r=Object.create(t);return Object.assign(r,e)}}function Cn(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return En(e)||hn(e)||!fn(e)||(vn(e)>1&&(e.set=e.add=e.clear=e.delete=kn),Object.freeze(e),t&&Object.entries(e).forEach((e=>{let[t,n]=e;return Cn(n,!0)}))),e}function kn(){dn(2)}function En(e){return Object.isFrozen(e)}var Tn,In={};function Pn(e){const t=In[e];return t||dn(0),t}function Rn(){return Tn}function Mn(e,t){t&&(Pn("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function An(e){On(e),e.drafts_.forEach(Nn),e.drafts_=null}function On(e){e===Tn&&(Tn=e.parent_)}function Ln(e){return Tn={drafts_:[],parent_:Tn,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Nn(e){const t=e[un];0===t.type_||1===t.type_?t.revoke_():t.revoked_=!0}function Dn(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return void 0!==e&&e!==n?(n[un].modified_&&(An(t),dn(4)),fn(e)&&(e=Fn(t,e),t.parent_||zn(t,e)),t.patches_&&Pn("Patches").generateReplacementPatches_(n[un].base_,e,t.patches_,t.inversePatches_)):e=Fn(t,n,[]),An(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==ln?e:void 0}function Fn(e,t,n){if(En(t))return t;const r=t[un];if(!r)return yn(t,((i,o)=>jn(e,r,t,i,o,n))),t;if(r.scope_!==e)return t;if(!r.modified_)return zn(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const t=r.copy_;let i=t,o=!1;3===r.type_&&(i=new Set(t),t.clear(),o=!0),yn(i,((i,a)=>jn(e,r,t,i,a,n,o))),zn(e,t,!1),n&&e.patches_&&Pn("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function jn(e,t,n,r,i,o,a){if(hn(i)){const a=Fn(e,i,o&&t&&3!==t.type_&&!bn(t.assigned_,r)?o.concat(r):void 0);if(xn(n,r,a),!hn(a))return;e.canAutoFreeze_=!1}else a&&n.add(i);if(fn(i)&&!En(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;Fn(e,i),t&&t.scope_.parent_||"symbol"===typeof r||!Object.prototype.propertyIsEnumerable.call(n,r)||zn(e,i)}}function zn(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Cn(t,n)}var Bn={get(e,t){if(t===un)return e;const n=Sn(e);if(!bn(n,t))return function(e,t,n){const r=Vn(t,n);return r?"value"in r?r.value:r.get?.call(e.draft_):void 0}(e,n,t);const r=n[t];return e.finalized_||!fn(r)?r:r===Wn(e.base_,t)?(qn(e),e.copy_[t]=Gn(r,e)):r},has:(e,t)=>t in Sn(e),ownKeys:e=>Reflect.ownKeys(Sn(e)),set(e,t,n){const r=Vn(Sn(e),t);if(r?.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const r=Wn(Sn(e),t),i=r?.[un];if(i&&i.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(function(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}(n,r)&&(void 0!==n||bn(e.base_,t)))return!0;qn(e),Hn(e)}return e.copy_[t]===n&&(void 0!==n||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty:(e,t)=>(void 0!==Wn(e.base_,t)||t in e.base_?(e.assigned_[t]=!1,qn(e),Hn(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0),getOwnPropertyDescriptor(e,t){const n=Sn(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r?{writable:!0,configurable:1!==e.type_||"length"!==t,enumerable:r.enumerable,value:n[t]}:r},defineProperty(){dn(11)},getPrototypeOf:e=>pn(e.base_),setPrototypeOf(){dn(12)}},Un={};function Wn(e,t){const n=e[un];return(n?Sn(n):e)[t]}function Vn(e,t){if(!(t in e))return;let n=pn(e);for(;n;){const e=Object.getOwnPropertyDescriptor(n,t);if(e)return e;n=pn(n)}}function Hn(e){e.modified_||(e.modified_=!0,e.parent_&&Hn(e.parent_))}function qn(e){e.copy_||(e.copy_=_n(e.base_,e.scope_.immer_.useStrictShallowCopy_))}yn(Bn,((e,t)=>{Un[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),Un.deleteProperty=function(e,t){return Un.set.call(this,e,t,void 0)},Un.set=function(e,t,n){return Bn.set.call(this,e[0],t,n,e[0])};function Gn(e,t){const n=wn(e)?Pn("MapSet").proxyMap_(e,t):$n(e)?Pn("MapSet").proxySet_(e,t):function(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:Rn(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,o=Bn;n&&(i=[r],o=Un);const{revoke:a,proxy:s}=Proxy.revocable(i,o);return r.draft_=s,r.revoke_=a,s}(e,t);return(t?t.scope_:Rn()).drafts_.push(n),n}function Kn(e){if(!fn(e)||En(e))return e;const t=e[un];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=_n(e,t.scope_.immer_.useStrictShallowCopy_)}else n=_n(e,!0);return yn(n,((e,t)=>{xn(n,e,Kn(t))})),t&&(t.finalized_=!1),n}var Yn=new class{constructor(e){var t=this;this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,t,n)=>{if("function"===typeof e&&"function"!==typeof t){const n=t;t=e;const r=this;return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n;for(var i=arguments.length,o=new Array(i>1?i-1:0),a=1;a<i;a++)o[a-1]=arguments[a];return r.produce(e,(e=>t.call(this,e,...o)))}}let r;if("function"!==typeof t&&dn(6),void 0!==n&&"function"!==typeof n&&dn(7),fn(e)){const i=Ln(this),o=Gn(e,void 0);let a=!0;try{r=t(o),a=!1}finally{a?An(i):On(i)}return Mn(i,n),Dn(r,i)}if(!e||"object"!==typeof e){if(r=t(e),void 0===r&&(r=e),r===ln&&(r=void 0),this.autoFreeze_&&Cn(r,!0),n){const t=[],i=[];Pn("Patches").generateReplacementPatches_(e,r,t,i),n(t,i)}return r}dn(1)},this.produceWithPatches=(e,n)=>{if("function"===typeof e)return function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return t.produceWithPatches(n,(t=>e(t,...i)))};let r,i;const o=this.produce(e,n,((e,t)=>{r=e,i=t}));return[o,r,i]},"boolean"===typeof e?.autoFreeze&&this.setAutoFreeze(e.autoFreeze),"boolean"===typeof e?.useStrictShallowCopy&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){fn(e)||dn(8),hn(e)&&(e=function(e){hn(e)||dn(10);return Kn(e)}(e));const t=Ln(this),n=Gn(e,void 0);return n[un].isManual_=!0,On(t),n}finishDraft(e,t){const n=e&&e[un];n&&n.isManual_||dn(9);const{scope_:r}=n;return Mn(r,t),Dn(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const r=t[n];if(0===r.path.length&&"replace"===r.op){e=r.value;break}}n>-1&&(t=t.slice(n+1));const r=Pn("Patches").applyPatches_;return hn(e)?r(e,t):this.produce(e,(e=>r(e,t)))}},Zn=Yn.produce;Yn.produceWithPatches.bind(Yn),Yn.setAutoFreeze.bind(Yn),Yn.setUseStrictShallowCopy.bind(Yn),Yn.applyPatches.bind(Yn),Yn.createDraft.bind(Yn),Yn.finishDraft.bind(Yn);var Xn="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"===typeof arguments[0]?rn:rn.apply(null,arguments)},Qn=("undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__,e=>e&&"function"===typeof e.match);function Jn(e,t){function n(){if(t){let n=t(...arguments);if(!n)throw new Error(Cr(0));return{type:e,payload:n.payload,..."meta"in n&&{meta:n.meta},..."error"in n&&{error:n.error}}}return{type:e,payload:arguments.length<=0?void 0:arguments[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=t=>function(e){return en(e)&&"type"in e&&"string"===typeof e.type}(t)&&t.type===e,n}var er=class e extends Array{constructor(){super(...arguments),Object.setPrototypeOf(this,e.prototype)}static get[Symbol.species](){return e}concat(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return super.concat.apply(this,t)}prepend(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return 1===n.length&&Array.isArray(n[0])?new e(...n[0].concat(this)):new e(...n.concat(this))}};function tr(e){return fn(e)?Zn(e,(()=>{})):e}function nr(e,t,n){if(e.has(t)){let r=e.get(t);return n.update&&(r=n.update(r,t,e),e.set(t,r)),r}if(!n.insert)throw new Error(Cr(10));const r=n.insert(t,e);return e.set(t,r),r}var rr="RTK_autoBatch",ir=e=>t=>{setTimeout(t,e)},or="undefined"!==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame:ir(10),ar=e=>function(t){const{autoBatch:n=!0}=t??{};let r=new er(e);return n&&r.push(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{type:"raf"};return t=>function(){const n=t(...arguments);let r=!0,i=!1,o=!1;const a=new Set,s="tick"===e.type?queueMicrotask:"raf"===e.type?or:"callback"===e.type?e.queueNotification:ir(e.timeout),l=()=>{o=!1,i&&(i=!1,a.forEach((e=>e())))};return Object.assign({},n,{subscribe(e){const t=n.subscribe((()=>r&&e()));return a.add(e),()=>{t(),a.delete(e)}},dispatch(e){try{return r=!e?.meta?.[rr],i=!r,i&&(o||(o=!0,s(l))),n.dispatch(e)}finally{r=!0}}})}}("object"===typeof n?n:void 0)),r};function sr(e){const t={},n=[];let r;const i={addCase(e,n){const r="string"===typeof e?e:e.type;if(!r)throw new Error(Cr(28));if(r in t)throw new Error(Cr(29));return t[r]=n,i},addMatcher:(e,t)=>(n.push({matcher:e,reducer:t}),i),addDefaultCase:e=>(r=e,i)};return e(i),[t,n,r]}function lr(e,t){let n,[r,i,o]=sr(t);if(function(e){return"function"===typeof e}(e))n=()=>tr(e());else{const t=tr(e);n=()=>t}function a(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n(),t=arguments.length>1?arguments[1]:void 0,a=[r[t.type],...i.filter((e=>{let{matcher:n}=e;return n(t)})).map((e=>{let{reducer:t}=e;return t}))];return 0===a.filter((e=>!!e)).length&&(a=[o]),a.reduce(((e,n)=>{if(n){if(hn(e)){const r=n(e,t);return void 0===r?e:r}if(fn(e))return Zn(e,(e=>n(e,t)));{const r=n(e,t);if(void 0===r){if(null===e)return e;throw Error("A case reducer on a non-draftable value must not return undefined")}return r}}return e}),e)}return a.getInitialState=n,a}var cr=(e,t)=>Qn(e)?e.match(t):e(t);function ur(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>t.some((t=>cr(t,e)))}var dr=function(){let e="",t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:21;for(;t--;)e+="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW"[64*Math.random()|0];return e},pr=["name","message","stack","code"],hr=class{constructor(e,t){this.payload=e,this.meta=t}_type},fr=class{constructor(e,t){this.payload=e,this.meta=t}_type},mr=e=>{if("object"===typeof e&&null!==e){const t={};for(const n of pr)"string"===typeof e[n]&&(t[n]=e[n]);return t}return{message:String(e)}},gr=(()=>{function e(e,t,n){const r=Jn(e+"/fulfilled",((e,t,n,r)=>({payload:e,meta:{...r||{},arg:n,requestId:t,requestStatus:"fulfilled"}}))),i=Jn(e+"/pending",((e,t,n)=>({payload:void 0,meta:{...n||{},arg:t,requestId:e,requestStatus:"pending"}}))),o=Jn(e+"/rejected",((e,t,r,i,o)=>({payload:i,error:(n&&n.serializeError||mr)(e||"Rejected"),meta:{...o||{},arg:r,requestId:t,rejectedWithValue:!!i,requestStatus:"rejected",aborted:"AbortError"===e?.name,condition:"ConditionError"===e?.name}})));return Object.assign((function(e){return(a,s,l)=>{const c=n?.idGenerator?n.idGenerator(e):dr(),u=new AbortController;let d,p;function h(e){p=e,u.abort()}const f=async function(){let f;try{let o=n?.condition?.(e,{getState:s,extra:l});if(null!==(m=o)&&"object"===typeof m&&"function"===typeof m.then&&(o=await o),!1===o||u.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};const g=new Promise(((e,t)=>{d=()=>{t({name:"AbortError",message:p||"Aborted"})},u.signal.addEventListener("abort",d)}));a(i(c,e,n?.getPendingMeta?.({requestId:c,arg:e},{getState:s,extra:l}))),f=await Promise.race([g,Promise.resolve(t(e,{dispatch:a,getState:s,extra:l,requestId:c,signal:u.signal,abort:h,rejectWithValue:(e,t)=>new hr(e,t),fulfillWithValue:(e,t)=>new fr(e,t)})).then((t=>{if(t instanceof hr)throw t;return t instanceof fr?r(t.payload,c,e,t.meta):r(t,c,e)}))])}catch(g){f=g instanceof hr?o(null,c,e,g.payload,g.meta):o(g,c,e)}finally{d&&u.signal.removeEventListener("abort",d)}var m;return n&&!n.dispatchConditionRejection&&o.match(f)&&f.meta.condition||a(f),f}();return Object.assign(f,{abort:h,requestId:c,arg:e,unwrap:()=>f.then(yr)})}}),{pending:i,rejected:o,fulfilled:r,settled:ur(o,r),typePrefix:e})}return e.withTypes=()=>e,e})();function yr(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}var vr=Symbol.for("rtk-slice-createasyncthunk");function br(e,t){return`${e}/${t}`}function xr(){let{creators:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=e?.asyncThunk?.[vr];return function(e){const{name:n,reducerPath:r=n}=e;if(!n)throw new Error(Cr(11));const i=("function"===typeof e.reducers?e.reducers(function(){function e(e,t){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...t}}return e.withTypes=()=>e,{reducer:e=>Object.assign({[e.name](){return e(...arguments)}}[e.name],{_reducerDefinitionType:"reducer"}),preparedReducer:(e,t)=>({_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:t}),asyncThunk:e}}()):e.reducers)||{},o=Object.keys(i),a={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},s={addCase(e,t){const n="string"===typeof e?e:e.type;if(!n)throw new Error(Cr(12));if(n in a.sliceCaseReducersByType)throw new Error(Cr(13));return a.sliceCaseReducersByType[n]=t,s},addMatcher:(e,t)=>(a.sliceMatchers.push({matcher:e,reducer:t}),s),exposeAction:(e,t)=>(a.actionCreators[e]=t,s),exposeCaseReducer:(e,t)=>(a.sliceCaseReducersByName[e]=t,s)};function l(){const[t={},n=[],r]="function"===typeof e.extraReducers?sr(e.extraReducers):[e.extraReducers],i={...t,...a.sliceCaseReducersByType};return lr(e.initialState,(e=>{for(let t in i)e.addCase(t,i[t]);for(let t of a.sliceMatchers)e.addMatcher(t.matcher,t.reducer);for(let t of n)e.addMatcher(t.matcher,t.reducer);r&&e.addDefaultCase(r)}))}o.forEach((r=>{const o=i[r],a={reducerName:r,type:br(n,r),createNotation:"function"===typeof e.reducers};!function(e){return"asyncThunk"===e._reducerDefinitionType}(o)?function(e,t,n){let r,i,{type:o,reducerName:a,createNotation:s}=e;if("reducer"in t){if(s&&!function(e){return"reducerWithPrepare"===e._reducerDefinitionType}(t))throw new Error(Cr(17));r=t.reducer,i=t.prepare}else r=t;n.addCase(o,r).exposeCaseReducer(a,r).exposeAction(a,i?Jn(o,i):Jn(o))}(a,o,s):function(e,t,n,r){let{type:i,reducerName:o}=e;if(!r)throw new Error(Cr(18));const{payloadCreator:a,fulfilled:s,pending:l,rejected:c,settled:u,options:d}=t,p=r(i,a,d);n.exposeAction(o,p),s&&n.addCase(p.fulfilled,s);l&&n.addCase(p.pending,l);c&&n.addCase(p.rejected,c);u&&n.addMatcher(p.settled,u);n.exposeCaseReducer(o,{fulfilled:s||Sr,pending:l||Sr,rejected:c||Sr,settled:u||Sr})}(a,o,s,t)}));const c=e=>e,u=new Map;let d;function p(e,t){return d||(d=l()),d(e,t)}function h(){return d||(d=l()),d.getInitialState()}function f(t){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function r(e){let r=e[t];return"undefined"===typeof r&&n&&(r=h()),r}function i(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c;const r=nr(u,n,{insert:()=>new WeakMap});return nr(r,t,{insert:()=>{const r={};for(const[i,o]of Object.entries(e.selectors??{}))r[i]=wr(o,t,h,n);return r}})}return{reducerPath:t,getSelectors:i,get selectors(){return i(r)},selectSlice:r}}const m={name:n,reducer:p,actions:a.actionCreators,caseReducers:a.sliceCaseReducersByName,getInitialState:h,...f(r),injectInto(e){let{reducerPath:t,...n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=t??r;return e.inject({reducerPath:i,reducer:p},n),{...m,...f(i,!0)}}};return m}}function wr(e,t,n,r){function i(i){let o=t(i);"undefined"===typeof o&&r&&(o=n());for(var a=arguments.length,s=new Array(a>1?a-1:0),l=1;l<a;l++)s[l-1]=arguments[l];return e(o,...s)}return i.unwrapped=e,i}var $r=xr();function Sr(){}var{assign:_r}=Object;Symbol.for("rtk-state-proxy-original");function Cr(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}const kr=e=>e=>t=>("page/redirectToRoute"===t.type&&Gt.push(t.payload),e(t));function Er(e,t){return function(){return e.apply(t,arguments)}}const{toString:Tr}=Object.prototype,{getPrototypeOf:Ir}=Object,Pr=(Rr=Object.create(null),e=>{const t=Tr.call(e);return Rr[t]||(Rr[t]=t.slice(8,-1).toLowerCase())});var Rr;const Mr=e=>(e=e.toLowerCase(),t=>Pr(t)===e),Ar=e=>t=>typeof t===e,{isArray:Or}=Array,Lr=Ar("undefined");const Nr=Mr("ArrayBuffer");const Dr=Ar("string"),Fr=Ar("function"),jr=Ar("number"),zr=e=>null!==e&&"object"===typeof e,Br=e=>{if("object"!==Pr(e))return!1;const t=Ir(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Ur=Mr("Date"),Wr=Mr("File"),Vr=Mr("Blob"),Hr=Mr("FileList"),qr=Mr("URLSearchParams"),[Gr,Kr,Yr,Zr]=["ReadableStream","Request","Response","Headers"].map(Mr);function Xr(e,t){let n,r,{allOwnKeys:i=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),Or(e))for(n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else{const r=i?Object.getOwnPropertyNames(e):Object.keys(e),o=r.length;let a;for(n=0;n<o;n++)a=r[n],t.call(null,e[a],a,e)}}function Qr(e,t){t=t.toLowerCase();const n=Object.keys(e);let r,i=n.length;for(;i-- >0;)if(r=n[i],t===r.toLowerCase())return r;return null}const Jr="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global,ei=e=>!Lr(e)&&e!==Jr;const ti=(ni="undefined"!==typeof Uint8Array&&Ir(Uint8Array),e=>ni&&e instanceof ni);var ni;const ri=Mr("HTMLFormElement"),ii=(e=>{let{hasOwnProperty:t}=e;return(e,n)=>t.call(e,n)})(Object.prototype),oi=Mr("RegExp"),ai=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};Xr(n,((n,i)=>{let o;!1!==(o=t(n,i,e))&&(r[i]=o||n)})),Object.defineProperties(e,r)},si="abcdefghijklmnopqrstuvwxyz",li="0123456789",ci={DIGIT:li,ALPHA:si,ALPHA_DIGIT:si+si.toUpperCase()+li};const ui=Mr("AsyncFunction"),di=(pi="function"===typeof setImmediate,hi=Fr(Jr.postMessage),pi?setImmediate:hi?((e,t)=>(Jr.addEventListener("message",(n=>{let{source:r,data:i}=n;r===Jr&&i===e&&t.length&&t.shift()()}),!1),n=>{t.push(n),Jr.postMessage(e,"*")}))(`axios@${Math.random()}`,[]):e=>setTimeout(e));var pi,hi;const fi="undefined"!==typeof queueMicrotask?queueMicrotask.bind(Jr):"undefined"!==typeof process&&process.nextTick||di,mi={isArray:Or,isArrayBuffer:Nr,isBuffer:function(e){return null!==e&&!Lr(e)&&null!==e.constructor&&!Lr(e.constructor)&&Fr(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"===typeof FormData&&e instanceof FormData||Fr(e.append)&&("formdata"===(t=Pr(e))||"object"===t&&Fr(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&Nr(e.buffer),t},isString:Dr,isNumber:jr,isBoolean:e=>!0===e||!1===e,isObject:zr,isPlainObject:Br,isReadableStream:Gr,isRequest:Kr,isResponse:Yr,isHeaders:Zr,isUndefined:Lr,isDate:Ur,isFile:Wr,isBlob:Vr,isRegExp:oi,isFunction:Fr,isStream:e=>zr(e)&&Fr(e.pipe),isURLSearchParams:qr,isTypedArray:ti,isFileList:Hr,forEach:Xr,merge:function e(){const{caseless:t}=ei(this)&&this||{},n={},r=(r,i)=>{const o=t&&Qr(n,i)||i;Br(n[o])&&Br(r)?n[o]=e(n[o],r):Br(r)?n[o]=e({},r):Or(r)?n[o]=r.slice():n[o]=r};for(let i=0,o=arguments.length;i<o;i++)arguments[i]&&Xr(arguments[i],r);return n},extend:function(e,t,n){let{allOwnKeys:r}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return Xr(t,((t,r)=>{n&&Fr(t)?e[r]=Er(t,n):e[r]=t}),{allOwnKeys:r}),e},trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,r)=>{let i,o,a;const s={};if(t=t||{},null==e)return t;do{for(i=Object.getOwnPropertyNames(e),o=i.length;o-- >0;)a=i[o],r&&!r(a,e,t)||s[a]||(t[a]=e[a],s[a]=!0);e=!1!==n&&Ir(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:Pr,kindOfTest:Mr,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return-1!==r&&r===n},toArray:e=>{if(!e)return null;if(Or(e))return e;let t=e.length;if(!jr(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[Symbol.iterator]).call(e);let r;for(;(r=n.next())&&!r.done;){const n=r.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const r=[];for(;null!==(n=e.exec(t));)r.push(n);return r},isHTMLForm:ri,hasOwnProperty:ii,hasOwnProp:ii,reduceDescriptors:ai,freezeMethods:e=>{ai(e,((t,n)=>{if(Fr(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const r=e[n];Fr(r)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:(e,t)=>{const n={},r=e=>{e.forEach((e=>{n[e]=!0}))};return Or(e)?r(e):r(String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n})),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:Qr,global:Jr,isContextDefined:ei,ALPHABET:ci,generateString:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ci.ALPHA_DIGIT,n="";const{length:r}=t;for(;e--;)n+=t[Math.random()*r|0];return n},isSpecCompliantForm:function(e){return!!(e&&Fr(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:e=>{const t=new Array(10),n=(e,r)=>{if(zr(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[r]=e;const i=Or(e)?[]:{};return Xr(e,((e,t)=>{const o=n(e,r+1);!Lr(o)&&(i[t]=o)})),t[r]=void 0,i}}return e};return n(e,0)},isAsyncFn:ui,isThenable:e=>e&&(zr(e)||Fr(e))&&Fr(e.then)&&Fr(e.catch),setImmediate:di,asap:fi};function gi(e,t,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}mi.inherits(gi,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:mi.toJSONObject(this.config),code:this.code,status:this.status}}});const yi=gi.prototype,vi={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{vi[e]={value:e}})),Object.defineProperties(gi,vi),Object.defineProperty(yi,"isAxiosError",{value:!0}),gi.from=(e,t,n,r,i,o)=>{const a=Object.create(yi);return mi.toFlatObject(e,a,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),gi.call(a,e.message,t,n,r,i),a.cause=e,a.name=e.name,o&&Object.assign(a,o),a};const bi=gi;function xi(e){return mi.isPlainObject(e)||mi.isArray(e)}function wi(e){return mi.endsWith(e,"[]")?e.slice(0,-2):e}function $i(e,t,n){return e?e.concat(t).map((function(e,t){return e=wi(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}const Si=mi.toFlatObject(mi,{},null,(function(e){return/^is[A-Z]/.test(e)}));const _i=function(e,t,n){if(!mi.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const r=(n=mi.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!mi.isUndefined(t[e])}))).metaTokens,i=n.visitor||c,o=n.dots,a=n.indexes,s=(n.Blob||"undefined"!==typeof Blob&&Blob)&&mi.isSpecCompliantForm(t);if(!mi.isFunction(i))throw new TypeError("visitor must be a function");function l(e){if(null===e)return"";if(mi.isDate(e))return e.toISOString();if(!s&&mi.isBlob(e))throw new bi("Blob is not supported. Use a Buffer instead.");return mi.isArrayBuffer(e)||mi.isTypedArray(e)?s&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,n,i){let s=e;if(e&&!i&&"object"===typeof e)if(mi.endsWith(n,"{}"))n=r?n:n.slice(0,-2),e=JSON.stringify(e);else if(mi.isArray(e)&&function(e){return mi.isArray(e)&&!e.some(xi)}(e)||(mi.isFileList(e)||mi.endsWith(n,"[]"))&&(s=mi.toArray(e)))return n=wi(n),s.forEach((function(e,r){!mi.isUndefined(e)&&null!==e&&t.append(!0===a?$i([n],r,o):null===a?n:n+"[]",l(e))})),!1;return!!xi(e)||(t.append($i(i,n,o),l(e)),!1)}const u=[],d=Object.assign(Si,{defaultVisitor:c,convertValue:l,isVisitable:xi});if(!mi.isObject(e))throw new TypeError("data must be an object");return function e(n,r){if(!mi.isUndefined(n)){if(-1!==u.indexOf(n))throw Error("Circular reference detected in "+r.join("."));u.push(n),mi.forEach(n,(function(n,o){!0===(!(mi.isUndefined(n)||null===n)&&i.call(t,n,mi.isString(o)?o.trim():o,r,d))&&e(n,r?r.concat(o):[o])})),u.pop()}}(e),t};function Ci(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function ki(e,t){this._pairs=[],e&&_i(e,this,t)}const Ei=ki.prototype;Ei.append=function(e,t){this._pairs.push([e,t])},Ei.toString=function(e){const t=e?function(t){return e.call(this,t,Ci)}:Ci;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};const Ti=ki;function Ii(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Pi(e,t,n){if(!t)return e;const r=n&&n.encode||Ii,i=n&&n.serialize;let o;if(o=i?i(t,n):mi.isURLSearchParams(t)?t.toString():new Ti(t,n).toString(r),o){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+o}return e}const Ri=class{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){mi.forEach(this.handlers,(function(t){null!==t&&e(t)}))}},Mi={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Ai={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:Ti,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},Oi="undefined"!==typeof window&&"undefined"!==typeof document,Li="object"===typeof navigator&&navigator||void 0,Ni=Oi&&(!Li||["ReactNative","NativeScript","NS"].indexOf(Li.product)<0),Di="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,Fi=Oi&&window.location.href||"http://localhost",ji={...e,...Ai};const zi=function(e){function t(e,n,r,i){let o=e[i++];if("__proto__"===o)return!0;const a=Number.isFinite(+o),s=i>=e.length;if(o=!o&&mi.isArray(r)?r.length:o,s)return mi.hasOwnProp(r,o)?r[o]=[r[o],n]:r[o]=n,!a;r[o]&&mi.isObject(r[o])||(r[o]=[]);return t(e,n,r[o],i)&&mi.isArray(r[o])&&(r[o]=function(e){const t={},n=Object.keys(e);let r;const i=n.length;let o;for(r=0;r<i;r++)o=n[r],t[o]=e[o];return t}(r[o])),!a}if(mi.isFormData(e)&&mi.isFunction(e.entries)){const n={};return mi.forEachEntry(e,((e,r)=>{t(function(e){return mi.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}(e),r,n,0)})),n}return null};const Bi={transitional:Mi,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const n=t.getContentType()||"",r=n.indexOf("application/json")>-1,i=mi.isObject(e);i&&mi.isHTMLForm(e)&&(e=new FormData(e));if(mi.isFormData(e))return r?JSON.stringify(zi(e)):e;if(mi.isArrayBuffer(e)||mi.isBuffer(e)||mi.isStream(e)||mi.isFile(e)||mi.isBlob(e)||mi.isReadableStream(e))return e;if(mi.isArrayBufferView(e))return e.buffer;if(mi.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let o;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return _i(e,new ji.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,r){return ji.isNode&&mi.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((o=mi.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return _i(o?{"files[]":e}:e,t&&new t,this.formSerializer)}}return i||r?(t.setContentType("application/json",!1),function(e,t,n){if(mi.isString(e))try{return(t||JSON.parse)(e),mi.trim(e)}catch(r){if("SyntaxError"!==r.name)throw r}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||Bi.transitional,n=t&&t.forcedJSONParsing,r="json"===this.responseType;if(mi.isResponse(e)||mi.isReadableStream(e))return e;if(e&&mi.isString(e)&&(n&&!this.responseType||r)){const n=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(i){if(n){if("SyntaxError"===i.name)throw bi.from(i,bi.ERR_BAD_RESPONSE,this,null,this.response);throw i}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ji.classes.FormData,Blob:ji.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};mi.forEach(["delete","get","head","post","put","patch"],(e=>{Bi.headers[e]={}}));const Ui=Bi,Wi=mi.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Vi=Symbol("internals");function Hi(e){return e&&String(e).trim().toLowerCase()}function qi(e){return!1===e||null==e?e:mi.isArray(e)?e.map(qi):String(e)}function Gi(e,t,n,r,i){return mi.isFunction(r)?r.call(this,t,n):(i&&(t=n),mi.isString(t)?mi.isString(r)?-1!==t.indexOf(r):mi.isRegExp(r)?r.test(t):void 0:void 0)}class Ki{constructor(e){e&&this.set(e)}set(e,t,n){const r=this;function i(e,t,n){const i=Hi(t);if(!i)throw new Error("header name must be a non-empty string");const o=mi.findKey(r,i);(!o||void 0===r[o]||!0===n||void 0===n&&!1!==r[o])&&(r[o||t]=qi(e))}const o=(e,t)=>mi.forEach(e,((e,n)=>i(e,n,t)));if(mi.isPlainObject(e)||e instanceof this.constructor)o(e,t);else if(mi.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))o((e=>{const t={};let n,r,i;return e&&e.split("\n").forEach((function(e){i=e.indexOf(":"),n=e.substring(0,i).trim().toLowerCase(),r=e.substring(i+1).trim(),!n||t[n]&&Wi[n]||("set-cookie"===n?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)})),t})(e),t);else if(mi.isHeaders(e))for(const[a,s]of e.entries())i(s,a,n);else null!=e&&i(t,e,n);return this}get(e,t){if(e=Hi(e)){const n=mi.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}(e);if(mi.isFunction(t))return t.call(this,e,n);if(mi.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Hi(e)){const n=mi.findKey(this,e);return!(!n||void 0===this[n]||t&&!Gi(0,this[n],n,t))}return!1}delete(e,t){const n=this;let r=!1;function i(e){if(e=Hi(e)){const i=mi.findKey(n,e);!i||t&&!Gi(0,n[i],i,t)||(delete n[i],r=!0)}}return mi.isArray(e)?e.forEach(i):i(e),r}clear(e){const t=Object.keys(this);let n=t.length,r=!1;for(;n--;){const i=t[n];e&&!Gi(0,this[i],i,e,!0)||(delete this[i],r=!0)}return r}normalize(e){const t=this,n={};return mi.forEach(this,((r,i)=>{const o=mi.findKey(n,i);if(o)return t[o]=qi(r),void delete t[i];const a=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,n)=>t.toUpperCase()+n))}(i):String(i).trim();a!==i&&delete t[i],t[a]=qi(r),n[a]=!0})),this}concat(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.constructor.concat(this,...t)}toJSON(e){const t=Object.create(null);return mi.forEach(this,((n,r)=>{null!=n&&!1!==n&&(t[r]=e&&mi.isArray(n)?n.join(", "):n)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((e=>{let[t,n]=e;return t+": "+n})).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e){const t=new this(e);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.forEach((e=>t.set(e))),t}static accessor(e){const t=(this[Vi]=this[Vi]={accessors:{}}).accessors,n=this.prototype;function r(e){const r=Hi(e);t[r]||(!function(e,t){const n=mi.toCamelCase(" "+t);["get","set","has"].forEach((r=>{Object.defineProperty(e,r+n,{value:function(e,n,i){return this[r].call(this,t,e,n,i)},configurable:!0})}))}(n,e),t[r]=!0)}return mi.isArray(e)?e.forEach(r):r(e),this}}Ki.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),mi.reduceDescriptors(Ki.prototype,((e,t)=>{let{value:n}=e,r=t[0].toUpperCase()+t.slice(1);return{get:()=>n,set(e){this[r]=e}}})),mi.freezeMethods(Ki);const Yi=Ki;function Zi(e,t){const n=this||Ui,r=t||n,i=Yi.from(r.headers);let o=r.data;return mi.forEach(e,(function(e){o=e.call(n,o,i.normalize(),t?t.status:void 0)})),i.normalize(),o}function Xi(e){return!(!e||!e.__CANCEL__)}function Qi(e,t,n){bi.call(this,null==e?"canceled":e,bi.ERR_CANCELED,t,n),this.name="CanceledError"}mi.inherits(Qi,bi,{__CANCEL__:!0});const Ji=Qi;function eo(e,t,n){const r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(new bi("Request failed with status code "+n.status,[bi.ERR_BAD_REQUEST,bi.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}const to=function(e,t){e=e||10;const n=new Array(e),r=new Array(e);let i,o=0,a=0;return t=void 0!==t?t:1e3,function(s){const l=Date.now(),c=r[a];i||(i=l),n[o]=s,r[o]=l;let u=a,d=0;for(;u!==o;)d+=n[u++],u%=e;if(o=(o+1)%e,o===a&&(a=(a+1)%e),l-i<t)return;const p=c&&l-c;return p?Math.round(1e3*d/p):void 0}};const no=function(e,t){let n,r,i=0,o=1e3/t;const a=function(t){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();i=o,n=null,r&&(clearTimeout(r),r=null),e.apply(null,t)};return[function(){const e=Date.now(),t=e-i;for(var s=arguments.length,l=new Array(s),c=0;c<s;c++)l[c]=arguments[c];t>=o?a(l,e):(n=l,r||(r=setTimeout((()=>{r=null,a(n)}),o-t)))},()=>n&&a(n)]},ro=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,r=0;const i=to(50,250);return no((n=>{const o=n.loaded,a=n.lengthComputable?n.total:void 0,s=o-r,l=i(s);r=o;e({loaded:o,total:a,progress:a?o/a:void 0,bytes:s,rate:l||void 0,estimated:l&&a&&o<=a?(a-o)/l:void 0,event:n,lengthComputable:null!=a,[t?"download":"upload"]:!0})}),n)},io=(e,t)=>{const n=null!=e;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},oo=e=>function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return mi.asap((()=>e(...n)))},ao=ji.hasStandardBrowserEnv?function(){const e=ji.navigator&&/(msie|trident)/i.test(ji.navigator.userAgent),t=document.createElement("a");let n;function r(n){let r=n;return e&&(t.setAttribute("href",r),r=t.href),t.setAttribute("href",r),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:"/"===t.pathname.charAt(0)?t.pathname:"/"+t.pathname}}return n=r(window.location.href),function(e){const t=mi.isString(e)?r(e):e;return t.protocol===n.protocol&&t.host===n.host}}():function(){return!0},so=ji.hasStandardBrowserEnv?{write(e,t,n,r,i,o){const a=[e+"="+encodeURIComponent(t)];mi.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),mi.isString(r)&&a.push("path="+r),mi.isString(i)&&a.push("domain="+i),!0===o&&a.push("secure"),document.cookie=a.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function lo(e,t){return e&&!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const co=e=>e instanceof Yi?{...e}:e;function uo(e,t){t=t||{};const n={};function r(e,t,n){return mi.isPlainObject(e)&&mi.isPlainObject(t)?mi.merge.call({caseless:n},e,t):mi.isPlainObject(t)?mi.merge({},t):mi.isArray(t)?t.slice():t}function i(e,t,n){return mi.isUndefined(t)?mi.isUndefined(e)?void 0:r(void 0,e,n):r(e,t,n)}function o(e,t){if(!mi.isUndefined(t))return r(void 0,t)}function a(e,t){return mi.isUndefined(t)?mi.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function s(n,i,o){return o in t?r(n,i):o in e?r(void 0,n):void 0}const l={url:o,method:o,data:o,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:s,headers:(e,t)=>i(co(e),co(t),!0)};return mi.forEach(Object.keys(Object.assign({},e,t)),(function(r){const o=l[r]||i,a=o(e[r],t[r],r);mi.isUndefined(a)&&o!==s||(n[r]=a)})),n}const po=e=>{const t=uo({},e);let n,{data:r,withXSRFToken:i,xsrfHeaderName:o,xsrfCookieName:a,headers:s,auth:l}=t;if(t.headers=s=Yi.from(s),t.url=Pi(lo(t.baseURL,t.url),e.params,e.paramsSerializer),l&&s.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),mi.isFormData(r))if(ji.hasStandardBrowserEnv||ji.hasStandardBrowserWebWorkerEnv)s.setContentType(void 0);else if(!1!==(n=s.getContentType())){const[e,...t]=n?n.split(";").map((e=>e.trim())).filter(Boolean):[];s.setContentType([e||"multipart/form-data",...t].join("; "))}if(ji.hasStandardBrowserEnv&&(i&&mi.isFunction(i)&&(i=i(t)),i||!1!==i&&ao(t.url))){const e=o&&a&&so.read(a);e&&s.set(o,e)}return t},ho="undefined"!==typeof XMLHttpRequest&&function(e){return new Promise((function(t,n){const r=po(e);let i=r.data;const o=Yi.from(r.headers).normalize();let a,s,l,c,u,{responseType:d,onUploadProgress:p,onDownloadProgress:h}=r;function f(){c&&c(),u&&u(),r.cancelToken&&r.cancelToken.unsubscribe(a),r.signal&&r.signal.removeEventListener("abort",a)}let m=new XMLHttpRequest;function g(){if(!m)return;const r=Yi.from("getAllResponseHeaders"in m&&m.getAllResponseHeaders());eo((function(e){t(e),f()}),(function(e){n(e),f()}),{data:d&&"text"!==d&&"json"!==d?m.response:m.responseText,status:m.status,statusText:m.statusText,headers:r,config:e,request:m}),m=null}m.open(r.method.toUpperCase(),r.url,!0),m.timeout=r.timeout,"onloadend"in m?m.onloadend=g:m.onreadystatechange=function(){m&&4===m.readyState&&(0!==m.status||m.responseURL&&0===m.responseURL.indexOf("file:"))&&setTimeout(g)},m.onabort=function(){m&&(n(new bi("Request aborted",bi.ECONNABORTED,e,m)),m=null)},m.onerror=function(){n(new bi("Network Error",bi.ERR_NETWORK,e,m)),m=null},m.ontimeout=function(){let t=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const i=r.transitional||Mi;r.timeoutErrorMessage&&(t=r.timeoutErrorMessage),n(new bi(t,i.clarifyTimeoutError?bi.ETIMEDOUT:bi.ECONNABORTED,e,m)),m=null},void 0===i&&o.setContentType(null),"setRequestHeader"in m&&mi.forEach(o.toJSON(),(function(e,t){m.setRequestHeader(t,e)})),mi.isUndefined(r.withCredentials)||(m.withCredentials=!!r.withCredentials),d&&"json"!==d&&(m.responseType=r.responseType),h&&([l,u]=ro(h,!0),m.addEventListener("progress",l)),p&&m.upload&&([s,c]=ro(p),m.upload.addEventListener("progress",s),m.upload.addEventListener("loadend",c)),(r.cancelToken||r.signal)&&(a=t=>{m&&(n(!t||t.type?new Ji(null,e,m):t),m.abort(),m=null)},r.cancelToken&&r.cancelToken.subscribe(a),r.signal&&(r.signal.aborted?a():r.signal.addEventListener("abort",a)));const y=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(r.url);y&&-1===ji.protocols.indexOf(y)?n(new bi("Unsupported protocol "+y+":",bi.ERR_BAD_REQUEST,e)):m.send(i||null)}))},fo=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let n,r=new AbortController;const i=function(e){if(!n){n=!0,a();const t=e instanceof Error?e:this.reason;r.abort(t instanceof bi?t:new Ji(t instanceof Error?t.message:t))}};let o=t&&setTimeout((()=>{o=null,i(new bi(`timeout ${t} of ms exceeded`,bi.ETIMEDOUT))}),t);const a=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach((e=>{e.unsubscribe?e.unsubscribe(i):e.removeEventListener("abort",i)})),e=null)};e.forEach((e=>e.addEventListener("abort",i)));const{signal:s}=r;return s.unsubscribe=()=>mi.asap(a),s}},mo=function*(e,t){let n=e.byteLength;if(!t||n<t)return void(yield e);let r,i=0;for(;i<n;)r=i+t,yield e.slice(i,r),i=r},go=async function*(e){if(e[Symbol.asyncIterator])return void(yield*e);const t=e.getReader();try{for(;;){const{done:e,value:n}=await t.read();if(e)break;yield n}}finally{await t.cancel()}},yo=(e,t,n,r)=>{const i=async function*(e,t){for await(const n of go(e))yield*mo(n,t)}(e,t);let o,a=0,s=e=>{o||(o=!0,r&&r(e))};return new ReadableStream({async pull(e){try{const{done:t,value:r}=await i.next();if(t)return s(),void e.close();let o=r.byteLength;if(n){let e=a+=o;n(e)}e.enqueue(new Uint8Array(r))}catch(t){throw s(t),t}},cancel:e=>(s(e),i.return())},{highWaterMark:2})},vo="function"===typeof fetch&&"function"===typeof Request&&"function"===typeof Response,bo=vo&&"function"===typeof ReadableStream,xo=vo&&("function"===typeof TextEncoder?(wo=new TextEncoder,e=>wo.encode(e)):async e=>new Uint8Array(await new Response(e).arrayBuffer()));var wo;const $o=function(e){try{for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return!!e(...n)}catch(i){return!1}},So=bo&&$o((()=>{let e=!1;const t=new Request(ji.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t})),_o=bo&&$o((()=>mi.isReadableStream(new Response("").body))),Co={stream:_o&&(e=>e.body)};var ko;vo&&(ko=new Response,["text","arrayBuffer","blob","formData","stream"].forEach((e=>{!Co[e]&&(Co[e]=mi.isFunction(ko[e])?t=>t[e]():(t,n)=>{throw new bi(`Response type '${e}' is not supported`,bi.ERR_NOT_SUPPORT,n)})})));const Eo=async(e,t)=>{const n=mi.toFiniteNumber(e.getContentLength());return null==n?(async e=>{if(null==e)return 0;if(mi.isBlob(e))return e.size;if(mi.isSpecCompliantForm(e)){const t=new Request(ji.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return mi.isArrayBufferView(e)||mi.isArrayBuffer(e)?e.byteLength:(mi.isURLSearchParams(e)&&(e+=""),mi.isString(e)?(await xo(e)).byteLength:void 0)})(t):n},To=vo&&(async e=>{let{url:t,method:n,data:r,signal:i,cancelToken:o,timeout:a,onDownloadProgress:s,onUploadProgress:l,responseType:c,headers:u,withCredentials:d="same-origin",fetchOptions:p}=po(e);c=c?(c+"").toLowerCase():"text";let h,f=fo([i,o&&o.toAbortSignal()],a);const m=f&&f.unsubscribe&&(()=>{f.unsubscribe()});let g;try{if(l&&So&&"get"!==n&&"head"!==n&&0!==(g=await Eo(u,r))){let e,n=new Request(t,{method:"POST",body:r,duplex:"half"});if(mi.isFormData(r)&&(e=n.headers.get("content-type"))&&u.setContentType(e),n.body){const[e,t]=io(g,ro(oo(l)));r=yo(n.body,65536,e,t)}}mi.isString(d)||(d=d?"include":"omit");const i="credentials"in Request.prototype;h=new Request(t,{...p,signal:f,method:n.toUpperCase(),headers:u.normalize().toJSON(),body:r,duplex:"half",credentials:i?d:void 0});let o=await fetch(h);const a=_o&&("stream"===c||"response"===c);if(_o&&(s||a&&m)){const e={};["status","statusText","headers"].forEach((t=>{e[t]=o[t]}));const t=mi.toFiniteNumber(o.headers.get("content-length")),[n,r]=s&&io(t,ro(oo(s),!0))||[];o=new Response(yo(o.body,65536,n,(()=>{r&&r(),m&&m()})),e)}c=c||"text";let y=await Co[mi.findKey(Co,c)||"text"](o,e);return!a&&m&&m(),await new Promise(((t,n)=>{eo(t,n,{data:y,headers:Yi.from(o.headers),status:o.status,statusText:o.statusText,config:e,request:h})}))}catch(y){if(m&&m(),y&&"TypeError"===y.name&&/fetch/i.test(y.message))throw Object.assign(new bi("Network Error",bi.ERR_NETWORK,e,h),{cause:y.cause||y});throw bi.from(y,y&&y.code,e,h)}}),Io={http:null,xhr:ho,fetch:To};mi.forEach(Io,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(n){}Object.defineProperty(e,"adapterName",{value:t})}}));const Po=e=>`- ${e}`,Ro=e=>mi.isFunction(e)||null===e||!1===e,Mo=e=>{e=mi.isArray(e)?e:[e];const{length:t}=e;let n,r;const i={};for(let o=0;o<t;o++){let t;if(n=e[o],r=n,!Ro(n)&&(r=Io[(t=String(n)).toLowerCase()],void 0===r))throw new bi(`Unknown adapter '${t}'`);if(r)break;i[t||"#"+o]=r}if(!r){const e=Object.entries(i).map((e=>{let[t,n]=e;return`adapter ${t} `+(!1===n?"is not supported by the environment":"is not available in the build")}));let n=t?e.length>1?"since :\n"+e.map(Po).join("\n"):" "+Po(e[0]):"as no adapter specified";throw new bi("There is no suitable adapter to dispatch the request "+n,"ERR_NOT_SUPPORT")}return r};function Ao(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Ji(null,e)}function Oo(e){Ao(e),e.headers=Yi.from(e.headers),e.data=Zi.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return Mo(e.adapter||Ui.adapter)(e).then((function(t){return Ao(e),t.data=Zi.call(e,e.transformResponse,t),t.headers=Yi.from(t.headers),t}),(function(t){return Xi(t)||(Ao(e),t&&t.response&&(t.response.data=Zi.call(e,e.transformResponse,t.response),t.response.headers=Yi.from(t.response.headers))),Promise.reject(t)}))}const Lo="1.7.7",No={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{No[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));const Do={};No.transitional=function(e,t,n){function r(e,t){return"[Axios v1.7.7] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,i,o)=>{if(!1===e)throw new bi(r(i," has been removed"+(t?" in "+t:"")),bi.ERR_DEPRECATED);return t&&!Do[i]&&(Do[i]=!0,console.warn(r(i," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,i,o)}};const Fo={assertOptions:function(e,t,n){if("object"!==typeof e)throw new bi("options must be an object",bi.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let i=r.length;for(;i-- >0;){const o=r[i],a=t[o];if(a){const t=e[o],n=void 0===t||a(t,o,e);if(!0!==n)throw new bi("option "+o+" must be "+n,bi.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new bi("Unknown option "+o,bi.ERR_BAD_OPTION)}},validators:No},jo=Fo.validators;class zo{constructor(e){this.defaults=e,this.interceptors={request:new Ri,response:new Ri}}async request(e,t){try{return await this._request(e,t)}catch(n){if(n instanceof Error){let e;Error.captureStackTrace?Error.captureStackTrace(e={}):e=new Error;const t=e.stack?e.stack.replace(/^.+\n/,""):"";try{n.stack?t&&!String(n.stack).endsWith(t.replace(/^.+\n.+\n/,""))&&(n.stack+="\n"+t):n.stack=t}catch(r){}}throw n}}_request(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{},t=uo(this.defaults,t);const{transitional:n,paramsSerializer:r,headers:i}=t;void 0!==n&&Fo.assertOptions(n,{silentJSONParsing:jo.transitional(jo.boolean),forcedJSONParsing:jo.transitional(jo.boolean),clarifyTimeoutError:jo.transitional(jo.boolean)},!1),null!=r&&(mi.isFunction(r)?t.paramsSerializer={serialize:r}:Fo.assertOptions(r,{encode:jo.function,serialize:jo.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase();let o=i&&mi.merge(i.common,i[t.method]);i&&mi.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete i[e]})),t.headers=Yi.concat(o,i);const a=[];let s=!0;this.interceptors.request.forEach((function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(s=s&&e.synchronous,a.unshift(e.fulfilled,e.rejected))}));const l=[];let c;this.interceptors.response.forEach((function(e){l.push(e.fulfilled,e.rejected)}));let u,d=0;if(!s){const e=[Oo.bind(this),void 0];for(e.unshift.apply(e,a),e.push.apply(e,l),u=e.length,c=Promise.resolve(t);d<u;)c=c.then(e[d++],e[d++]);return c}u=a.length;let p=t;for(d=0;d<u;){const e=a[d++],t=a[d++];try{p=e(p)}catch(Eu){t.call(this,Eu);break}}try{c=Oo.call(this,p)}catch(Eu){return Promise.reject(Eu)}for(d=0,u=l.length;d<u;)c=c.then(l[d++],l[d++]);return c}getUri(e){return Pi(lo((e=uo(this.defaults,e)).baseURL,e.url),e.params,e.paramsSerializer)}}mi.forEach(["delete","get","head","options"],(function(e){zo.prototype[e]=function(t,n){return this.request(uo(n||{},{method:e,url:t,data:(n||{}).data}))}})),mi.forEach(["post","put","patch"],(function(e){function t(t){return function(n,r,i){return this.request(uo(i||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}zo.prototype[e]=t(),zo.prototype[e+"Form"]=t(!0)}));const Bo=zo;class Uo{constructor(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise((function(e){t=e}));const n=this;this.promise.then((e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null})),this.promise.then=e=>{let t;const r=new Promise((e=>{n.subscribe(e),t=e})).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e((function(e,r,i){n.reason||(n.reason=new Ji(e,r,i),t(n.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new Uo((function(t){e=t})),cancel:e}}}const Wo=Uo;const Vo={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Vo).forEach((e=>{let[t,n]=e;Vo[n]=t}));const Ho=Vo;const qo=function e(t){const n=new Bo(t),r=Er(Bo.prototype.request,n);return mi.extend(r,Bo.prototype,n,{allOwnKeys:!0}),mi.extend(r,n,null,{allOwnKeys:!0}),r.create=function(n){return e(uo(t,n))},r}(Ui);qo.Axios=Bo,qo.CanceledError=Ji,qo.CancelToken=Wo,qo.isCancel=Xi,qo.VERSION=Lo,qo.toFormData=_i,qo.AxiosError=bi,qo.Cancel=qo.CanceledError,qo.all=function(e){return Promise.all(e)},qo.spread=function(e){return function(t){return e.apply(null,t)}},qo.isAxiosError=function(e){return mi.isObject(e)&&!0===e.isAxiosError},qo.mergeConfig=uo,qo.AxiosHeaders=Yi,qo.formToJSON=e=>zi(mi.isHTMLForm(e)?new FormData(e):e),qo.getAdapter=Mo,qo.HttpStatusCode=Ho,qo.default=qo;const Go=qo;var Ko;!function(e){e[e.CONTINUE=100]="CONTINUE",e[e.SWITCHING_PROTOCOLS=101]="SWITCHING_PROTOCOLS",e[e.PROCESSING=102]="PROCESSING",e[e.EARLY_HINTS=103]="EARLY_HINTS",e[e.OK=200]="OK",e[e.CREATED=201]="CREATED",e[e.ACCEPTED=202]="ACCEPTED",e[e.NON_AUTHORITATIVE_INFORMATION=203]="NON_AUTHORITATIVE_INFORMATION",e[e.NO_CONTENT=204]="NO_CONTENT",e[e.RESET_CONTENT=205]="RESET_CONTENT",e[e.PARTIAL_CONTENT=206]="PARTIAL_CONTENT",e[e.MULTI_STATUS=207]="MULTI_STATUS",e[e.MULTIPLE_CHOICES=300]="MULTIPLE_CHOICES",e[e.MOVED_PERMANENTLY=301]="MOVED_PERMANENTLY",e[e.MOVED_TEMPORARILY=302]="MOVED_TEMPORARILY",e[e.SEE_OTHER=303]="SEE_OTHER",e[e.NOT_MODIFIED=304]="NOT_MODIFIED",e[e.USE_PROXY=305]="USE_PROXY",e[e.TEMPORARY_REDIRECT=307]="TEMPORARY_REDIRECT",e[e.PERMANENT_REDIRECT=308]="PERMANENT_REDIRECT",e[e.BAD_REQUEST=400]="BAD_REQUEST",e[e.UNAUTHORIZED=401]="UNAUTHORIZED",e[e.PAYMENT_REQUIRED=402]="PAYMENT_REQUIRED",e[e.FORBIDDEN=403]="FORBIDDEN",e[e.NOT_FOUND=404]="NOT_FOUND",e[e.METHOD_NOT_ALLOWED=405]="METHOD_NOT_ALLOWED",e[e.NOT_ACCEPTABLE=406]="NOT_ACCEPTABLE",e[e.PROXY_AUTHENTICATION_REQUIRED=407]="PROXY_AUTHENTICATION_REQUIRED",e[e.REQUEST_TIMEOUT=408]="REQUEST_TIMEOUT",e[e.CONFLICT=409]="CONFLICT",e[e.GONE=410]="GONE",e[e.LENGTH_REQUIRED=411]="LENGTH_REQUIRED",e[e.PRECONDITION_FAILED=412]="PRECONDITION_FAILED",e[e.REQUEST_TOO_LONG=413]="REQUEST_TOO_LONG",e[e.REQUEST_URI_TOO_LONG=414]="REQUEST_URI_TOO_LONG",e[e.UNSUPPORTED_MEDIA_TYPE=415]="UNSUPPORTED_MEDIA_TYPE",e[e.REQUESTED_RANGE_NOT_SATISFIABLE=416]="REQUESTED_RANGE_NOT_SATISFIABLE",e[e.EXPECTATION_FAILED=417]="EXPECTATION_FAILED",e[e.IM_A_TEAPOT=418]="IM_A_TEAPOT",e[e.INSUFFICIENT_SPACE_ON_RESOURCE=419]="INSUFFICIENT_SPACE_ON_RESOURCE",e[e.METHOD_FAILURE=420]="METHOD_FAILURE",e[e.MISDIRECTED_REQUEST=421]="MISDIRECTED_REQUEST",e[e.UNPROCESSABLE_ENTITY=422]="UNPROCESSABLE_ENTITY",e[e.LOCKED=423]="LOCKED",e[e.FAILED_DEPENDENCY=424]="FAILED_DEPENDENCY",e[e.UPGRADE_REQUIRED=426]="UPGRADE_REQUIRED",e[e.PRECONDITION_REQUIRED=428]="PRECONDITION_REQUIRED",e[e.TOO_MANY_REQUESTS=429]="TOO_MANY_REQUESTS",e[e.REQUEST_HEADER_FIELDS_TOO_LARGE=431]="REQUEST_HEADER_FIELDS_TOO_LARGE",e[e.UNAVAILABLE_FOR_LEGAL_REASONS=451]="UNAVAILABLE_FOR_LEGAL_REASONS",e[e.INTERNAL_SERVER_ERROR=500]="INTERNAL_SERVER_ERROR",e[e.NOT_IMPLEMENTED=501]="NOT_IMPLEMENTED",e[e.BAD_GATEWAY=502]="BAD_GATEWAY",e[e.SERVICE_UNAVAILABLE=503]="SERVICE_UNAVAILABLE",e[e.GATEWAY_TIMEOUT=504]="GATEWAY_TIMEOUT",e[e.HTTP_VERSION_NOT_SUPPORTED=505]="HTTP_VERSION_NOT_SUPPORTED",e[e.INSUFFICIENT_STORAGE=507]="INSUFFICIENT_STORAGE",e[e.NETWORK_AUTHENTICATION_REQUIRED=511]="NETWORK_AUTHENTICATION_REQUIRED"}(Ko||(Ko={}));const Yo=e=>"number"==typeof e&&!isNaN(e),Zo=e=>"string"==typeof e,Xo=e=>"function"==typeof e,Qo=e=>(0,r.isValidElement)(e)||Zo(e)||Xo(e)||Yo(e);function Jo(e){let{enter:t,exit:n,appendPosition:i=!1,collapse:o=!0,collapseDuration:a=300}=e;return function(e){let{children:s,position:l,preventExitTransition:c,done:u,nodeRef:d,isIn:p,playToast:h}=e;const f=i?`${t}--${l}`:t,m=i?`${n}--${l}`:n,g=(0,r.useRef)(0);return(0,r.useLayoutEffect)((()=>{const e=d.current,t=f.split(" "),n=r=>{r.target===d.current&&(h(),e.removeEventListener("animationend",n),e.removeEventListener("animationcancel",n),0===g.current&&"animationcancel"!==r.type&&e.classList.remove(...t))};e.classList.add(...t),e.addEventListener("animationend",n),e.addEventListener("animationcancel",n)}),[]),(0,r.useEffect)((()=>{const e=d.current,t=()=>{e.removeEventListener("animationend",t),o?function(e,t,n){void 0===n&&(n=300);const{scrollHeight:r,style:i}=e;requestAnimationFrame((()=>{i.minHeight="initial",i.height=r+"px",i.transition=`all ${n}ms`,requestAnimationFrame((()=>{i.height="0",i.padding="0",i.margin="0",setTimeout(t,n)}))}))}(e,u,a):u()};p||(c?t():(g.current=1,e.className+=` ${m}`,e.addEventListener("animationend",t)))}),[p]),r.createElement(r.Fragment,null,s)}}const ea=new Map;let ta=[];const na=new Set,ra=()=>ea.size>0;function ia(e,t){var n;if(t)return!(null==(n=ea.get(t))||!n.isToastActive(e));let r=!1;return ea.forEach((t=>{t.isToastActive(e)&&(r=!0)})),r}function oa(e,t){Qo(e)&&(ra()||ta.push({content:e,options:t}),ea.forEach((n=>{n.buildToast(e,t)})))}function aa(e,t){ea.forEach((n=>{null!=t&&null!=t&&t.containerId?(null==t?void 0:t.containerId)===n.id&&n.toggle(e,null==t?void 0:t.id):n.toggle(e,null==t?void 0:t.id)}))}let sa=1;const la=()=>""+sa++;function ca(e){return e&&(Zo(e.toastId)||Yo(e.toastId))?e.toastId:la()}function ua(e,t){return oa(e,t),t.toastId}function da(e,t){return{...t,type:t&&t.type||e,toastId:ca(t)}}function pa(e){return(t,n)=>ua(t,da(e,n))}function ha(e,t){return ua(e,da("default",t))}ha.loading=(e,t)=>ua(e,da("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...t})),ha.promise=function(e,t,n){let r,{pending:i,error:o,success:a}=t;i&&(r=Zo(i)?ha.loading(i,n):ha.loading(i.render,{...n,...i}));const s={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},l=(e,t,i)=>{if(null==t)return void ha.dismiss(r);const o={type:e,...s,...n,data:i},a=Zo(t)?{render:t}:t;return r?ha.update(r,{...o,...a}):ha(a.render,{...o,...a}),i},c=Xo(e)?e():e;return c.then((e=>l("success",a,e))).catch((e=>l("error",o,e))),c},ha.success=pa("success"),ha.info=pa("info"),ha.error=pa("error"),ha.warning=pa("warning"),ha.warn=ha.warning,ha.dark=(e,t)=>ua(e,da("default",{theme:"dark",...t})),ha.dismiss=function(e){!function(e){var t;if(ra()){if(null==e||Zo(t=e)||Yo(t))ea.forEach((t=>{t.removeToast(e)}));else if(e&&("containerId"in e||"id"in e)){const t=ea.get(e.containerId);t?t.removeToast(e.id):ea.forEach((t=>{t.removeToast(e.id)}))}}else ta=ta.filter((t=>null!=e&&t.options.toastId!==e))}(e)},ha.clearWaitingQueue=function(e){void 0===e&&(e={}),ea.forEach((t=>{!t.props.limit||e.containerId&&t.id!==e.containerId||t.clearQueue()}))},ha.isActive=ia,ha.update=function(e,t){void 0===t&&(t={});const n=((e,t)=>{var n;let{containerId:r}=t;return null==(n=ea.get(r||1))?void 0:n.toasts.get(e)})(e,t);if(n){const{props:r,content:i}=n,o={delay:100,...r,...t,toastId:t.toastId||e,updateId:la()};o.toastId!==e&&(o.staleId=e);const a=o.render||i;delete o.render,ua(a,o)}},ha.done=e=>{ha.update(e,{progress:1})},ha.onChange=function(e){return na.add(e),()=>{na.delete(e)}},ha.play=e=>aa(!0,e),ha.pause=e=>aa(!1,e);"undefined"!=typeof window?r.useLayoutEffect:r.useEffect;const fa=function(e,t){return void 0===t&&(t=!1),{enter:`Toastify--animate Toastify__${e}-enter`,exit:`Toastify--animate Toastify__${e}-exit`,appendPosition:t}};Jo(fa("bounce",!0)),Jo(fa("slide",!0)),Jo(fa("zoom")),Jo(fa("flip"));const ma="nutrition-user",ga=()=>{try{const e=localStorage.getItem(ma);return e?JSON.parse(e):null}catch(Eu){return console.error("Error retrieving user from localStorage",Eu),null}},ya={[Ko.BAD_REQUEST]:!0,[Ko.UNAUTHORIZED]:!0,[Ko.NOT_FOUND]:!0},va=Jn("data/loadMeals"),ba=Jn("data/setMealsDataLoadingStatus"),xa=Jn("data/loadUsers"),wa=Jn("data/setUsersDataLoadingStatus"),$a=Jn("data/setActiveUser"),Sa=Jn("data/removeMeal"),_a=Jn("data/removeTrainingSession"),Ca=Jn("data/setUserWeight"),ka=Jn("data/setUserTarget"),Ea=Jn("data/setUserActivity"),Ta=Jn("data/addNewMeal"),Ia=Jn("data/setUploadedPath"),Pa=Jn("user/requireAuthorization"),Ra=Jn("user/setUserInformation"),Ma=Jn("user/trackUserMeal"),Aa=Jn("user/trackUserTrainingSession"),Oa=Jn("page/setActiveMealType"),La=Jn("page/setActiveMeal"),Na=Jn("page/setStatusMessage"),Da=Jn("page/redirectToRoute"),Fa=Jn("page/setLoginFormOpened"),ja=Jn("page/setRegisterFormOpened"),za=Jn("page/changeRegistrationStep"),Ba=Jn("page/setActiveTraining"),Ua=Jn("page/setNewMealFormOpened"),Wa=Jn("page/setTrainingFormOpened"),Va=Jn("page/setMealFormOpened"),Ha=lr({isMealsDataLoading:!1,isUsersDataLoading:!1,meals:[],users:[]},(e=>{e.addCase(va,((e,t)=>{e.meals=t.payload.meals})).addCase(ba,((e,t)=>{e.isMealsDataLoading=t.payload.isMealsDataLoading})).addCase(xa,((e,t)=>{e.users=t.payload.users})).addCase(wa,((e,t)=>{e.isUsersDataLoading=t.payload.isUsersDataLoading})).addCase(Ta,((e,t)=>{const n=t.payload.meal;e.meals.push(n)})).addCase(Ma,((e,t)=>{const{user:n,meal:r}=t.payload,i=new Date,o=e.users.findIndex((e=>e.id===n.id));-1!==o?(e.users[o].mealSchedule||(e.users[o].mealSchedule=[]),e.users[o].mealSchedule.push([r,i])):console.error("User not found in state")})).addCase(Aa,((e,t)=>{const{user:n,session:r}=t.payload,i=e.users.findIndex((e=>e.id===n.id));-1!==i?(e.users[i].trainingSessions||(e.users[i].trainingSessions=[]),e.users[i].trainingSessions.push(r)):console.error("User not found in state")})).addCase(Ca,((e,t)=>{const{user:n,newWeight:r}=t.payload,i=e.users.findIndex((e=>e.id===n.id));-1!==i?e.users[i].weight=r:console.error("User not found in state")})).addCase(ka,((e,t)=>{const{user:n,newTarget:r}=t.payload,i=e.users.findIndex((e=>e.id===n.id));-1!==i?e.users[i].target=r:console.error("User not found in state")})).addCase(Ea,((e,t)=>{const{user:n,newActivity:r}=t.payload,i=e.users.findIndex((e=>e.id===n.id));-1!==i?e.users[i].activityLevel=r:console.error("User not found in state")})).addCase(Sa,((e,t)=>{const{user:n,meal:r}=t.payload,i=e.users.findIndex((e=>e.id===n.id));-1!==i&&(e.users[i].mealSchedule=e.users[i].mealSchedule.filter((e=>e[0].id!==r.id)))})).addCase(_a,((e,t)=>{const{user:n,training:r}=t.payload,i=e.users.findIndex((e=>e.id===n.id));-1!==i&&(e.users[i].trainingSessions=e.users[i].trainingSessions.filter((e=>e.id!==r.id)))}))}));let qa=function(e){return e.Landing="/nutrition",e.Root="/nutrition/home",e.UserPage="/nutrition/user/:id",e.MealPage="/nutrition/meal/:id",e.MealsByTypePage="/nutrition/meals/:type",e}({}),Ga=function(e){return e.Meals="nutrition-db/meals",e.Users="nutrition-db/users",e.Login="nutrition-db/login",e}({}),Ka=function(e){return e.Breakfast="Breakfast",e.Lunch="Lunch",e.Dinner="Dinner",e.Snack="Snack",e}({});const Ya={[Ka.Breakfast]:"\u0417\u0430\u0432\u0442\u0440\u0430\u043a",[Ka.Lunch]:"\u041e\u0431\u0435\u0434",[Ka.Dinner]:"\u0423\u0436\u0438\u043d",[Ka.Snack]:"\u041f\u0435\u0440\u0435\u043a\u0443\u0441"};let Za=function(e){return e.Walking="Walking",e.Running="Running",e.Cardio="Cardio",e.Gym="Gym",e.Swimming="Swimming",e}({});const Xa={[Za.Walking]:"\u0425\u043e\u0434\u044c\u0431\u0430",[Za.Running]:"\u0411\u0435\u0433",[Za.Cardio]:"\u041a\u0430\u0440\u0434\u0438\u043e",[Za.Gym]:"\u0421\u043f\u043e\u0440\u0442\u0437\u0430\u043b",[Za.Swimming]:"\u041f\u043b\u0430\u0432\u0430\u043d\u0438\u0435"};const Qa={Walking:{slow:{intensity:"\u041d\u0438\u0437\u043a\u043e",speed:3.2,met:2},moderate:{intensity:"\u0421\u0440\u0435\u0434\u043d\u0435",speed:5,met:3.5},fast:{intensity:"\u0412\u044b\u0441\u043e\u043a\u043e",speed:6.4,met:5},veryFast:{intensity:"\u041e\u0447\u0435\u043d\u044c \u0432\u044b\u0441\u043e\u043a\u043e",speed:8,met:6.3}},Running:{slow:{intensity:"\u041d\u0438\u0437\u043a\u043e",speed:8,met:8.3},moderate:{intensity:"\u0421\u0440\u0435\u0434\u043d\u0435",speed:10,met:9.8},fast:{intensity:"\u0412\u044b\u0441\u043e\u043a\u043e",speed:12,met:11.5},veryFast:{intensity:"\u041e\u0447\u0435\u043d\u044c \u0432\u044b\u0441\u043e\u043a\u043e",speed:14,met:13}},Swimming:{low:{intensity:"\u041d\u0438\u0437\u043a\u043e",met:6},moderate:{intensity:"\u0421\u0440\u0435\u0434\u043d\u0435",met:8},high:{intensity:"\u0412\u044b\u0441\u043e\u043a\u043e",met:10},veryHigh:{intensity:"\u041e\u0447\u0435\u043d\u044c \u0432\u044b\u0441\u043e\u043a\u043e",met:12}},Cardio:{low:{intensity:"\u041d\u0438\u0437\u043a\u043e",met:3},moderate:{intensity:"\u0421\u0440\u0435\u0434\u043d\u0435",met:6},high:{intensity:"\u0412\u044b\u0441\u043e\u043a\u043e",met:8},veryHigh:{intensity:"\u041e\u0447\u0435\u043d\u044c \u0432\u044b\u0441\u043e\u043a\u043e",met:10}},Gym:{low:{intensity:"\u041d\u0438\u0437\u043a\u043e",met:3.5},moderate:{intensity:"\u0421\u0440\u0435\u0434\u043d\u0435",met:5.5},high:{intensity:"\u0412\u044b\u0441\u043e\u043a\u043e",met:8},veryHigh:{intensity:"\u041e\u0447\u0435\u043d\u044c \u0432\u044b\u0441\u043e\u043a\u043e",met:10}}};let Ja=function(e){return e.Slow="Slow",e.Low="Low",e.Moderate="Moderate",e.High="High",e.Fast="Fast",e}({});Ja.Slow,Ja.Low,Ja.Moderate,Ja.High,Ja.Fast;let es=function(e){return e[e.Sedentary=1.2]="Sedentary",e[e.LightlyActive=1.375]="LightlyActive",e[e.ModeratelyActive=1.55]="ModeratelyActive",e[e.VeryActive=1.725]="VeryActive",e[e.ExtraActive=1.9]="ExtraActive",e}({});const ts={[es.Sedentary]:"\u041c\u0430\u043b\u0430\u044f \u043f\u043e\u0434\u0432\u0438\u0436\u043d\u043e\u0441\u0442\u044c",[es.LightlyActive]:"\u041d\u0438\u0437\u043a\u0430\u044f \u0430\u043a\u0442\u0438\u0432\u043d\u043e\u0441\u0442\u044c",[es.ModeratelyActive]:"\u0423\u043c\u0435\u0440\u0435\u043d\u043d\u0430\u044f \u0430\u043a\u0442\u0438\u0432\u043d\u043e\u0441\u0442\u044c",[es.VeryActive]:"\u0412\u044b\u0441\u043e\u043a\u0430\u044f \u0430\u043a\u0442\u0438\u0432\u043d\u043e\u0441\u0442\u044c",[es.ExtraActive]:"\u041e\u0447\u0435\u043d\u044c \u0432\u044b\u0441\u043e\u043a\u0430\u044f \u0430\u043a\u0442\u0438\u0432\u043d\u043e\u0441\u0442\u044c"};let ns=function(e){return e.WeightMaintenance="\u041f\u043e\u0434\u0434\u0435\u0440\u0436\u0430\u043d\u0438\u0435 \u0432\u0435\u0441\u0430",e.WeightLoss="\u041f\u043e\u0445\u0443\u0434\u0435\u043d\u0438\u0435",e.MuscleGain="\u041d\u0430\u0431\u043e\u0440 \u043c\u0430\u0441\u0441\u044b",e}({}),rs=function(e){return e[e.WeightLoss=.85]="WeightLoss",e[e.WeightMaintenance=1]="WeightMaintenance",e[e.MuscleGain=1.15]="MuscleGain",e}({}),is=function(e){return e[e.Proteins=4]="Proteins",e[e.Fats=9]="Fats",e[e.Carbs=4]="Carbs",e}({});const os={[ns.WeightMaintenance]:"WeightMaintenance",[ns.WeightLoss]:"WeightLoss",[ns.MuscleGain]:"MuscleGain"},as={[ns.WeightMaintenance]:{proteins:.3,fats:.3,carbs:.4},[ns.WeightLoss]:{proteins:.4,fats:.25,carbs:.35},[ns.MuscleGain]:{proteins:.35,fats:.25,carbs:.4}};let ss=function(e){return e.Calories="\u041a\u0430\u043b\u043e\u0440\u0438\u0438",e.Proteins="\u0411\u0435\u043b\u043a\u0438",e.Fats="\u0416\u0438\u0440\u044b",e.Carbs="\u0423\u0433\u043b\u0435\u0432\u043e\u0434\u044b",e}({}),ls=function(e){return e.Male="\u043c\u0443\u0436\u0441\u043a\u043e\u0439",e.Female="\u0436\u0435\u043d\u0441\u043a\u0438\u0439",e}({}),cs=function(e){return e.None="None",e.AccountSetup="\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u0430",e.HealthGoals="\u0414\u0430\u043d\u043d\u044b\u0435 \u043e \u0437\u0434\u043e\u0440\u043e\u0432\u044c\u0435",e}({}),us=function(e){return e[e.MobileOnly=490]="MobileOnly",e[e.Mobile=768]="Mobile",e[e.Tablet=1024]="Tablet",e[e.Desktop=1440]="Desktop",e[e.ContainerMaxWidth=1250]="ContainerMaxWidth",e}({});const ds=/^(?=.*\d).{8,}$/;let ps=function(e){return e.PasswordError="\u041f\u0430\u0440\u043e\u043b\u044c \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u0445\u043e\u0442\u044f \u0431\u044b \u043e\u0434\u043d\u0443 \u0431\u0443\u043a\u0432\u0443, \u043e\u0434\u043d\u0443 \u0446\u0438\u0444\u0440\u0443 \u0438 \u0431\u044b\u0442\u044c \u0434\u043b\u0438\u043d\u043e\u0439 \u043d\u0435 \u043c\u0435\u043d\u0435\u0435 8 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432.",e.TrainingNoAuthError="\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0432\u043e\u0439\u0434\u0438 \u0432 \u0441\u0438\u0441\u0442\u0435\u043c\u0443 \u0438\u043b\u0438 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u0443\u0439\u0442\u0435\u0441\u044c, \u0447\u0442\u043e\u0431\u044b \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0442\u0440\u0435\u043d\u0438\u0440\u043e\u0432\u043a\u0443.",e.MealNoAuthError="\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0432\u043e\u0439\u0434\u0438 \u0432 \u0441\u0438\u0441\u0442\u0435\u043c\u0443 \u0438\u043b\u0438 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u0443\u0439\u0442\u0435\u0441\u044c, \u0447\u0442\u043e\u0431\u044b \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043f\u0440\u0438\u0435\u043c \u043f\u0438\u0449\u0438.",e.AuthError="\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e\u0435 \u0438\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c. \u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439 \u0435\u0449\u0435 \u0440\u0430\u0437.",e.RegisterEmptyFields="\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0437\u0430\u043f\u043e\u043b\u043d\u0438 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043f\u043e\u043b\u044f.",e.RegisterPasswordNotMatch="\u041f\u0430\u0440\u043e\u043b\u0438 \u043d\u0435 \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u044e\u0442.",e.EmailError="\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0432\u0432\u0435\u0434\u0438 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 \u0430\u0434\u0440\u0435\u0441 \u044d\u043b\u0435\u043a\u0442\u0440\u043e\u043d\u043d\u043e\u0439 \u043f\u043e\u0447\u0442\u044b.",e.HasAccountError="\u042d\u0442\u043e\u0442 e-mail \u0430\u0434\u0440\u0435\u0441 \u0443\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d. \u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0432\u043e\u0439\u0434\u0438 \u0441 \u0442\u0432\u043e\u0435\u0439 \u043f\u0430\u0440\u043e\u0439 \u043f\u043e\u0447\u0442\u0430/\u043f\u0430\u0440\u043e\u043b\u044c \u0438\u043b\u0438 \u043f\u0440\u043e\u0432\u0435\u0440\u044c \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e\u0441\u0442\u044c \u043f\u043e\u0447\u0442\u044b.",e.ConnectionError="\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f. \u041f\u0440\u043e\u0432\u0435\u0440\u044c \u0442\u0432\u043e\u0439\u0435 \u0438\u043d\u0442\u0435\u0440\u043d\u0435\u0442-\u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435 \u0438 \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439 \u0441\u043d\u043e\u0432\u0430.",e}({}),hs=function(e){return e.AddNewMeal="\u0422\u0432\u043e\u0439 \u0440\u0435\u0446\u0435\u043f\u0442 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d \u0432 \u0431\u0430\u0437\u0443.",e.AddMeal="\u0411\u043b\u044e\u0434\u043e \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u043e.",e.TrainingAdded="\u0422\u0440\u0435\u043d\u0438\u0440\u043e\u0432\u043a\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0430 \u0432 \u0442\u0432\u043e\u0439 \u0441\u043f\u0438\u0441\u043e\u043a.",e}({}),fs=function(e){return e.Unknown="UNKNOWN",e.NoAuth="NO_AUTH",e.Auth="AUTH",e}({}),ms=function(e){return e[e["\u042f\u043d\u0432\u0430\u0440\u044c"]=0]="\u042f\u043d\u0432\u0430\u0440\u044c",e[e["\u0424\u0435\u0432\u0440\u0430\u043b\u044c"]=1]="\u0424\u0435\u0432\u0440\u0430\u043b\u044c",e[e["\u041c\u0430\u0440\u0442"]=2]="\u041c\u0430\u0440\u0442",e[e["\u0410\u043f\u0440\u0435\u043b\u044c"]=3]="\u0410\u043f\u0440\u0435\u043b\u044c",e[e["\u041c\u0430\u0439"]=4]="\u041c\u0430\u0439",e[e["\u0418\u044e\u043d\u044c"]=5]="\u0418\u044e\u043d\u044c",e[e["\u0418\u044e\u043b\u044c"]=6]="\u0418\u044e\u043b\u044c",e[e["\u0410\u0432\u0433\u0443\u0441\u0442"]=7]="\u0410\u0432\u0433\u0443\u0441\u0442",e[e["\u0421\u0435\u043d\u0442\u044f\u0431\u0440\u044c"]=8]="\u0421\u0435\u043d\u0442\u044f\u0431\u0440\u044c",e[e["\u041e\u043a\u0442\u044f\u0431\u0440\u044c"]=9]="\u041e\u043a\u0442\u044f\u0431\u0440\u044c",e[e["\u041d\u043e\u044f\u0431\u0440\u044c"]=10]="\u041d\u043e\u044f\u0431\u0440\u044c",e[e["\u0414\u0435\u043a\u0430\u0431\u0440\u044c"]=11]="\u0414\u0435\u043a\u0430\u0431\u0440\u044c",e}({});const gs=$r({name:"user",initialState:ga()||{id:"",email:"",token:""},reducers:{setUser(e,t){e.email=t.payload.email,e.token=t.payload.token,e.id=t.payload.id},removeUser(e){e.email="",e.token="",e.id=""}}}),{setUser:ys,removeUser:vs}=gs.actions,bs=gs.reducer,xs=ga(),ws=lr({authorizationStatus:xs?fs.Auth:fs.Unknown,userInfo:xs||{id:"",email:"",token:""}},(e=>{e.addCase(Pa,((e,t)=>{const{authorizationStatus:n}=t.payload;e.authorizationStatus=n})).addCase(Ra,((e,t)=>{const{userInformation:n}=t.payload;e.userInfo=n})).addCase(ys,((e,t)=>{const{email:n,token:r,id:i}=t.payload,o=ga();e.userInfo={id:i||(null===o||void 0===o?void 0:o.id)||"",email:n||(null===o||void 0===o?void 0:o.email)||"",token:r||(null===o||void 0===o?void 0:o.token)||""},e.authorizationStatus=e.userInfo.token?fs.Auth:fs.Unknown}))})),$s=nn({data:Ha,auth:ws,page:lr({registrationStep:cs.AccountSetup,isLoginFormOpened:!1,isRegisterFormOpened:!1,isNewMealFormOpened:!1,isTrainingFormOpened:!1,isMealFormOpened:!1,statusMessage:null,activeTraining:Za.Walking,activeMealType:null,activeMeal:null,activeUser:null,uploadedPath:null},(e=>{e.addCase(Fa,((e,t)=>{e.isLoginFormOpened=t.payload.isOpened})).addCase(ja,((e,t)=>{e.isRegisterFormOpened=t.payload.isOpened})).addCase(Na,((e,t)=>{e.statusMessage=t.payload.message})).addCase(Ba,((e,t)=>{e.activeTraining=t.payload.training})).addCase(Ua,((e,t)=>{e.isNewMealFormOpened=t.payload.isOpened})).addCase(Wa,((e,t)=>{e.isTrainingFormOpened=t.payload.isOpened})).addCase(Va,((e,t)=>{e.isMealFormOpened=t.payload.isOpened})).addCase(za,((e,t)=>{e.registrationStep=t.payload.step})).addCase(Oa,((e,t)=>{e.activeMealType=t.payload.type||null})).addCase(La,((e,t)=>{e.activeMeal=t.payload.meal})).addCase(Ia,((e,t)=>{const{path:n}=t.payload;e.uploadedPath=n})).addCase($a,(e=>{const t=ga();e.activeUser=t}))})),user:bs}),Ss=(()=>{const e=Go.create({baseURL:"https://nutrition-2cda7-default-rtdb.firebaseio.com/",timeout:5e3});return e.interceptors.request.use((e=>{const t=(()=>{const e=localStorage.getItem(ma);return null!==e&&void 0!==e?e:""})();return t&&e.headers&&(e.headers["x-token"]=t),e})),e.interceptors.response.use((e=>e),(e=>{var t;throw e.response&&(t=e.response,ya[t.status])&&ha.warn(e.response.data.error),e})),e})(),_s=function(e){const t=function(e){const{thunk:t=!0,immutableCheck:n=!0,serializableCheck:r=!0,actionCreatorCheck:i=!0}=e??{};let o=new er;return t&&(function(e){return"boolean"===typeof e}(t)?o.push(an):o.push(sn(t.extraArgument))),o},{reducer:n,middleware:r,devTools:i=!0,preloadedState:o,enhancers:a}=e||{};let s,l;if("function"===typeof n)s=n;else{if(!en(n))throw new Error(Cr(1));s=nn(n)}l="function"===typeof r?r(t):t();let c=rn;i&&(c=Xn({trace:!1,..."object"===typeof i&&i}));const u=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>(n,r)=>{const i=e(n,r);let o=()=>{throw new Error(Zt(15))};const a={getState:i.getState,dispatch:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return o(e,...n)}},s=t.map((e=>e(a)));return o=rn(...s)(i.dispatch),{...i,dispatch:o}}}(...l),d=ar(u);return tn(s,o,c(..."function"===typeof a?a(d):d()))}({reducer:$s,middleware:e=>e({thunk:{extraArgument:Ss},serializableCheck:!1}).concat(kr)});const Cs=!1,ks=!1,Es="${JSCORE_VERSION}",Ts=function(e,t){if(!e)throw Is(t)},Is=function(e){return new Error("Firebase Database ("+Es+") INTERNAL ASSERT FAILED: "+e)},Ps=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},Rs={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],o=i+1<e.length,a=o?e[i+1]:0,s=i+2<e.length,l=s?e[i+2]:0,c=t>>2,u=(3&t)<<4|a>>4;let d=(15&a)<<2|l>>6,p=63&l;s||(p=64,o||(d=64)),r.push(n[c],n[u],n[d],n[p])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Ps(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){const o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{const o=e[n++],a=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0;++i;const a=i<e.length?n[e.charAt(i)]:64;++i;const s=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==o||null==a||null==s)throw new Ms;const l=t<<2|o>>4;if(r.push(l),64!==a){const e=o<<4&240|a>>2;if(r.push(e),64!==s){const e=a<<6&192|s;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Ms extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const As=function(e){const t=Ps(e);return Rs.encodeByteArray(t,!0)},Os=function(e){return As(e).replace(/\./g,"")},Ls=function(e){try{return Rs.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function Ns(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=Ns(e[n],t[n]));return e}function Ds(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}const Fs=()=>{try{return Ds().__FIREBASE_DEFAULTS__||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"/nutrition",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&Ls(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`)}},js=e=>{var t,n;return null===(n=null===(t=Fs())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},zs=()=>{var e;return null===(e=Fs())||void 0===e?void 0:e.config},Bs=e=>{var t;return null===(t=Fs())||void 0===t?void 0:t[`_${e}`]};class Us{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function Ws(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Vs(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ws())}function Hs(){return"undefined"!==typeof WorkerGlobalScope&&"undefined"!==typeof self&&self instanceof WorkerGlobalScope}function qs(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function Gs(){return!0===Cs||!0===ks}class Ks extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,Ks.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ys.prototype.create)}}class Ys{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n=`${this.service}/${e}`,r=this.errors[e],i=r?function(e,t){return e.replace(Zs,((e,n)=>{const r=t[n];return null!=r?String(r):`<${n}?>`}))}(r,t):"Error",o=`${this.serviceName}: ${i} (${n}).`;return new Ks(n,o,t)}}const Zs=/\{\$([^}]+)}/g;function Xs(e){return JSON.parse(e)}function Qs(e){return JSON.stringify(e)}const Js=function(e){let t={},n={},r={},i="";try{const o=e.split(".");t=Xs(Ls(o[0])||""),n=Xs(Ls(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(o){}return{header:t,claims:n,data:r,signature:i}};function el(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function tl(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function nl(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function rl(e,t,n){const r={};for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function il(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],o=t[i];if(ol(n)&&ol(o)){if(!il(n,o))return!1}else if(n!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function ol(e){return null!==e&&"object"===typeof e}function al(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function sl(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}})),t}function ll(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class cl{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const n=this.W_;if("string"===typeof e)for(let u=0;u<16;u++)n[u]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let u=0;u<16;u++)n[u]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let u=16;u<80;u++){const e=n[u-3]^n[u-8]^n[u-14]^n[u-16];n[u]=4294967295&(e<<1|e>>>31)}let r,i,o=this.chain_[0],a=this.chain_[1],s=this.chain_[2],l=this.chain_[3],c=this.chain_[4];for(let u=0;u<80;u++){u<40?u<20?(r=l^a&(s^l),i=1518500249):(r=a^s^l,i=1859775393):u<60?(r=a&s|l&(a|s),i=2400959708):(r=a^s^l,i=3395469782);const e=(o<<5|o>>>27)+r+c+i+n[u]&4294967295;c=l,l=s,s=4294967295&(a<<30|a>>>2),a=o,o=e}this.chain_[0]=this.chain_[0]+o&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+s&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,t){if(null==e)return;void 0===t&&(t=e.length);const n=t-this.blockSize;let r=0;const i=this.buf_;let o=this.inbuf_;for(;r<t;){if(0===o)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(i[o]=e.charCodeAt(r),++o,++r,o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<t;)if(i[o]=e[r],++o,++r,o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=t}digest(){const e=[];let t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=255&t,t/=256;this.compress_(this.buf_);let n=0;for(let r=0;r<5;r++)for(let t=24;t>=0;t-=8)e[n]=this.chain_[r]>>t&255,++n;return e}}function ul(e,t){const n=new dl(e,t);return n.subscribe.bind(n)}class dl{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=pl),void 0===r.error&&(r.error=pl),void 0===r.complete&&(r.complete=pl);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}})),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function pl(){}const hl=function(e,t,n,r){let i;if(r<t?i="at least "+t:r>n&&(i=0===n?"none":"no more than "+n),i){throw new Error(e+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")}};function fl(e,t){return`${e} failed: ${t} argument `}function ml(e,t,n,r){if((!r||n)&&"function"!==typeof n)throw new Error(fl(e,t)+"must be a valid function.")}function gl(e,t,n,r){if((!r||n)&&("object"!==typeof n||null===n))throw new Error(fl(e,t)+"must be a valid context object.")}const yl=function(e){let t=0;for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};function vl(e){return e&&e._delegate?e._delegate:e}class bl{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const xl="[DEFAULT]";class wl{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new Us;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:xl})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xl;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xl;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xl;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,o]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&o.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const r of n)try{r(e,t)}catch(CO){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:$l(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(CO){}return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xl;return this.component?this.component.multipleInstances?e:xl:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}function $l(e){return e===xl?void 0:e}class Sl{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new wl(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const _l=[];var Cl;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Cl||(Cl={}));const kl={debug:Cl.DEBUG,verbose:Cl.VERBOSE,info:Cl.INFO,warn:Cl.WARN,error:Cl.ERROR,silent:Cl.SILENT},El=Cl.INFO,Tl={[Cl.DEBUG]:"log",[Cl.VERBOSE]:"log",[Cl.INFO]:"info",[Cl.WARN]:"warn",[Cl.ERROR]:"error"},Il=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=Tl[t];if(!r)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);for(var i=arguments.length,o=new Array(i>2?i-2:0),a=2;a<i;a++)o[a-2]=arguments[a];console[r](`[${n}]  ${e.name}:`,...o)};class Pl{constructor(e){this.name=e,this._logLevel=El,this._logHandler=Il,this._userLogHandler=null,_l.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Cl))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?kl[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Cl.DEBUG,...t),this._logHandler(this,Cl.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Cl.VERBOSE,...t),this._logHandler(this,Cl.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Cl.INFO,...t),this._logHandler(this,Cl.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Cl.WARN,...t),this._logHandler(this,Cl.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Cl.ERROR,...t),this._logHandler(this,Cl.ERROR,...t)}}let Rl,Ml;const Al=new WeakMap,Ol=new WeakMap,Ll=new WeakMap,Nl=new WeakMap,Dl=new WeakMap;let Fl={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Ol.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Ll.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Bl(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function jl(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Ml||(Ml=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Ul(this),n),Bl(Al.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Bl(e.apply(Ul(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const o=e.call(Ul(this),t,...r);return Ll.set(o,t.sort?t.sort():[t]),Bl(o)}}function zl(e){return"function"===typeof e?jl(e):(e instanceof IDBTransaction&&function(e){if(Ol.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",o),e.removeEventListener("abort",o)},i=()=>{t(),r()},o=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",o),e.addEventListener("abort",o)}));Ol.set(e,t)}(e),t=e,(Rl||(Rl=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((e=>t instanceof e))?new Proxy(e,Fl):e);var t}function Bl(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",o)},i=()=>{t(Bl(e.result)),r()},o=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",o)}));return t.then((t=>{t instanceof IDBCursor&&Al.set(t,e)})).catch((()=>{})),Dl.set(t,e),t}(e);if(Nl.has(e))return Nl.get(e);const t=zl(e);return t!==e&&(Nl.set(e,t),Dl.set(t,e)),t}const Ul=e=>Dl.get(e);const Wl=["get","getKey","getAll","getAllKeys","count"],Vl=["put","add","delete","clear"],Hl=new Map;function ql(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(Hl.get(t))return Hl.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=Vl.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!Wl.includes(n))return;const o=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let o=t.store;for(var a=arguments.length,s=new Array(a>1?a-1:0),l=1;l<a;l++)s[l-1]=arguments[l];return r&&(o=o.index(s.shift())),(await Promise.all([o[n](...s),i&&t.done]))[0]};return Hl.set(t,o),o}Fl=(e=>({...e,get:(t,n,r)=>ql(t,n)||e.get(t,n,r),has:(t,n)=>!!ql(t,n)||e.has(t,n)}))(Fl);class Gl{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null})).filter((e=>e)).join(" ")}}const Kl="@firebase/app",Yl="0.10.16",Zl=new Pl("@firebase/app"),Xl="@firebase/app-compat",Ql="@firebase/analytics-compat",Jl="@firebase/analytics",ec="@firebase/app-check-compat",tc="@firebase/app-check",nc="@firebase/auth",rc="@firebase/auth-compat",ic="@firebase/database",oc="@firebase/data-connect",ac="@firebase/database-compat",sc="@firebase/functions",lc="@firebase/functions-compat",cc="@firebase/installations",uc="@firebase/installations-compat",dc="@firebase/messaging",pc="@firebase/messaging-compat",hc="@firebase/performance",fc="@firebase/performance-compat",mc="@firebase/remote-config",gc="@firebase/remote-config-compat",yc="@firebase/storage",vc="@firebase/storage-compat",bc="@firebase/firestore",xc="@firebase/vertexai",wc="@firebase/firestore-compat",$c="firebase",Sc="[DEFAULT]",_c={[Kl]:"fire-core",[Xl]:"fire-core-compat",[Jl]:"fire-analytics",[Ql]:"fire-analytics-compat",[tc]:"fire-app-check",[ec]:"fire-app-check-compat",[nc]:"fire-auth",[rc]:"fire-auth-compat",[ic]:"fire-rtdb",[oc]:"fire-data-connect",[ac]:"fire-rtdb-compat",[sc]:"fire-fn",[lc]:"fire-fn-compat",[cc]:"fire-iid",[uc]:"fire-iid-compat",[dc]:"fire-fcm",[pc]:"fire-fcm-compat",[hc]:"fire-perf",[fc]:"fire-perf-compat",[mc]:"fire-rc",[gc]:"fire-rc-compat",[yc]:"fire-gcs",[vc]:"fire-gcs-compat",[bc]:"fire-fst",[wc]:"fire-fst-compat",[xc]:"fire-vertex","fire-js":"fire-js",[$c]:"fire-js-all"},Cc=new Map,kc=new Map,Ec=new Map;function Tc(e,t){try{e.container.addComponent(t)}catch(n){Zl.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Ic(e,t){e.container.addOrOverwriteComponent(t)}function Pc(e){const t=e.name;if(Ec.has(t))return Zl.debug(`There were multiple attempts to register component ${t}.`),!1;Ec.set(t,e);for(const n of Cc.values())Tc(n,e);for(const n of kc.values())Tc(n,e);return!0}function Rc(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Mc(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Sc;Rc(e,t).clearInstance(n)}function Ac(e){return void 0!==e.options}function Oc(e){return void 0!==e.settings}function Lc(){Ec.clear()}const Nc=new Ys("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class Dc{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new bl("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Nc.create("app-deleted",{appName:this._name})}}class Fc extends Dc{constructor(e,t,n,r){const i=void 0!==t.automaticDataCollectionEnabled&&t.automaticDataCollectionEnabled,o={name:n,automaticDataCollectionEnabled:i};if(void 0!==e.apiKey)super(e,o,r);else{super(e.options,o,r)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:i},t),this._finalizationRegistry=null,"undefined"!==typeof FinalizationRegistry&&(this._finalizationRegistry=new FinalizationRegistry((()=>{this.automaticCleanup()}))),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,t.releaseOnDeref=void 0,Hc(Kl,Yl,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,void 0!==e&&null!==this._finalizationRegistry&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){Vc(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw Nc.create("server-app-deleted")}}const jc="11.0.2";function zc(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:Sc,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Nc.create("bad-app-name",{appName:String(i)});if(n||(n=zs()),!n)throw Nc.create("no-options");const o=Cc.get(i);if(o){if(il(n,o.options)&&il(r,o.config))return o;throw Nc.create("duplicate-app",{appName:i})}const a=new Sl(i);for(const l of Ec.values())a.addComponent(l);const s=new Dc(n,r,a);return Cc.set(i,s),s}function Bc(e,t){if(("undefined"!==typeof window||Hs())&&!Hs())throw Nc.create("invalid-server-app-environment");let n;void 0===t.automaticDataCollectionEnabled&&(t.automaticDataCollectionEnabled=!1),n=Ac(e)?e.options:e;const r=Object.assign(Object.assign({},t),n);void 0!==r.releaseOnDeref&&delete r.releaseOnDeref;if(void 0!==t.releaseOnDeref&&"undefined"===typeof FinalizationRegistry)throw Nc.create("finalization-registry-not-supported",{});const i=""+(e=>[...e].reduce(((e,t)=>Math.imul(31,e)+t.charCodeAt(0)|0),0))(JSON.stringify(r)),o=kc.get(i);if(o)return o.incRefCount(t.releaseOnDeref),o;const a=new Sl(i);for(const l of Ec.values())a.addComponent(l);const s=new Fc(n,t,i,a);return kc.set(i,s),s}function Uc(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Sc;const t=Cc.get(e);if(!t&&e===Sc&&zs())return zc();if(!t)throw Nc.create("no-app",{appName:e});return t}function Wc(){return Array.from(Cc.values())}async function Vc(e){let t=!1;const n=e.name;if(Cc.has(n))t=!0,Cc.delete(n);else if(kc.has(n)){e.decRefCount()<=0&&(kc.delete(n),t=!0)}t&&(await Promise.all(e.container.getProviders().map((e=>e.delete()))),e.isDeleted=!0)}function Hc(e,t,n){var r;let i=null!==(r=_c[e])&&void 0!==r?r:e;n&&(i+=`-${n}`);const o=i.match(/\s|\//),a=t.match(/\s|\//);if(o||a){const e=[`Unable to register library "${i}" with version "${t}":`];return o&&e.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&a&&e.push("and"),a&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void Zl.warn(e.join(" "))}Pc(new bl(`${i}-version`,(()=>({library:i,version:t})),"VERSION"))}function qc(e,t){if(null!==e&&"function"!==typeof e)throw Nc.create("invalid-log-argument");!function(e,t){for(const n of _l){let r=null;t&&t.level&&(r=kl[t.level]),n.userLogHandler=null===e?null:function(t,n){for(var i=arguments.length,o=new Array(i>2?i-2:0),a=2;a<i;a++)o[a-2]=arguments[a];const s=o.map((e=>{if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((e=>e)).join(" ");n>=(null!==r&&void 0!==r?r:t.logLevel)&&e({level:Cl[n].toLowerCase(),message:s,args:o,type:t.name})}}}(e,t)}function Gc(e){var t;t=e,_l.forEach((e=>{e.setLogLevel(t)}))}const Kc="firebase-heartbeat-store";let Yc=null;function Zc(){return Yc||(Yc=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:o}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=indexedDB.open(e,t),s=Bl(a);return r&&a.addEventListener("upgradeneeded",(e=>{r(Bl(a.result),e.oldVersion,e.newVersion,Bl(a.transaction),e)})),n&&a.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),s.then((e=>{o&&e.addEventListener("close",(()=>o())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),s}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(Kc)}catch(n){console.warn(n)}}}).catch((e=>{throw Nc.create("idb-open",{originalErrorMessage:e.message})}))),Yc}async function Xc(e,t){try{const n=(await Zc()).transaction(Kc,"readwrite"),r=n.objectStore(Kc);await r.put(t,Qc(e)),await n.done}catch(n){if(n instanceof Ks)Zl.warn(n.message);else{const e=Nc.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});Zl.warn(e.message)}}}function Qc(e){return`${e.name}!${e.options.appId}`}class Jc{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new tu(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=eu();if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some((e=>e.date===r)))return;return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}catch(n){Zl.warn(n)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=eu(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),nu(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),nu(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=Os(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(t){return Zl.warn(t),""}}}function eu(){return(new Date).toISOString().substring(0,10)}class tu{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!function(){try{return"object"===typeof indexedDB}catch(e){return!1}}()&&new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(Eu){t(Eu)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await Zc()).transaction(Kc),n=await t.objectStore(Kc).get(Qc(e));return await t.done,n}catch(t){if(t instanceof Ks)Zl.warn(t.message);else{const e=Nc.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});Zl.warn(e.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Xc(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Xc(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function nu(e){return Os(JSON.stringify({version:2,heartbeats:e})).length}var ru;ru="",Pc(new bl("platform-logger",(e=>new Gl(e)),"PRIVATE")),Pc(new bl("heartbeat",(e=>new Jc(e)),"PRIVATE")),Hc(Kl,Yl,ru),Hc(Kl,Yl,"esm2017"),Hc("fire-js","");class iu{constructor(e,t){this._delegate=e,this.firebase=t,Tc(e,new bl("app-compat",(()=>this),"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise((e=>{this._delegate.checkDestroyed(),e()})).then((()=>(this.firebase.INTERNAL.removeApp(this.name),Vc(this._delegate))))}_getService(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Sc;var n;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:t})}_removeServiceInstance(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Sc;this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){Tc(this._delegate,e)}_addOrOverwriteComponent(e){Ic(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ou=new Ys("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."});const au=function e(){const n=function(e){const n={},r={__esModule:!0,initializeApp:function(t){const i=zc(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(el(n,i.name))return n[i.name];const o=new e(i,r);return n[i.name]=o,o},app:i,registerVersion:Hc,setLogLevel:Gc,onLog:qc,apps:null,SDK_VERSION:jc,INTERNAL:{registerComponent:function(t){const n=t.name,o=n.replace("-compat","");if(Pc(t)&&"PUBLIC"===t.type){const a=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[o])throw ou.create("invalid-app-argument",{appName:n});return e[o]()};void 0!==t.serviceProps&&Ns(a,t.serviceProps),r[o]=a,e.prototype[o]=function(){const e=this._getService.bind(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return e.apply(this,t.multipleInstances?i:[])}}return"PUBLIC"===t.type?r[o]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:t}};function i(e){if(!el(n,e=e||Sc))throw ou.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((e=>n[e]))}}),i.App=e,r}(iu);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:e,extendNamespace:function(e){Ns(n,e)},createSubscribe:ul,ErrorFactory:Ys,deepExtend:Ns}),n}(),su=new Pl("@firebase/app-compat");try{const e=Ds();if(void 0!==e.firebase){su.warn("\n      Warning: Firebase is already defined in the global scope. Please make sure\n      Firebase library is only loaded once.\n    ");const t=e.firebase.SDK_VERSION;t&&t.indexOf("LITE")>=0&&su.warn("\n        Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n        ")}}catch(CO){}const lu=au;!function(e){Hc("@firebase/app-compat","0.2.46",e)}();lu.registerVersion("firebase","11.0.2","app-compat");const cu="@firebase/database",uu="1.0.10";let du="";function pu(e){du=e}class hu{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Qs(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:Xs(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class fu{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return el(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const mu=function(e){try{if("undefined"!==typeof window&&"undefined"!==typeof window[e]){const t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new hu(t)}}catch(t){}return new fu},gu=mu("localStorage"),yu=mu("sessionStorage"),vu=new Pl("@firebase/database"),bu=function(){let e=1;return function(){return e++}}(),xu=function(e){const t=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);if(i>=55296&&i<=56319){const t=i-55296;r++,Ts(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(t<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t}(e),n=new cl;n.update(t);const r=n.digest();return Rs.encodeByteArray(r)},wu=function(){let e="";for(let t=0;t<arguments.length;t++){const n=t<0||arguments.length<=t?void 0:arguments[t];Array.isArray(n)||n&&"object"===typeof n&&"number"===typeof n.length?e+=wu.apply(null,n):e+="object"===typeof n?Qs(n):n,e+=" "}return e};let $u=null,Su=!0;const _u=function(e,t){Ts(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(vu.logLevel=Cl.VERBOSE,$u=vu.log.bind(vu),t&&yu.set("logging_enabled",!0)):"function"===typeof e?$u=e:($u=null,yu.remove("logging_enabled"))},Cu=function(){if(!0===Su&&(Su=!1,null===$u&&!0===yu.get("logging_enabled")&&_u(!0)),$u){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=wu.apply(null,t);$u(r)}},ku=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Cu(e,...n)}},Eu=function(){const e="FIREBASE INTERNAL ERROR: "+wu(...arguments);vu.error(e)},Tu=function(){const e=`FIREBASE FATAL ERROR: ${wu(...arguments)}`;throw vu.error(e),new Error(e)},Iu=function(){const e="FIREBASE WARNING: "+wu(...arguments);vu.warn(e)},Pu=function(e){return"number"===typeof e&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},Ru="[MIN_NAME]",Mu="[MAX_NAME]",Au=function(e,t){if(e===t)return 0;if(e===Ru||t===Mu)return-1;if(t===Ru||e===Mu)return 1;{const n=Bu(e),r=Bu(t);return null!==n?null!==r?n-r===0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1}},Ou=function(e,t){return e===t?0:e<t?-1:1},Lu=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+Qs(t))},Nu=function(e){if("object"!==typeof e||null===e)return Qs(e);const t=[];for(const r in e)t.push(r);t.sort();let n="{";for(let r=0;r<t.length;r++)0!==r&&(n+=","),n+=Qs(t[r]),n+=":",n+=Nu(e[t[r]]);return n+="}",n},Du=function(e,t){const n=e.length;if(n<=t)return[e];const r=[];for(let i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function Fu(e,t){for(const n in e)e.hasOwnProperty(n)&&t(n,e[n])}const ju=function(e){Ts(!Pu(e),"Invalid JSON number");const t=1023;let n,r,i,o,a;0===e?(r=0,i=0,n=1/e===-1/0?1:0):(n=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(o=Math.min(Math.floor(Math.log(e)/Math.LN2),t),r=o+t,i=Math.round(e*Math.pow(2,52-o)-Math.pow(2,52))):(r=0,i=Math.round(e/Math.pow(2,-1074))));const s=[];for(a=52;a;a-=1)s.push(i%2?1:0),i=Math.floor(i/2);for(a=11;a;a-=1)s.push(r%2?1:0),r=Math.floor(r/2);s.push(n?1:0),s.reverse();const l=s.join("");let c="";for(a=0;a<64;a+=8){let e=parseInt(l.substr(a,8),2).toString(16);1===e.length&&(e="0"+e),c+=e}return c.toLowerCase()};const zu=new RegExp("^-?(0*)\\d{1,10}$"),Bu=function(e){if(zu.test(e)){const t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},Uu=function(e){try{e()}catch(t){setTimeout((()=>{const e=t.stack||"";throw Iu("Exception was thrown by user callback.",e),t}),Math.floor(0))}},Wu=function(e,t){const n=setTimeout(e,t);return"number"===typeof n&&"undefined"!==typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(n):"object"===typeof n&&n.unref&&n.unref(),n};class Vu{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null===t||void 0===t?void 0:t.getImmediate({optional:!0}),this.appCheck||null===t||void 0===t||t.get().then((e=>this.appCheck=e))}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise(((t,n)=>{setTimeout((()=>{this.appCheck?this.getToken(e).then(t,n):t(null)}),0)}))}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((t=>t.addTokenListener(e)))}notifyForInvalidToken(){Iu(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class Hu{constructor(e,t,n){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit((e=>this.auth_=e))}getToken(e){return this.auth_?this.auth_.getToken(e).catch((e=>e&&"auth/token-not-initialized"===e.code?(Cu("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e))):new Promise(((t,n)=>{setTimeout((()=>{this.auth_?this.getToken(e).then(t,n):t(null)}),0)}))}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((t=>t.addAuthTokenListener(e)))}removeTokenChangeListener(e){this.authProvider_.get().then((t=>t.removeAuthTokenListener(e)))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Iu(e)}}class qu{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}qu.OWNER="owner";const Gu="5",Ku=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Yu="ac",Zu="websocket",Xu="long_polling";class Qu{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",a=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]&&arguments[7];this.secure=t,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=s,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=gu.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&gu.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}}function Ju(e,t,n){let r;if(Ts("string"===typeof t,"typeof type must == string"),Ts("object"===typeof n,"typeof params must == object"),t===Zu)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==Xu)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);const i=[];return Fu(n,((e,t)=>{i.push(e+"="+t)})),r+i.join("&")}class ed{constructor(){this.counters_={}}incrementCounter(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;el(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return Ns(void 0,this.counters_)}}const td={},nd={};function rd(e){const t=e.toString();return td[t]||(td[t]=new ed),td[t]}class id{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const e=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let t=0;t<e.length;++t)e[t]&&Uu((()=>{this.onMessage_(e[t])}));if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}const od="start";class ad{constructor(e,t,n,r,i,o,a){this.connId=e,this.repoInfo=t,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=ku(e),this.stats_=rd(t),this.urlFn=e=>(this.appCheckToken&&(e[Yu]=this.appCheckToken),Ju(t,Xu,e))}open(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new id(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if(Gs()||"complete"===document.readyState)e();else{let t=!1;const n=function(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(()=>{"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((()=>{if(this.isClosed_)return;this.scriptTagHolder=new sd((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const[i,o,a,s,l]=t;if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===od)n.id=o,n.password=a;else{if("close"!==i)throw new Error("Unrecognized command received: "+i);o?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(o,(()=>{n.onClosed_()}))):n.onClosed_()}}),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const[i,o]=t;n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,o)}),(()=>{this.onClosed_()}),this.urlFn);const e={};e[od]="t",e.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=this.scriptTagHolder.uniqueCallbackIdentifier),e.v=Gu,this.transportSessionId&&(e.s=this.transportSessionId),this.lastSessionId&&(e.ls=this.lastSessionId),this.applicationId&&(e.p=this.applicationId),this.appCheckToken&&(e[Yu]=this.appCheckToken),"undefined"!==typeof location&&location.hostname&&Ku.test(location.hostname)&&(e.r="f");const t=this.urlFn(e);this.log_("Connecting via long-poll to "+t),this.scriptTagHolder.addTag(t,(()=>{}))}))}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){ad.forceAllow_=!0}static forceDisallow(){ad.forceDisallow_=!0}static isAvailable(){return!Gs()&&(!!ad.forceAllow_||!ad.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=Qs(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=As(t),r=Du(n,1840);for(let i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if(Gs())return;this.myDisconnFrame=document.createElement("iframe");const n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=Qs(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class sd{constructor(e,t,n,r){if(this.onDisconnect=n,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,Gs())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=bu(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=sd.createIFrame_();let n="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)){n='<script>document.domain="'+document.domain+'";<\/script>'}const r="<html><body>"+n+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(r),this.myIFrame.doc.close()}catch(i){Cu("frame writing exception"),i.stack&&Cu(i.stack),Cu(i)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Cu("No IE domain setting required")}catch(t){const n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout((()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)}),Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),n="",r=0;for(;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;{const e=this.pendingSegs.shift();n=n+"&seg"+r+"="+e.seg+"&ts"+r+"="+e.ts+"&d"+r+"="+e.d,r++}}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const n=()=>{this.outstandingRequests.delete(t),this.newRequest_()},r=setTimeout(n,Math.floor(25e3));this.addTag(e,(()=>{clearTimeout(r),n()}))}addTag(e,t){Gs()?this.doNodeLongPoll(e,t):setTimeout((()=>{try{if(!this.sendNewPolls)return;const n=this.myIFrame.doc.createElement("script");n.type="text/javascript",n.async=!0,n.src=e,n.onload=n.onreadystatechange=function(){const e=n.readyState;e&&"loaded"!==e&&"complete"!==e||(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),t())},n.onerror=()=>{Cu("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(n)}catch(n){}}),Math.floor(1))}}let ld=null;"undefined"!==typeof MozWebSocket?ld=MozWebSocket:"undefined"!==typeof WebSocket&&(ld=WebSocket);class cd{constructor(e,t,n,r,i,o,a){this.connId=e,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=ku(this.connId),this.stats_=rd(t),this.connURL=cd.connectionURL_(t,o,a,r,n),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,n,r,i){const o={};return o.v=Gu,!Gs()&&"undefined"!==typeof location&&location.hostname&&Ku.test(location.hostname)&&(o.r="f"),t&&(o.s=t),n&&(o.ls=n),r&&(o[Yu]=r),i&&(o.p=i),Ju(e,Zu,o)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,gu.set("previous_websocket_failure",!0);try{let e;if(Gs()){const t=this.nodeAdmin?"AdminNode":"Node";e={headers:{"User-Agent":`Firebase/${Gu}/${du}/${process.platform}/${t}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(e.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(e.headers["X-Firebase-AppCheck"]=this.appCheckToken);const n={NODE_ENV:"production",PUBLIC_URL:"/nutrition",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0},r=0===this.connURL.indexOf("wss://")?n.HTTPS_PROXY||n.https_proxy:n.HTTP_PROXY||n.http_proxy;r&&(e.proxy={origin:r})}this.mySock=new ld(this.connURL,[],e)}catch(n){this.log_("Error instantiating WebSocket.");const e=n.message||n.data;return e&&this.log_(e),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=e=>{this.handleIncomingFrame(e)},this.mySock.onerror=e=>{this.log_("WebSocket error.  Closing connection.");const t=e.message||e.data;t&&this.log_(t),this.onClosed_()}}start(){}static forceDisallow(){cd.forceDisallow_=!0}static isAvailable(){let e=!1;if("undefined"!==typeof navigator&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,n=navigator.userAgent.match(t);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==ld&&!cd.forceDisallow_}static previouslyFailed(){return gu.isInMemoryStorage||!0===gu.get("previous_websocket_failure")}markConnectionHealthy(){gu.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const e=this.frames.join("");this.frames=null;const t=Xs(e);this.onMessage(t)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(Ts(null===this.frames,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{const e=this.extractFrameCount_(t);null!==e&&this.appendFrame_(e)}}send(e){this.resetKeepAlive();const t=Qs(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=Du(t,16384);n.length>1&&this.sendString_(String(n.length));for(let r=0;r<n.length;r++)this.sendString_(n[r])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()}),Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}cd.responsesRequiredToBeHealthy=2,cd.healthyTimeout=3e4;class ud{static get ALL_TRANSPORTS(){return[ad,cd]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const t=cd&&cd.isAvailable();let n=t&&!cd.previouslyFailed();if(e.webSocketOnly&&(t||Iu("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),n=!0),n)this.transports_=[cd];else{const e=this.transports_=[];for(const t of ud.ALL_TRANSPORTS)t&&t.isAvailable()&&e.push(t);ud.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}ud.globalTransportInitialized_=!1;class dd{constructor(e,t,n,r,i,o,a,s,l,c){this.id=e,this.repoInfo_=t,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=i,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=s,this.onKill_=l,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=ku("c:"+this.id+":"),this.transportManager_=new ud(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),n=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((()=>{this.conn_&&this.conn_.open(t,n)}),Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=Wu((()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))}),Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=Lu("t",e),n=Lu("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=Lu("t",e),n=Lu("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=Lu("t",e);if("d"in e){const n=e.d;if("h"===t){const e=Object.assign({},n);this.repoInfo_.isUsingEmulator&&(e.h=this.repoInfo_.host),this.onHandshake_(e)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let e=0;e<this.pendingDataMessages.length;++e)this.onDataMessage_(this.pendingDataMessages[e]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?Eu("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Eu("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),Gu!==n&&Iu("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),n=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,n),Wu((()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())}),Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Wu((()=>{this.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(gu.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class pd{put(e,t,n,r){}merge(e,t,n,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,n){}onDisconnectMerge(e,t,n){}onDisconnectCancel(e,t){}reportStats(e){}}class hd{constructor(e){this.allowedEvents_=e,this.listeners_={},Ts(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(let e=0;e<i.length;e++)i[e].callback.apply(i[e].context,n)}}on(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});const r=this.getInitialEvent(e);r&&t.apply(n,r)}off(e,t,n){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)}validateEventType_(e){Ts(this.allowedEvents_.find((t=>t===e)),"Unknown event: "+e)}}class fd extends hd{static getInstance(){return new fd}constructor(){super(["online"]),this.online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||Vs()||(window.addEventListener("online",(()=>{this.online_||(this.online_=!0,this.trigger("online",!0))}),!1),window.addEventListener("offline",(()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))}),!1))}getInitialEvent(e){return Ts("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class md{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let t=0;for(let e=0;e<this.pieces_.length;e++)this.pieces_[e].length>0&&(this.pieces_[t]=this.pieces_[e],t++);this.pieces_.length=t,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function gd(){return new md("")}function yd(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function vd(e){return e.pieces_.length-e.pieceNum_}function bd(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new md(e.pieces_,t)}function xd(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function wd(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.pieces_.slice(e.pieceNum_+t)}function $d(e){if(e.pieceNum_>=e.pieces_.length)return null;const t=[];for(let n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new md(t,0)}function Sd(e,t){const n=[];for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof md)for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);else{const e=t.split("/");for(let t=0;t<e.length;t++)e[t].length>0&&n.push(e[t])}return new md(n,0)}function _d(e){return e.pieceNum_>=e.pieces_.length}function Cd(e,t){const n=yd(e),r=yd(t);if(null===n)return t;if(n===r)return Cd(bd(e),bd(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function kd(e,t){const n=wd(e,0),r=wd(t,0);for(let i=0;i<n.length&&i<r.length;i++){const e=Au(n[i],r[i]);if(0!==e)return e}return n.length===r.length?0:n.length<r.length?-1:1}function Ed(e,t){if(vd(e)!==vd(t))return!1;for(let n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function Td(e,t){let n=e.pieceNum_,r=t.pieceNum_;if(vd(e)>vd(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}class Id{constructor(e,t){this.errorPrefix_=t,this.parts_=wd(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let n=0;n<this.parts_.length;n++)this.byteLength_+=yl(this.parts_[n]);Pd(this)}}function Pd(e){if(e.byteLength_>768)throw new Error(e.errorPrefix_+"has a key path longer than 768 bytes ("+e.byteLength_+").");if(e.parts_.length>32)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Rd(e))}function Rd(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}class Md extends hd{static getInstance(){return new Md}constructor(){let e,t;super(["visible"]),"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(t="visibilitychange",e="hidden"):"undefined"!==typeof document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):"undefined"!==typeof document.msHidden?(t="msvisibilitychange",e="msHidden"):"undefined"!==typeof document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,(()=>{const t=!document[e];t!==this.visible_&&(this.visible_=t,this.trigger("visible",t))}),!1)}getInitialEvent(e){return Ts("visible"===e,"Unknown event type: "+e),[this.visible_]}}const Ad=1e3;class Od extends pd{constructor(e,t,n,r,i,o,a,s){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=n,this.onConnectStatus_=r,this.onServerInfoUpdate_=i,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=s,this.id=Od.nextPersistentConnectionId_++,this.log_=ku("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Ad,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,s&&!Gs())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Md.getInstance().on("visible",this.onVisible_,this),-1===e.host.indexOf("fblocal")&&fd.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,n){const r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_(Qs(i)),Ts(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)}get(e){this.initConnection_();const t=new Us,n={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:e=>{const n=e.d;"ok"===e.s?t.resolve(n):t.reject(n)}};this.outstandingGets_.push(n),this.outstandingGetCount_++;const r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),t.promise}listen(e,t,n,r){this.initConnection_();const i=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),Ts(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Ts(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");const a={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(o).set(i,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,(n=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(n)}))}sendListen_(e){const t=e.query,n=t._path.toString(),r=t._queryIdentifier;this.log_("Listen on "+n+" for "+r);const i={p:n};e.tag&&(i.q=t._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest("q",i,(i=>{const o=i.d,a=i.s;Od.warnOnListenWarnings_(o,t);(this.listens.get(n)&&this.listens.get(n).get(r))===e&&(this.log_("listen response",i),"ok"!==a&&this.removeListen_(n,r),e.onComplete&&e.onComplete(a,o))}))}static warnOnListenWarnings_(e,t){if(e&&"object"===typeof e&&el(e,"w")){const n=tl(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){const e='".indexOn": "'+t._queryParams.getIndex().toString()+'"',n=t._path.toString();Iu(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${e} at ${n} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(()=>{})),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&40===e.length||function(e){const t=Js(e).claims;return"object"===typeof t&&!0===t.admin}(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(()=>{}))}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=function(e){const t=Js(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")}(e)?"auth":"gauth",n={cred:e};null===this.authOverride_?n.noauth=!0:"object"===typeof this.authOverride_&&(n.authvar=this.authOverride_),this.sendRequest(t,n,(t=>{const n=t.s,r=t.d||"error";this.authToken_===e&&("ok"===n?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(n,r))}))}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(e=>{const t=e.s,n=e.d||"error";"ok"===t?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,n)}))}unlisten(e,t){const n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),Ts(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query");this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)}sendUnlisten_(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);const i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)}onDisconnectPut(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}onDisconnectMerge(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,n,r){const i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,(e=>{r&&setTimeout((()=>{r(e.s,e.d)}),Math.floor(0))}))}put(e,t,n,r){this.putInternal("p",e,t,n,r)}merge(e,t,n,r){this.putInternal("m",e,t,n,r)}putInternal(e,t,n,r,i){this.initConnection_();const o={p:t,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:e,request:o,onComplete:r}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,n=this.outstandingPuts_[e].request,r=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,n,(n=>{this.log_(t+" response",n),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),r&&r(n.s,n.d)}))}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,(e=>{if("ok"!==e.s){const t=e.d;this.log_("reportStats","Error sending stats: "+t)}}))}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Qs(e));const t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):Eu("Unrecognized action received from server: "+Qs(e)+"\nAre you using the latest client?")}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){Ts(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((()=>{this.establishConnectionTimer_=null,this.establishConnection_()}),Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Ad,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Ad,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Ad),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();const e=(new Date).getTime()-this.lastConnectionAttemptTime_;let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),n=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+Od.nextConnectionId_++,i=this.lastSessionId;let o=!1,a=null;const s=function(){a?a.close():(o=!0,n())},l=function(e){Ts(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(e)};this.realtime_={close:s,sendRequest:l};const c=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[s,l]=await Promise.all([this.authTokenProvider_.getToken(c),this.appCheckTokenProvider_.getToken(c)]);o?Cu("getToken() completed but was canceled"):(Cu("getToken() completed. Creating connection."),this.authToken_=s&&s.accessToken,this.appCheckToken_=l&&l.token,a=new dd(r,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,t,n,(e=>{Iu(e+" ("+this.repoInfo_.toString()+")"),this.interrupt("server_kill")}),i))}catch(Eu){this.log_("Failed to get token: "+Eu),o||(this.repoInfo_.nodeAdmin&&Iu(Eu),s())}}}interrupt(e){Cu("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Cu("Resuming connection for reason: "+e),delete this.interruptReasons_[e],nl(this.interruptReasons_)&&(this.reconnectDelay_=Ad,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let n;n=t?t.map((e=>Nu(e))).join("$"):"default";const r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(e,t){const n=new md(e).toString();let r;if(this.listens.has(n)){const e=this.listens.get(n);r=e.get(t),e.delete(t),0===e.size&&this.listens.delete(n)}else r=void 0;return r}onAuthRevoked_(e,t){Cu("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){Cu("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let t="js";Gs()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+du.replace(/\./g,"-")]=1,Vs()?e["framework.cordova"]=1:qs()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=fd.getInstance().currentlyOnline();return nl(this.interruptReasons_)&&e}}Od.nextPersistentConnectionId_=0,Od.nextConnectionId_=0;class Ld{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Ld(e,t)}}class Nd{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const n=new Ld(Ru,e),r=new Ld(Ru,t);return 0!==this.compare(n,r)}minPost(){return Ld.MIN}}let Dd;class Fd extends Nd{static get __EMPTY_NODE(){return Dd}static set __EMPTY_NODE(e){Dd=e}compare(e,t){return Au(e.name,t.name)}isDefinedOn(e){throw Is("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Ld.MIN}maxPost(){return new Ld(Mu,Dd)}makePost(e,t){return Ts("string"===typeof e,"KeyIndex indexValue must always be a string."),new Ld(e,Dd)}toString(){return".key"}}const jd=new Fd;class zd{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(o=t?n(e.key,t):1,r&&(o*=-1),o<0)e=this.isReverse_?e.left:e.right;else{if(0===o){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Bd{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:Bd.RED,this.left=null!=r?r:Ud.EMPTY_NODE,this.right=null!=i?i:Ud.EMPTY_NODE}copy(e,t,n,r,i){return new Bd(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return Ud.EMPTY_NODE;let e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let n,r;if(n=this,t(e,n.key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return Ud.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Bd.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Bd.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Bd.RED=!0,Bd.BLACK=!1;class Ud{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ud.EMPTY_NODE;this.comparator_=e,this.root_=t}insert(e,t){return new Ud(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Bd.BLACK,null,null))}remove(e){return new Ud(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Bd.BLACK,null,null))}get(e){let t,n=this.root_;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t)return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}getPredecessorKey(e){let t,n=this.root_,r=null;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new zd(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new zd(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new zd(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new zd(this.root_,null,this.comparator_,!0,e)}}function Wd(e,t){return Au(e.name,t.name)}function Vd(e,t){return Au(e,t)}let Hd;Ud.EMPTY_NODE=new class{copy(e,t,n,r,i){return this}insert(e,t,n){return new Bd(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const qd=function(e){return"number"===typeof e?"number:"+ju(e):"string:"+e},Gd=function(e){if(e.isLeafNode()){const t=e.val();Ts("string"===typeof t||"number"===typeof t||"object"===typeof t&&el(t,".sv"),"Priority must be a string or number.")}else Ts(e===Hd||e.isEmpty(),"priority of unexpected type.");Ts(e===Hd||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let Kd,Yd,Zd;class Xd{static set __childrenNodeConstructor(e){Kd=e}static get __childrenNodeConstructor(){return Kd}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Xd.__childrenNodeConstructor.EMPTY_NODE;this.value_=e,this.priorityNode_=t,this.lazyHash_=null,Ts(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),Gd(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Xd(this.value_,e)}getImmediateChild(e){return".priority"===e?this.priorityNode_:Xd.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return _d(e)?this:".priority"===yd(e)?this.priorityNode_:Xd.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return".priority"===e?this.updatePriority(t):t.isEmpty()&&".priority"!==e?this:Xd.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){const n=yd(e);return null===n?t:t.isEmpty()&&".priority"!==n?this:(Ts(".priority"!==n||1===vd(e),".priority must be the last token in a path"),this.updateImmediateChild(n,Xd.__childrenNodeConstructor.EMPTY_NODE.updateChild(bd(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+qd(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",e+="number"===t?ju(this.value_):this.value_,this.lazyHash_=xu(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Xd.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Xd.__childrenNodeConstructor?-1:(Ts(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const t=typeof e.value_,n=typeof this.value_,r=Xd.VALUE_TYPE_ORDER.indexOf(t),i=Xd.VALUE_TYPE_ORDER.indexOf(n);return Ts(r>=0,"Unknown leaf type: "+t),Ts(i>=0,"Unknown leaf type: "+n),r===i?"object"===n?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-r}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}Xd.VALUE_TYPE_ORDER=["object","boolean","number","string"];const Qd=new class extends Nd{compare(e,t){const n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?Au(e.name,t.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Ld.MIN}maxPost(){return new Ld(Mu,new Xd("[PRIORITY-POST]",Zd))}makePost(e,t){const n=Yd(e);return new Ld(t,new Xd("[PRIORITY-POST]",n))}toString(){return".priority"}},Jd=Math.log(2);class ep{constructor(e){var t;this.count=(t=e+1,parseInt(Math.log(t)/Jd,10)),this.current_=this.count-1;const n=(r=this.count,parseInt(Array(r+1).join("1"),2));var r;this.bits_=e+1&n}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const tp=function(e,t,n,r){e.sort(t);const i=function(t,r){const o=r-t;let a,s;if(0===o)return null;if(1===o)return a=e[t],s=n?n(a):a,new Bd(s,a.node,Bd.BLACK,null,null);{const l=parseInt(o/2,10)+t,c=i(t,l),u=i(l+1,r);return a=e[l],s=n?n(a):a,new Bd(s,a.node,Bd.BLACK,c,u)}},o=function(t){let r=null,o=null,a=e.length;const s=function(t,r){const o=a-t,s=a;a-=t;const c=i(o+1,s),u=e[o],d=n?n(u):u;l(new Bd(d,u.node,r,null,c))},l=function(e){r?(r.left=e,r=e):(o=e,r=e)};for(let e=0;e<t.count;++e){const n=t.nextBitIsOne(),r=Math.pow(2,t.count-(e+1));n?s(r,Bd.BLACK):(s(r,Bd.BLACK),s(r,Bd.RED))}return o}(new ep(e.length));return new Ud(r||t,o)};let np;const rp={};class ip{static get Default(){return Ts(rp&&Qd,"ChildrenNode.ts has not been loaded"),np=np||new ip({".priority":rp},{".priority":Qd}),np}constructor(e,t){this.indexes_=e,this.indexSet_=t}get(e){const t=tl(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Ud?t:null}hasIndex(e){return el(this.indexSet_,e.toString())}addIndex(e,t){Ts(e!==jd,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const n=[];let r=!1;const i=t.getIterator(Ld.Wrap);let o,a=i.getNext();for(;a;)r=r||e.isDefinedOn(a.node),n.push(a),a=i.getNext();o=r?tp(n,e.getCompare()):rp;const s=e.toString(),l=Object.assign({},this.indexSet_);l[s]=e;const c=Object.assign({},this.indexes_);return c[s]=o,new ip(c,l)}addToIndexes(e,t){const n=rl(this.indexes_,((n,r)=>{const i=tl(this.indexSet_,r);if(Ts(i,"Missing index implementation for "+r),n===rp){if(i.isDefinedOn(e.node)){const n=[],r=t.getIterator(Ld.Wrap);let o=r.getNext();for(;o;)o.name!==e.name&&n.push(o),o=r.getNext();return n.push(e),tp(n,i.getCompare())}return rp}{const r=t.get(e.name);let i=n;return r&&(i=i.remove(new Ld(e.name,r))),i.insert(e,e.node)}}));return new ip(n,this.indexSet_)}removeFromIndexes(e,t){const n=rl(this.indexes_,(n=>{if(n===rp)return n;{const r=t.get(e.name);return r?n.remove(new Ld(e.name,r)):n}}));return new ip(n,this.indexSet_)}}let op;class ap{static get EMPTY_NODE(){return op||(op=new ap(new Ud(Vd),null,ip.Default))}constructor(e,t,n){this.children_=e,this.priorityNode_=t,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&Gd(this.priorityNode_),this.children_.isEmpty()&&Ts(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||op}updatePriority(e){return this.children_.isEmpty()?this:new ap(this.children_,e,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{const t=this.children_.get(e);return null===t?op:t}}getChild(e){const t=yd(e);return null===t?this:this.getImmediateChild(t).getChild(bd(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(e,t){if(Ts(t,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(t);{const n=new Ld(e,t);let r,i;t.isEmpty()?(r=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(n,this.children_)):(r=this.children_.insert(e,t),i=this.indexMap_.addToIndexes(n,this.children_));const o=r.isEmpty()?op:this.priorityNode_;return new ap(r,o,i)}}updateChild(e,t){const n=yd(e);if(null===n)return t;{Ts(".priority"!==yd(e)||1===vd(e),".priority must be the last token in a path");const r=this.getImmediateChild(n).updateChild(bd(e),t);return this.updateImmediateChild(n,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let n=0,r=0,i=!0;if(this.forEachChild(Qd,((o,a)=>{t[o]=a.val(e),n++,i&&ap.INTEGER_REGEXP_.test(o)?r=Math.max(r,Number(o)):i=!1})),!e&&i&&r<2*n){const e=[];for(const n in t)e[n]=t[n];return e}return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+qd(this.getPriority().val())+":"),this.forEachChild(Qd,((t,n)=>{const r=n.hash();""!==r&&(e+=":"+t+":"+r)})),this.lazyHash_=""===e?"":xu(e)}return this.lazyHash_}getPredecessorChildName(e,t,n){const r=this.resolveIndex_(n);if(r){const n=r.getPredecessorKey(new Ld(e,t));return n?n.name:null}return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.minKey();return e&&e.name}return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new Ld(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.maxKey();return e&&e.name}return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new Ld(t,this.children_.get(t)):null}forEachChild(e,t){const n=this.resolveIndex_(e);return n?n.inorderTraversal((e=>t(e.name,e.node))):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(e=>e));{const n=this.children_.getIteratorFrom(e.name,Ld.Wrap);let r=n.peek();for(;null!=r&&t.compare(r,e)<0;)n.getNext(),r=n.peek();return n}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(e=>e));{const n=this.children_.getReverseIteratorFrom(e.name,Ld.Wrap);let r=n.peek();for(;null!=r&&t.compare(r,e)>0;)n.getNext(),r=n.peek();return n}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===sp?-1:0}withIndex(e){if(e===jd||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new ap(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===jd||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){const e=this.getIterator(Qd),n=t.getIterator(Qd);let r=e.getNext(),i=n.getNext();for(;r&&i;){if(r.name!==i.name||!r.node.equals(i.node))return!1;r=e.getNext(),i=n.getNext()}return null===r&&null===i}return!1}return!1}}resolveIndex_(e){return e===jd?null:this.indexMap_.get(e.toString())}}ap.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;const sp=new class extends ap{constructor(){super(new Ud(Vd),ap.EMPTY_NODE,ip.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return ap.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(Ld,{MIN:{value:new Ld(Ru,ap.EMPTY_NODE)},MAX:{value:new Ld(Mu,sp)}}),Fd.__EMPTY_NODE=ap.EMPTY_NODE,Xd.__childrenNodeConstructor=ap,Hd=sp,function(e){Zd=e}(sp);function lp(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===e)return ap.EMPTY_NODE;if("object"===typeof e&&".priority"in e&&(t=e[".priority"]),Ts(null===t||"string"===typeof t||"number"===typeof t||"object"===typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"===typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!==typeof e||".sv"in e){return new Xd(e,lp(t))}if(e instanceof Array){let n=ap.EMPTY_NODE;return Fu(e,((t,r)=>{if(el(e,t)&&"."!==t.substring(0,1)){const e=lp(r);!e.isLeafNode()&&e.isEmpty()||(n=n.updateImmediateChild(t,e))}})),n.updatePriority(lp(t))}{const n=[];let r=!1;if(Fu(e,((e,t)=>{if("."!==e.substring(0,1)){const i=lp(t);i.isEmpty()||(r=r||!i.getPriority().isEmpty(),n.push(new Ld(e,i)))}})),0===n.length)return ap.EMPTY_NODE;const i=tp(n,Wd,(e=>e.name),Vd);if(r){const e=tp(n,Qd.getCompare());return new ap(i,lp(t),new ip({".priority":e},{".priority":Qd}))}return new ap(i,lp(t),ip.Default)}}!function(e){Yd=e}(lp);class cp extends Nd{constructor(e){super(),this.indexPath_=e,Ts(!_d(e)&&".priority"!==yd(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?Au(e.name,t.name):i}makePost(e,t){const n=lp(e),r=ap.EMPTY_NODE.updateChild(this.indexPath_,n);return new Ld(t,r)}maxPost(){const e=ap.EMPTY_NODE.updateChild(this.indexPath_,sp);return new Ld(Mu,e)}toString(){return wd(this.indexPath_,0).join("/")}}const up=new class extends Nd{compare(e,t){const n=e.node.compareTo(t.node);return 0===n?Au(e.name,t.name):n}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Ld.MIN}maxPost(){return Ld.MAX}makePost(e,t){const n=lp(e);return new Ld(t,n)}toString(){return".value"}};function dp(e){return{type:"value",snapshotNode:e}}function pp(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function hp(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function fp(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}class mp{constructor(e){this.index_=e}updateChild(e,t,n,r,i,o){Ts(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(t);return a.getChild(r).equals(n.getChild(r))&&a.isEmpty()===n.isEmpty()?e:(null!=o&&(n.isEmpty()?e.hasChild(t)?o.trackChildChange(hp(t,a)):Ts(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(pp(t,n)):o.trackChildChange(fp(t,n,a))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))}updateFullNode(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(Qd,((e,r)=>{t.hasChild(e)||n.trackChildChange(hp(e,r))})),t.isLeafNode()||t.forEachChild(Qd,((t,r)=>{if(e.hasChild(t)){const i=e.getImmediateChild(t);i.equals(r)||n.trackChildChange(fp(t,r,i))}else n.trackChildChange(pp(t,r))}))),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?ap.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class gp{constructor(e){this.indexedFilter_=new mp(e.getIndex()),this.index_=e.getIndex(),this.startPost_=gp.getStartPost_(e),this.endPost_=gp.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,n=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&n}updateChild(e,t,n,r,i,o){return this.matches(new Ld(t,n))||(n=ap.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,i,o)}updateFullNode(e,t,n){t.isLeafNode()&&(t=ap.EMPTY_NODE);let r=t.withIndex(this.index_);r=r.updatePriority(ap.EMPTY_NODE);const i=this;return t.forEachChild(Qd,((e,t)=>{i.matches(new Ld(e,t))||(r=r.updateImmediateChild(e,ap.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(e,r,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class yp{constructor(e){this.withinDirectionalStart=e=>this.reverse_?this.withinEndPost(e):this.withinStartPost(e),this.withinDirectionalEnd=e=>this.reverse_?this.withinStartPost(e):this.withinEndPost(e),this.withinStartPost=e=>{const t=this.index_.compare(this.rangedFilter_.getStartPost(),e);return this.startIsInclusive_?t<=0:t<0},this.withinEndPost=e=>{const t=this.index_.compare(e,this.rangedFilter_.getEndPost());return this.endIsInclusive_?t<=0:t<0},this.rangedFilter_=new gp(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,n,r,i,o){return this.rangedFilter_.matches(new Ld(t,n))||(n=ap.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,i,o):this.fullLimitUpdateChild_(e,t,n,i,o)}updateFullNode(e,t,n){let r;if(t.isLeafNode()||t.isEmpty())r=ap.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let e;r=ap.EMPTY_NODE.withIndex(this.index_),e=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let n=0;for(;e.hasNext()&&n<this.limit_;){const t=e.getNext();if(this.withinDirectionalStart(t)){if(!this.withinDirectionalEnd(t))break;r=r.updateImmediateChild(t.name,t.node),n++}}}else{let e;r=t.withIndex(this.index_),r=r.updatePriority(ap.EMPTY_NODE),e=this.reverse_?r.getReverseIterator(this.index_):r.getIterator(this.index_);let n=0;for(;e.hasNext();){const t=e.getNext();n<this.limit_&&this.withinDirectionalStart(t)&&this.withinDirectionalEnd(t)?n++:r=r.updateImmediateChild(t.name,ap.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,n,r,i){let o;if(this.reverse_){const e=this.index_.getCompare();o=(t,n)=>e(n,t)}else o=this.index_.getCompare();const a=e;Ts(a.numChildren()===this.limit_,"");const s=new Ld(t,n),l=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),c=this.rangedFilter_.matches(s);if(a.hasChild(t)){const e=a.getImmediateChild(t);let u=r.getChildAfterChild(this.index_,l,this.reverse_);for(;null!=u&&(u.name===t||a.hasChild(u.name));)u=r.getChildAfterChild(this.index_,u,this.reverse_);const d=null==u?1:o(u,s);if(c&&!n.isEmpty()&&d>=0)return null!=i&&i.trackChildChange(fp(t,n,e)),a.updateImmediateChild(t,n);{null!=i&&i.trackChildChange(hp(t,e));const n=a.updateImmediateChild(t,ap.EMPTY_NODE);return null!=u&&this.rangedFilter_.matches(u)?(null!=i&&i.trackChildChange(pp(u.name,u.node)),n.updateImmediateChild(u.name,u.node)):n}}return n.isEmpty()?e:c&&o(l,s)>=0?(null!=i&&(i.trackChildChange(hp(l.name,l.node)),i.trackChildChange(pp(t,n))),a.updateImmediateChild(t,n).updateImmediateChild(l.name,ap.EMPTY_NODE)):e}}class vp{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Qd}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return Ts(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return Ts(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Ru}hasEnd(){return this.endSet_}getIndexEndValue(){return Ts(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return Ts(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Mu}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return Ts(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Qd}copy(){const e=new vp;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function bp(e,t,n){const r=e.copy();return r.startSet_=!0,void 0===t&&(t=null),r.indexStartValue_=t,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function xp(e,t,n){const r=e.copy();return r.endSet_=!0,void 0===t&&(t=null),r.indexEndValue_=t,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function wp(e,t){const n=e.copy();return n.index_=t,n}function $p(e){const t={};if(e.isDefault())return t;let n;if(e.index_===Qd?n="$priority":e.index_===up?n="$value":e.index_===jd?n="$key":(Ts(e.index_ instanceof cp,"Unrecognized index type!"),n=e.index_.toString()),t.orderBy=Qs(n),e.startSet_){const n=e.startAfterSet_?"startAfter":"startAt";t[n]=Qs(e.indexStartValue_),e.startNameSet_&&(t[n]+=","+Qs(e.indexStartName_))}if(e.endSet_){const n=e.endBeforeSet_?"endBefore":"endAt";t[n]=Qs(e.indexEndValue_),e.endNameSet_&&(t[n]+=","+Qs(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function Sp(e){const t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;let n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==Qd&&(t.i=e.index_.toString()),t}class _p extends pd{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:(Ts(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,t,n,r){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=n,this.appCheckTokenProvider_=r,this.log_=ku("p:rest:"),this.listens_={}}listen(e,t,n,r){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const o=_p.getListenId_(e,n),a={};this.listens_[o]=a;const s=$p(e._queryParams);this.restRequest_(i+".json",s,((e,t)=>{let s=t;if(404===e&&(s=null,e=null),null===e&&this.onDataUpdate_(i,s,!1,n),tl(this.listens_,o)===a){let t;t=e?401===e?"permission_denied":"rest_error:"+e:"ok",r(t,null)}}))}unlisten(e,t){const n=_p.getListenId_(e,t);delete this.listens_[n]}get(e){const t=$p(e._queryParams),n=e._path.toString(),r=new Us;return this.restRequest_(n+".json",t,((e,t)=>{let i=t;404===e&&(i=null,e=null),null===e?(this.onDataUpdate_(n,i,!1,null),r.resolve(i)):r.reject(new Error(i))})),r.promise}refreshAuthToken(e){}restRequest_(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((r=>{let[i,o]=r;i&&i.accessToken&&(t.auth=i.accessToken),o&&o.token&&(t.ac=o.token);const a=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+al(t);this.log_("Sending REST request for "+a);const s=new XMLHttpRequest;s.onreadystatechange=()=>{if(n&&4===s.readyState){this.log_("REST Response for "+a+" received. status:",s.status,"response:",s.responseText);let t=null;if(s.status>=200&&s.status<300){try{t=Xs(s.responseText)}catch(e){Iu("Failed to parse JSON response for "+a+": "+s.responseText)}n(null,t)}else 401!==s.status&&404!==s.status&&Iu("Got unsuccessful REST response for "+a+" Status: "+s.status),n(s.status);n=null}},s.open("GET",a,!0),s.send()}))}}class Cp{constructor(){this.rootNode_=ap.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function kp(){return{value:null,children:new Map}}function Ep(e,t,n){if(_d(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{const r=yd(t);e.children.has(r)||e.children.set(r,kp());Ep(e.children.get(r),t=bd(t),n)}}function Tp(e,t){if(_d(t))return e.value=null,e.children.clear(),!0;if(null!==e.value){if(e.value.isLeafNode())return!1;{const n=e.value;return e.value=null,n.forEachChild(Qd,((t,n)=>{Ep(e,new md(t),n)})),Tp(e,t)}}if(e.children.size>0){const n=yd(t);if(t=bd(t),e.children.has(n)){Tp(e.children.get(n),t)&&e.children.delete(n)}return 0===e.children.size}return!0}function Ip(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach(((e,n)=>{t(n,e)}))}(e,((e,r)=>{Ip(r,new md(t.toString()+"/"+e),n)}))}class Pp{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Fu(this.last_,((e,n)=>{t[e]=t[e]-n})),this.last_=e,t}}class Rp{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new Pp(e);const n=1e4+2e4*Math.random();Wu(this.reportStats_.bind(this),Math.floor(n))}reportStats_(){const e=this.statsListener_.get(),t={};let n=!1;Fu(e,((e,r)=>{r>0&&el(this.statsToReport_,e)&&(t[e]=r,n=!0)})),n&&this.server_.reportStats(t),Wu(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Mp;function Ap(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Mp||(Mp={}));class Op{constructor(e,t,n){this.path=e,this.affectedTree=t,this.revert=n,this.type=Mp.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(_d(this.path)){if(null!=this.affectedTree.value)return Ts(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new md(e));return new Op(gd(),t,this.revert)}}return Ts(yd(this.path)===e,"operationForChild called for unrelated child."),new Op(bd(this.path),this.affectedTree,this.revert)}}class Lp{constructor(e,t){this.source=e,this.path=t,this.type=Mp.LISTEN_COMPLETE}operationForChild(e){return _d(this.path)?new Lp(this.source,gd()):new Lp(this.source,bd(this.path))}}class Np{constructor(e,t,n){this.source=e,this.path=t,this.snap=n,this.type=Mp.OVERWRITE}operationForChild(e){return _d(this.path)?new Np(this.source,gd(),this.snap.getImmediateChild(e)):new Np(this.source,bd(this.path),this.snap)}}class Dp{constructor(e,t,n){this.source=e,this.path=t,this.children=n,this.type=Mp.MERGE}operationForChild(e){if(_d(this.path)){const t=this.children.subtree(new md(e));return t.isEmpty()?null:t.value?new Np(this.source,gd(),t.value):new Dp(this.source,gd(),t)}return Ts(yd(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Dp(this.source,bd(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Fp{constructor(e,t,n){this.node_=e,this.fullyInitialized_=t,this.filtered_=n}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(_d(e))return this.isFullyInitialized()&&!this.filtered_;const t=yd(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class jp{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function zp(e,t,n,r,i,o){const a=r.filter((e=>e.type===n));a.sort(((t,n)=>function(e,t,n){if(null==t.childName||null==n.childName)throw Is("Should only compare child_ events.");const r=new Ld(t.childName,t.snapshotNode),i=new Ld(n.childName,n.snapshotNode);return e.index_.compare(r,i)}(e,t,n))),a.forEach((n=>{const r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,o);i.forEach((i=>{i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))}))}))}function Bp(e,t){return{eventCache:e,serverCache:t}}function Up(e,t,n,r){return Bp(new Fp(t,n,r),e.serverCache)}function Wp(e,t,n,r){return Bp(e.eventCache,new Fp(t,n,r))}function Vp(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function Hp(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}let qp;class Gp{static fromObject(e){let t=new Gp(null);return Fu(e,((e,n)=>{t=t.set(new md(e),n)})),t}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(qp||(qp=new Ud(Ou)),qp);this.value=e,this.children=t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:gd(),value:this.value};if(_d(e))return null;{const n=yd(e),r=this.children.get(n);if(null!==r){const i=r.findRootMostMatchingPathAndValue(bd(e),t);if(null!=i){return{path:Sd(new md(n),i.path),value:i.value}}return null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,(()=>!0))}subtree(e){if(_d(e))return this;{const t=yd(e),n=this.children.get(t);return null!==n?n.subtree(bd(e)):new Gp(null)}}set(e,t){if(_d(e))return new Gp(t,this.children);{const n=yd(e),r=(this.children.get(n)||new Gp(null)).set(bd(e),t),i=this.children.insert(n,r);return new Gp(this.value,i)}}remove(e){if(_d(e))return this.children.isEmpty()?new Gp(null):new Gp(null,this.children);{const t=yd(e),n=this.children.get(t);if(n){const r=n.remove(bd(e));let i;return i=r.isEmpty()?this.children.remove(t):this.children.insert(t,r),null===this.value&&i.isEmpty()?new Gp(null):new Gp(this.value,i)}return this}}get(e){if(_d(e))return this.value;{const t=yd(e),n=this.children.get(t);return n?n.get(bd(e)):null}}setTree(e,t){if(_d(e))return t;{const n=yd(e),r=(this.children.get(n)||new Gp(null)).setTree(bd(e),t);let i;return i=r.isEmpty()?this.children.remove(n):this.children.insert(n,r),new Gp(this.value,i)}}fold(e){return this.fold_(gd(),e)}fold_(e,t){const n={};return this.children.inorderTraversal(((r,i)=>{n[r]=i.fold_(Sd(e,r),t)})),t(e,this.value,n)}findOnPath(e,t){return this.findOnPath_(e,gd(),t)}findOnPath_(e,t,n){const r=!!this.value&&n(t,this.value);if(r)return r;if(_d(e))return null;{const r=yd(e),i=this.children.get(r);return i?i.findOnPath_(bd(e),Sd(t,r),n):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,gd(),t)}foreachOnPath_(e,t,n){if(_d(e))return this;{this.value&&n(t,this.value);const r=yd(e),i=this.children.get(r);return i?i.foreachOnPath_(bd(e),Sd(t,r),n):new Gp(null)}}foreach(e){this.foreach_(gd(),e)}foreach_(e,t){this.children.inorderTraversal(((n,r)=>{r.foreach_(Sd(e,n),t)})),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal(((t,n)=>{n.value&&e(t,n.value)}))}}class Kp{constructor(e){this.writeTree_=e}static empty(){return new Kp(new Gp(null))}}function Yp(e,t,n){if(_d(t))return new Kp(new Gp(n));{const r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){const i=r.path;let o=r.value;const a=Cd(i,t);return o=o.updateChild(a,n),new Kp(e.writeTree_.set(i,o))}{const r=new Gp(n),i=e.writeTree_.setTree(t,r);return new Kp(i)}}}function Zp(e,t,n){let r=e;return Fu(n,((e,n)=>{r=Yp(r,Sd(t,e),n)})),r}function Xp(e,t){if(_d(t))return Kp.empty();{const n=e.writeTree_.setTree(t,new Gp(null));return new Kp(n)}}function Qp(e,t){return null!=Jp(e,t)}function Jp(e,t){const n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(Cd(n.path,t)):null}function eh(e){const t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(Qd,((e,n)=>{t.push(new Ld(e,n))})):e.writeTree_.children.inorderTraversal(((e,n)=>{null!=n.value&&t.push(new Ld(e,n.value))})),t}function th(e,t){if(_d(t))return e;{const n=Jp(e,t);return new Kp(null!=n?new Gp(n):e.writeTree_.subtree(t))}}function nh(e){return e.writeTree_.isEmpty()}function rh(e,t){return ih(gd(),e.writeTree_,t)}function ih(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);{let r=null;return t.children.inorderTraversal(((t,i)=>{".priority"===t?(Ts(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=ih(Sd(e,t),i,n)})),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(Sd(e,".priority"),r)),n}}function oh(e,t){return vh(t,e)}function ah(e,t){const n=e.allWrites.findIndex((e=>e.writeId===t));Ts(n>=0,"removeWrite called with nonexistent writeId.");const r=e.allWrites[n];e.allWrites.splice(n,1);let i=r.visible,o=!1,a=e.allWrites.length-1;for(;i&&a>=0;){const t=e.allWrites[a];t.visible&&(a>=n&&sh(t,r.path)?i=!1:Td(r.path,t.path)&&(o=!0)),a--}if(i){if(o)return function(e){e.visibleWrites=ch(e.allWrites,lh,gd()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;if(r.snap)e.visibleWrites=Xp(e.visibleWrites,r.path);else{Fu(r.children,(t=>{e.visibleWrites=Xp(e.visibleWrites,Sd(r.path,t))}))}return!0}return!1}function sh(e,t){if(e.snap)return Td(e.path,t);for(const n in e.children)if(e.children.hasOwnProperty(n)&&Td(Sd(e.path,n),t))return!0;return!1}function lh(e){return e.visible}function ch(e,t,n){let r=Kp.empty();for(let i=0;i<e.length;++i){const o=e[i];if(t(o)){const e=o.path;let t;if(o.snap)Td(n,e)?(t=Cd(n,e),r=Yp(r,t,o.snap)):Td(e,n)&&(t=Cd(e,n),r=Yp(r,gd(),o.snap.getChild(t)));else{if(!o.children)throw Is("WriteRecord should have .snap or .children");if(Td(n,e))t=Cd(n,e),r=Zp(r,t,o.children);else if(Td(e,n))if(t=Cd(e,n),_d(t))r=Zp(r,gd(),o.children);else{const e=tl(o.children,yd(t));if(e){const n=e.getChild(bd(t));r=Yp(r,gd(),n)}}}}}return r}function uh(e,t,n,r,i){if(r||i){const o=th(e.visibleWrites,t);if(!i&&nh(o))return n;if(i||null!=n||Qp(o,gd())){const o=function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(Td(e.path,t)||Td(t,e.path))};return rh(ch(e.allWrites,o,t),n||ap.EMPTY_NODE)}return null}{const r=Jp(e.visibleWrites,t);if(null!=r)return r;{const r=th(e.visibleWrites,t);if(nh(r))return n;if(null!=n||Qp(r,gd())){return rh(r,n||ap.EMPTY_NODE)}return null}}}function dh(e,t,n,r){return uh(e.writeTree,e.treePath,t,n,r)}function ph(e,t){return function(e,t,n){let r=ap.EMPTY_NODE;const i=Jp(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(Qd,((e,t)=>{r=r.updateImmediateChild(e,t)})),r;if(n){const i=th(e.visibleWrites,t);return n.forEachChild(Qd,((e,t)=>{const n=rh(th(i,new md(e)),t);r=r.updateImmediateChild(e,n)})),eh(i).forEach((e=>{r=r.updateImmediateChild(e.name,e.node)})),r}return eh(th(e.visibleWrites,t)).forEach((e=>{r=r.updateImmediateChild(e.name,e.node)})),r}(e.writeTree,e.treePath,t)}function hh(e,t,n,r){return function(e,t,n,r,i){Ts(r||i,"Either existingEventSnap or existingServerSnap must exist");const o=Sd(t,n);if(Qp(e.visibleWrites,o))return null;{const t=th(e.visibleWrites,o);return nh(t)?i.getChild(n):rh(t,i.getChild(n))}}(e.writeTree,e.treePath,t,n,r)}function fh(e,t){return function(e,t){return Jp(e.visibleWrites,t)}(e.writeTree,Sd(e.treePath,t))}function mh(e,t,n,r,i,o){return function(e,t,n,r,i,o,a){let s;const l=th(e.visibleWrites,t),c=Jp(l,gd());if(null!=c)s=c;else{if(null==n)return[];s=rh(l,n)}if(s=s.withIndex(a),s.isEmpty()||s.isLeafNode())return[];{const e=[],t=a.getCompare(),n=o?s.getReverseIteratorFrom(r,a):s.getIteratorFrom(r,a);let l=n.getNext();for(;l&&e.length<i;)0!==t(l,r)&&e.push(l),l=n.getNext();return e}}(e.writeTree,e.treePath,t,n,r,i,o)}function gh(e,t,n){return function(e,t,n,r){const i=Sd(t,n),o=Jp(e.visibleWrites,i);if(null!=o)return o;if(r.isCompleteForChild(n))return rh(th(e.visibleWrites,i),r.getNode().getImmediateChild(n));return null}(e.writeTree,e.treePath,t,n)}function yh(e,t){return vh(Sd(e.treePath,t),e.writeTree)}function vh(e,t){return{treePath:e,writeTree:t}}class bh{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,n=e.childName;Ts("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),Ts(".priority"!==n,"Only non-priority child changes can be tracked.");const r=this.changeMap.get(n);if(r){const i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,fp(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,hp(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,pp(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw Is("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,fp(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)}getChanges(){return Array.from(this.changeMap.values())}}const xh=new class{getCompleteChild(e){return null}getChildAfterChild(e,t,n){return null}};class wh{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=n}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const t=null!=this.optCompleteServerCache_?new Fp(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return gh(this.writes_,e,t)}}getChildAfterChild(e,t,n){const r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Hp(this.viewCache_),i=mh(this.writes_,r,t,1,n,e);return 0===i.length?null:i[0]}}function $h(e,t,n,r,i){const o=new bh;let a,s;if(n.type===Mp.OVERWRITE){const l=n;l.source.fromUser?a=Ch(e,t,l.path,l.snap,r,i,o):(Ts(l.source.fromServer,"Unknown source."),s=l.source.tagged||t.serverCache.isFiltered()&&!_d(l.path),a=_h(e,t,l.path,l.snap,r,i,s,o))}else if(n.type===Mp.MERGE){const l=n;l.source.fromUser?a=function(e,t,n,r,i,o,a){let s=t;return r.foreach(((r,l)=>{const c=Sd(n,r);kh(t,yd(c))&&(s=Ch(e,s,c,l,i,o,a))})),r.foreach(((r,l)=>{const c=Sd(n,r);kh(t,yd(c))||(s=Ch(e,s,c,l,i,o,a))})),s}(e,t,l.path,l.children,r,i,o):(Ts(l.source.fromServer,"Unknown source."),s=l.source.tagged||t.serverCache.isFiltered(),a=Th(e,t,l.path,l.children,r,i,s,o))}else if(n.type===Mp.ACK_USER_WRITE){const s=n;a=s.revert?function(e,t,n,r,i,o){let a;if(null!=fh(r,n))return t;{const s=new wh(r,t,i),l=t.eventCache.getNode();let c;if(_d(n)||".priority"===yd(n)){let n;if(t.serverCache.isFullyInitialized())n=dh(r,Hp(t));else{const e=t.serverCache.getNode();Ts(e instanceof ap,"serverChildren would be complete if leaf node"),n=ph(r,e)}c=e.filter.updateFullNode(l,n,o)}else{const i=yd(n);let u=gh(r,i,t.serverCache);null==u&&t.serverCache.isCompleteForChild(i)&&(u=l.getImmediateChild(i)),c=null!=u?e.filter.updateChild(l,i,u,bd(n),s,o):t.eventCache.getNode().hasChild(i)?e.filter.updateChild(l,i,ap.EMPTY_NODE,bd(n),s,o):l,c.isEmpty()&&t.serverCache.isFullyInitialized()&&(a=dh(r,Hp(t)),a.isLeafNode()&&(c=e.filter.updateFullNode(c,a,o)))}return a=t.serverCache.isFullyInitialized()||null!=fh(r,gd()),Up(t,c,a,e.filter.filtersNodes())}}(e,t,s.path,r,i,o):function(e,t,n,r,i,o,a){if(null!=fh(i,n))return t;const s=t.serverCache.isFiltered(),l=t.serverCache;if(null!=r.value){if(_d(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return _h(e,t,n,l.getNode().getChild(n),i,o,s,a);if(_d(n)){let r=new Gp(null);return l.getNode().forEachChild(jd,((e,t)=>{r=r.set(new md(e),t)})),Th(e,t,n,r,i,o,s,a)}return t}{let c=new Gp(null);return r.foreach(((e,t)=>{const r=Sd(n,e);l.isCompleteForPath(r)&&(c=c.set(e,l.getNode().getChild(r)))})),Th(e,t,n,c,i,o,s,a)}}(e,t,s.path,s.affectedTree,r,i,o)}else{if(n.type!==Mp.LISTEN_COMPLETE)throw Is("Unknown operation type: "+n.type);a=function(e,t,n,r,i){const o=t.serverCache,a=Wp(t,o.getNode(),o.isFullyInitialized()||_d(n),o.isFiltered());return Sh(e,a,n,r,xh,i)}(e,t,n.path,r,o)}const l=o.getChanges();return function(e,t,n){const r=t.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=Vp(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(dp(Vp(t)))}}(t,a,l),{viewCache:a,changes:l}}function Sh(e,t,n,r,i,o){const a=t.eventCache;if(null!=fh(r,n))return t;{let s,l;if(_d(n))if(Ts(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const n=Hp(t),i=ph(r,n instanceof ap?n:ap.EMPTY_NODE);s=e.filter.updateFullNode(t.eventCache.getNode(),i,o)}else{const n=dh(r,Hp(t));s=e.filter.updateFullNode(t.eventCache.getNode(),n,o)}else{const c=yd(n);if(".priority"===c){Ts(1===vd(n),"Can't have a priority with additional path components");const i=a.getNode();l=t.serverCache.getNode();const o=hh(r,n,i,l);s=null!=o?e.filter.updatePriority(i,o):a.getNode()}else{const u=bd(n);let d;if(a.isCompleteForChild(c)){l=t.serverCache.getNode();const e=hh(r,n,a.getNode(),l);d=null!=e?a.getNode().getImmediateChild(c).updateChild(u,e):a.getNode().getImmediateChild(c)}else d=gh(r,c,t.serverCache);s=null!=d?e.filter.updateChild(a.getNode(),c,d,u,i,o):a.getNode()}}return Up(t,s,a.isFullyInitialized()||_d(n),e.filter.filtersNodes())}}function _h(e,t,n,r,i,o,a,s){const l=t.serverCache;let c;const u=a?e.filter:e.filter.getIndexedFilter();if(_d(n))c=u.updateFullNode(l.getNode(),r,null);else if(u.filtersNodes()&&!l.isFiltered()){const e=l.getNode().updateChild(n,r);c=u.updateFullNode(l.getNode(),e,null)}else{const e=yd(n);if(!l.isCompleteForPath(n)&&vd(n)>1)return t;const i=bd(n),o=l.getNode().getImmediateChild(e).updateChild(i,r);c=".priority"===e?u.updatePriority(l.getNode(),o):u.updateChild(l.getNode(),e,o,i,xh,null)}const d=Wp(t,c,l.isFullyInitialized()||_d(n),u.filtersNodes());return Sh(e,d,n,i,new wh(i,d,o),s)}function Ch(e,t,n,r,i,o,a){const s=t.eventCache;let l,c;const u=new wh(i,t,o);if(_d(n))c=e.filter.updateFullNode(t.eventCache.getNode(),r,a),l=Up(t,c,!0,e.filter.filtersNodes());else{const i=yd(n);if(".priority"===i)c=e.filter.updatePriority(t.eventCache.getNode(),r),l=Up(t,c,s.isFullyInitialized(),s.isFiltered());else{const o=bd(n),c=s.getNode().getImmediateChild(i);let d;if(_d(o))d=r;else{const e=u.getCompleteChild(i);d=null!=e?".priority"===xd(o)&&e.getChild($d(o)).isEmpty()?e:e.updateChild(o,r):ap.EMPTY_NODE}if(c.equals(d))l=t;else{l=Up(t,e.filter.updateChild(s.getNode(),i,d,o,u,a),s.isFullyInitialized(),e.filter.filtersNodes())}}}return l}function kh(e,t){return e.eventCache.isCompleteForChild(t)}function Eh(e,t,n){return n.foreach(((e,n)=>{t=t.updateChild(e,n)})),t}function Th(e,t,n,r,i,o,a,s){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let l,c=t;l=_d(n)?r:new Gp(null).setTree(n,r);const u=t.serverCache.getNode();return l.children.inorderTraversal(((n,r)=>{if(u.hasChild(n)){const l=Eh(0,t.serverCache.getNode().getImmediateChild(n),r);c=_h(e,c,new md(n),l,i,o,a,s)}})),l.children.inorderTraversal(((n,r)=>{const l=!t.serverCache.isCompleteForChild(n)&&null===r.value;if(!u.hasChild(n)&&!l){const l=Eh(0,t.serverCache.getNode().getImmediateChild(n),r);c=_h(e,c,new md(n),l,i,o,a,s)}})),c}class Ih{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const n=this.query_._queryParams,r=new mp(n.getIndex()),i=(o=n).loadsAllData()?new mp(o.getIndex()):o.hasLimit()?new yp(o):new gp(o);var o;this.processor_=function(e){return{filter:e}}(i);const a=t.serverCache,s=t.eventCache,l=r.updateFullNode(ap.EMPTY_NODE,a.getNode(),null),c=i.updateFullNode(ap.EMPTY_NODE,s.getNode(),null),u=new Fp(l,a.isFullyInitialized(),r.filtersNodes()),d=new Fp(c,s.isFullyInitialized(),i.filtersNodes());this.viewCache_=Bp(d,u),this.eventGenerator_=new jp(this.query_)}get query(){return this.query_}}function Ph(e,t){const n=Hp(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!_d(t)&&!n.getImmediateChild(yd(t)).isEmpty())?n.getChild(t):null}function Rh(e){return 0===e.eventRegistrations_.length}function Mh(e,t,n){const r=[];if(n){Ts(null==t,"A cancel should cancel all event registrations.");const i=e.query._path;e.eventRegistrations_.forEach((e=>{const t=e.createCancelEvent(n,i);t&&r.push(t)}))}if(t){let n=[];for(let r=0;r<e.eventRegistrations_.length;++r){const i=e.eventRegistrations_[r];if(i.matches(t)){if(t.hasAnyCallback()){n=n.concat(e.eventRegistrations_.slice(r+1));break}}else n.push(i)}e.eventRegistrations_=n}else e.eventRegistrations_=[];return r}function Ah(e,t,n,r){t.type===Mp.MERGE&&null!==t.source.queryId&&(Ts(Hp(e.viewCache_),"We should always have a full cache before handling merges"),Ts(Vp(e.viewCache_),"Missing event cache, even though we have a server cache"));const i=e.viewCache_,o=$h(e.processor_,i,t,n,r);var a,s;return a=e.processor_,s=o.viewCache,Ts(s.eventCache.getNode().isIndexed(a.filter.getIndex()),"Event snap not indexed"),Ts(s.serverCache.getNode().isIndexed(a.filter.getIndex()),"Server snap not indexed"),Ts(o.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=o.viewCache,Oh(e,o.changes,o.viewCache.eventCache.getNode(),null)}function Oh(e,t,n,r){const i=r?[r]:e.eventRegistrations_;return function(e,t,n,r){const i=[],o=[];return t.forEach((t=>{var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&o.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),zp(e,i,"child_removed",t,r,n),zp(e,i,"child_added",t,r,n),zp(e,i,"child_moved",o,r,n),zp(e,i,"child_changed",t,r,n),zp(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,i)}let Lh,Nh;class Dh{constructor(){this.views=new Map}}function Fh(e,t,n,r){const i=t.source.queryId;if(null!==i){const o=e.views.get(i);return Ts(null!=o,"SyncTree gave us an op for an invalid query."),Ah(o,t,n,r)}{let i=[];for(const o of e.views.values())i=i.concat(Ah(o,t,n,r));return i}}function jh(e,t,n,r,i){const o=t._queryIdentifier,a=e.views.get(o);if(!a){let e=dh(n,i?r:null),o=!1;e?o=!0:r instanceof ap?(e=ph(n,r),o=!1):(e=ap.EMPTY_NODE,o=!1);const a=Bp(new Fp(e,o,!1),new Fp(r,i,!1));return new Ih(t,a)}return a}function zh(e,t,n,r,i,o){const a=jh(e,t,r,i,o);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,a),function(e,t){e.eventRegistrations_.push(t)}(a,n),function(e,t){const n=e.viewCache_.eventCache,r=[];n.getNode().isLeafNode()||n.getNode().forEachChild(Qd,((e,t)=>{r.push(pp(e,t))}));return n.isFullyInitialized()&&r.push(dp(n.getNode())),Oh(e,r,n.getNode(),t)}(a,n)}function Bh(e,t,n,r){const i=t._queryIdentifier,o=[];let a=[];const s=qh(e);if("default"===i)for(const[l,c]of e.views.entries())a=a.concat(Mh(c,n,r)),Rh(c)&&(e.views.delete(l),c.query._queryParams.loadsAllData()||o.push(c.query));else{const t=e.views.get(i);t&&(a=a.concat(Mh(t,n,r)),Rh(t)&&(e.views.delete(i),t.query._queryParams.loadsAllData()||o.push(t.query)))}return s&&!qh(e)&&o.push(new(Ts(Lh,"Reference.ts has not been loaded"),Lh)(t._repo,t._path)),{removed:o,events:a}}function Uh(e){const t=[];for(const n of e.views.values())n.query._queryParams.loadsAllData()||t.push(n);return t}function Wh(e,t){let n=null;for(const r of e.views.values())n=n||Ph(r,t);return n}function Vh(e,t){if(t._queryParams.loadsAllData())return Gh(e);{const n=t._queryIdentifier;return e.views.get(n)}}function Hh(e,t){return null!=Vh(e,t)}function qh(e){return null!=Gh(e)}function Gh(e){for(const t of e.views.values())if(t.query._queryParams.loadsAllData())return t;return null}let Kh=1;class Yh{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Gp(null),this.pendingWriteTree_={visibleWrites:Kp.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Zh(e,t,n,r,i){return function(e,t,n,r,i){Ts(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=Yp(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?af(e,new Np({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function Xh(e,t,n,r){!function(e,t,n,r){Ts(r>e.lastWriteId,"Stacking an older merge on top of newer ones"),e.allWrites.push({path:t,children:n,writeId:r,visible:!0}),e.visibleWrites=Zp(e.visibleWrites,t,n),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r);const i=Gp.fromObject(n);return af(e,new Dp({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,i))}function Qh(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=function(e,t){for(let n=0;n<e.allWrites.length;n++){const r=e.allWrites[n];if(r.writeId===t)return r}return null}(e.pendingWriteTree_,t);if(ah(e.pendingWriteTree_,t)){let t=new Gp(null);return null!=r.snap?t=t.set(gd(),!0):Fu(r.children,(e=>{t=t.set(new md(e),!0)})),af(e,new Op(r.path,t,n))}return[]}function Jh(e,t,n){return af(e,new Np({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function ef(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const o=t._path,a=e.syncPointTree_.get(o);let s=[];if(a&&("default"===t._queryIdentifier||Hh(a,t))){const l=Bh(a,t,n,r);0===a.views.size&&(e.syncPointTree_=e.syncPointTree_.remove(o));const c=l.removed;if(s=l.events,!i){const n=-1!==c.findIndex((e=>e._queryParams.loadsAllData())),i=e.syncPointTree_.findOnPath(o,((e,t)=>qh(t)));if(n&&!i){const t=e.syncPointTree_.subtree(o);if(!t.isEmpty()){const n=function(e){return e.fold(((e,t,n)=>{if(t&&qh(t)){return[Gh(t)]}{let e=[];return t&&(e=Uh(t)),Fu(n,((t,n)=>{e=e.concat(n)})),e}}))}(t);for(let t=0;t<n.length;++t){const r=n[t],i=r.query,o=cf(e,r);e.listenProvider_.startListening(mf(i),uf(e,i),o.hashFn,o.onComplete)}}}if(!i&&c.length>0&&!r)if(n){const n=null;e.listenProvider_.stopListening(mf(t),n)}else c.forEach((t=>{const n=e.queryToTagMap.get(df(t));e.listenProvider_.stopListening(mf(t),n)}))}!function(e,t){for(let n=0;n<t.length;++n){const r=t[n];if(!r._queryParams.loadsAllData()){const t=df(r),n=e.queryToTagMap.get(t);e.queryToTagMap.delete(t),e.tagToQueryMap.delete(n)}}}(e,c)}return s}function tf(e,t,n,r){const i=pf(e,r);if(null!=i){const r=hf(i),o=r.path,a=r.queryId,s=Cd(o,t);return ff(e,o,new Np(Ap(a),s,n))}return[]}function nf(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=t._path;let o=null,a=!1;e.syncPointTree_.foreachOnPath(i,((e,t)=>{const n=Cd(e,i);o=o||Wh(t,n),a=a||qh(t)}));let s,l=e.syncPointTree_.get(i);if(l?(a=a||qh(l),o=o||Wh(l,gd())):(l=new Dh,e.syncPointTree_=e.syncPointTree_.set(i,l)),null!=o)s=!0;else{s=!1,o=ap.EMPTY_NODE;e.syncPointTree_.subtree(i).foreachChild(((e,t)=>{const n=Wh(t,gd());n&&(o=o.updateImmediateChild(e,n))}))}const c=Hh(l,t);if(!c&&!t._queryParams.loadsAllData()){const n=df(t);Ts(!e.queryToTagMap.has(n),"View does not exist, but we have a tag");const r=Kh++;e.queryToTagMap.set(n,r),e.tagToQueryMap.set(r,n)}let u=zh(l,t,n,oh(e.pendingWriteTree_,i),o,s);if(!c&&!a&&!r){const n=Vh(l,t);u=u.concat(function(e,t,n){const r=t._path,i=uf(e,t),o=cf(e,n),a=e.listenProvider_.startListening(mf(t),i,o.hashFn,o.onComplete),s=e.syncPointTree_.subtree(r);if(i)Ts(!qh(s.value),"If we're adding a query, it shouldn't be shadowed");else{const t=s.fold(((e,t,n)=>{if(!_d(e)&&t&&qh(t))return[Gh(t).query];{let e=[];return t&&(e=e.concat(Uh(t).map((e=>e.query)))),Fu(n,((t,n)=>{e=e.concat(n)})),e}}));for(let n=0;n<t.length;++n){const r=t[n];e.listenProvider_.stopListening(mf(r),uf(e,r))}}return a}(e,t,n))}return u}function rf(e,t,n){const r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,((e,n)=>{const r=Wh(n,Cd(e,t));if(r)return r}));return uh(r,t,i,n,!0)}function of(e,t){const n=t._path;let r=null;e.syncPointTree_.foreachOnPath(n,((e,t)=>{const i=Cd(e,n);r=r||Wh(t,i)}));let i=e.syncPointTree_.get(n);i?r=r||Wh(i,gd()):(i=new Dh,e.syncPointTree_=e.syncPointTree_.set(n,i));const o=null!=r,a=o?new Fp(r,!0,!1):null;return function(e){return Vp(e.viewCache_)}(jh(i,t,oh(e.pendingWriteTree_,t._path),o?a.getNode():ap.EMPTY_NODE,o))}function af(e,t){return sf(t,e.syncPointTree_,null,oh(e.pendingWriteTree_,gd()))}function sf(e,t,n,r){if(_d(e.path))return lf(e,t,n,r);{const i=t.get(gd());null==n&&null!=i&&(n=Wh(i,gd()));let o=[];const a=yd(e.path),s=e.operationForChild(a),l=t.children.get(a);if(l&&s){const e=n?n.getImmediateChild(a):null,t=yh(r,a);o=o.concat(sf(s,l,e,t))}return i&&(o=o.concat(Fh(i,e,r,n))),o}}function lf(e,t,n,r){const i=t.get(gd());null==n&&null!=i&&(n=Wh(i,gd()));let o=[];return t.children.inorderTraversal(((t,i)=>{const a=n?n.getImmediateChild(t):null,s=yh(r,t),l=e.operationForChild(t);l&&(o=o.concat(lf(l,i,a,s)))})),i&&(o=o.concat(Fh(i,e,r,n))),o}function cf(e,t){const n=t.query,r=uf(e,n);return{hashFn:()=>{const e=function(e){return e.viewCache_.serverCache.getNode()}(t)||ap.EMPTY_NODE;return e.hash()},onComplete:t=>{if("ok"===t)return r?function(e,t,n){const r=pf(e,n);if(r){const n=hf(r),i=n.path,o=n.queryId,a=Cd(i,t);return ff(e,i,new Lp(Ap(o),a))}return[]}(e,n._path,r):function(e,t){return af(e,new Lp({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(e,n._path);{const r=function(e,t){let n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");const r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}(t,n);return ef(e,n,null,r)}}}}function uf(e,t){const n=df(t);return e.queryToTagMap.get(n)}function df(e){return e._path.toString()+"$"+e._queryIdentifier}function pf(e,t){return e.tagToQueryMap.get(t)}function hf(e){const t=e.indexOf("$");return Ts(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new md(e.substr(0,t))}}function ff(e,t,n){const r=e.syncPointTree_.get(t);Ts(r,"Missing sync point for query tag that we're tracking");return Fh(r,n,oh(e.pendingWriteTree_,t),null)}function mf(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(Ts(Nh,"Reference.ts has not been loaded"),Nh)(e._repo,e._path):e}class gf{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new gf(t)}node(){return this.node_}}class yf{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Sd(this.path_,e);return new yf(this.syncTree_,t)}node(){return rf(this.syncTree_,this.path_)}}const vf=function(e,t,n){return e&&"object"===typeof e?(Ts(".sv"in e,"Unexpected leaf node or priority contents"),"string"===typeof e[".sv"]?bf(e[".sv"],t,n):"object"===typeof e[".sv"]?xf(e[".sv"],t):void Ts(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},bf=function(e,t,n){if("timestamp"===e)return n.timestamp;Ts(!1,"Unexpected server value: "+e)},xf=function(e,t,n){e.hasOwnProperty("increment")||Ts(!1,"Unexpected server value: "+JSON.stringify(e,null,2));const r=e.increment;"number"!==typeof r&&Ts(!1,"Unexpected increment value: "+r);const i=t.node();if(Ts(null!==i&&"undefined"!==typeof i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return"number"!==typeof o?r:o+r},wf=function(e,t,n,r){return Sf(t,new yf(n,e),r)},$f=function(e,t,n){return Sf(e,new gf(t),n)};function Sf(e,t,n){const r=e.getPriority().val(),i=vf(r,t.getImmediateChild(".priority"),n);let o;if(e.isLeafNode()){const r=e,o=vf(r.getValue(),t,n);return o!==r.getValue()||i!==r.getPriority().val()?new Xd(o,lp(i)):e}{const r=e;return o=r,i!==r.getPriority().val()&&(o=o.updatePriority(new Xd(i))),r.forEachChild(Qd,((e,r)=>{const i=Sf(r,t.getImmediateChild(e),n);i!==r&&(o=o.updateImmediateChild(e,i))})),o}}class _f{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{children:{},childCount:0};this.name=e,this.parent=t,this.node=n}}function Cf(e,t){let n=t instanceof md?t:new md(t),r=e,i=yd(n);for(;null!==i;){const e=tl(r.node.children,i)||{children:{},childCount:0};r=new _f(i,r,e),n=bd(n),i=yd(n)}return r}function kf(e){return e.node.value}function Ef(e,t){e.node.value=t,Mf(e)}function Tf(e){return e.node.childCount>0}function If(e,t){Fu(e.node.children,((n,r)=>{t(new _f(n,e,r))}))}function Pf(e,t,n,r){n&&!r&&t(e),If(e,(e=>{Pf(e,t,!0,r)})),n&&r&&t(e)}function Rf(e){return new md(null===e.parent?e.name:Rf(e.parent)+"/"+e.name)}function Mf(e){null!==e.parent&&function(e,t,n){const r=function(e){return void 0===kf(e)&&!Tf(e)}(n),i=el(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,Mf(e)):r||i||(e.node.children[t]=n.node,e.node.childCount++,Mf(e))}(e.parent,e.name,e)}const Af=/[\[\].#$\/\u0000-\u001F\u007F]/,Of=/[\[\].#$\u0000-\u001F\u007F]/,Lf=10485760,Nf=function(e){return"string"===typeof e&&0!==e.length&&!Af.test(e)},Df=function(e){return"string"===typeof e&&0!==e.length&&!Of.test(e)},Ff=function(e){return null===e||"string"===typeof e||"number"===typeof e&&!Pu(e)||e&&"object"===typeof e&&el(e,".sv")},jf=function(e,t,n,r){r&&void 0===t||zf(fl(e,"value"),t,n)},zf=function(e,t,n){const r=n instanceof md?new Id(n,e):n;if(void 0===t)throw new Error(e+"contains undefined "+Rd(r));if("function"===typeof t)throw new Error(e+"contains a function "+Rd(r)+" with contents = "+t.toString());if(Pu(t))throw new Error(e+"contains "+t.toString()+" "+Rd(r));if("string"===typeof t&&t.length>Lf/3&&yl(t)>Lf)throw new Error(e+"contains a string greater than "+Lf+" utf8 bytes "+Rd(r)+" ('"+t.substring(0,50)+"...')");if(t&&"object"===typeof t){let n=!1,i=!1;if(Fu(t,((t,o)=>{if(".value"===t)n=!0;else if(".priority"!==t&&".sv"!==t&&(i=!0,!Nf(t)))throw new Error(e+" contains an invalid key ("+t+") "+Rd(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');!function(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=yl(t),Pd(e)}(r,t),zf(e,o,r),function(e){const t=e.parts_.pop();e.byteLength_-=yl(t),e.parts_.length>0&&(e.byteLength_-=1)}(r)})),n&&i)throw new Error(e+' contains ".value" child '+Rd(r)+" in addition to actual children.")}},Bf=function(e,t,n,r){if(r&&void 0===t)return;const i=fl(e,"values");if(!t||"object"!==typeof t||Array.isArray(t))throw new Error(i+" must be an object containing the children to replace.");const o=[];Fu(t,((e,t)=>{const r=new md(e);if(zf(i,t,Sd(n,r)),".priority"===xd(r)&&!Ff(t))throw new Error(i+"contains an invalid value for '"+r.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");o.push(r)})),function(e,t){let n,r;for(n=0;n<t.length;n++){r=t[n];const i=wd(r);for(let t=0;t<i.length;t++)if(".priority"===i[t]&&t===i.length-1);else if(!Nf(i[t]))throw new Error(e+"contains an invalid key ("+i[t]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}t.sort(kd);let i=null;for(n=0;n<t.length;n++){if(r=t[n],null!==i&&Td(i,r))throw new Error(e+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,o)},Uf=function(e,t,n){if(!n||void 0!==t){if(Pu(t))throw new Error(fl(e,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Ff(t))throw new Error(fl(e,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Wf=function(e,t,n,r){if((!r||void 0!==n)&&!Nf(n))throw new Error(fl(e,t)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Vf=function(e,t,n,r){if((!r||void 0!==n)&&!Df(n))throw new Error(fl(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Hf=function(e,t){if(".info"===yd(t))throw new Error(e+" failed = Can't modify data under /.info/")},qf=function(e,t){const n=t.path.toString();if("string"!==typeof t.repoInfo.host||0===t.repoInfo.host.length||!Nf(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),Df(e)}(n))throw new Error(fl(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class Gf{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Kf(e,t){let n=null;for(let r=0;r<t.length;r++){const i=t[r],o=i.getPath();null===n||Ed(o,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:o}),n.events.push(i)}n&&e.eventLists_.push(n)}function Yf(e,t,n){Kf(e,n),Xf(e,(e=>Ed(e,t)))}function Zf(e,t,n){Kf(e,n),Xf(e,(e=>Td(e,t)||Td(t,e)))}function Xf(e,t){e.recursionDepth_++;let n=!0;for(let r=0;r<e.eventLists_.length;r++){const i=e.eventLists_[r];if(i){t(i.path)?(Qf(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}}n&&(e.eventLists_=[]),e.recursionDepth_--}function Qf(e){for(let t=0;t<e.events.length;t++){const n=e.events[t];if(null!==n){e.events[t]=null;const r=n.getEventRunner();$u&&Cu("event: "+n.toString()),Uu(r)}}}const Jf="repo_interrupt";class em{constructor(e,t,n,r){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Gf,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=kp(),this.transactionQueueTree_=new _f,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function tm(e,t,n){if(e.stats_=rd(e.repoInfo_),e.forceRestClient_||("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new _p(e.repoInfo_,((t,n,r,i)=>{im(e,t,n,r,i)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((()=>om(e,!0)),0);else{if("undefined"!==typeof n&&null!==n){if("object"!==typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Qs(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}e.persistentConnection_=new Od(e.repoInfo_,t,((t,n,r,i)=>{im(e,t,n,r,i)}),(t=>{om(e,t)}),(t=>{!function(e,t){Fu(t,((t,n)=>{am(e,t,n)}))}(e,t)}),e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((t=>{e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((t=>{e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=function(e,t){const n=e.toString();return nd[n]||(nd[n]=t()),nd[n]}(e.repoInfo_,(()=>new Rp(e.stats_,e.server_))),e.infoData_=new Cp,e.infoSyncTree_=new Yh({startListening:(t,n,r,i)=>{let o=[];const a=e.infoData_.getNode(t._path);return a.isEmpty()||(o=Jh(e.infoSyncTree_,t._path,a),setTimeout((()=>{i("ok")}),0)),o},stopListening:()=>{}}),am(e,"connected",!1),e.serverSyncTree_=new Yh({startListening:(t,n,r,i)=>(e.server_.listen(t,r,n,((n,r)=>{const o=i(n,r);Zf(e.eventQueue_,t._path,o)})),[]),stopListening:(t,n)=>{e.server_.unlisten(t,n)}})}function nm(e){const t=e.infoData_.getNode(new md(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function rm(e){return(t=(t={timestamp:nm(e)})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t}function im(e,t,n,r,i){e.dataUpdateCount++;const o=new md(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;let a=[];if(i)if(r){const t=rl(n,(e=>lp(e)));a=function(e,t,n,r){const i=pf(e,r);if(i){const r=hf(i),o=r.path,a=r.queryId,s=Cd(o,t),l=Gp.fromObject(n);return ff(e,o,new Dp(Ap(a),s,l))}return[]}(e.serverSyncTree_,o,t,i)}else{const t=lp(n);a=tf(e.serverSyncTree_,o,t,i)}else if(r){const t=rl(n,(e=>lp(e)));a=function(e,t,n){const r=Gp.fromObject(n);return af(e,new Dp({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,o,t)}else{const t=lp(n);a=Jh(e.serverSyncTree_,o,t)}let s=o;a.length>0&&(s=ym(e,o)),Zf(e.eventQueue_,s,a)}function om(e,t){am(e,"connected",t),!1===t&&function(e){hm(e,"onDisconnectEvents");const t=rm(e),n=kp();Ip(e.onDisconnect_,gd(),((r,i)=>{const o=wf(r,i,e.serverSyncTree_,t);Ep(n,r,o)}));let r=[];Ip(n,gd(),((t,n)=>{r=r.concat(Jh(e.serverSyncTree_,t,n));const i=$m(e,t);ym(e,i)})),e.onDisconnect_=kp(),Zf(e.eventQueue_,gd(),r)}(e)}function am(e,t,n){const r=new md("/.info/"+t),i=lp(n);e.infoData_.updateSnapshot(r,i);const o=Jh(e.infoSyncTree_,r,i);Zf(e.eventQueue_,r,o)}function sm(e){return e.nextWriteId_++}function lm(e,t,n,r,i){hm(e,"set",{path:t.toString(),value:n,priority:r});const o=rm(e),a=lp(n,r),s=rf(e.serverSyncTree_,t),l=$f(a,s,o),c=sm(e),u=Zh(e.serverSyncTree_,t,l,c,!0);Kf(e.eventQueue_,u),e.server_.put(t.toString(),a.val(!0),((n,r)=>{const o="ok"===n;o||Iu("set at "+t+" failed: "+n);const a=Qh(e.serverSyncTree_,c,!o);Zf(e.eventQueue_,t,a),fm(e,i,n,r)}));const d=$m(e,t);ym(e,d),Zf(e.eventQueue_,d,[])}function cm(e,t,n){e.server_.onDisconnectCancel(t.toString(),((r,i)=>{"ok"===r&&Tp(e.onDisconnect_,t),fm(e,n,r,i)}))}function um(e,t,n,r){const i=lp(n);e.server_.onDisconnectPut(t.toString(),i.val(!0),((n,o)=>{"ok"===n&&Ep(e.onDisconnect_,t,i),fm(e,r,n,o)}))}function dm(e,t,n){let r;r=".info"===yd(t._path)?ef(e.infoSyncTree_,t,n):ef(e.serverSyncTree_,t,n),Yf(e.eventQueue_,t._path,r)}function pm(e){e.persistentConnection_&&e.persistentConnection_.interrupt(Jf)}function hm(e){let t="";e.persistentConnection_&&(t=e.persistentConnection_.id+":");for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];Cu(t,...r)}function fm(e,t,n,r){t&&Uu((()=>{if("ok"===n)t(null);else{const e=(n||"error").toUpperCase();let i=e;r&&(i+=": "+r);const o=new Error(i);o.code=e,t(o)}}))}function mm(e,t,n){return rf(e.serverSyncTree_,t,n)||ap.EMPTY_NODE}function gm(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.transactionQueueTree_;if(t||wm(e,t),kf(t)){const n=bm(e,t);Ts(n.length>0,"Sending zero length transaction queue");n.every((e=>0===e.status))&&function(e,t,n){const r=n.map((e=>e.currentWriteId)),i=mm(e,t,r);let o=i;const a=i.hash();for(let c=0;c<n.length;c++){const e=n[c];Ts(0===e.status,"tryToSendTransactionQueue_: items in queue should all be run."),e.status=1,e.retryCount++;const r=Cd(t,e.path);o=o.updateChild(r,e.currentOutputSnapshotRaw)}const s=o.val(!0),l=t;e.server_.put(l.toString(),s,(r=>{hm(e,"transaction put response",{path:l.toString(),status:r});let i=[];if("ok"===r){const r=[];for(let t=0;t<n.length;t++)n[t].status=2,i=i.concat(Qh(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&r.push((()=>n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved))),n[t].unwatcher();wm(e,Cf(e.transactionQueueTree_,t)),gm(e,e.transactionQueueTree_),Zf(e.eventQueue_,t,i);for(let e=0;e<r.length;e++)Uu(r[e])}else{if("datastale"===r)for(let e=0;e<n.length;e++)3===n[e].status?n[e].status=4:n[e].status=0;else{Iu("transaction at "+l.toString()+" failed: "+r);for(let e=0;e<n.length;e++)n[e].status=4,n[e].abortReason=r}ym(e,t)}}),a)}(e,Rf(t),n)}else Tf(t)&&If(t,(t=>{gm(e,t)}))}function ym(e,t){const n=vm(e,t),r=Rf(n);return function(e,t,n){if(0===t.length)return;const r=[];let i=[];const o=t.filter((e=>0===e.status)),a=o.map((e=>e.currentWriteId));for(let l=0;l<t.length;l++){const o=t[l],c=Cd(n,o.path);let u,d=!1;if(Ts(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===o.status)d=!0,u=o.abortReason,i=i.concat(Qh(e.serverSyncTree_,o.currentWriteId,!0));else if(0===o.status)if(o.retryCount>=25)d=!0,u="maxretry",i=i.concat(Qh(e.serverSyncTree_,o.currentWriteId,!0));else{const n=mm(e,o.path,a);o.currentInputSnapshot=n;const r=t[l].update(n.val());if(void 0!==r){zf("transaction failed: Data returned ",r,o.path);let t=lp(r);"object"===typeof r&&null!=r&&el(r,".priority")||(t=t.updatePriority(n.getPriority()));const s=o.currentWriteId,l=rm(e),c=$f(t,n,l);o.currentOutputSnapshotRaw=t,o.currentOutputSnapshotResolved=c,o.currentWriteId=sm(e),a.splice(a.indexOf(s),1),i=i.concat(Zh(e.serverSyncTree_,o.path,c,o.currentWriteId,o.applyLocally)),i=i.concat(Qh(e.serverSyncTree_,s,!0))}else d=!0,u="nodata",i=i.concat(Qh(e.serverSyncTree_,o.currentWriteId,!0))}Zf(e.eventQueue_,n,i),i=[],d&&(t[l].status=2,s=t[l].unwatcher,setTimeout(s,Math.floor(0)),t[l].onComplete&&("nodata"===u?r.push((()=>t[l].onComplete(null,!1,t[l].currentInputSnapshot))):r.push((()=>t[l].onComplete(new Error(u),!1,null)))))}var s;wm(e,e.transactionQueueTree_);for(let l=0;l<r.length;l++)Uu(r[l]);gm(e,e.transactionQueueTree_)}(e,bm(e,n),r),r}function vm(e,t){let n,r=e.transactionQueueTree_;for(n=yd(t);null!==n&&void 0===kf(r);)r=Cf(r,n),n=yd(t=bd(t));return r}function bm(e,t){const n=[];return xm(e,t,n),n.sort(((e,t)=>e.order-t.order)),n}function xm(e,t,n){const r=kf(t);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);If(t,(t=>{xm(e,t,n)}))}function wm(e,t){const n=kf(t);if(n){let e=0;for(let t=0;t<n.length;t++)2!==n[t].status&&(n[e]=n[t],e++);n.length=e,Ef(t,n.length>0?n:void 0)}If(t,(t=>{wm(e,t)}))}function $m(e,t){const n=Rf(vm(e,t)),r=Cf(e.transactionQueueTree_,t);return function(e,t,n){let r=n?e:e.parent;for(;null!==r;){if(t(r))return!0;r=r.parent}}(r,(t=>{Sm(e,t)})),Sm(e,r),Pf(r,(t=>{Sm(e,t)})),n}function Sm(e,t){const n=kf(t);if(n){const r=[];let i=[],o=-1;for(let t=0;t<n.length;t++)3===n[t].status||(1===n[t].status?(Ts(o===t-1,"All SENT items should be at beginning of queue."),o=t,n[t].status=3,n[t].abortReason="set"):(Ts(0===n[t].status,"Unexpected transaction status in abort"),n[t].unwatcher(),i=i.concat(Qh(e.serverSyncTree_,n[t].currentWriteId,!0)),n[t].onComplete&&r.push(n[t].onComplete.bind(null,new Error("set"),!1,null))));-1===o?Ef(t,void 0):n.length=o+1,Zf(e.eventQueue_,Rf(t),i);for(let e=0;e<r.length;e++)Uu(r[e])}}const _m=function(e,t){const n=Cm(e),r=n.namespace;"firebase.com"===n.domain&&Tu(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||Tu("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Iu("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");const i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new Qu(n.host,n.secure,r,i,t,"",r!==n.subdomain),path:new md(n.pathString)}},Cm=function(e){let t="",n="",r="",i="",o="",a=!0,s="https",l=443;if("string"===typeof e){let c=e.indexOf("//");c>=0&&(s=e.substring(0,c-1),e=e.substring(c+2));let u=e.indexOf("/");-1===u&&(u=e.length);let d=e.indexOf("?");-1===d&&(d=e.length),t=e.substring(0,Math.min(u,d)),u<d&&(i=function(e){let t="";const n=e.split("/");for(let i=0;i<n.length;i++)if(n[i].length>0){let e=n[i];try{e=decodeURIComponent(e.replace(/\+/g," "))}catch(r){}t+="/"+e}return t}(e.substring(u,d)));const p=function(e){const t={};"?"===e.charAt(0)&&(e=e.substring(1));for(const n of e.split("&")){if(0===n.length)continue;const r=n.split("=");2===r.length?t[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Iu(`Invalid query segment '${n}' in query '${e}'`)}return t}(e.substring(Math.min(e.length,d)));c=t.indexOf(":"),c>=0?(a="https"===s||"wss"===s,l=parseInt(t.substring(c+1),10)):c=t.length;const h=t.slice(0,c);if("localhost"===h.toLowerCase())n="localhost";else if(h.split(".").length<=2)n=h;else{const e=t.indexOf(".");r=t.substring(0,e).toLowerCase(),n=t.substring(e+1),o=r}"ns"in p&&(o=p.ns)}return{host:t,port:l,domain:n,subdomain:r,secure:a,scheme:s,pathString:i,namespace:o}},km="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Em=function(){let e=0;const t=[];return function(n){const r=n===e;let i;e=n;const o=new Array(8);for(i=7;i>=0;i--)o[i]=km.charAt(n%64),n=Math.floor(n/64);Ts(0===n,"Cannot push at time == 0");let a=o.join("");if(r){for(i=11;i>=0&&63===t[i];i--)t[i]=0;t[i]++}else for(i=0;i<12;i++)t[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)a+=km.charAt(t[i]);return Ts(20===a.length,"nextPushId: Length should be 20."),a}}();class Tm{constructor(e,t,n,r){this.eventType=e,this.eventRegistration=t,this.snapshot=n,this.prevName=r}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Qs(this.snapshot.exportVal())}}class Im{constructor(e,t,n){this.eventRegistration=e,this.error=t,this.path=n}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class Pm{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return Ts(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class Rm{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new Us;return cm(this._repo,this._path,e.wrapCallback((()=>{}))),e.promise}remove(){Hf("OnDisconnect.remove",this._path);const e=new Us;return um(this._repo,this._path,null,e.wrapCallback((()=>{}))),e.promise}set(e){Hf("OnDisconnect.set",this._path),jf("OnDisconnect.set",e,this._path,!1);const t=new Us;return um(this._repo,this._path,e,t.wrapCallback((()=>{}))),t.promise}setWithPriority(e,t){Hf("OnDisconnect.setWithPriority",this._path),jf("OnDisconnect.setWithPriority",e,this._path,!1),Uf("OnDisconnect.setWithPriority",t,!1);const n=new Us;return function(e,t,n,r,i){const o=lp(n,r);e.server_.onDisconnectPut(t.toString(),o.val(!0),((n,r)=>{"ok"===n&&Ep(e.onDisconnect_,t,o),fm(0,i,n,r)}))}(this._repo,this._path,e,t,n.wrapCallback((()=>{}))),n.promise}update(e){Hf("OnDisconnect.update",this._path),Bf("OnDisconnect.update",e,this._path,!1);const t=new Us;return function(e,t,n,r){if(nl(n))return Cu("onDisconnect().update() called with empty data.  Don't do anything."),void fm(0,r,"ok",void 0);e.server_.onDisconnectMerge(t.toString(),n,((i,o)=>{"ok"===i&&Fu(n,((n,r)=>{const i=lp(r);Ep(e.onDisconnect_,Sd(t,n),i)})),fm(0,r,i,o)}))}(this._repo,this._path,e,t.wrapCallback((()=>{}))),t.promise}}class Mm{constructor(e,t,n,r){this._repo=e,this._path=t,this._queryParams=n,this._orderByCalled=r}get key(){return _d(this._path)?null:xd(this._path)}get ref(){return new Nm(this._repo,this._path)}get _queryIdentifier(){const e=Sp(this._queryParams),t=Nu(e);return"{}"===t?"default":t}get _queryObject(){return Sp(this._queryParams)}isEqual(e){if(!((e=vl(e))instanceof Mm))return!1;const t=this._repo===e._repo,n=Ed(this._path,e._path),r=this._queryIdentifier===e._queryIdentifier;return t&&n&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(e){let t="";for(let n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}function Am(e,t){if(!0===e._orderByCalled)throw new Error(t+": You can't combine multiple orderBy calls.")}function Om(e){let t=null,n=null;if(e.hasStart()&&(t=e.getIndexStartValue()),e.hasEnd()&&(n=e.getIndexEndValue()),e.getIndex()===jd){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(e.hasStart()){if(e.getIndexStartName()!==Ru)throw new Error(r);if("string"!==typeof t)throw new Error(i)}if(e.hasEnd()){if(e.getIndexEndName()!==Mu)throw new Error(r);if("string"!==typeof n)throw new Error(i)}}else if(e.getIndex()===Qd){if(null!=t&&!Ff(t)||null!=n&&!Ff(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(Ts(e.getIndex()instanceof cp||e.getIndex()===up,"unknown index type."),null!=t&&"object"===typeof t||null!=n&&"object"===typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Lm(e){if(e.hasStart()&&e.hasEnd()&&e.hasLimit()&&!e.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Nm extends Mm{constructor(e,t){super(e,t,new vp,!1)}get parent(){const e=$d(this._path);return null===e?null:new Nm(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Dm{constructor(e,t,n){this._node=e,this.ref=t,this._index=n}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new md(e),n=zm(this.ref,e);return new Dm(this._node.getChild(t),n,Qd)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){if(this._node.isLeafNode())return!1;return!!this._node.forEachChild(this._index,((t,n)=>e(new Dm(n,zm(this.ref,t),Qd))))}hasChild(e){const t=new md(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Fm(e,t){return(e=vl(e))._checkNotDeleted("ref"),void 0!==t?zm(e._root,t):e._root}function jm(e,t){(e=vl(e))._checkNotDeleted("refFromURL");const n=_m(t,e._repo.repoInfo_.nodeAdmin);qf("refFromURL",n);const r=n.repoInfo;return e._repo.repoInfo_.isCustomHost()||r.host===e._repo.repoInfo_.host||Tu("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+e._repo.repoInfo_.host+")"),Fm(e,n.path.toString())}function zm(e,t){var n,r,i,o;return null===yd((e=vl(e))._path)?(n="child",r="path",o=!1,(i=t)&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),Vf(n,r,i,o)):Vf("child","path",t,!1),new Nm(e._repo,Sd(e._path,t))}function Bm(e,t){e=vl(e),Hf("set",e._path),jf("set",t,e._path,!1);const n=new Us;return lm(e._repo,e._path,t,null,n.wrapCallback((()=>{}))),n.promise}function Um(e,t){Bf("update",t,e._path,!1);const n=new Us;return function(e,t,n,r){hm(e,"update",{path:t.toString(),value:n});let i=!0;const o=rm(e),a={};if(Fu(n,((n,r)=>{i=!1,a[n]=wf(Sd(t,n),lp(r),e.serverSyncTree_,o)})),i)Cu("update() called with empty data.  Don't do anything."),fm(0,r,"ok",void 0);else{const i=sm(e),o=Xh(e.serverSyncTree_,t,a,i);Kf(e.eventQueue_,o),e.server_.merge(t.toString(),n,((n,o)=>{const a="ok"===n;a||Iu("update at "+t+" failed: "+n);const s=Qh(e.serverSyncTree_,i,!a),l=s.length>0?ym(e,t):t;Zf(e.eventQueue_,l,s),fm(0,r,n,o)})),Fu(n,(n=>{const r=$m(e,Sd(t,n));ym(e,r)})),Zf(e.eventQueue_,t,[])}}(e._repo,e._path,t,n.wrapCallback((()=>{}))),n.promise}function Wm(e){e=vl(e);const t=new Pm((()=>{})),n=new Vm(t);return function(e,t,n){const r=of(e.serverSyncTree_,t);return null!=r?Promise.resolve(r):e.server_.get(t).then((r=>{const i=lp(r).withIndex(t._queryParams.getIndex());let o;if(nf(e.serverSyncTree_,t,n,!0),t._queryParams.loadsAllData())o=Jh(e.serverSyncTree_,t._path,i);else{const n=uf(e.serverSyncTree_,t);o=tf(e.serverSyncTree_,t._path,i,n)}return Zf(e.eventQueue_,t._path,o),ef(e.serverSyncTree_,t,n,null,!0),i}),(n=>(hm(e,"get for query "+Qs(t)+" failed: "+n),Promise.reject(new Error(n)))))}(e._repo,e,n).then((t=>new Dm(t,new Nm(e._repo,e._path),e._queryParams.getIndex())))}class Vm{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const n=t._queryParams.getIndex();return new Tm("value",this,new Dm(e.snapshotNode,new Nm(t._repo,t._path),n))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new Im(this,e,t):null}matches(e){return e instanceof Vm&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class Hm{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new Im(this,e,t):null}createEvent(e,t){Ts(null!=e.childName,"Child events should have a childName.");const n=zm(new Nm(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new Tm(e.type,this,new Dm(e.snapshotNode,n,r),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof Hm&&(this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)))}hasAnyCallback(){return!!this.callbackContext}}function qm(e,t,n,r,i){let o;if("object"===typeof r&&(o=void 0,i=r),"function"===typeof r&&(o=r),i&&i.onlyOnce){const t=n,r=(n,r)=>{dm(e._repo,e,s),t(n,r)};r.userCallback=n.userCallback,r.context=n.context,n=r}const a=new Pm(n,o||void 0),s="value"===t?new Vm(a):new Hm(t,a);return function(e,t,n){let r;r=".info"===yd(t._path)?nf(e.infoSyncTree_,t,n):nf(e.serverSyncTree_,t,n),Yf(e.eventQueue_,t._path,r)}(e._repo,e,s),()=>dm(e._repo,e,s)}function Gm(e,t,n,r){return qm(e,"value",t,n,r)}function Km(e,t,n,r){return qm(e,"child_added",t,n,r)}function Ym(e,t,n,r){return qm(e,"child_changed",t,n,r)}function Zm(e,t,n,r){return qm(e,"child_moved",t,n,r)}function Xm(e,t,n,r){return qm(e,"child_removed",t,n,r)}function Qm(e,t,n){let r=null;const i=n?new Pm(n):null;"value"===t?r=new Vm(i):t&&(r=new Hm(t,i)),dm(e._repo,e,r)}class Jm{}class eg extends Jm{constructor(e,t){super(),this._value=e,this._key=t,this.type="endAt"}_apply(e){jf("endAt",this._value,e._path,!0);const t=xp(e._queryParams,this._value,this._key);if(Lm(t),Om(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Mm(e._repo,e._path,t,e._orderByCalled)}}class tg extends Jm{constructor(e,t){super(),this._value=e,this._key=t,this.type="endBefore"}_apply(e){jf("endBefore",this._value,e._path,!1);const t=function(e,t,n){let r;return r=e.index_===jd||n?xp(e,t,n):xp(e,t,Ru),r.endBeforeSet_=!0,r}(e._queryParams,this._value,this._key);if(Lm(t),Om(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Mm(e._repo,e._path,t,e._orderByCalled)}}class ng extends Jm{constructor(e,t){super(),this._value=e,this._key=t,this.type="startAt"}_apply(e){jf("startAt",this._value,e._path,!0);const t=bp(e._queryParams,this._value,this._key);if(Lm(t),Om(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Mm(e._repo,e._path,t,e._orderByCalled)}}class rg extends Jm{constructor(e,t){super(),this._value=e,this._key=t,this.type="startAfter"}_apply(e){jf("startAfter",this._value,e._path,!1);const t=function(e,t,n){let r;return r=e.index_===jd||n?bp(e,t,n):bp(e,t,Mu),r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(Lm(t),Om(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Mm(e._repo,e._path,t,e._orderByCalled)}}class ig extends Jm{constructor(e){super(),this._limit=e,this.type="limitToFirst"}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Mm(e._repo,e._path,function(e,t){const n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="l",n}(e._queryParams,this._limit),e._orderByCalled)}}class og extends Jm{constructor(e){super(),this._limit=e,this.type="limitToLast"}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Mm(e._repo,e._path,function(e,t){const n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="r",n}(e._queryParams,this._limit),e._orderByCalled)}}class ag extends Jm{constructor(e){super(),this._path=e,this.type="orderByChild"}_apply(e){Am(e,"orderByChild");const t=new md(this._path);if(_d(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const n=new cp(t),r=wp(e._queryParams,n);return Om(r),new Mm(e._repo,e._path,r,!0)}}class sg extends Jm{constructor(){super(...arguments),this.type="orderByKey"}_apply(e){Am(e,"orderByKey");const t=wp(e._queryParams,jd);return Om(t),new Mm(e._repo,e._path,t,!0)}}class lg extends Jm{constructor(){super(...arguments),this.type="orderByPriority"}_apply(e){Am(e,"orderByPriority");const t=wp(e._queryParams,Qd);return Om(t),new Mm(e._repo,e._path,t,!0)}}class cg extends Jm{constructor(){super(...arguments),this.type="orderByValue"}_apply(e){Am(e,"orderByValue");const t=wp(e._queryParams,up);return Om(t),new Mm(e._repo,e._path,t,!0)}}class ug extends Jm{constructor(e,t){super(),this._value=e,this._key=t,this.type="equalTo"}_apply(e){if(jf("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new eg(this._value,this._key)._apply(new ng(this._value,this._key)._apply(e))}}function dg(e){let t=vl(e);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(const o of r)t=o._apply(t);return t}!function(e){Ts(!Lh,"__referenceConstructor has already been defined"),Lh=e}(Nm),function(e){Ts(!Nh,"__referenceConstructor has already been defined"),Nh=e}(Nm);const pg={};let hg=!1;function fg(e,t,n,r,i){let o=r||e.options.databaseURL;void 0===o&&(e.options.projectId||Tu("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Cu("Using default host for project ",e.options.projectId),o=`${e.options.projectId}-default-rtdb.firebaseio.com`);let a,s,l=_m(o,i),c=l.repoInfo;"undefined"!==typeof process&&(s={NODE_ENV:"production",PUBLIC_URL:"/nutrition",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.FIREBASE_DATABASE_EMULATOR_HOST),s?(a=!0,o=`http://${s}?ns=${c.namespace}`,l=_m(o,i),c=l.repoInfo):a=!l.repoInfo.secure;const u=i&&a?new qu(qu.OWNER):new Hu(e.name,e.options,t);qf("Invalid Firebase Database URL",l),_d(l.path)||Tu("Database URL must point to the root of a Firebase Database (not including a child path).");const d=function(e,t,n,r){let i=pg[t.name];i||(i={},pg[t.name]=i);let o=i[e.toURLString()];o&&Tu("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return o=new em(e,hg,n,r),i[e.toURLString()]=o,o}(c,e,u,new Vu(e.name,n));return new mg(d,e)}class mg{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(tm(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Nm(this._repo,gd())),this._rootInternal}_delete(){return null!==this._rootInternal&&(!function(e,t){const n=pg[t];n&&n[e.key]===e||Tu(`Database ${t}(${e.repoInfo_}) has already been deleted.`),pm(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Tu("Cannot call "+e+" on a deleted database.")}}function gg(){ud.IS_TRANSPORT_INITIALIZED&&Iu("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function yg(){gg(),ad.forceDisallow()}function vg(){gg(),cd.forceDisallow(),ad.forceAllow()}function bg(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};(e=vl(e))._checkNotDeleted("useEmulator"),e._instanceStarted&&Tu("Cannot call useEmulator() after instance has already been initialized.");const i=e._repoInternal;let o;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Tu('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new qu(qu.OWNER);else if(r.mockUserToken){const t="string"===typeof r.mockUserToken?r.mockUserToken:function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Os(JSON.stringify({alg:"none",type:"JWT"})),Os(JSON.stringify(o)),""].join(".")}(r.mockUserToken,e.app.options.projectId);o=new qu(t)}!function(e,t,n,r){e.repoInfo_=new Qu(`${t}:${n}`,!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0),r&&(e.authTokenProvider_=r)}(i,t,n,o)}function xg(e){var t;(e=vl(e))._checkNotDeleted("goOnline"),(t=e._repo).persistentConnection_&&t.persistentConnection_.resume(Jf)}function wg(e,t){_u(e,t)}const $g={".sv":"timestamp"};class Sg{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}function _g(e,t,n){var r;if(e=vl(e),Hf("Reference.transaction",e._path),".length"===e.key||".keys"===e.key)throw"Reference.transaction failed: "+e.key+" is a read-only object.";const i=null===(r=null===n||void 0===n?void 0:n.applyLocally)||void 0===r||r,o=new Us,a=Gm(e,(()=>{}));return function(e,t,n,r,i,o){hm(e,"transaction on "+t);const a={path:t,update:n,onComplete:r,status:null,order:bu(),applyLocally:o,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},s=mm(e,t,void 0);a.currentInputSnapshot=s;const l=a.update(s.val());if(void 0===l)a.unwatcher(),a.currentOutputSnapshotRaw=null,a.currentOutputSnapshotResolved=null,a.onComplete&&a.onComplete(null,!1,a.currentInputSnapshot);else{zf("transaction failed: Data returned ",l,a.path),a.status=0;const n=Cf(e.transactionQueueTree_,t),r=kf(n)||[];let i;r.push(a),Ef(n,r),"object"===typeof l&&null!==l&&el(l,".priority")?(i=tl(l,".priority"),Ts(Ff(i),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):i=(rf(e.serverSyncTree_,t)||ap.EMPTY_NODE).getPriority().val();const o=rm(e),c=lp(l,i),u=$f(c,s,o);a.currentOutputSnapshotRaw=c,a.currentOutputSnapshotResolved=u,a.currentWriteId=sm(e);const d=Zh(e.serverSyncTree_,t,u,a.currentWriteId,a.applyLocally);Zf(e.eventQueue_,t,d),gm(e,e.transactionQueueTree_)}}(e._repo,e._path,t,((t,n,r)=>{let i=null;t?o.reject(t):(i=new Dm(r,new Nm(e._repo,e._path),Qd),o.resolve(new Sg(n,i)))}),a,i),o.promise}Od.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},Od.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};!function(e){pu(jc),Pc(new bl("database",((e,t)=>{let{instanceIdentifier:n}=t;return fg(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n)}),"PUBLIC").setMultipleInstances(!0)),Hc(cu,uu,e),Hc(cu,uu,"esm2017")}();const Cg=new Pl("@firebase/database-compat"),kg=function(e){const t="FIREBASE WARNING: "+e;Cg.warn(t)};class Eg{constructor(e){this._delegate=e}cancel(e){hl("OnDisconnect.cancel",0,1,arguments.length),ml("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then((()=>e(null)),(t=>e(t))),t}remove(e){hl("OnDisconnect.remove",0,1,arguments.length),ml("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then((()=>e(null)),(t=>e(t))),t}set(e,t){hl("OnDisconnect.set",1,2,arguments.length),ml("OnDisconnect.set","onComplete",t,!0);const n=this._delegate.set(e);return t&&n.then((()=>t(null)),(e=>t(e))),n}setWithPriority(e,t,n){hl("OnDisconnect.setWithPriority",2,3,arguments.length),ml("OnDisconnect.setWithPriority","onComplete",n,!0);const r=this._delegate.setWithPriority(e,t);return n&&r.then((()=>n(null)),(e=>n(e))),r}update(e,t){if(hl("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const t={};for(let n=0;n<e.length;++n)t[""+n]=e[n];e=t,kg("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}ml("OnDisconnect.update","onComplete",t,!0);const n=this._delegate.update(e);return t&&n.then((()=>t(null)),(e=>t(e))),n}}class Tg{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return hl("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Ig{constructor(e,t){this._database=e,this._delegate=t}val(){return hl("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return hl("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return hl("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return hl("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return hl("DataSnapshot.child",0,1,arguments.length),e=String(e),Vf("DataSnapshot.child","path",e,!1),new Ig(this._database,this._delegate.child(e))}hasChild(e){return hl("DataSnapshot.hasChild",1,1,arguments.length),Vf("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return hl("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return hl("DataSnapshot.forEach",1,1,arguments.length),ml("DataSnapshot.forEach","action",e,!1),this._delegate.forEach((t=>e(new Ig(this._database,t))))}hasChildren(){return hl("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return hl("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return hl("DataSnapshot.ref",0,0,arguments.length),new Rg(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class Pg{constructor(e,t){this.database=e,this._delegate=t}on(e,t,n,r){var i;hl("Query.on",2,4,arguments.length),ml("Query.on","callback",t,!1);const o=Pg.getCancelAndContextArgs_("Query.on",n,r),a=(e,n)=>{t.call(o.context,new Ig(this.database,e),n)};a.userCallback=t,a.context=o.context;const s=null===(i=o.cancel)||void 0===i?void 0:i.bind(o.context);switch(e){case"value":return Gm(this._delegate,a,s),t;case"child_added":return Km(this._delegate,a,s),t;case"child_removed":return Xm(this._delegate,a,s),t;case"child_changed":return Ym(this._delegate,a,s),t;case"child_moved":return Zm(this._delegate,a,s),t;default:throw new Error(fl("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,n){if(hl("Query.off",0,3,arguments.length),function(e,t,n){if(!n||void 0!==t)switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(fl(e,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}("Query.off",e,!0),ml("Query.off","callback",t,!0),gl("Query.off","context",n,!0),t){const r=()=>{};r.userCallback=t,r.context=n,Qm(this._delegate,e,r)}else Qm(this._delegate,e)}get(){return Wm(this._delegate).then((e=>new Ig(this.database,e)))}once(e,t,n,r){hl("Query.once",1,4,arguments.length),ml("Query.once","callback",t,!0);const i=Pg.getCancelAndContextArgs_("Query.once",n,r),o=new Us,a=(e,n)=>{const r=new Ig(this.database,e);t&&t.call(i.context,r,n),o.resolve(r)};a.userCallback=t,a.context=i.context;const s=e=>{i.cancel&&i.cancel.call(i.context,e),o.reject(e)};switch(e){case"value":Gm(this._delegate,a,s,{onlyOnce:!0});break;case"child_added":Km(this._delegate,a,s,{onlyOnce:!0});break;case"child_removed":Xm(this._delegate,a,s,{onlyOnce:!0});break;case"child_changed":Ym(this._delegate,a,s,{onlyOnce:!0});break;case"child_moved":Zm(this._delegate,a,s,{onlyOnce:!0});break;default:throw new Error(fl("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return o.promise}limitToFirst(e){return hl("Query.limitToFirst",1,1,arguments.length),new Pg(this.database,dg(this._delegate,function(e){if("number"!==typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new ig(e)}(e)))}limitToLast(e){return hl("Query.limitToLast",1,1,arguments.length),new Pg(this.database,dg(this._delegate,function(e){if("number"!==typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new og(e)}(e)))}orderByChild(e){return hl("Query.orderByChild",1,1,arguments.length),new Pg(this.database,dg(this._delegate,function(e){if("$key"===e)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===e)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===e)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Vf("orderByChild","path",e,!1),new ag(e)}(e)))}orderByKey(){return hl("Query.orderByKey",0,0,arguments.length),new Pg(this.database,dg(this._delegate,new sg))}orderByPriority(){return hl("Query.orderByPriority",0,0,arguments.length),new Pg(this.database,dg(this._delegate,new lg))}orderByValue(){return hl("Query.orderByValue",0,0,arguments.length),new Pg(this.database,dg(this._delegate,new cg))}startAt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return hl("Query.startAt",0,2,arguments.length),new Pg(this.database,dg(this._delegate,function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return Wf("startAt","key",t,!0),new ng(e,t)}(e,t)))}startAfter(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return hl("Query.startAfter",0,2,arguments.length),new Pg(this.database,dg(this._delegate,function(e,t){return Wf("startAfter","key",t,!0),new rg(e,t)}(e,t)))}endAt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return hl("Query.endAt",0,2,arguments.length),new Pg(this.database,dg(this._delegate,function(e,t){return Wf("endAt","key",t,!0),new eg(e,t)}(e,t)))}endBefore(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return hl("Query.endBefore",0,2,arguments.length),new Pg(this.database,dg(this._delegate,function(e,t){return Wf("endBefore","key",t,!0),new tg(e,t)}(e,t)))}equalTo(e,t){return hl("Query.equalTo",1,2,arguments.length),new Pg(this.database,dg(this._delegate,function(e,t){return Wf("equalTo","key",t,!0),new ug(e,t)}(e,t)))}toString(){return hl("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return hl("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if(hl("Query.isEqual",1,1,arguments.length),!(e instanceof Pg)){throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.")}return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,n){const r={cancel:void 0,context:void 0};if(t&&n)r.cancel=t,ml(e,"cancel",r.cancel,!0),r.context=n,gl(e,"context",r.context,!0);else if(t)if("object"===typeof t&&null!==t)r.context=t;else{if("function"!==typeof t)throw new Error(fl(e,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=t}return r}get ref(){return new Rg(this.database,new Nm(this._delegate._repo,this._delegate._path))}}class Rg extends Pg{constructor(e,t){super(e,new Mm(t._repo,t._path,new vp,!1)),this.database=e,this._delegate=t}getKey(){return hl("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return hl("Reference.child",1,1,arguments.length),"number"===typeof e&&(e=String(e)),new Rg(this.database,zm(this._delegate,e))}getParent(){hl("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new Rg(this.database,e):null}getRoot(){return hl("Reference.root",0,0,arguments.length),new Rg(this.database,this._delegate.root)}set(e,t){hl("Reference.set",1,2,arguments.length),ml("Reference.set","onComplete",t,!0);const n=Bm(this._delegate,e);return t&&n.then((()=>t(null)),(e=>t(e))),n}update(e,t){if(hl("Reference.update",1,2,arguments.length),Array.isArray(e)){const t={};for(let n=0;n<e.length;++n)t[""+n]=e[n];e=t,kg("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Hf("Reference.update",this._delegate._path),ml("Reference.update","onComplete",t,!0);const n=Um(this._delegate,e);return t&&n.then((()=>t(null)),(e=>t(e))),n}setWithPriority(e,t,n){hl("Reference.setWithPriority",2,3,arguments.length),ml("Reference.setWithPriority","onComplete",n,!0);const r=function(e,t,n){if(Hf("setWithPriority",e._path),jf("setWithPriority",t,e._path,!1),Uf("setWithPriority",n,!1),".length"===e.key||".keys"===e.key)throw"setWithPriority failed: "+e.key+" is a read-only object.";const r=new Us;return lm(e._repo,e._path,t,n,r.wrapCallback((()=>{}))),r.promise}(this._delegate,e,t);return n&&r.then((()=>n(null)),(e=>n(e))),r}remove(e){hl("Reference.remove",0,1,arguments.length),ml("Reference.remove","onComplete",e,!0);const t=function(e){return Hf("remove",e._path),Bm(e,null)}(this._delegate);return e&&t.then((()=>e(null)),(t=>e(t))),t}transaction(e,t,n){hl("Reference.transaction",1,3,arguments.length),ml("Reference.transaction","transactionUpdate",e,!1),ml("Reference.transaction","onComplete",t,!0),function(e,t,n,r){if((!r||void 0!==n)&&"boolean"!==typeof n)throw new Error(fl(e,t)+"must be a boolean.")}("Reference.transaction","applyLocally",n,!0);const r=_g(this._delegate,e,{applyLocally:n}).then((e=>new Tg(e.committed,new Ig(this.database,e.snapshot))));return t&&r.then((e=>t(null,e.committed,e.snapshot)),(e=>t(e,!1,null))),r}setPriority(e,t){hl("Reference.setPriority",1,2,arguments.length),ml("Reference.setPriority","onComplete",t,!0);const n=function(e,t){e=vl(e),Hf("setPriority",e._path),Uf("setPriority",t,!1);const n=new Us;return lm(e._repo,Sd(e._path,".priority"),t,null,n.wrapCallback((()=>{}))),n.promise}(this._delegate,e);return t&&n.then((()=>t(null)),(e=>t(e))),n}push(e,t){hl("Reference.push",0,2,arguments.length),ml("Reference.push","onComplete",t,!0);const n=function(e,t){e=vl(e),Hf("push",e._path),jf("push",t,e._path,!0);const n=nm(e._repo),r=Em(n),i=zm(e,r),o=zm(e,r);let a;return a=null!=t?Bm(o,t).then((()=>o)):Promise.resolve(o),i.then=a.then.bind(a),i.catch=a.then.bind(a,void 0),i}(this._delegate,e),r=n.then((e=>new Rg(this.database,e)));t&&r.then((()=>t(null)),(e=>t(e)));const i=new Rg(this.database,n);return i.then=r.then.bind(r),i.catch=r.catch.bind(r,void 0),i}onDisconnect(){return Hf("Reference.onDisconnect",this._delegate._path),new Eg(new Rm(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class Mg{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:yg,forceLongPolling:vg}}useEmulator(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};bg(this._delegate,e,t,n)}ref(e){if(hl("database.ref",0,1,arguments.length),e instanceof Rg){const t=jm(this._delegate,e.toString());return new Rg(this,t)}{const t=Fm(this._delegate,e);return new Rg(this,t)}}refFromURL(e){hl("database.refFromURL",1,1,arguments.length);const t=jm(this._delegate,e);return new Rg(this,t)}goOffline(){return hl("database.goOffline",0,0,arguments.length),function(e){(e=vl(e))._checkNotDeleted("goOffline"),pm(e._repo)}(this._delegate)}goOnline(){return hl("database.goOnline",0,0,arguments.length),xg(this._delegate)}}Mg.ServerValue={TIMESTAMP:$g,increment:e=>function(e){return{".sv":{increment:e}}}(e)};var Ag=Object.freeze({__proto__:null,initStandalone:function(e){let{app:t,url:n,version:r,customAuthImpl:i,customAppCheckImpl:o,namespace:a,nodeAdmin:s=!1}=e;pu(r);const l=new Sl("database-standalone"),c=new wl("auth-internal",l);let u;return c.setComponent(new bl("auth-internal",(()=>i),"PRIVATE")),o&&(u=new wl("app-check-internal",l),u.setComponent(new bl("app-check-internal",(()=>o),"PRIVATE"))),{instance:new Mg(fg(t,c,u,n,s),t),namespace:a}}});const Og=Mg.ServerValue;var Lg;(Lg=lu).INTERNAL.registerComponent(new bl("database-compat",((e,t)=>{let{instanceIdentifier:n}=t;const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:n});return new Mg(i,r)}),"PUBLIC").setServiceProps({Reference:Rg,Query:Pg,Database:Mg,DataSnapshot:Ig,enableLogging:wg,INTERNAL:Ag,ServerValue:Og}).setMultipleInstances(!0)),Lg.registerVersion("@firebase/database-compat","2.0.1");const Ng={apiKey:"AIzaSyBu9LPONvHFuNwNZfKtI7LWmzvKgWvPnJw",authDomain:"nutrition-2cda7.firebaseapp.com",projectId:"nutrition-2cda7",storageBucket:"nutrition-2cda7.firebasestorage.app",messagingSenderId:"315118088156",appId:"1:315118088156:web:8ce5083334a48d3eb7a919",measurementId:"G-0QXM78CKMP"};lu.apps.length||lu.initializeApp(Ng);const Dg=lu.database(),Fg=gr("data/fetchMeals",(async(e,t)=>{let{dispatch:n}=t;n(ba({isMealsDataLoading:!0}));try{const e=(await Dg.ref(Ga.Meals).once("value")).val(),t=e?Object.values(e):[];n(va({meals:t}))}catch(r){console.error("Error fetching meals from database",r)}finally{n(ba({isMealsDataLoading:!1}))}})),jg=gr("data/fetchUsers",(async(e,t)=>{let{dispatch:n}=t;n(wa({isUsersDataLoading:!0}));try{const e=(await Dg.ref(Ga.Users).once("value")).val(),t=e?Object.values(e):[];n(xa({users:t}))}catch(r){console.error("Error fetching user from database",r)}finally{n(wa({isUsersDataLoading:!1}))}})),zg=async(e,t)=>{try{const n=Dg.ref(Ga.Users);await n.push(e);const r=await n.once("value"),i=[];r.forEach((e=>{i.push(e.val())})),t(xa({users:i})),console.log("new user added!")}catch(Eu){console.error("Error adding new user to database:",Eu)}},Bg=async(e,t)=>{try{const n=Dg.ref(Ga.Users),r=await n.orderByChild("id").equalTo(e.id).once("value");if(r.exists()){const e=Object.keys(r.val())[0],i=(r.val()[e].mealSchedule||[]).map((e=>Array.isArray(e)?e:[e,new Date]));i.push([t,new Date]),await n.child(e).update({mealSchedule:i}),console.log("Meal successfully added to user schedule")}else console.log("User not found in the database")}catch(Eu){console.error("Error adding meal to schedule:",Eu)}},Ug=gr("user/login",(async(e,t)=>{let{login:n,password:r}=e,{extra:i}=t;const{data:o}=await i.post(Ga.Login,{email:n,password:r});return(e=>{localStorage.setItem(ma,e)})(o.token),localStorage.setItem("nutrition-user",JSON.stringify(o)),o})),Wg=gr("user/logout",(async(e,t)=>{let{dispatch:n}=t;try{(()=>{try{localStorage.removeItem(ma)}catch(Eu){console.error("Error removing user from localStorage",Eu)}})(),n(Pa({authorizationStatus:fs.NoAuth})),n(Ra({userInformation:{id:"",email:"",token:""}})),n(vs()),n(ys({email:"",id:"",token:""}))}catch(Eu){console.error("Failed to logout",Eu)}}));var Vg;function Hg(){return Hg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Hg.apply(null,arguments)}function qg(e,t){let{title:n,titleId:i,...o}=e;return r.createElement("svg",Hg({width:40,height:40,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":i},o),n?r.createElement("title",{id:i},n):null,Vg||(Vg=r.createElement("path",{d:"M4.06189 13C4.02104 12.6724 4 12.3387 4 12C4 7.58172 7.58172 4 12 4C14.5006 4 16.7332 5.14727 18.2002 6.94416M19.9381 11C19.979 11.3276 20 11.6613 20 12C20 16.4183 16.4183 20 12 20C9.61061 20 7.46589 18.9525 6 17.2916M9 17H6V17.2916M18.2002 4V6.94416M18.2002 6.94416V6.99993L15.2002 7M6 20V17.2916",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})))}const Gg=r.forwardRef(qg);n.p;var Kg=function(){return Kg=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Kg.apply(this,arguments)};Object.create;function Yg(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}Object.create;"function"===typeof SuppressedError&&SuppressedError;var Zg="-ms-",Xg="-moz-",Qg="-webkit-",Jg="comm",ey="rule",ty="decl",ny="@keyframes",ry=Math.abs,iy=String.fromCharCode,oy=Object.assign;function ay(e){return e.trim()}function sy(e,t){return(e=t.exec(e))?e[0]:e}function ly(e,t,n){return e.replace(t,n)}function cy(e,t,n){return e.indexOf(t,n)}function uy(e,t){return 0|e.charCodeAt(t)}function dy(e,t,n){return e.slice(t,n)}function py(e){return e.length}function hy(e){return e.length}function fy(e,t){return t.push(e),e}function my(e,t){return e.filter((function(e){return!sy(e,t)}))}var gy=1,yy=1,vy=0,by=0,xy=0,wy="";function $y(e,t,n,r,i,o,a,s){return{value:e,root:t,parent:n,type:r,props:i,children:o,line:gy,column:yy,length:a,return:"",siblings:s}}function Sy(e,t){return oy($y("",null,null,"",null,null,0,e.siblings),e,{length:-e.length},t)}function _y(e){for(;e.root;)e=Sy(e.root,{children:[e]});fy(e,e.siblings)}function Cy(){return xy=by>0?uy(wy,--by):0,yy--,10===xy&&(yy=1,gy--),xy}function ky(){return xy=by<vy?uy(wy,by++):0,yy++,10===xy&&(yy=1,gy++),xy}function Ey(){return uy(wy,by)}function Ty(){return by}function Iy(e,t){return dy(wy,e,t)}function Py(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Ry(e){return gy=yy=1,vy=py(wy=e),by=0,[]}function My(e){return wy="",e}function Ay(e){return ay(Iy(by-1,Ny(91===e?e+2:40===e?e+1:e)))}function Oy(e){for(;(xy=Ey())&&xy<33;)ky();return Py(e)>2||Py(xy)>3?"":" "}function Ly(e,t){for(;--t&&ky()&&!(xy<48||xy>102||xy>57&&xy<65||xy>70&&xy<97););return Iy(e,Ty()+(t<6&&32==Ey()&&32==ky()))}function Ny(e){for(;ky();)switch(xy){case e:return by;case 34:case 39:34!==e&&39!==e&&Ny(xy);break;case 40:41===e&&Ny(e);break;case 92:ky()}return by}function Dy(e,t){for(;ky()&&e+xy!==57&&(e+xy!==84||47!==Ey()););return"/*"+Iy(t,by-1)+"*"+iy(47===e?e:ky())}function Fy(e){for(;!Py(Ey());)ky();return Iy(e,by)}function jy(e,t){for(var n="",r=0;r<e.length;r++)n+=t(e[r],r,e,t)||"";return n}function zy(e,t,n,r){switch(e.type){case"@layer":if(e.children.length)break;case"@import":case ty:return e.return=e.return||e.value;case Jg:return"";case ny:return e.return=e.value+"{"+jy(e.children,r)+"}";case ey:if(!py(e.value=e.props.join(",")))return""}return py(n=jy(e.children,r))?e.return=e.value+"{"+n+"}":""}function By(e,t,n){switch(function(e,t){return 45^uy(e,0)?(((t<<2^uy(e,0))<<2^uy(e,1))<<2^uy(e,2))<<2^uy(e,3):0}(e,t)){case 5103:return Qg+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Qg+e+e;case 4789:return Xg+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Qg+e+Xg+e+Zg+e+e;case 5936:switch(uy(e,t+11)){case 114:return Qg+e+Zg+ly(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Qg+e+Zg+ly(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Qg+e+Zg+ly(e,/[svh]\w+-[tblr]{2}/,"lr")+e}case 6828:case 4268:case 2903:return Qg+e+Zg+e+e;case 6165:return Qg+e+Zg+"flex-"+e+e;case 5187:return Qg+e+ly(e,/(\w+).+(:[^]+)/,Qg+"box-$1$2"+Zg+"flex-$1$2")+e;case 5443:return Qg+e+Zg+"flex-item-"+ly(e,/flex-|-self/g,"")+(sy(e,/flex-|baseline/)?"":Zg+"grid-row-"+ly(e,/flex-|-self/g,""))+e;case 4675:return Qg+e+Zg+"flex-line-pack"+ly(e,/align-content|flex-|-self/g,"")+e;case 5548:return Qg+e+Zg+ly(e,"shrink","negative")+e;case 5292:return Qg+e+Zg+ly(e,"basis","preferred-size")+e;case 6060:return Qg+"box-"+ly(e,"-grow","")+Qg+e+Zg+ly(e,"grow","positive")+e;case 4554:return Qg+ly(e,/([^-])(transform)/g,"$1"+Qg+"$2")+e;case 6187:return ly(ly(ly(e,/(zoom-|grab)/,Qg+"$1"),/(image-set)/,Qg+"$1"),e,"")+e;case 5495:case 3959:return ly(e,/(image-set\([^]*)/,Qg+"$1$`$1");case 4968:return ly(ly(e,/(.+:)(flex-)?(.*)/,Qg+"box-pack:$3"+Zg+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Qg+e+e;case 4200:if(!sy(e,/flex-|baseline/))return Zg+"grid-column-align"+dy(e,t)+e;break;case 2592:case 3360:return Zg+ly(e,"template-","")+e;case 4384:case 3616:return n&&n.some((function(e,n){return t=n,sy(e.props,/grid-\w+-end/)}))?~cy(e+(n=n[t].value),"span",0)?e:Zg+ly(e,"-start","")+e+Zg+"grid-row-span:"+(~cy(n,"span",0)?sy(n,/\d+/):+sy(n,/\d+/)-+sy(e,/\d+/))+";":Zg+ly(e,"-start","")+e;case 4896:case 4128:return n&&n.some((function(e){return sy(e.props,/grid-\w+-start/)}))?e:Zg+ly(ly(e,"-end","-span"),"span ","")+e;case 4095:case 3583:case 4068:case 2532:return ly(e,/(.+)-inline(.+)/,Qg+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(py(e)-1-t>6)switch(uy(e,t+1)){case 109:if(45!==uy(e,t+4))break;case 102:return ly(e,/(.+:)(.+)-([^]+)/,"$1"+Qg+"$2-$3$1"+Xg+(108==uy(e,t+3)?"$3":"$2-$3"))+e;case 115:return~cy(e,"stretch",0)?By(ly(e,"stretch","fill-available"),t,n)+e:e}break;case 5152:case 5920:return ly(e,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,(function(t,n,r,i,o,a,s){return Zg+n+":"+r+s+(i?Zg+n+"-span:"+(o?a:+a-+r)+s:"")+e}));case 4949:if(121===uy(e,t+6))return ly(e,":",":"+Qg)+e;break;case 6444:switch(uy(e,45===uy(e,14)?18:11)){case 120:return ly(e,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+Qg+(45===uy(e,14)?"inline-":"")+"box$3$1"+Qg+"$2$3$1"+Zg+"$2box$3")+e;case 100:return ly(e,":",":"+Zg)+e}break;case 5719:case 2647:case 2135:case 3927:case 2391:return ly(e,"scroll-","scroll-snap-")+e}return e}function Uy(e,t,n,r){if(e.length>-1&&!e.return)switch(e.type){case ty:return void(e.return=By(e.value,e.length,n));case ny:return jy([Sy(e,{value:ly(e.value,"@","@"+Qg)})],r);case ey:if(e.length)return function(e,t){return e.map(t).join("")}(n=e.props,(function(t){switch(sy(t,r=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":_y(Sy(e,{props:[ly(t,/:(read-\w+)/,":-moz-$1")]})),_y(Sy(e,{props:[t]})),oy(e,{props:my(n,r)});break;case"::placeholder":_y(Sy(e,{props:[ly(t,/:(plac\w+)/,":"+Qg+"input-$1")]})),_y(Sy(e,{props:[ly(t,/:(plac\w+)/,":-moz-$1")]})),_y(Sy(e,{props:[ly(t,/:(plac\w+)/,Zg+"input-$1")]})),_y(Sy(e,{props:[t]})),oy(e,{props:my(n,r)})}return""}))}}function Wy(e){return My(Vy("",null,null,null,[""],e=Ry(e),0,[0],e))}function Vy(e,t,n,r,i,o,a,s,l){for(var c=0,u=0,d=a,p=0,h=0,f=0,m=1,g=1,y=1,v=0,b="",x=i,w=o,$=r,S=b;g;)switch(f=v,v=ky()){case 40:if(108!=f&&58==uy(S,d-1)){-1!=cy(S+=ly(Ay(v),"&","&\f"),"&\f",ry(c?s[c-1]:0))&&(y=-1);break}case 34:case 39:case 91:S+=Ay(v);break;case 9:case 10:case 13:case 32:S+=Oy(f);break;case 92:S+=Ly(Ty()-1,7);continue;case 47:switch(Ey()){case 42:case 47:fy(qy(Dy(ky(),Ty()),t,n,l),l);break;default:S+="/"}break;case 123*m:s[c++]=py(S)*y;case 125*m:case 59:case 0:switch(v){case 0:case 125:g=0;case 59+u:-1==y&&(S=ly(S,/\f/g,"")),h>0&&py(S)-d&&fy(h>32?Gy(S+";",r,n,d-1,l):Gy(ly(S," ","")+";",r,n,d-2,l),l);break;case 59:S+=";";default:if(fy($=Hy(S,t,n,c,u,i,s,b,x=[],w=[],d,o),o),123===v)if(0===u)Vy(S,t,$,$,x,o,d,s,w);else switch(99===p&&110===uy(S,3)?100:p){case 100:case 108:case 109:case 115:Vy(e,$,$,r&&fy(Hy(e,$,$,0,0,i,s,b,i,x=[],d,w),w),i,w,d,s,r?x:w);break;default:Vy(S,$,$,$,[""],w,0,s,w)}}c=u=h=0,m=y=1,b=S="",d=a;break;case 58:d=1+py(S),h=f;default:if(m<1)if(123==v)--m;else if(125==v&&0==m++&&125==Cy())continue;switch(S+=iy(v),v*m){case 38:y=u>0?1:(S+="\f",-1);break;case 44:s[c++]=(py(S)-1)*y,y=1;break;case 64:45===Ey()&&(S+=Ay(ky())),p=Ey(),u=d=py(b=S+=Fy(Ty())),v++;break;case 45:45===f&&2==py(S)&&(m=0)}}return o}function Hy(e,t,n,r,i,o,a,s,l,c,u,d){for(var p=i-1,h=0===i?o:[""],f=hy(h),m=0,g=0,y=0;m<r;++m)for(var v=0,b=dy(e,p+1,p=ry(g=a[m])),x=e;v<f;++v)(x=ay(g>0?h[v]+" "+b:ly(b,/&\f/g,h[v])))&&(l[y++]=x);return $y(e,t,n,0===i?ey:s,l,c,u,d)}function qy(e,t,n,r){return $y(e,t,n,Jg,iy(xy),dy(e,2,-2),0,r)}function Gy(e,t,n,r,i){return $y(e,t,n,ty,dy(e,0,r),dy(e,r+1,-1),r,i)}var Ky={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Yy="undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"/nutrition",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}&&({NODE_ENV:"production",PUBLIC_URL:"/nutrition",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_ATTR||{NODE_ENV:"production",PUBLIC_URL:"/nutrition",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_ATTR)||"data-styled",Zy="active",Xy="data-styled-version",Qy="6.1.13",Jy="/*!sc*/\n",ev="undefined"!=typeof window&&"HTMLElement"in window,tv=Boolean("boolean"==typeof SC_DISABLE_SPEEDY?SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"/nutrition",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"/nutrition",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY&&""!=={NODE_ENV:"production",PUBLIC_URL:"/nutrition",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY?"false"!=={NODE_ENV:"production",PUBLIC_URL:"/nutrition",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY&&{NODE_ENV:"production",PUBLIC_URL:"/nutrition",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"/nutrition",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"/nutrition",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY&&""!=={NODE_ENV:"production",PUBLIC_URL:"/nutrition",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY&&("false"!=={NODE_ENV:"production",PUBLIC_URL:"/nutrition",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY&&{NODE_ENV:"production",PUBLIC_URL:"/nutrition",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY)),nv=(new Set,Object.freeze([])),rv=Object.freeze({});function iv(e,t,n){return void 0===n&&(n=rv),e.theme!==n.theme&&e.theme||t||n.theme}var ov=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),av=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,sv=/(^-|-$)/g;function lv(e){return e.replace(av,"-").replace(sv,"")}var cv=/(a)(d)/gi,uv=function(e){return String.fromCharCode(e+(e>25?39:97))};function dv(e){var t,n="";for(t=Math.abs(e);t>52;t=t/52|0)n=uv(t%52)+n;return(uv(t%52)+n).replace(cv,"$1-$2")}var pv,hv=function(e,t){for(var n=t.length;n;)e=33*e^t.charCodeAt(--n);return e},fv=function(e){return hv(5381,e)};function mv(e){return dv(fv(e)>>>0)}function gv(e){return e.displayName||e.name||"Component"}function yv(e){return"string"==typeof e&&!0}var vv="function"==typeof Symbol&&Symbol.for,bv=vv?Symbol.for("react.memo"):60115,xv=vv?Symbol.for("react.forward_ref"):60112,wv={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},$v={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},Sv={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},_v=((pv={})[xv]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},pv[bv]=Sv,pv);function Cv(e){return("type"in(t=e)&&t.type.$$typeof)===bv?Sv:"$$typeof"in e?_v[e.$$typeof]:wv;var t}var kv=Object.defineProperty,Ev=Object.getOwnPropertyNames,Tv=Object.getOwnPropertySymbols,Iv=Object.getOwnPropertyDescriptor,Pv=Object.getPrototypeOf,Rv=Object.prototype;function Mv(e,t,n){if("string"!=typeof t){if(Rv){var r=Pv(t);r&&r!==Rv&&Mv(e,r,n)}var i=Ev(t);Tv&&(i=i.concat(Tv(t)));for(var o=Cv(e),a=Cv(t),s=0;s<i.length;++s){var l=i[s];if(!(l in $v||n&&n[l]||a&&l in a||o&&l in o)){var c=Iv(t,l);try{kv(e,l,c)}catch(e){}}}}return e}function Av(e){return"function"==typeof e}function Ov(e){return"object"==typeof e&&"styledComponentId"in e}function Lv(e,t){return e&&t?"".concat(e," ").concat(t):e||t||""}function Nv(e,t){if(0===e.length)return"";for(var n=e[0],r=1;r<e.length;r++)n+=t?t+e[r]:e[r];return n}function Dv(e){return null!==e&&"object"==typeof e&&e.constructor.name===Object.name&&!("props"in e&&e.$$typeof)}function Fv(e,t,n){if(void 0===n&&(n=!1),!n&&!Dv(e)&&!Array.isArray(e))return t;if(Array.isArray(t))for(var r=0;r<t.length;r++)e[r]=Fv(e[r],t[r]);else if(Dv(t))for(var r in t)e[r]=Fv(e[r],t[r]);return e}function jv(e,t){Object.defineProperty(e,"toString",{value:t})}function zv(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(e," for more information.").concat(t.length>0?" Args: ".concat(t.join(", ")):""))}var Bv=function(){function e(e){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=e}return e.prototype.indexOfGroup=function(e){for(var t=0,n=0;n<e;n++)t+=this.groupSizes[n];return t},e.prototype.insertRules=function(e,t){if(e>=this.groupSizes.length){for(var n=this.groupSizes,r=n.length,i=r;e>=i;)if((i<<=1)<0)throw zv(16,"".concat(e));this.groupSizes=new Uint32Array(i),this.groupSizes.set(n),this.length=i;for(var o=r;o<i;o++)this.groupSizes[o]=0}for(var a=this.indexOfGroup(e+1),s=(o=0,t.length);o<s;o++)this.tag.insertRule(a,t[o])&&(this.groupSizes[e]++,a++)},e.prototype.clearGroup=function(e){if(e<this.length){var t=this.groupSizes[e],n=this.indexOfGroup(e),r=n+t;this.groupSizes[e]=0;for(var i=n;i<r;i++)this.tag.deleteRule(n)}},e.prototype.getGroup=function(e){var t="";if(e>=this.length||0===this.groupSizes[e])return t;for(var n=this.groupSizes[e],r=this.indexOfGroup(e),i=r+n,o=r;o<i;o++)t+="".concat(this.tag.getRule(o)).concat(Jy);return t},e}(),Uv=new Map,Wv=new Map,Vv=1,Hv=function(e){if(Uv.has(e))return Uv.get(e);for(;Wv.has(Vv);)Vv++;var t=Vv++;return Uv.set(e,t),Wv.set(t,e),t},qv=function(e,t){Vv=t+1,Uv.set(e,t),Wv.set(t,e)},Gv="style[".concat(Yy,"][").concat(Xy,'="').concat(Qy,'"]'),Kv=new RegExp("^".concat(Yy,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),Yv=function(e,t,n){for(var r,i=n.split(","),o=0,a=i.length;o<a;o++)(r=i[o])&&e.registerName(t,r)},Zv=function(e,t){for(var n,r=(null!==(n=t.textContent)&&void 0!==n?n:"").split(Jy),i=[],o=0,a=r.length;o<a;o++){var s=r[o].trim();if(s){var l=s.match(Kv);if(l){var c=0|parseInt(l[1],10),u=l[2];0!==c&&(qv(u,c),Yv(e,u,l[3]),e.getTag().insertRules(c,i)),i.length=0}else i.push(s)}}},Xv=function(e){for(var t=document.querySelectorAll(Gv),n=0,r=t.length;n<r;n++){var i=t[n];i&&i.getAttribute(Yy)!==Zy&&(Zv(e,i),i.parentNode&&i.parentNode.removeChild(i))}};function Qv(){return n.nc}var Jv=function(e){var t=document.head,n=e||t,r=document.createElement("style"),i=function(e){var t=Array.from(e.querySelectorAll("style[".concat(Yy,"]")));return t[t.length-1]}(n),o=void 0!==i?i.nextSibling:null;r.setAttribute(Yy,Zy),r.setAttribute(Xy,Qy);var a=Qv();return a&&r.setAttribute("nonce",a),n.insertBefore(r,o),r},eb=function(){function e(e){this.element=Jv(e),this.element.appendChild(document.createTextNode("")),this.sheet=function(e){if(e.sheet)return e.sheet;for(var t=document.styleSheets,n=0,r=t.length;n<r;n++){var i=t[n];if(i.ownerNode===e)return i}throw zv(17)}(this.element),this.length=0}return e.prototype.insertRule=function(e,t){try{return this.sheet.insertRule(t,e),this.length++,!0}catch(e){return!1}},e.prototype.deleteRule=function(e){this.sheet.deleteRule(e),this.length--},e.prototype.getRule=function(e){var t=this.sheet.cssRules[e];return t&&t.cssText?t.cssText:""},e}(),tb=function(){function e(e){this.element=Jv(e),this.nodes=this.element.childNodes,this.length=0}return e.prototype.insertRule=function(e,t){if(e<=this.length&&e>=0){var n=document.createTextNode(t);return this.element.insertBefore(n,this.nodes[e]||null),this.length++,!0}return!1},e.prototype.deleteRule=function(e){this.element.removeChild(this.nodes[e]),this.length--},e.prototype.getRule=function(e){return e<this.length?this.nodes[e].textContent:""},e}(),nb=function(){function e(e){this.rules=[],this.length=0}return e.prototype.insertRule=function(e,t){return e<=this.length&&(this.rules.splice(e,0,t),this.length++,!0)},e.prototype.deleteRule=function(e){this.rules.splice(e,1),this.length--},e.prototype.getRule=function(e){return e<this.length?this.rules[e]:""},e}(),rb=ev,ib={isServer:!ev,useCSSOMInjection:!tv},ob=function(){function e(e,t,n){void 0===e&&(e=rv),void 0===t&&(t={});var r=this;this.options=Kg(Kg({},ib),e),this.gs=t,this.names=new Map(n),this.server=!!e.isServer,!this.server&&ev&&rb&&(rb=!1,Xv(this)),jv(this,(function(){return function(e){for(var t=e.getTag(),n=t.length,r="",i=function(n){var i=function(e){return Wv.get(e)}(n);if(void 0===i)return"continue";var o=e.names.get(i),a=t.getGroup(n);if(void 0===o||!o.size||0===a.length)return"continue";var s="".concat(Yy,".g").concat(n,'[id="').concat(i,'"]'),l="";void 0!==o&&o.forEach((function(e){e.length>0&&(l+="".concat(e,","))})),r+="".concat(a).concat(s,'{content:"').concat(l,'"}').concat(Jy)},o=0;o<n;o++)i(o);return r}(r)}))}return e.registerId=function(e){return Hv(e)},e.prototype.rehydrate=function(){!this.server&&ev&&Xv(this)},e.prototype.reconstructWithOptions=function(t,n){return void 0===n&&(n=!0),new e(Kg(Kg({},this.options),t),this.gs,n&&this.names||void 0)},e.prototype.allocateGSInstance=function(e){return this.gs[e]=(this.gs[e]||0)+1},e.prototype.getTag=function(){return this.tag||(this.tag=(e=function(e){var t=e.useCSSOMInjection,n=e.target;return e.isServer?new nb(n):t?new eb(n):new tb(n)}(this.options),new Bv(e)));var e},e.prototype.hasNameForId=function(e,t){return this.names.has(e)&&this.names.get(e).has(t)},e.prototype.registerName=function(e,t){if(Hv(e),this.names.has(e))this.names.get(e).add(t);else{var n=new Set;n.add(t),this.names.set(e,n)}},e.prototype.insertRules=function(e,t,n){this.registerName(e,t),this.getTag().insertRules(Hv(e),n)},e.prototype.clearNames=function(e){this.names.has(e)&&this.names.get(e).clear()},e.prototype.clearRules=function(e){this.getTag().clearGroup(Hv(e)),this.clearNames(e)},e.prototype.clearTag=function(){this.tag=void 0},e}(),ab=/&/g,sb=/^\s*\/\/.*$/gm;function lb(e,t){return e.map((function(e){return"rule"===e.type&&(e.value="".concat(t," ").concat(e.value),e.value=e.value.replaceAll(",",",".concat(t," ")),e.props=e.props.map((function(e){return"".concat(t," ").concat(e)}))),Array.isArray(e.children)&&"@keyframes"!==e.type&&(e.children=lb(e.children,t)),e}))}function cb(e){var t,n,r,i=void 0===e?rv:e,o=i.options,a=void 0===o?rv:o,s=i.plugins,l=void 0===s?nv:s,c=function(e,r,i){return i.startsWith(n)&&i.endsWith(n)&&i.replaceAll(n,"").length>0?".".concat(t):e},u=l.slice();u.push((function(e){e.type===ey&&e.value.includes("&")&&(e.props[0]=e.props[0].replace(ab,n).replace(r,c))})),a.prefix&&u.push(Uy),u.push(zy);var d=function(e,i,o,s){void 0===i&&(i=""),void 0===o&&(o=""),void 0===s&&(s="&"),t=s,n=i,r=new RegExp("\\".concat(n,"\\b"),"g");var l=e.replace(sb,""),c=Wy(o||i?"".concat(o," ").concat(i," { ").concat(l," }"):l);a.namespace&&(c=lb(c,a.namespace));var d=[];return jy(c,function(e){var t=hy(e);return function(n,r,i,o){for(var a="",s=0;s<t;s++)a+=e[s](n,r,i,o)||"";return a}}(u.concat(function(e){return function(t){t.root||(t=t.return)&&e(t)}}((function(e){return d.push(e)}))))),d};return d.hash=l.length?l.reduce((function(e,t){return t.name||zv(15),hv(e,t.name)}),5381).toString():"",d}var ub=new ob,db=cb(),pb=r.createContext({shouldForwardProp:void 0,styleSheet:ub,stylis:db}),hb=(pb.Consumer,r.createContext(void 0));function fb(){return(0,r.useContext)(pb)}function mb(e){var t=(0,r.useState)(e.stylisPlugins),n=t[0],i=t[1],o=fb().styleSheet,a=(0,r.useMemo)((function(){var t=o;return e.sheet?t=e.sheet:e.target&&(t=t.reconstructWithOptions({target:e.target},!1)),e.disableCSSOMInjection&&(t=t.reconstructWithOptions({useCSSOMInjection:!1})),t}),[e.disableCSSOMInjection,e.sheet,e.target,o]),s=(0,r.useMemo)((function(){return cb({options:{namespace:e.namespace,prefix:e.enableVendorPrefixes},plugins:n})}),[e.enableVendorPrefixes,e.namespace,n]);(0,r.useEffect)((function(){d()(n,e.stylisPlugins)||i(e.stylisPlugins)}),[e.stylisPlugins]);var l=(0,r.useMemo)((function(){return{shouldForwardProp:e.shouldForwardProp,styleSheet:a,stylis:s}}),[e.shouldForwardProp,a,s]);return r.createElement(pb.Provider,{value:l},r.createElement(hb.Provider,{value:s},e.children))}var gb=function(){function e(e,t){var n=this;this.inject=function(e,t){void 0===t&&(t=db);var r=n.name+t.hash;e.hasNameForId(n.id,r)||e.insertRules(n.id,r,t(n.rules,r,"@keyframes"))},this.name=e,this.id="sc-keyframes-".concat(e),this.rules=t,jv(this,(function(){throw zv(12,String(n.name))}))}return e.prototype.getName=function(e){return void 0===e&&(e=db),this.name+e.hash},e}(),yb=function(e){return e>="A"&&e<="Z"};function vb(e){for(var t="",n=0;n<e.length;n++){var r=e[n];if(1===n&&"-"===r&&"-"===e[0])return e;yb(r)?t+="-"+r.toLowerCase():t+=r}return t.startsWith("ms-")?"-"+t:t}var bb=function(e){return null==e||!1===e||""===e},xb=function(e){var t,n,r=[];for(var i in e){var o=e[i];e.hasOwnProperty(i)&&!bb(o)&&(Array.isArray(o)&&o.isCss||Av(o)?r.push("".concat(vb(i),":"),o,";"):Dv(o)?r.push.apply(r,Yg(Yg(["".concat(i," {")],xb(o),!1),["}"],!1)):r.push("".concat(vb(i),": ").concat((t=i,null==(n=o)||"boolean"==typeof n||""===n?"":"number"!=typeof n||0===n||t in Ky||t.startsWith("--")?String(n).trim():"".concat(n,"px")),";")))}return r};function wb(e,t,n,r){return bb(e)?[]:Ov(e)?[".".concat(e.styledComponentId)]:Av(e)?!Av(i=e)||i.prototype&&i.prototype.isReactComponent||!t?[e]:wb(e(t),t,n,r):e instanceof gb?n?(e.inject(n,r),[e.getName(r)]):[e]:Dv(e)?xb(e):Array.isArray(e)?Array.prototype.concat.apply(nv,e.map((function(e){return wb(e,t,n,r)}))):[e.toString()];var i}function $b(e){for(var t=0;t<e.length;t+=1){var n=e[t];if(Av(n)&&!Ov(n))return!1}return!0}var Sb=fv(Qy),_b=function(){function e(e,t,n){this.rules=e,this.staticRulesId="",this.isStatic=(void 0===n||n.isStatic)&&$b(e),this.componentId=t,this.baseHash=hv(Sb,t),this.baseStyle=n,ob.registerId(t)}return e.prototype.generateAndInjectStyles=function(e,t,n){var r=this.baseStyle?this.baseStyle.generateAndInjectStyles(e,t,n):"";if(this.isStatic&&!n.hash)if(this.staticRulesId&&t.hasNameForId(this.componentId,this.staticRulesId))r=Lv(r,this.staticRulesId);else{var i=Nv(wb(this.rules,e,t,n)),o=dv(hv(this.baseHash,i)>>>0);if(!t.hasNameForId(this.componentId,o)){var a=n(i,".".concat(o),void 0,this.componentId);t.insertRules(this.componentId,o,a)}r=Lv(r,o),this.staticRulesId=o}else{for(var s=hv(this.baseHash,n.hash),l="",c=0;c<this.rules.length;c++){var u=this.rules[c];if("string"==typeof u)l+=u;else if(u){var d=Nv(wb(u,e,t,n));s=hv(s,d+c),l+=d}}if(l){var p=dv(s>>>0);t.hasNameForId(this.componentId,p)||t.insertRules(this.componentId,p,n(l,".".concat(p),void 0,this.componentId)),r=Lv(r,p)}}return r},e}(),Cb=r.createContext(void 0);Cb.Consumer;var kb={};new Set;function Eb(e,t,n){var i=Ov(e),o=e,a=!yv(e),s=t.attrs,l=void 0===s?nv:s,c=t.componentId,u=void 0===c?function(e,t){var n="string"!=typeof e?"sc":lv(e);kb[n]=(kb[n]||0)+1;var r="".concat(n,"-").concat(mv(Qy+n+kb[n]));return t?"".concat(t,"-").concat(r):r}(t.displayName,t.parentComponentId):c,d=t.displayName,p=void 0===d?function(e){return yv(e)?"styled.".concat(e):"Styled(".concat(gv(e),")")}(e):d,h=t.displayName&&t.componentId?"".concat(lv(t.displayName),"-").concat(t.componentId):t.componentId||u,f=i&&o.attrs?o.attrs.concat(l).filter(Boolean):l,m=t.shouldForwardProp;if(i&&o.shouldForwardProp){var g=o.shouldForwardProp;if(t.shouldForwardProp){var y=t.shouldForwardProp;m=function(e,t){return g(e,t)&&y(e,t)}}else m=g}var v=new _b(n,h,i?o.componentStyle:void 0);function b(e,t){return function(e,t,n){var i=e.attrs,o=e.componentStyle,a=e.defaultProps,s=e.foldedComponentIds,l=e.styledComponentId,c=e.target,u=r.useContext(Cb),d=fb(),p=e.shouldForwardProp||d.shouldForwardProp,h=iv(t,u,a)||rv,f=function(e,t,n){for(var r,i=Kg(Kg({},t),{className:void 0,theme:n}),o=0;o<e.length;o+=1){var a=Av(r=e[o])?r(i):r;for(var s in a)i[s]="className"===s?Lv(i[s],a[s]):"style"===s?Kg(Kg({},i[s]),a[s]):a[s]}return t.className&&(i.className=Lv(i.className,t.className)),i}(i,t,h),m=f.as||c,g={};for(var y in f)void 0===f[y]||"$"===y[0]||"as"===y||"theme"===y&&f.theme===h||("forwardedAs"===y?g.as=f.forwardedAs:p&&!p(y,m)||(g[y]=f[y]));var v=function(e,t){var n=fb();return e.generateAndInjectStyles(t,n.styleSheet,n.stylis)}(o,f),b=Lv(s,l);return v&&(b+=" "+v),f.className&&(b+=" "+f.className),g[yv(m)&&!ov.has(m)?"class":"className"]=b,g.ref=n,(0,r.createElement)(m,g)}(x,e,t)}b.displayName=p;var x=r.forwardRef(b);return x.attrs=f,x.componentStyle=v,x.displayName=p,x.shouldForwardProp=m,x.foldedComponentIds=i?Lv(o.foldedComponentIds,o.styledComponentId):"",x.styledComponentId=h,x.target=i?o.target:e,Object.defineProperty(x,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(e){this._foldedDefaultProps=i?function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0,i=t;r<i.length;r++)Fv(e,i[r],!0);return e}({},o.defaultProps,e):e}}),jv(x,(function(){return".".concat(x.styledComponentId)})),a&&Mv(x,e,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),x}function Tb(e,t){for(var n=[e[0]],r=0,i=t.length;r<i;r+=1)n.push(t[r],e[r+1]);return n}var Ib=function(e){return Object.assign(e,{isCss:!0})};function Pb(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(Av(e)||Dv(e))return Ib(wb(Tb(nv,Yg([e],t,!0))));var r=e;return 0===t.length&&1===r.length&&"string"==typeof r[0]?wb(r):Ib(wb(Tb(r,t)))}function Rb(e,t,n){if(void 0===n&&(n=rv),!t)throw zv(1,t);var r=function(r){for(var i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];return e(t,n,Pb.apply(void 0,Yg([r],i,!1)))};return r.attrs=function(r){return Rb(e,t,Kg(Kg({},n),{attrs:Array.prototype.concat(n.attrs,r).filter(Boolean)}))},r.withConfig=function(r){return Rb(e,t,Kg(Kg({},n),r))},r}var Mb=function(e){return Rb(Eb,e)},Ab=Mb;ov.forEach((function(e){Ab[e]=Mb(e)}));!function(){function e(e,t){this.rules=e,this.componentId=t,this.isStatic=$b(e),ob.registerId(this.componentId+1)}e.prototype.createStyles=function(e,t,n,r){var i=r(Nv(wb(this.rules,t,n,r)),""),o=this.componentId+e;n.insertRules(o,o,i)},e.prototype.removeStyles=function(e,t){t.clearRules(this.componentId+e)},e.prototype.renderStyles=function(e,t,n,r){e>2&&ob.registerId(this.componentId+e),this.removeStyles(e,n),this.createStyles(e,t,n,r)}}();function Ob(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=Nv(Pb.apply(void 0,Yg([e],t,!1))),i=mv(r);return new gb(i,r)}(function(){function e(){var e=this;this._emitSheetCSS=function(){var t=e.instance.toString();if(!t)return"";var n=Qv(),r=Nv([n&&'nonce="'.concat(n,'"'),"".concat(Yy,'="true"'),"".concat(Xy,'="').concat(Qy,'"')].filter(Boolean)," ");return"<style ".concat(r,">").concat(t,"</style>")},this.getStyleTags=function(){if(e.sealed)throw zv(2);return e._emitSheetCSS()},this.getStyleElement=function(){var t;if(e.sealed)throw zv(2);var n=e.instance.toString();if(!n)return[];var i=((t={})[Yy]="",t[Xy]=Qy,t.dangerouslySetInnerHTML={__html:n},t),o=Qv();return o&&(i.nonce=o),[r.createElement("style",Kg({},i,{key:"sc-0-0"}))]},this.seal=function(){e.sealed=!0},this.instance=new ob({isServer:!0}),this.sealed=!1}e.prototype.collectStyles=function(e){if(this.sealed)throw zv(2);return r.createElement(mb,{sheet:this.instance},e)},e.prototype.interleaveWithNodeStream=function(e){throw zv(3)}})(),"__sc-".concat(Yy,"__");const Lb="#4fa94d",Nb={"aria-busy":!0,role:"progressbar"},Db=Ab.div`
  display: ${e=>e.$visible?"flex":"none"};
`,Fb=242.776657104492,jb=Ob`
12.5% {
  stroke-dasharray: ${33.98873199462888}px, ${Fb}px;
  stroke-dashoffset: -${26.70543228149412}px;
}
43.75% {
  stroke-dasharray: ${84.97182998657219}px, ${Fb}px;
  stroke-dashoffset: -${84.97182998657219}px;
}
100% {
  stroke-dasharray: ${2.42776657104492}px, ${Fb}px;
  stroke-dashoffset: -${240.34889053344708}px;
}
`,zb=(Ab.path`
  stroke-dasharray: ${2.42776657104492}px, ${Fb};
  stroke-dashoffset: 0;
  animation: ${jb} ${1.6}s linear infinite;
`,(e,t,n)=>{const r=Math.max(e,t),i=-n-r/2+1,o=2*n+r;return[i,i,o,o].join(" ")}),Bb=e=>{let{height:t=80,width:n=80,color:r=Lb,secondaryColor:i=Lb,ariaLabel:o="oval-loading",wrapperStyle:a,wrapperClass:s,visible:l=!0,strokeWidth:c=2,strokeWidthSecondary:u}=e;return(0,Kt.jsx)(Db,{style:a,$visible:l,className:s,"data-testid":"oval-loading","aria-label":o,...Nb,children:(0,Kt.jsx)("svg",{width:n,height:t,viewBox:zb(Number(c),Number(u||c),20),xmlns:"http://www.w3.org/2000/svg",stroke:r,"data-testid":"oval-svg",children:(0,Kt.jsx)("g",{fill:"none",fillRule:"evenodd",children:(0,Kt.jsxs)("g",{transform:"translate(1 1)",strokeWidth:Number(u||c),"data-testid":"oval-secondary-group",children:[(0,Kt.jsx)("circle",{strokeOpacity:".5",cx:"0",cy:"0",r:20,stroke:i,strokeWidth:c}),(0,Kt.jsx)("path",{d:(d=20,["M"+d+" 0c0-9.94-8.06",d,d,d].join("-")),children:(0,Kt.jsx)("animateTransform",{attributeName:"transform",type:"rotate",from:"0 0 0",to:"360 0 0",dur:"1s",repeatCount:"indefinite"})})]})})})});var d},Ub=Ob`
to {
   transform: rotate(360deg);
 }
`,Wb=(Ab.svg`
  animation: ${Ub} 0.75s steps(12, end) infinite;
  animation-duration: 0.75s;
`,Ab.polyline`
  stroke-width: ${e=>e.width}px;
  stroke-linecap: round;

  &:nth-child(12n + 0) {
    stroke-opacity: 0.08;
  }

  &:nth-child(12n + 1) {
    stroke-opacity: 0.17;
  }

  &:nth-child(12n + 2) {
    stroke-opacity: 0.25;
  }

  &:nth-child(12n + 3) {
    stroke-opacity: 0.33;
  }

  &:nth-child(12n + 4) {
    stroke-opacity: 0.42;
  }

  &:nth-child(12n + 5) {
    stroke-opacity: 0.5;
  }

  &:nth-child(12n + 6) {
    stroke-opacity: 0.58;
  }

  &:nth-child(12n + 7) {
    stroke-opacity: 0.66;
  }

  &:nth-child(12n + 8) {
    stroke-opacity: 0.75;
  }

  &:nth-child(12n + 9) {
    stroke-opacity: 0.83;
  }

  &:nth-child(12n + 11) {
    stroke-opacity: 0.92;
  }
`,Ob`
to {
   stroke-dashoffset: 136;
 }
`);Ab.polygon`
  stroke-dasharray: 17;
  animation: ${Wb} 2.5s cubic-bezier(0.35, 0.04, 0.63, 0.95) infinite;
`,Ab.svg`
  transform-origin: 50% 65%;
`;function Vb(e){let{size:t,color:n,wrapper:r}=e;return(0,Kt.jsx)(Bb,{visible:!0,height:t,width:t,color:n||"black",secondaryColor:"rgba(45,52,64, 40%)",ariaLabel:"oval-loading",wrapperStyle:{},wrapperClass:r?"spinner-wrapper":""})}function Hb(e){return e.charAt(0).toUpperCase()+e.slice(1)}function qb(e){let{meal:t}=e;const n=Ce(),i=gt(),o=he((e=>e.page.isMealFormOpened)),a=t.recipe?function(e){const t=e.split(/(?=\d+[\.\)])\s*/);let n="";return t.forEach((e=>{const t=e.replace(/^\d+[\.\)]\s*/,"").trim();t&&(n+=`${t}\n`)})),n.trim()}(t.recipe):"",s=he((e=>e.page.activeMeal)),l=he((e=>e.user)),c=he((e=>e.data.users.find((e=>e.id===l.id)))),{id:u}=yt(),d=he((e=>e.data.meals.find((e=>e.id===u)))),[p,h]=(0,r.useState)(!1),f=function(){const e=Ce(),t=he((e=>e.data.meals)),n=gt(),{id:r}=yt(),i=he((e=>e.data.meals.find((e=>e.id===r))));return r=>{const o=t.filter((e=>e.type===r&&e.id!==(null===i||void 0===i?void 0:i.id)));if(o.length>0){const t=o[Math.floor(Math.random()*o.length)],r=He(qa.MealPage,{id:`${t.id}`});e(La({meal:t})),n(r)}else e(La({meal:null}))}}(),[m,g]=(0,r.useState)(!1);return(0,Kt.jsx)("div",{className:"meal",children:(0,Kt.jsxs)("div",{className:"meal__item meal-item",children:[(0,Kt.jsxs)("h2",{className:"title title--2 meal-item__title",children:[Hb(t.name)," ",(0,Kt.jsxs)("span",{className:"meal-item__type",children:["(\u043d\u0430 ",Ya[t.type].toLowerCase(),")"]})]}),(0,Kt.jsx)("div",{className:"meal-item__image-wrapper",children:t.picture?(0,Kt.jsx)("img",{className:"meal-item__picture",src:t.picture,alt:t.name,width:400,height:400,loading:"lazy"}):(0,Kt.jsx)("p",{className:"meal-item__alt-picture",children:"\u0422\u0443\u0442 \u043c\u043e\u0433\u043b\u0430 \u0431\u044b \u0431\u044b\u0442\u044c \u0444\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u044f \u0431\u043b\u044e\u0434\u0430 :)"})}),(0,Kt.jsxs)("div",{className:"meal-item__info",children:[(0,Kt.jsx)("h3",{className:"title title--3",children:"\u041f\u0438\u0449\u0435\u0432\u0430\u044f \u0446\u0435\u043d\u043d\u043e\u0441\u0442\u044c \u043d\u0430 100 \u0433:"}),(0,Kt.jsxs)("ul",{children:[(0,Kt.jsxs)("li",{children:[(0,Kt.jsx)("i",{children:"\u041a\u043a\u0430\u043b: "}),(0,Kt.jsxs)("b",{children:[t.calories,"\u0433"]})]}),(0,Kt.jsxs)("li",{children:[(0,Kt.jsx)("i",{children:"\u0411\u0435\u043b\u043a\u0438: "}),(0,Kt.jsxs)("b",{children:[t.proteins,"\u0433"]})]}),(0,Kt.jsxs)("li",{children:[(0,Kt.jsx)("i",{children:"\u0416\u0438\u0440\u044b: "}),(0,Kt.jsxs)("b",{children:[t.fats,"\u0433"]})]}),(0,Kt.jsxs)("li",{children:[(0,Kt.jsx)("i",{children:"\u0423\u0433\u043b\u0435\u0432\u043e\u0434\u044b: "}),(0,Kt.jsxs)("b",{children:[t.carbs,"\u0433"]})]})]}),(0,Kt.jsx)("span",{className:"title title--3",children:"\u0418\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u044b:"}),(0,Kt.jsx)("ol",{children:t.ingredients.map((e=>(0,Kt.jsx)("li",{children:e.trimStart().replace(/^\S/,(e=>e.toUpperCase()))},`${t.name}-ingredient-${e}`)))})]}),t.recipe&&(0,Kt.jsxs)("div",{className:"meal-item__recipe-wrapper",children:[(0,Kt.jsx)("span",{className:"title title--3",children:"\u0420\u0435\u0446\u0435\u043f\u0442:"}),(0,Kt.jsx)("ol",{className:"meal-item__recipe-list",children:a.split("\n").map(((e,t)=>(0,Kt.jsx)("li",{children:e.charAt(0).toUpperCase()+e.slice(1)},`recipe-line-${t}`)))})]}),(0,Kt.jsxs)("div",{className:"meal-item__buttons",children:[(0,Kt.jsx)("button",{className:"button button--submit meal-item__button",disabled:m,onClick:()=>(async()=>{if(s){var e;g(!0);const t={...s,id:`${s.id}-${(null===c||void 0===c||null===(e=c.mealSchedule)||void 0===e?void 0:e.length)||"0"}`};n(Ma({user:l,meal:t})),await Bg(l,t),g(!1)}s&&h(!0),s&&n(La({meal:null})),o&&n(Va({isOpened:!1}))})(),children:p?"\u041c\u043e\u043b\u043e\u0434\u0435\u0446!":m?(0,Kt.jsx)(Vb,{color:"#ffffff",size:"20"}):"\u041a\u0443\u0448\u0430\u0446!"}),(0,Kt.jsx)("button",{className:"button meal-item__button meal-item__button--refresh",onClick:()=>f(s?s.type:d?d.type:Ka.Breakfast),children:(0,Kt.jsx)(Gg,{})}),(0,Kt.jsx)("button",{className:"button meal-item__button meal-item__button--back",onClick:()=>(()=>{const e=He(qa.MealsByTypePage,{type:(null===d||void 0===d?void 0:d.type)||Ka.Breakfast});i(e)})(),children:"\u041d\u0430\u0437\u0430\u0434"})]})]})})}var Gb,Kb=n(139),Yb=n.n(Kb);function Zb(){return Zb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Zb.apply(null,arguments)}function Xb(e,t){let{title:n,titleId:i,...o}=e;return r.createElement("svg",Zb({width:32,height:32,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":i},o),n?r.createElement("title",{id:i},n):null,Gb||(Gb=r.createElement("path",{d:"M6.99486 7.00636C6.60433 7.39689 6.60433 8.03005 6.99486 8.42058L10.58 12.0057L6.99486 15.5909C6.60433 15.9814 6.60433 16.6146 6.99486 17.0051C7.38538 17.3956 8.01855 17.3956 8.40907 17.0051L11.9942 13.4199L15.5794 17.0051C15.9699 17.3956 16.6031 17.3956 16.9936 17.0051C17.3841 16.6146 17.3841 15.9814 16.9936 15.5909L13.4084 12.0057L16.9936 8.42059C17.3841 8.03007 17.3841 7.3969 16.9936 7.00638C16.603 6.61585 15.9699 6.61585 15.5794 7.00638L11.9942 10.5915L8.40907 7.00636C8.01855 6.61584 7.38538 6.61584 6.99486 7.00636Z",fill:"currentColor"})))}const Qb=r.forwardRef(Xb);n.p;function Jb(e){let{isPopup:t}=e;const n=Ce(),i=he((e=>e.page.activeMeal)),o=he((e=>e.page.isMealFormOpened)),a=gt(),[s,l]=(0,r.useState)(null);(0,r.useEffect)((()=>{if(s){const e=He(qa.MealsByTypePage,{type:`${s}`});a(e),o&&n(Va({isOpened:!1}))}}),[s,a,o,n]);const c=Yb()("meals",{"meals--popup":t});return(0,Kt.jsxs)("div",{className:c,children:[i?(0,Kt.jsx)(qb,{meal:i}):"",!i&&(0,Kt.jsxs)(Kt.Fragment,{children:[t?(0,Kt.jsxs)("div",{className:"form__header",children:[(0,Kt.jsx)("h1",{className:"title title--secondary meals__title",children:"\u0412\u044b\u0431\u0435\u0440\u0438 \u043f\u0440\u0438\u0435\u043c \u043f\u0438\u0449\u0438"}),(0,Kt.jsx)("button",{className:"button form__button--close",onClick:()=>n(Va({isOpened:!1})),children:(0,Kt.jsx)(Qb,{})})]}):(0,Kt.jsx)("h1",{className:"title title--secondary meals__title",children:"\u0412\u044b\u0431\u0435\u0440\u0438 \u043f\u0440\u0438\u0435\u043c \u043f\u0438\u0449\u0438"}),(0,Kt.jsxs)("div",{className:"meals__wrapper",children:[(0,Kt.jsx)("div",{className:"meals__buttons",children:Object.values(Ka).map((e=>(0,Kt.jsx)("button",{className:"button meal__button",type:"button",onClick:()=>(e=>{l(e)})(e),children:(0,Kt.jsx)("span",{children:Ya[e]})},e)))}),(0,Kt.jsx)("h2",{className:"title title--secondary meals__title",children:"\u0418\u043b\u0438 \u0434\u043e\u0431\u0430\u0432\u044c \u043d\u043e\u0432\u043e\u0435 \u0431\u043b\u044e\u0434\u043e"}),(0,Kt.jsx)("button",{className:"button meal__button meal__button--add-new-meal",onClick:()=>(o&&n(Va({isOpened:!1})),void n(Ua({isOpened:!0}))),children:"+"})]})]})]})}var ex,tx,nx;function rx(){return rx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},rx.apply(null,arguments)}function ix(e,t){let{title:n,titleId:i,...o}=e;return r.createElement("svg",rx({width:40,height:40,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":i},o),n?r.createElement("title",{id:i},n):null,ex||(ex=r.createElement("circle",{cx:11.5,cy:4.5,r:2.5,stroke:"currentColor",strokeWidth:1.5})),tx||(tx=r.createElement("path",{d:"M10.3413 11.5869L11.0876 11.6615V11.6615L10.3413 11.5869ZM11.1906 18.3031C11.411 18.6538 11.874 18.7594 12.2247 18.539C12.5754 18.3185 12.6809 17.8555 12.4605 17.5048L11.1906 18.3031ZM13.7654 22.3992C13.9859 22.7498 14.4489 22.8554 14.7995 22.635C15.1502 22.4145 15.2558 21.9515 15.0354 21.6008L13.7654 22.3992ZM6.30394 13.1323L7.03608 13.295L6.30394 13.1323ZM5.26786 14.3373C5.178 14.7417 5.43295 15.1423 5.8373 15.2321C6.24165 15.322 6.64228 15.067 6.73214 14.6627L5.26786 14.3373ZM17.2702 13.2433L17.033 12.5318V12.5318L17.2702 13.2433ZM18.2372 13.7115C18.6301 13.5805 18.8425 13.1558 18.7115 12.7628C18.5805 12.3699 18.1558 12.1575 17.7628 12.2885L18.2372 13.7115ZM12.5815 10.0051L12.5278 10.7532H12.5278L12.5815 10.0051ZM14.4196 11.6785L13.692 11.8604L13.692 11.8604L14.4196 11.6785ZM14.3391 11.3774L13.6263 11.6109L13.6263 11.6109L14.3391 11.3774ZM7.35289 10.4399L7.82218 11.0249L7.82218 11.0249L7.35289 10.4399ZM14.5269 12.0752L15.2355 11.8294L15.2355 11.8293L14.5269 12.0752ZM16.8779 13.3657L16.7049 12.6359L16.7049 12.6359L16.8779 13.3657ZM14.0924 20.1008C13.872 19.7502 13.409 19.6446 13.0583 19.865C12.7076 20.0855 12.602 20.5485 12.8225 20.8992L14.0924 20.1008ZM9.75372 9.92537L9.59503 11.5123L11.0876 11.6615L11.2463 10.0746L9.75372 9.92537ZM10.5 9.25H10.2087V10.75H10.5V9.25ZM5.5718 12.9696L5.26786 14.3373L6.73214 14.6627L7.03608 13.295L5.5718 12.9696ZM10.5 10.75H12.2698V9.25H10.5V10.75ZM17.5073 13.9548L18.2372 13.7115L17.7628 12.2885L17.033 12.5318L17.5073 13.9548ZM12.2698 10.75C12.442 10.75 12.4897 10.7505 12.5278 10.7532L12.6351 9.25704C12.5304 9.24953 12.4179 9.25 12.2698 9.25V10.75ZM15.1472 11.4966C15.1113 11.3529 15.0845 11.2437 15.0518 11.1439L13.6263 11.6109C13.6382 11.6472 13.6503 11.6934 13.692 11.8604L15.1472 11.4966ZM12.5278 10.7532C13.0342 10.7895 13.4683 11.1284 13.6263 11.6109L15.0518 11.1439C14.7041 10.0826 13.7491 9.33691 12.6351 9.25704L12.5278 10.7532ZM10.2087 9.25C9.45815 9.25 8.82796 9.24871 8.31924 9.31045C7.79022 9.37465 7.30738 9.51494 6.88359 9.85489L7.82218 11.0249C7.9468 10.925 8.12273 10.8453 8.49995 10.7995C8.89746 10.7513 9.42096 10.75 10.2087 10.75V9.25ZM7.03608 13.295C7.20696 12.526 7.32178 12.0153 7.4551 11.6377C7.58162 11.2794 7.69756 11.1249 7.82218 11.0249L6.88359 9.85488C6.45981 10.1948 6.21812 10.6357 6.04069 11.1382C5.87007 11.6215 5.73461 12.2369 5.5718 12.9696L7.03608 13.295ZM13.692 11.8604C13.7401 12.0527 13.7755 12.1973 13.8184 12.321L15.2355 11.8293C15.2201 11.7848 15.2034 11.7211 15.1472 11.4966L13.692 11.8604ZM17.033 12.5318C16.8135 12.6049 16.7507 12.6251 16.7049 12.6359L17.0509 14.0955C17.1783 14.0653 17.3193 14.0175 17.5073 13.9548L17.033 12.5318ZM13.8184 12.321C14.2809 13.6543 15.6777 14.4211 17.0509 14.0955L16.7049 12.6359C16.0807 12.7839 15.4458 12.4354 15.2355 11.8294L13.8184 12.321ZM9.59503 11.5123C9.43093 13.1533 9.32238 14.1447 9.54827 15.1061L11.0085 14.763C10.853 14.1013 10.9135 13.4019 11.0876 11.6615L9.59503 11.5123ZM12.4605 17.5048C11.5296 16.024 11.164 15.4248 11.0085 14.763L9.54827 15.1061C9.77416 16.0676 10.3128 16.9069 11.1906 18.3031L12.4605 17.5048ZM12.8225 20.8992L13.7654 22.3992L15.0354 21.6008L14.0924 20.1008L12.8225 20.8992Z",fill:"currentColor"})),nx||(nx=r.createElement("path",{d:"M9 17.5L6 22",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round"})))}const ox=r.forwardRef(ix);n.p;var ax,sx,lx,cx;function ux(){return ux=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ux.apply(null,arguments)}function dx(e,t){let{title:n,titleId:i,...o}=e;return r.createElement("svg",ux({width:40,height:40,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":i},o),n?r.createElement("title",{id:i},n):null,ax||(ax=r.createElement("circle",{cx:18.5,cy:4.5,r:2.5,stroke:"currentColor",strokeWidth:1.5})),sx||(sx=r.createElement("path",{d:"M9 17L7.99923 18.2009C7.262 19.0856 6.89338 19.5279 6.38945 19.764C5.88552 20 5.30973 20 4.15813 20H3",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round"})),lx||(lx=r.createElement("path",{d:"M5.80619 9.47232C6.16633 9.2677 6.2924 8.80986 6.08777 8.44972C5.88315 8.08958 5.42531 7.96351 5.06517 8.16814L5.80619 9.47232ZM3.62949 8.98386C3.26935 9.18849 3.14328 9.64632 3.34791 10.0065C3.55253 10.3666 4.01037 10.4927 4.37051 10.288L3.62949 8.98386ZM15.7502 10.125L15.1262 10.541L15.1262 10.541L15.7502 10.125ZM15.8125 10.2185L16.4366 9.80242L16.4366 9.80242L15.8125 10.2185ZM10.9688 6.65329L11.0462 5.90729L10.9688 6.65329ZM10.7398 6.63589L10.7065 7.38516H10.7065L10.7398 6.63589ZM10.1548 6.67319L10.0522 5.93024L10.0522 5.93024L10.1548 6.67319ZM21 12.7496C21.4142 12.7496 21.75 12.4138 21.75 11.9996C21.75 11.5854 21.4142 11.2496 21 11.2496V12.7496ZM8.73808 6.27249C8.34994 6.41715 8.15257 6.84906 8.29722 7.23719C8.44188 7.62533 8.87379 7.8227 9.26192 7.67805L8.73808 6.27249ZM5.06517 8.16814L3.62949 8.98386L4.37051 10.288L5.80619 9.47232L5.06517 8.16814ZM15.1262 10.541L15.1885 10.6345L16.4366 9.80242L16.3742 9.70894L15.1262 10.541ZM11.0462 5.90729C10.9438 5.89666 10.853 5.89018 10.773 5.88663L10.7065 7.38516C10.7559 7.38734 10.8172 7.39158 10.8914 7.39928L11.0462 5.90729ZM19.1407 12.7496H21V11.2496H19.1407V12.7496ZM10.773 5.88663C10.5099 5.87497 10.2617 5.90131 10.0522 5.93024L10.2574 7.41614C10.4355 7.39155 10.5786 7.37949 10.7065 7.38516L10.773 5.88663ZM15.1885 10.6345C16.0695 11.9559 17.5525 12.7496 19.1407 12.7496V11.2496C18.0541 11.2496 17.0393 10.7065 16.4366 9.80242L15.1885 10.6345ZM16.3742 9.70894C15.1968 7.94284 13.4289 6.15461 11.0462 5.90729L10.8914 7.39928C12.5939 7.576 14.0254 8.88987 15.1262 10.541L16.3742 9.70894ZM9.26192 7.67805C9.62279 7.54355 9.94386 7.45943 10.2574 7.41614L10.0522 5.93024C9.61073 5.9912 9.18212 6.107 8.73808 6.27249L9.26192 7.67805Z",fill:"currentColor"})),cx||(cx=r.createElement("path",{d:"M14.0001 8.5L11.7793 11.2756C10.9429 12.321 10.5246 12.8438 10.4579 13.413C10.4204 13.733 10.4608 14.0573 10.5756 14.3584C10.7798 14.8939 11.3134 15.2981 12.3807 16.1066C13.1936 16.7225 13.6 17.0304 13.8755 17.4329C14.0326 17.6625 14.157 17.9129 14.2452 18.1767C14.3997 18.6394 14.3997 19.1493 14.3997 20.1692V21.9998",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round"})))}const px=r.forwardRef(dx);n.p;var hx,fx;function mx(){return mx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},mx.apply(null,arguments)}function gx(e,t){let{title:n,titleId:i,...o}=e;return r.createElement("svg",mx({width:40,height:40,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":i},o),n?r.createElement("title",{id:i},n):null,hx||(hx=r.createElement("circle",{cx:14.5,cy:4.5,r:2.5,stroke:"currentColor",strokeWidth:1.5})),fx||(fx=r.createElement("path",{d:"M5 22.0002L8.84856 20.6274C9.30437 20.4648 9.68576 20.1425 9.92204 19.7202M19 22.0002V16.7681C19 15.5356 17.8958 14.5963 16.6792 14.794L15.6667 14.9586M8.5 14.0002L7.88594 13.4015C7.12031 12.655 7.35935 11.37 8.34221 10.9488L10.798 9.89634C11.7878 9.47213 12.8889 10.1982 12.8889 11.2751V13.8955C12.8889 14.2374 12.8012 14.5736 12.6343 14.872L11.9562 16.084",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})))}const yx=r.forwardRef(gx);n.p;var vx,bx,xx,wx,$x,Sx;function _x(){return _x=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_x.apply(null,arguments)}function Cx(e,t){let{title:n,titleId:i,...o}=e;return r.createElement("svg",_x({width:40,height:40,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":i},o),n?r.createElement("title",{id:i},n):null,vx||(vx=r.createElement("circle",{cx:15,cy:4,r:2,stroke:"currentColor",strokeWidth:1.5})),bx||(bx=r.createElement("path",{d:"M11 16.0001V15.0263C11 14.9078 11 14.8486 10.9979 14.792C10.9672 13.9811 10.6095 13.2173 10.0062 12.6747C9.96408 12.6368 9.91852 12.5989 9.8275 12.523C9.69411 12.4118 9.62741 12.3563 9.5758 12.3066C8.80944 11.5689 8.75462 10.3604 9.45104 9.5563C9.49795 9.50214 9.55934 9.44075 9.68211 9.31798L10.0113 8.98874C10.9639 8.03622 10.6532 6.42287 9.41502 5.89224C8.84181 5.64658 8.18464 5.69719 7.65581 6.02771L4.5 8.00009",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round"})),xx||(xx=r.createElement("path",{d:"M3 15.5H3.37868C4.73694 15.5 6.03957 14.9604 7 14",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round"})),wx||(wx=r.createElement("path",{d:"M12.5 10C13.4737 10.3246 14.5263 10.3246 15.5 10",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round"})),$x||($x=r.createElement("path",{d:"M11.2878 21.9996H3.08684C2.48659 21.9996 2 21.513 2 20.9128C2 20.3848 2.37943 19.9332 2.89949 19.8422L19.0559 17.0148C20.5926 16.7459 22 17.9284 22 19.4884C22 20.8753 20.8757 21.9996 19.4888 21.9996H15",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})),Sx||(Sx=r.createElement("path",{d:"M18.3801 9.91005C18.3187 10.3197 18.6009 10.7016 19.0105 10.763C19.4202 10.8244 19.8021 10.5422 19.8635 10.1326L18.3801 9.91005ZM22.1471 7.73544C22.5533 7.6542 22.8167 7.25908 22.7354 6.85291C22.6542 6.44674 22.2591 6.18333 21.8529 6.26456L22.1471 7.73544ZM19.3026 13.8719C19.364 13.4623 19.0818 13.0804 18.6722 13.0189C18.2625 12.9575 17.8806 13.2398 17.8192 13.6494L19.3026 13.8719ZM19.8635 10.1326C20.0436 8.93217 20.9568 7.97349 22.1471 7.73544L21.8529 6.26456C20.0428 6.62658 18.6539 8.08452 18.3801 9.91005L19.8635 10.1326ZM18.7417 17.6113L19.3026 13.8719L17.8192 13.6494L17.2583 17.3887L18.7417 17.6113Z",fill:"currentColor"})))}const kx=r.forwardRef(Cx);n.p;var Ex,Tx,Ix,Px;function Rx(){return Rx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Rx.apply(null,arguments)}function Mx(e,t){let{title:n,titleId:i,...o}=e;return r.createElement("svg",Rx({width:40,height:40,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":i},o),n?r.createElement("title",{id:i},n):null,Ex||(Ex=r.createElement("path",{d:"M19.5 11.195C20.9497 11.195 22.125 10.0198 22.125 8.57001C22.125 7.12026 20.9497 5.94501 19.5 5.94501C18.0503 5.94501 16.875 7.12026 16.875 8.57001C16.875 10.0198 18.0503 11.195 19.5 11.195Z",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})),Tx||(Tx=r.createElement("path",{d:"M7.37891 14L11.2099 11.6L8.39991 8.39401C8.09795 8.04897 7.8791 7.6393 7.76016 7.19648C7.64123 6.75366 7.62538 6.28948 7.71384 5.83958C7.80229 5.38968 7.99269 4.96604 8.27042 4.60121C8.54814 4.23637 8.9058 3.94005 9.31591 3.73501L13.5789 1.60001C13.7553 1.51007 13.9477 1.45594 14.1451 1.44072C14.3424 1.4255 14.5409 1.4495 14.7289 1.51135C14.917 1.57319 15.091 1.67164 15.2408 1.80104C15.3906 1.93043 15.5133 2.08821 15.6019 2.26526C15.6905 2.44231 15.7431 2.63515 15.7568 2.83264C15.7705 3.03013 15.7449 3.22838 15.6816 3.41595C15.6183 3.60352 15.5185 3.77671 15.3879 3.92552C15.2574 4.07434 15.0986 4.19583 14.9209 4.28301L11.5209 5.98301C11.4189 6.03513 11.3302 6.10988 11.2616 6.20154C11.1929 6.29321 11.1461 6.39936 11.1248 6.51188C11.1035 6.6244 11.1082 6.74031 11.1385 6.85074C11.1689 6.96117 11.2241 7.06319 11.2999 7.14901L16.6498 13.263",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})),Ix||(Ix=r.createElement("path",{d:"M23.25 17C21.75 17 21 18.5 19.5 18.5C18 18.5 17.25 17 15.75 17C14.25 17 13.5 18.5 12 18.5C10.5 18.5 9.74995 17 8.24995 17C6.74995 17 5.99995 18.5 4.49995 18.5C3.00911 18.5 2.25914 17.0183 0.777344 17.0002",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})),Px||(Px=r.createElement("path",{d:"M0.75 21C2.25 21 3 22.5 4.5 22.5C6 22.5 6.75 21 8.25 21C9.75 21 10.5 22.5 12 22.5C13.5 22.5 14.25 21 15.75 21C17.25 21 18 22.5 19.5 22.5C20.9921 22.5 21.7421 21.0157 23.2265 21.0001",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})))}const Ax=r.forwardRef(Mx),Ox=(n.p,{Walking:ox,Running:px,Cardio:yx,Gym:kx,Swimming:Ax});function Lx(){const e=Ce();return(0,Kt.jsxs)("section",{className:"section choose-training",children:[(0,Kt.jsx)("h1",{className:"title title--secondary choose-training__title",children:"\u0412\u044b\u0431\u0435\u0440\u0438 \u0442\u0438\u043f \u0442\u0440\u0435\u043d\u0438\u0440\u043e\u0432\u043a\u0438"}),(0,Kt.jsx)("div",{className:"choose-training__buttons",children:Object.values(Za).map((t=>{const n=Ox[t];return(0,Kt.jsxs)("button",{className:`button choose-training__button choose-training__button--${t.toLowerCase()}`,type:"button",onClick:()=>{return null!==(n=t)&&e(Wa({isOpened:!0})),void e(Ba({training:n}));var n},children:[(0,Kt.jsx)("span",{children:Xa[t]}),n&&(0,Kt.jsx)(n,{})]},t)}))})]})}function Nx(){const e=he((e=>e.page.activeMeal));return(0,Kt.jsxs)(Kt.Fragment,{children:[(0,Kt.jsx)(ee,{children:(0,Kt.jsx)("title",{children:"Nutrition"})}),(0,Kt.jsx)(Jb,{}),!e&&(0,Kt.jsx)(Lx,{})]})}var Dx=n(950),Fx=n.t(Dx,2);function jx(){return jx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},jx.apply(this,arguments)}function zx(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const Bx=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"];try{window.__reactRouterVersion="6"}catch(UK){}new Map;i.startTransition,Fx.flushSync,i.useId;const Ux="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Wx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Vx=r.forwardRef((function(e,t){let n,{onClick:i,relative:o,reloadDocument:a,replace:s,state:l,target:c,to:u,preventScrollReset:d,viewTransition:p}=e,h=zx(e,Bx),{basename:f}=r.useContext(ct),m=!1;if("string"===typeof u&&Wx.test(u)&&(n=u,Ux))try{let e=new URL(window.location.href),t=u.startsWith("//")?new URL(e.protocol+u):new URL(u),n=Ke(t.pathname,f);t.origin===e.origin&&null!=n?u=n+t.search+t.hash:m=!0}catch(UK){}let g=function(e,t){let{relative:n}=void 0===t?{}:t;ht()||Ee(!1);let{basename:i,navigator:o}=r.useContext(ct),{hash:a,pathname:s,search:l}=vt(e,{relative:n}),c=s;return"/"!==i&&(c="/"===s?i:Je([i,s])),o.createHref({pathname:c,search:l,hash:a})}(u,{relative:o}),y=function(e,t){let{target:n,replace:i,state:o,preventScrollReset:a,relative:s,viewTransition:l}=void 0===t?{}:t,c=gt(),u=ft(),d=vt(e,{relative:s});return r.useCallback((t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,n)){t.preventDefault();let n=void 0!==i?i:Ie(u)===Ie(d);c(e,{replace:n,state:o,preventScrollReset:a,relative:s,viewTransition:l})}}),[u,c,d,i,o,n,e,a,s,l])}(u,{replace:s,state:l,target:c,preventScrollReset:d,relative:o,viewTransition:p});return r.createElement("a",jx({},h,{href:n||g,onClick:m||a?i:function(e){i&&i(e),e.defaultPrevented||y(e)},ref:t,target:c}))}));var Hx,qx;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Hx||(Hx={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(qx||(qx={}));function Gx(){return(0,Kt.jsxs)(Kt.Fragment,{children:[(0,Kt.jsx)(ee,{children:(0,Kt.jsx)("title",{children:"Nutrition | 404"})}),(0,Kt.jsxs)("div",{className:"not-found",children:[(0,Kt.jsx)("h1",{className:"title title--1",children:"404"}),(0,Kt.jsx)("h1",{className:"title title--2",children:"Page not found"}),(0,Kt.jsx)(Vx,{to:qa.Root,className:"button",children:"Go to main"})]})]})}function Kx(){const e=he((e=>e.user));return he((e=>e.data.users)).find((t=>t.id===e.id))}const Yx=e=>{let{element:t,isAdminRoute:n=!1}=e;const r=he((e=>e.auth.authorizationStatus)),i=Kx();return r!==fs.Auth?(0,Kt.jsx)(Rt,{to:qa.Landing}):!n||null!==i&&void 0!==i&&i.isAdmin?t:(0,Kt.jsx)(Rt,{to:qa.Landing})};function Zx(e){const t=(new Date).getHours();let n;return n=t>=4&&t<11?`\u0414\u043e\u0431\u0440\u043e\u0435 \u0443\u0442\u0440\u043e, ${e}!`:t>=11&&t<17?`\u0414\u043e\u0431\u0440\u044b\u0439 \u0434\u0435\u043d\u044c, ${e}!`:t>=17&&t<22?`\u0414\u043e\u0431\u0440\u044b\u0439 \u0432\u0435\u0447\u0435\u0440, ${e}!`:`\u041d\u043e\u0447\u043d\u043e\u0439 \u0436\u043e\u0440, ${e}?`,n}var Xx,Qx;function Jx(){return Jx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Jx.apply(null,arguments)}function ew(e,t){let{title:n,titleId:i,...o}=e;return r.createElement("svg",Jx({width:24,height:24,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":i},o),n?r.createElement("title",{id:i},n):null,Xx||(Xx=r.createElement("g",{clipPath:"url(#clip0_1316_9236)"},r.createElement("path",{d:"M2 11.4997V13.9997H4.5L11.8733 6.62638L9.37333 4.12638L2 11.4997ZM13.8067 4.69305C14.0667 4.43305 14.0667 4.01305 13.8067 3.75305L12.2467 2.19305C11.9867 1.93305 11.5667 1.93305 11.3067 2.19305L10.0867 3.41305L12.5867 5.91305L13.8067 4.69305Z",fill:"currentColor"}))),Qx||(Qx=r.createElement("defs",null,r.createElement("clipPath",{id:"clip0_1316_9236"},r.createElement("rect",{width:16,height:16,fill:"white"})))))}const tw=r.forwardRef(ew);n.p;var nw,rw;function iw(){return iw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},iw.apply(null,arguments)}function ow(e,t){let{title:n,titleId:i,...o}=e;return r.createElement("svg",iw({width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":i},o),n?r.createElement("title",{id:i},n):null,nw||(nw=r.createElement("circle",{cx:12.1465,cy:12.1494,r:11.7495,fill:"none"})),rw||(rw=r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.1468 2.11719C6.60612 2.11719 2.11426 6.60905 2.11426 12.1498C2.11426 17.6905 6.60612 22.1824 12.1468 22.1824C17.6876 22.1824 22.1794 17.6905 22.1794 12.1498C22.1794 6.60905 17.6876 2.11719 12.1468 2.11719ZM16.4955 10.4534C16.5756 10.3618 16.6365 10.2552 16.6748 10.1398C16.7131 10.0243 16.7279 9.90239 16.7183 9.78115C16.7087 9.65991 16.675 9.54181 16.6192 9.43379C16.5633 9.32577 16.4864 9.23002 16.3929 9.15216C16.2995 9.07431 16.1915 9.01592 16.0751 8.98044C15.9588 8.94496 15.8366 8.93311 15.7156 8.94557C15.5946 8.95803 15.4774 8.99456 15.3707 9.05302C15.2641 9.11147 15.1702 9.19065 15.0946 9.28592L11.1728 13.9912L9.14345 11.961C8.97143 11.7948 8.74105 11.7029 8.50191 11.705C8.26277 11.7071 8.03402 11.803 7.86492 11.9721C7.69581 12.1412 7.5999 12.3699 7.59782 12.6091C7.59574 12.8482 7.68767 13.0786 7.85381 13.2506L10.59 15.9868C10.6796 16.0763 10.7869 16.1462 10.905 16.192C11.0231 16.2378 11.1495 16.2585 11.2761 16.2528C11.4026 16.247 11.5266 16.215 11.6401 16.1587C11.7536 16.1023 11.8541 16.023 11.9352 15.9257L16.4955 10.4534Z",fill:"currentColor"})))}const aw=r.forwardRef(ow);n.p;var sw,lw;function cw(){return cw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},cw.apply(null,arguments)}function uw(e,t){let{title:n,titleId:i,...o}=e;return r.createElement("svg",cw({width:40,height:40,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":i},o),n?r.createElement("title",{id:i},n):null,sw||(sw=r.createElement("path",{d:"M15 12L12 12M12 12L9 12M12 12L12 9M12 12L12 15",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round"})),lw||(lw=r.createElement("path",{d:"M22 12C22 16.714 22 19.0711 20.5355 20.5355C19.0711 22 16.714 22 12 22C7.28595 22 4.92893 22 3.46447 20.5355C2 19.0711 2 16.714 2 12C2 7.28595 2 4.92893 3.46447 3.46447C4.92893 2 7.28595 2 12 2C16.714 2 19.0711 2 20.5355 3.46447C21.5093 4.43821 21.8356 5.80655 21.9449 8",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round"})))}const dw=r.forwardRef(uw);n.p;function pw(e){var t;const n=new Date(e),r=n.getDate(),i=n.getMonth();if(i<0||i>11)return console.error("Invalid month index:",i),"";const o=null===(t=ms[i])||void 0===t?void 0:t.slice(0,-1);return o&&r?r+" "+("\u0442"===o.charAt(o.length-1)?o+"\u0430 ":o+"\u044f"):(console.error("Invalid date format:",{dateMonth:o,dateDay:r}),"")}function hw(e,t){return e.reduce(((e,n)=>{const r=t(n);return e[r]||(e[r]=[]),e[r].push(n),e}),{})}var fw;function mw(){return mw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},mw.apply(null,arguments)}function gw(e,t){let{title:n,titleId:i,...o}=e;return r.createElement("svg",mw({width:40,height:40,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":i},o),n?r.createElement("title",{id:i},n):null,fw||(fw=r.createElement("path",{d:"M7 10L12 15L17 10",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})))}const yw=r.forwardRef(gw);n.p;var vw,bw,xw;function ww(){return ww=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ww.apply(null,arguments)}function $w(e,t){let{title:n,titleId:i,...o}=e;return r.createElement("svg",ww({width:20,height:20,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":i},o),n?r.createElement("title",{id:i},n):null,vw||(vw=r.createElement("path",{d:"M12 17V11",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round"})),bw||(bw=r.createElement("circle",{cx:1,cy:1,r:1,transform:"matrix(1 0 0 -1 11 9)",fill:"currentColor"})),xw||(xw=r.createElement("path",{d:"M7 3.33782C8.47087 2.48697 10.1786 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12C2 10.1786 2.48697 8.47087 3.33782 7",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round"})))}const Sw=r.forwardRef($w);n.p;var _w,Cw,kw;function Ew(){return Ew=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ew.apply(null,arguments)}function Tw(e,t){let{title:n,titleId:i,...o}=e;return r.createElement("svg",Ew({width:20,height:20,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",ref:t,"aria-labelledby":i},o),n?r.createElement("title",{id:i},n):null,_w||(_w=r.createElement("desc",null,"Created with Sketch.")),Cw||(Cw=r.createElement("defs",null)),kw||(kw=r.createElement("g",{id:"Page-1",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},r.createElement("g",{id:"ic-remove",fillRule:"nonzero",fill:"currentColor"},r.createElement("path",{d:"M12,21 C16.9705627,21 21,16.9705627 21,12 C21,7.02943725 16.9705627,3 12,3 C7.02943725,3 3,7.02943725 3,12 C3,16.9705627 7.02943725,21 12,21 Z M12,23 C5.92486775,23 1,18.0751322 1,12 C1,5.92486775 5.92486775,1 12,1 C18.0751322,1 23,5.92486775 23,12 C23,18.0751322 18.0751322,23 12,23 Z M8.99703014,11 C8.45303631,11 8,11.4477153 8,12 C8,12.5561352 8.4463856,13 8.99703014,13 L15.0029699,13 C15.5469637,13 16,12.5522847 16,12 C16,11.4438648 15.5536144,11 15.0029699,11 L8.99703014,11 Z",id:"Combined-Shape"})))))}const Iw=r.forwardRef(Tw);n.p;function Pw(e){let{target:t,value:n,field:r,size:i,gradientId:o,strokeColorStart:a,strokeColorEnd:s,isMobile:l}=e;const c=(i-(l?21.25:34))/2,u=2*Math.PI*c,d=function(e,t,n){const r=e/t*100;return r<=100?n-r/100*n:0}(n,t,u),{top:p,left:h,transform:f}=function(e,t,n){const r=e/t*100*360/100,i=(r-90)*(Math.PI/180),o=n+Math.cos(i)*n;return{top:`${n+Math.sin(i)*n}px`,left:`${o}px`,transform:`rotate(${r}deg)`}}(n,t,c);return(0,Kt.jsx)("div",{className:"ring-container",children:(0,Kt.jsxs)("div",{className:`ring ${r}`,id:r,children:[(0,Kt.jsx)("div",{className:"dot",style:{top:p,left:h,transform:f,backgroundColor:`${0===n?a:"transparent"}`}}),(0,Kt.jsxs)("svg",{className:"progress-ring",height:i,width:i,children:[(0,Kt.jsx)("defs",{children:(0,Kt.jsxs)("linearGradient",{id:o,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[(0,Kt.jsx)("stop",{offset:"0%",stopColor:a}),(0,Kt.jsx)("stop",{offset:"100%",stopColor:s})]})}),(0,Kt.jsx)("circle",{className:"progress-ring__circle",strokeWidth:l?21.25:34,strokeLinecap:"round",stroke:`url(#${o})`,fill:"transparent",r:c,cx:i/2,cy:i/2,style:{strokeDasharray:`${u} ${u}`,strokeDashoffset:d}})]})]})})}const Rw=e=>{const[t,n]=(0,r.useState)(window.innerWidth<=e);return(0,r.useEffect)((()=>{const t=()=>{n(window.innerWidth<=e)};return window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)}),[e]),t},Mw=e=>{const t=(0,r.useRef)(null);return(0,r.useEffect)((()=>{const n=n=>{var r;const i=n.target;(null===(r=i.closest("button"))||void 0===r?void 0:r.classList.contains("user__today-tooltip-btn"))||!t.current||t.current.contains(i)||e()};return document.addEventListener("mousedown",n),()=>{document.removeEventListener("mousedown",n)}}),[e]),t};function Aw(e){let{user:t}=e;const n=Ce(),i=Rw(us.MobileOnly),[o,a]=(0,r.useState)(!1),[s,l]=(0,r.useState)(!1),[c,u]=(0,r.useState)(!1),[d,p]=(0,r.useState)(t.weight),[h,f]=(0,r.useState)(t.target),[m,g]=(0,r.useState)(t.activityLevel),[y,v]=(0,r.useState)(!1),[b,x]=(0,r.useState)({}),[w,$]=(0,r.useState)({}),[S,_]=(0,r.useState)(null),[C,k]=(0,r.useState)(null),E=t.mealSchedule,T=t.trainingSessions,I=e=>{x((t=>({...t,[e]:!t[e]})))},P=e=>{$((t=>({...t,[e]:!t[e]})))},R=Mw((()=>{v(!1)}));(0,r.useEffect)((()=>{const e=pw(new Date);x((t=>({...t,[e]:!0}))),$((t=>({...t,[e]:!0})))}),[]);const M=(new Date).getDate(),A=async()=>{n(Ca({user:t,newWeight:d})),a(!1);try{await(async(e,t)=>{try{const n=Dg.ref(Ga.Users),r=await n.orderByChild("id").equalTo(e.id).once("value");if(r.exists()){const e=Object.keys(r.val())[0];await n.child(e).update({weight:t}),console.log("User weight was successfully updated!")}}catch(Eu){console.error("Error updating user weight:",Eu)}})(t,d),console.log("Weight updated successfully")}catch(Eu){console.error("Failed to update weight",Eu)}},O=async()=>{n(ka({user:t,newTarget:h})),l(!1);try{await(async(e,t)=>{try{const n=Dg.ref(Ga.Users),r=await n.orderByChild("id").equalTo(e.id).once("value");if(r.exists()){const e=Object.keys(r.val())[0],i=t||ns.WeightMaintenance;await n.child(e).update({target:i}),console.log("User target was successfully updated!")}}catch(Eu){console.error("Error updating user target:",Eu)}})(t,h),console.log("Target updated successfully")}catch(Eu){console.error("Failed to update target:",Eu)}},L=async()=>{n(Ea({user:t,newActivity:m})),u(!1);try{await(async(e,t)=>{try{const n=Dg.ref(Ga.Users),r=await n.orderByChild("id").equalTo(e.id).once("value");if(r.exists()){const e=Object.keys(r.val())[0],i=t||es.ModeratelyActive;await n.child(e).update({activity:i}),console.log("User activity level was successfully updated!")}}catch(Eu){console.error("Error updating user activity level:",Eu)}})(t,m),console.log("Activity updated successfully")}catch(Eu){console.error("Failed to update activity:",Eu)}};(0,r.useEffect)((()=>{p(t.weight),f(t.target),g(t.activityLevel)}),[t.target,t.weight,t.activityLevel]);const N=async e=>{const r=E.find((t=>t[0].id===e.id));console.log("this id: ",null===r||void 0===r?void 0:r[0].id),r&&_(r[0].id),setTimeout((async()=>{r&&await(async(e,t)=>{try{const n=Dg.ref(Ga.Users),r=await n.orderByChild("id").equalTo(e.id).once("value");if(r.exists()){const e=Object.keys(r.val())[0],i=(r.val()[e].mealSchedule||[]).map((e=>Array.isArray(e)?e:[e,new Date])).filter((e=>{let[n]=e;return n.id!==t.id}));await n.child(e).update({mealSchedule:i}),console.log("Meal successfully removed from user schedule")}else console.log("User not found in the database")}catch(Eu){console.error("Error removing meal from schedule:",Eu)}})(t,r[0]),r&&n(Sa({user:t,meal:r[0]})),_(null)}),500)},D=async e=>{k(e.id),setTimeout((async()=>{await(async(e,t)=>{try{const n=Dg.ref(Ga.Users),r=await n.orderByChild("id").equalTo(e.id).once("value");if(r.exists()){const e=Object.keys(r.val())[0],i=(r.val()[e].trainingSessions||[]).map((e=>Array.isArray(e)?e:[e,new Date])).filter((e=>e.id!==t.id));await n.child(e).update({trainingSessions:i}),console.log("Meal successfully removed from user schedule")}else console.log("User not found in the database")}catch(Eu){console.error("Error removing meal from schedule:",Eu)}})(t,e),n(_a({user:t,training:e})),k(null)}),500)},F=E&&E.filter((e=>new Date(e[1]).getDate()===M)),j=function(e){return e.gender===ls.Male?Math.floor(66+13.7*e.weight+5*e.height-6.8*e.age):e.gender===ls.Female?Math.floor(665+9.6*e.weight+1.8*e.height-4.7*e.age):0}(t).valueOf(),z=((e,t,n)=>{const r=rs[os[n]];return Math.floor(e*t*r)})(j,t.activityLevel,t.target),{proteins:B,fats:U,carbs:W}=as[t.target],V=rs[os[t.target]],H=Math.round(z*V),q=Math.round(H*B/is.Proteins),G=Math.round(H*U/is.Fats),K=Math.round(H*W/is.Carbs);let Y=0,Z=0,X=0,Q=0;F&&F.forEach((e=>{Y+=e[0].calories,Z+=e[0].proteins,X+=e[0].fats,Q+=e[0].carbs}));const J=(0,r.useMemo)((()=>[{field:"calories",size:i?197.5:316,gradientId:"caloriesGradient",strokeColorStart:"#FFF12F",strokeColorEnd:"#FFD700",isMobile:i},{field:"proteins",size:i?154.375:247,gradientId:"proteinsGradient",strokeColorStart:"#F6337A",strokeColorEnd:"#F71046",isMobile:i},{field:"carbs",size:i?111.25:178,gradientId:"carbsGradient",strokeColorStart:"#15C2E0",strokeColorEnd:"#1EF8D5",isMobile:i},{field:"fats",size:i?68.125:109,gradientId:"fatsGradient",strokeColorStart:"#B1FD36",strokeColorEnd:"#6FE430",isMobile:i}]),[i]),ee=(0,r.useMemo)((()=>({calories:H,proteins:q,carbs:K,fats:G})),[H,q,K,G]),te=(0,r.useMemo)((()=>({calories:Y,proteins:Z,carbs:Q,fats:X})),[Y,Z,Q,X]),[ne,re]=(0,r.useState)(J.map((e=>({...e,target:ee[e.field],value:te[e.field]}))));return(0,r.useEffect)((()=>{re(J.map((e=>({...e,target:ee[e.field],value:te[e.field]}))))}),[H,Y,q,Z,K,Q,G,X,J,ee,te]),(0,Kt.jsxs)("div",{className:"user",children:[(0,Kt.jsxs)("div",{className:"user__wrapper",children:[(0,Kt.jsx)("p",{className:"user__name",children:Zx(t.name)}),(0,Kt.jsxs)("div",{className:"user__info",children:[(0,Kt.jsxs)("div",{className:"dashboard",children:[(0,Kt.jsx)("div",{className:"ring-wrapper",children:ne.map((e=>(0,Kt.jsx)(Pw,{...e},e.field)))}),(0,Kt.jsx)("div",{className:"info-wrapper",children:ne.map((e=>(0,Kt.jsxs)("div",{className:"info",id:`${e.field}Value`,children:[(0,Kt.jsx)("span",{className:"info__name",children:ss[e.field.charAt(0).toUpperCase()+e.field.slice(1)]}),(0,Kt.jsxs)("p",{className:"info__accent",style:{color:e.strokeColorEnd},children:[e.value,"/",(0,Kt.jsx)("span",{children:e.target})]})]},`${e.field}`)))})]}),(0,Kt.jsxs)("div",{className:"user__today",children:[(0,Kt.jsxs)("p",{className:"user__today-base",children:["\u0422\u0432\u043e\u0439 \u0431\u0430\u0437\u043e\u0432\u044b\u0439 \u043e\u0431\u043c\u0435\u043d \u0432\u0435\u0449\u0435\u0441\u0442\u0432: ",i&&(0,Kt.jsx)("br",{})," ",(0,Kt.jsx)("b",{children:j})," \u043a\u043a\u0430\u043b \u0432 \u0434\u0435\u043d\u044c.",(0,Kt.jsx)("button",{className:"button button--reset button--tooltip user__today-tooltip-btn",onClick:()=>v(!y),children:(0,Kt.jsx)(Sw,{})}),y&&(0,Kt.jsx)("div",{className:"user__today-tooltip",ref:R,children:(0,Kt.jsx)("i",{children:"\u0411\u0430\u0437\u043e\u0432\u044b\u0439 \u043e\u0431\u043c\u0435\u043d \u0432\u0435\u0449\u0435\u0441\u0442\u0432 (\u0443\u0440\u043e\u0432\u0435\u043d\u044c \u043c\u0435\u0442\u0430\u0431\u043e\u043b\u0438\u0437\u043c\u0430) \u2013 \u044d\u0442\u043e \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043a\u0430\u043b\u043e\u0440\u0438\u0439, \u043a\u043e\u0442\u043e\u0440\u043e\u0435 \u0447\u0435\u043b\u043e\u0432\u0435\u0447\u0435\u0441\u043a\u0438\u0439 \u043e\u0440\u0433\u0430\u043d\u0438\u0437\u043c \u0441\u0436\u0438\u0433\u0430\u0435\u0442 \u0432 \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0438 \u043f\u043e\u043a\u043e\u044f, \u0442\u043e \u0435\u0441\u0442\u044c \u044d\u043d\u0435\u0440\u0433\u0438\u044f \u0437\u0430\u0442\u0440\u0430\u0447\u0438\u0432\u0430\u0435\u043c\u0430\u044f \u0434\u043b\u044f \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0435\u043d\u0438\u044f \u0432\u0441\u0435\u0445 \u0436\u0438\u0437\u043d\u0435\u043d\u043d\u044b\u0445 \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u043e\u0432 (\u0434\u044b\u0445\u0430\u043d\u0438\u044f, \u043a\u0440\u043e\u0432\u043e\u043e\u0431\u0440\u0430\u0449\u0435\u043d\u0438\u044f \u0438 \u0442.\u0434.). "})})]}),(0,Kt.jsxs)("p",{children:["\u0423\u0447\u0438\u0442\u044b\u0432\u0430\u044f \u0442\u0432\u043e\u0439 \u0443\u0440\u043e\u0432\u0435\u043d\u044c \u0444\u0438\u0437\u0438\u0447\u0435\u0441\u043a\u043e\u0439 \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0438 (",(0,Kt.jsx)("i",{children:ts[t.activityLevel].toLowerCase()}),") \u0442\u0432\u043e\u044f \u0441\u0443\u0442\u043e\u0447\u043d\u0430\u044f \u043f\u043e\u0442\u0440\u0435\u0431\u043d\u043e\u0441\u0442\u044c \u043a\u0430\u043b\u043e\u0440\u0438\u0439 ",(0,Kt.jsx)("b",{children:z})," \u043a\u043a\u0430\u043b, \u043d\u043e \u0443\u0447\u0438\u0442\u044b\u0432\u0430\u044f \u0442\u0432\u043e\u044e \u0446\u0435\u043b\u044c (",(0,Kt.jsx)("i",{children:t.target.toLowerCase()}),"), \u0442\u0435\u0431\u0435 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u043f\u043e\u043b\u0443\u0447\u0430\u0442\u044c \u0438\u0437 \u043f\u0438\u0449\u0438 ",(0,Kt.jsx)("b",{children:H})," \u043a\u043a\u0430\u043b."]}),z-Y>0?(0,Kt.jsxs)("p",{children:["\u0421\u0435\u0433\u043e\u0434\u043d\u044f \u0442\u044b \u0432 \u0434\u0435\u0444\u0438\u0446\u0438\u0442\u0435 \u043d\u0430 ",(0,Kt.jsx)("b",{children:z-Y})," \u043a\u043a\u0430\u043b."]}):(0,Kt.jsxs)("p",{children:["\u0421\u0435\u0433\u043e\u0434\u043d\u044f \u0442\u044b \u0432 \u043f\u0440\u043e\u0444\u0438\u0446\u0438\u0442\u0435 \u043d\u0430 ",(0,Kt.jsx)("b",{children:z-Y})," \u043a\u043a\u0430\u043b."]})]}),(0,Kt.jsxs)("div",{className:"user__settings",children:[(0,Kt.jsxs)("p",{className:"user__editable-wrapper",children:[(0,Kt.jsx)("span",{className:"user__editable-title",children:"\u0422\u0432\u043e\u0439 \u0432\u0435\u0441:"}),o?(0,Kt.jsx)("label",{className:"user__editable-weight",htmlFor:"user-edit-weight",children:(0,Kt.jsx)("input",{className:"form__input user__editable-info user__editable-info--on",autoFocus:o,type:"number",id:"user-edit-weight",value:d,onChange:e=>p(Number(e.target.value))})}):(0,Kt.jsx)("span",{className:"user__editable-info",children:t.weight}),(0,Kt.jsxs)("button",{className:"button button--icon",type:"button",onClick:()=>{o?A():a(!0)},children:[o?(0,Kt.jsx)(aw,{}):(0,Kt.jsx)(tw,{}),(0,Kt.jsx)("span",{className:"visually-hidden",children:o?"apply":"edit"})]})]}),(0,Kt.jsxs)("p",{className:"user__editable-wrapper",children:[(0,Kt.jsx)("span",{className:"user__editable-title",children:"\u0422\u0432\u043e\u044f \u0446\u0435\u043b\u044c:"}),s?(0,Kt.jsx)("select",{className:"user__editable-info user__editable-info--select user__editable-info--on",name:"user-change-target",id:"user-change-target",value:h,onChange:e=>{const t=e.target.value;f(t)},children:Object.values(ns).map((e=>(0,Kt.jsx)("option",{value:e,children:e},`${t.name}-target-${e}`)))}):(0,Kt.jsx)("span",{className:"user__editable-info",children:t.target||ns.WeightMaintenance}),(0,Kt.jsxs)("button",{className:"button button--icon",type:"button",onClick:()=>{s?O():l(!0)},children:[s?(0,Kt.jsx)(aw,{}):(0,Kt.jsx)(tw,{}),(0,Kt.jsx)("span",{className:"visually-hidden",children:s?"apply":"edit"})]})]}),(0,Kt.jsxs)("p",{className:"user__editable-wrapper",children:[(0,Kt.jsx)("span",{className:"user__editable-title",children:"\u0422\u0432\u043e\u044f \u0430\u043a\u0442\u0438\u0432\u043d\u043e\u0441\u0442\u044c:"}),c?(0,Kt.jsx)("select",{className:"user__editable-info user__editable-info--select user__editable-info--on",name:"user-change-activity",id:"user-change-activity",value:m,onChange:e=>{const t=parseFloat(e.target.value);Object.values(es).includes(t)?g(t):console.error(`Invalid activity level: ${t}`)},children:Object.values(es).filter((e=>"number"===typeof e)).map((e=>(0,Kt.jsx)("option",{value:e,children:ts[e]},`${t.name}-activity-${e}`)))}):(0,Kt.jsx)("span",{className:"user__editable-info",children:ts[t.activityLevel]}),(0,Kt.jsxs)("button",{className:"button button--icon",type:"button",onClick:()=>{c?L():u(!0)},children:[c?(0,Kt.jsx)(aw,{}):(0,Kt.jsx)(tw,{}),(0,Kt.jsx)("span",{className:"visually-hidden",children:c?"apply":"edit"})]})]})]})]})]}),(0,Kt.jsxs)("div",{className:"user__trainings user-actions",children:[(0,Kt.jsxs)("div",{className:"user-actions__title-wrapper",children:[(0,Kt.jsx)("h3",{className:"user-actions__title title title--3",children:"\u0422\u0440\u0435\u043d\u0438\u0440\u043e\u0432\u043a\u0438"}),(0,Kt.jsx)("button",{className:"button button--reset user-actions__add-btn",onClick:()=>n(Wa({isOpened:!0})),children:(0,Kt.jsx)(dw,{})})]}),T&&T.length>0&&(0,Kt.jsx)("div",{className:"user-actions__container",children:(0,Kt.jsx)("ul",{className:"user-actions__list",children:Object.entries(hw(T,(e=>pw(new Date(e.date))))).map((e=>{let[n,r]=e;return(0,Kt.jsx)("li",{children:b[n]?(0,Kt.jsxs)("div",{className:"user-actions__group-header user-actions__group-header--opened",children:[(0,Kt.jsxs)("div",{className:"user-actions__date-wrapper",onClick:()=>I(n),children:[(0,Kt.jsx)("p",{className:"user-actions__date",children:n}),(0,Kt.jsx)(yw,{className:"icon icon--rotated"})]}),(0,Kt.jsx)("ul",{className:"user-actions__sublist",children:r.map((e=>{const n=C===e.id;return(0,Kt.jsxs)("li",{className:`user-actions__item user-actions__item--trainings ${n&&"user-actions__removing"}`,children:[(0,Kt.jsxs)("div",{className:"user-actions__item-wrapper",children:[(0,Kt.jsx)("b",{children:Xa[e.activity]}),(0,Kt.jsxs)("span",{children:["\u0421\u043e\u0436\u0436\u0435\u043d\u043e \u043a\u0430\u043b\u043e\u0440\u0438\u0439: ",(0,Kt.jsx)("b",{children:Math.floor(e.caloriesBurned)})]})]}),(0,Kt.jsxs)("button",{className:"button button--remove user-actions__remove-btn",onClick:()=>D(e),children:[(0,Kt.jsx)("span",{className:"visually-hidden",children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0442\u0440\u0435\u043d\u0438\u0440\u043e\u0432\u043a\u0443"}),(0,Kt.jsx)(Iw,{})]})]},`${t.name}-training-${e.activity}-${e.duration}-${new Date(e.date).getDay()}`)}))})]}):(0,Kt.jsx)("div",{className:"user-actions__group-header",children:(0,Kt.jsxs)("div",{className:"user-actions__date-wrapper",onClick:()=>I(n),children:[(0,Kt.jsx)("p",{className:"user-actions__date",children:n}),(0,Kt.jsx)(yw,{className:"icon"})]})})},`training-group-${n}`)}))})})]}),(0,Kt.jsxs)("div",{className:"user__meals user-actions",children:[(0,Kt.jsxs)("div",{className:"user-actions__title-wrapper",children:[(0,Kt.jsx)("h3",{className:"user-actions__title title title--3",children:"\u041f\u0440\u0438\u0435\u043c\u044b \u043f\u0438\u0449\u0438"}),(0,Kt.jsx)("button",{className:"button button--reset user-actions__add-btn",onClick:()=>n(Va({isOpened:!0})),children:(0,Kt.jsx)(dw,{})})]}),E&&E.length>0&&(0,Kt.jsx)("div",{className:"user-actions__container",children:(0,Kt.jsx)("ul",{className:"user-actions__list",children:Object.entries(hw(E,(e=>pw(e[1])))).map((e=>{let[t,r]=e;return(0,Kt.jsx)("li",{children:w[t]?(0,Kt.jsxs)("div",{className:"user-actions__group-header user-actions__group-header--opened",children:[(0,Kt.jsxs)("div",{className:"user-actions__date-wrapper",onClick:()=>P(t),children:[(0,Kt.jsx)("p",{className:"user-actions__date",children:t}),(0,Kt.jsx)(yw,{className:"icon icon--rotated"})]}),(0,Kt.jsx)("ul",{className:"user-actions__sublist",children:r.map(((e,r)=>{const i=He(qa.MealPage,{id:e[0].id}),o=S===e[0].id;return(0,Kt.jsxs)("li",{className:`user-actions__item user-actions__item--meal user-actions__item--${e[0].type.toLowerCase()} ${o&&"user-actions__removing"}`,children:[(0,Kt.jsxs)("div",{className:"user-actions__item-wrapper",children:[(0,Kt.jsx)("span",{children:Ya[e[0].type]}),(0,Kt.jsx)("span",{className:"user-actions__link-wrapper",children:(0,Kt.jsx)(Vx,{className:"user-actions__item-link",to:i,onClick:()=>n(La({meal:e[0]})),children:Hb(e[0].name)})}),(0,Kt.jsxs)("p",{className:"user-actions__meal-maintenance",children:[(0,Kt.jsxs)("span",{children:["\u041a\u043a\u0430\u043b: ",Math.floor(e[0].calories)]}),(0,Kt.jsxs)("span",{children:["\u0411: ",Math.floor(e[0].proteins),"\u0433"]}),(0,Kt.jsxs)("span",{children:["\u0416: ",Math.floor(e[0].fats),"\u0433"]}),(0,Kt.jsxs)("span",{children:["\u0423: ",Math.floor(e[0].carbs),"\u0433"]})]})]}),(0,Kt.jsxs)("button",{className:"button button--remove user-actions__remove-btn",onClick:()=>N(e[0]),children:[(0,Kt.jsx)("span",{className:"visually-hidden",children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u043f\u0440\u0438\u0435\u043c \u043f\u0438\u0449\u0438"}),(0,Kt.jsx)(Iw,{})]})]},`${e[0].name}-${e[0]}-${t}-${r}`)}))})]}):(0,Kt.jsx)("div",{className:"user-actions__group-header",children:(0,Kt.jsxs)("div",{className:"user-actions__date-wrapper",onClick:()=>P(t),children:[(0,Kt.jsx)("p",{className:"user-actions__date",children:t}),(0,Kt.jsx)(yw,{className:"icon"})]})})},`${r[0][0].name}-${r[0]}-${t}`)}))})})]})]})}function Ow(){const e=he((e=>e.auth.userInfo)),t=he((t=>t.data.users.find((t=>t.id===(null===e||void 0===e?void 0:e.id)))));return(0,Kt.jsxs)(Kt.Fragment,{children:[(0,Kt.jsx)(ee,{children:(0,Kt.jsxs)("title",{children:["Nutrition | ",`${null===t||void 0===t?void 0:t.name}`]})}),t?(0,Kt.jsx)(Aw,{user:t}):(0,Kt.jsx)(Kt.Fragment,{})]})}function Lw(){const e=he((e=>e.page.activeMeal)),{id:t}=yt(),n=he((e=>e.data.meals.find((e=>e.id===t))));return(0,Kt.jsxs)(Kt.Fragment,{children:[(0,Kt.jsx)(ee,{children:(0,Kt.jsxs)("title",{children:["Nutrition | ",e?e.name:n?n.name:""]})}),e?(0,Kt.jsx)(qb,{meal:e}):n?(0,Kt.jsx)(qb,{meal:n}):(0,Kt.jsx)(Kt.Fragment,{})]})}function Nw(){const e=Ce();return(0,Kt.jsx)("section",{className:"section hero",children:(0,Kt.jsxs)("div",{className:"hero__wrapper",children:[(0,Kt.jsx)("h1",{className:"title title--2",children:"\u0422\u044b - \u0442\u043e, \u0447\u0442\u043e \u0442\u044b \u0435\u0448\u044c!"}),(0,Kt.jsx)("p",{children:"\u0425\u043e\u0447\u0435\u0448\u044c \u0435\u0441\u0442\u044c \u0431\u043e\u043b\u0435\u0435 \u043e\u0441\u043e\u0437\u043d\u0430\u043d\u043d\u043e? \u041e\u0442\u0441\u043b\u0435\u0436\u0438\u0432\u0430\u0439 \u043f\u0440\u0438\u0435\u043c\u044b \u043f\u0438\u0449\u0438 \u0438 \u0442\u0440\u0435\u043d\u0438\u0440\u043e\u0432\u043a\u0438, \u0443\u0437\u043d\u0430\u0432\u0430\u0439 \u043e \u0441\u0432\u043e\u0438\u0445 \u043f\u0440\u0438\u0432\u044b\u0447\u043a\u0430\u0445 \u0438 \u0434\u043e\u0441\u0442\u0438\u0433\u0430\u0439 \u0441\u0432\u043e\u0438\u0445 \u0446\u0435\u043b\u0435\u0439 \u0441 Nutrillion."}),(0,Kt.jsx)("button",{className:"button button--submit",onClick:()=>e(ja({isOpened:!0})),children:"\u041d\u0430\u0447\u0430\u0442\u044c"}),(0,Kt.jsx)("button",{className:"button",onClick:()=>e(Fa({isOpened:!0})),children:"\u0412\u043e\u0439\u0442\u0438"})]})})}function Dw(){return he((e=>e.auth.authorizationStatus))===fs.Auth?(0,Kt.jsx)(Rt,{to:qa.Root,replace:!0}):(0,Kt.jsx)(Nw,{})}var Fw;function jw(){return jw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},jw.apply(null,arguments)}function zw(e,t){let{title:n,titleId:i,...o}=e;return r.createElement("svg",jw({fill:"#000000",height:40,width:40,id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 512.002 512.002",xmlSpace:"preserve",ref:t,"aria-labelledby":i},o),n?r.createElement("title",{id:i},n):null,Fw||(Fw=r.createElement("g",null,r.createElement("g",null,r.createElement("g",null,r.createElement("path",{d:"M243.654,188.633c-4.215,2.108-5.931,7.228-3.823,11.443c1.502,2.995,4.514,4.719,7.646,4.719 c1.28,0,2.586-0.29,3.806-0.896c0.887-0.452,21.786-11.153,21.786-33.237c0-12.066-6.374-18.449-11.034-23.1 c-4.181-4.181-6.033-6.238-6.033-11.034s1.852-6.852,6.033-11.034c4.659-4.651,11.034-11.034,11.034-23.1 c0-22.084-20.898-32.785-21.786-33.229c-4.173-2.082-9.267-0.401-11.392,3.772c-2.133,4.19-0.452,9.31,3.712,11.469 c0.119,0.06,12.399,6.536,12.399,17.988c0,4.796-1.852,6.852-6.033,11.034c-4.659,4.651-11.034,11.034-11.034,23.1 c0,12.066,6.374,18.449,11.034,23.1c4.181,4.181,6.033,6.238,6.033,11.034C256.002,182.114,243.723,188.59,243.654,188.633z"}),r.createElement("path",{d:"M187.735,187.729c0,11.375-12.109,17.835-12.399,17.988c-4.173,2.125-5.871,7.228-3.772,11.426 c1.502,2.995,4.514,4.719,7.646,4.719c1.28,0,2.586-0.29,3.806-0.896c0.887-0.452,21.786-11.153,21.786-33.237 c0-12.066-6.374-18.449-11.034-23.1c-4.181-4.181-6.033-6.238-6.033-11.034c0-11.452,12.271-17.929,12.348-17.963 c4.215-2.108,5.931-7.236,3.814-11.452c-2.099-4.215-7.219-5.939-11.443-3.814c-0.887,0.444-21.786,11.145-21.786,33.229 c0,12.066,6.374,18.449,11.034,23.1C185.884,180.876,187.735,182.933,187.735,187.729z"}),r.createElement("path",{d:"M324.269,187.729c0,11.375-12.1,17.835-12.39,17.988c-4.181,2.125-5.879,7.228-3.78,11.426 c1.502,2.995,4.514,4.719,7.646,4.719c1.28,0,2.586-0.29,3.806-0.896c0.896-0.452,21.786-11.153,21.786-33.237 c0-12.066-6.374-18.449-11.034-23.1c-4.181-4.181-6.033-6.238-6.033-11.034c0-11.452,12.271-17.929,12.348-17.963 c4.215-2.108,5.931-7.236,3.814-11.452c-2.116-4.215-7.236-5.922-11.443-3.814c-0.896,0.444-21.786,11.145-21.786,33.229 c0,12.066,6.374,18.449,11.034,23.1C322.417,180.876,324.269,182.933,324.269,187.729z"}),r.createElement("path",{d:"M119.469,273.062c5.837,0,11.204,2.987,14.379,7.987c2.432,3.831,7.441,5.086,11.418,2.85 c6.69-3.789,14.464-2.671,19.806,2.244c2.423,2.219,5.897,2.842,8.943,1.638c3.038-1.22,5.12-4.07,5.342-7.347 c0.614-8.917,8.038-15.906,16.913-15.906c5.726,0,11.042,2.867,14.217,7.663c3.166,4.779,11.068,4.779,14.225,0 c5.82-8.764,19.396-9.993,26.692-2.142c2.022,2.176,5.018,3.157,7.936,2.56c2.901-0.58,5.308-2.628,6.332-5.41 c2.466-6.707,8.866-11.204,15.932-11.204c9.404,0,17.067,7.654,17.058,16.853c-0.026,0.179-0.119,0.998-0.137,1.178 c-0.222,2.884,1.033,5.692,3.345,7.441c2.295,1.758,5.35,2.227,8.064,1.237c7.381-2.662,13.688-0.538,18.27,4.412 c2.022,2.176,5.026,3.149,7.936,2.56c2.901-0.58,5.308-2.628,6.332-5.41c2.466-6.707,8.866-11.204,15.932-11.204 c7.629,0,14.37,5.197,16.384,12.638c0.631,2.355,2.253,4.326,4.429,5.41c2.176,1.092,4.719,1.186,6.989,0.282 c7.765-3.132,16.393-0.102,20.71,6.716c2.423,3.84,7.441,5.111,11.409,2.859c7.33-4.13,15.923-2.338,21.043,3.362 c1.681,1.877,4.019,2.833,6.349,2.833c2.039,0,4.079-0.717,5.7-2.184c3.507-3.149,3.806-8.542,0.657-12.049 c-8.747-9.737-22.912-13.739-35.379-9.779c-7.373-7.467-18.099-11.247-28.663-9.779c-5.948-10.53-17.195-17.374-29.628-17.374 c-10.402,0-20.087,4.838-26.453,12.698c-5.265-2.876-11.247-4.36-17.289-4.147c-3.789-14.712-17.178-25.617-33.058-25.617 c-10.394,0-20.062,4.821-26.428,12.663c-11.631-6.374-27.221-4.949-37.572,3.371c-5.973-4.804-13.457-7.501-21.333-7.501 c-13.355,0-25.071,7.851-30.618,19.302c-6.955-2.671-14.822-2.97-22.024-0.691c-6.34-6.4-14.95-10.078-24.158-10.078 c-4.71,0-8.533,3.823-8.533,8.533S114.758,273.062,119.469,273.062z"}),r.createElement("path",{d:"M503.469,324.262H8.535c-4.71,0-8.533,3.823-8.533,8.533c0,23.526,19.14,42.667,42.667,42.667h9.003 c4.258,38.349,36.864,68.267,76.331,68.267h256c39.467,0,72.064-29.918,76.322-68.267h9.011c23.526,0,42.667-19.14,42.667-42.667 C512.002,328.085,508.188,324.262,503.469,324.262z M469.335,358.395h-17.067c-4.719,0-8.533,3.823-8.533,8.533 c0,32.939-26.803,59.733-59.733,59.733h-256c-30.046,0-54.972-22.289-59.127-51.2h349.261c4.719,0,8.533-3.823,8.533-8.533 s-3.814-8.533-8.533-8.533H42.669c-11.128,0-20.617-7.134-24.141-17.067h474.948 C489.952,351.261,480.463,358.395,469.335,358.395z"}),r.createElement("path",{d:"M5.173,255.304l119.467,51.2c1.092,0.469,2.236,0.7,3.354,0.7c3.319,0,6.468-1.946,7.851-5.18 c1.86-4.335-0.154-9.353-4.48-11.204l-119.467-51.2c-4.335-1.86-9.361,0.154-11.204,4.48 C-1.167,248.435,0.847,253.452,5.173,255.304z"}))))))}const Bw=r.forwardRef(zw);n.p;function Uw(){const e=Ce(),t=gt(),n=he((e=>e.page.activeMeal)),r=he((e=>e.data.meals)),{type:i}=yt(),o=r.filter((e=>e.type===i));return(0,Kt.jsxs)("div",{className:"meals-page",children:[(0,Kt.jsx)(ee,{children:(0,Kt.jsxs)("title",{children:["Nutrition | ",(()=>{const e={[Ka.Breakfast]:Ya.Breakfast,[Ka.Lunch]:Ya.Lunch,[Ka.Dinner]:Ya.Dinner,[Ka.Snack]:Ya.Snack};return i?e[i]:""})()]})}),(0,Kt.jsxs)("h2",{className:"title title--2",children:["\u0412\u044b\u0431\u0435\u0440\u0438 ",i&&Ya[i].toLowerCase(),":"]}),o.map((n=>(0,Kt.jsxs)(Vx,{className:"meals-page__item",to:"#",onClick:r=>{r.preventDefault(),(n=>{e(La({meal:n}));const r=He(qa.MealPage,{id:n.id});t(r)})(n)},children:[(0,Kt.jsx)("div",{className:"meals-page__image-wrapper",children:n.picture?(0,Kt.jsx)("img",{src:n.picture,alt:Hb(n.name),width:80,height:80}):(0,Kt.jsx)(Bw,{})}),(0,Kt.jsxs)("div",{className:"meals-page__wrapper",children:[(0,Kt.jsx)("p",{className:"title title--3",children:Hb(n.name)}),(0,Kt.jsxs)("div",{children:[(0,Kt.jsxs)("span",{children:["\u041a\u043a\u0430\u043b: ",n.calories," "]}),(0,Kt.jsxs)("span",{children:["\u0411: ",n.proteins,"\u0433 "]}),(0,Kt.jsxs)("span",{children:["\u0416: ",n.fats,"\u0433 "]}),(0,Kt.jsxs)("span",{children:["\u0423: ",n.carbs,"\u0433 "]})]})]})]},n.id))),(0,Kt.jsx)("button",{className:"button meals-page__add-meal-btn",onClick:()=>(e(Ua({isOpened:!0})),void(i&&e(Oa({type:i})))),children:"+"}),(0,Kt.jsx)(Vx,{className:"button button--submit",to:qa.Root,onClick:()=>{n&&e(La({meal:null}))},children:"\u0414\u043e\u043c\u043e\u0439"})]})}var Ww,Vw;function Hw(){return Hw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Hw.apply(null,arguments)}function qw(e,t){let{title:n,titleId:i,...o}=e;return r.createElement("svg",Hw({width:40,height:40,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":i},o),n?r.createElement("title",{id:i},n):null,Ww||(Ww=r.createElement("circle",{cx:12,cy:6,r:4,stroke:"currentColor",strokeWidth:1.5})),Vw||(Vw=r.createElement("path",{d:"M19.9975 18C20 17.8358 20 17.669 20 17.5C20 15.0147 16.4183 13 12 13C7.58172 13 4 15.0147 4 17.5C4 19.9853 4 22 12 22C14.231 22 15.8398 21.8433 17 21.5634",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round"})))}const Gw=r.forwardRef(qw);n.p;function Kw(){const[e,t]=(0,r.useState)(null),n=he((e=>e.auth.userInfo)),i=he((e=>e.data.users.find((e=>e.id===(null===n||void 0===n?void 0:n.id)))));(0,r.useEffect)((()=>{i&&t(i)}),[i]);const o=Kx(),a=He(qa.UserPage,{id:`${null===o||void 0===o?void 0:o.id}`});return e?(0,Kt.jsx)("div",{className:"header-user",children:(0,Kt.jsx)(Vx,{className:"header-user__link header-nav__item",to:a,children:e.avatar.length>0?(0,Kt.jsx)("img",{className:"header-user__image",src:e.avatar,width:40,height:40,alt:e.name}):(0,Kt.jsx)(Gw,{})})}):(0,Kt.jsx)(Vb,{size:"20"})}var Yw,Zw;function Xw(){return Xw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Xw.apply(null,arguments)}function Qw(e,t){let{title:n,titleId:i,...o}=e;return r.createElement("svg",Xw({width:40,height:40,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":i},o),n?r.createElement("title",{id:i},n):null,Yw||(Yw=r.createElement("path",{d:"M2.00098 11.999L16.001 11.999M16.001 11.999L12.501 8.99902M16.001 11.999L12.501 14.999",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})),Zw||(Zw=r.createElement("path",{d:"M9.00195 7C9.01406 4.82497 9.11051 3.64706 9.87889 2.87868C10.7576 2 12.1718 2 15.0002 2L16.0002 2C18.8286 2 20.2429 2 21.1215 2.87868C22.0002 3.75736 22.0002 5.17157 22.0002 8L22.0002 16C22.0002 18.8284 22.0002 20.2426 21.1215 21.1213C20.3531 21.8897 19.1752 21.9862 17 21.9983M9.00195 17C9.01406 19.175 9.11051 20.3529 9.87889 21.1213C10.5202 21.7626 11.4467 21.9359 13 21.9827",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round"})))}const Jw=r.forwardRef(Qw);n.p;var e$,t$;function n$(){return n$=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},n$.apply(null,arguments)}function r$(e,t){let{title:n,titleId:i,...o}=e;return r.createElement("svg",n$({width:40,height:40,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":i},o),n?r.createElement("title",{id:i},n):null,e$||(e$=r.createElement("path",{d:"M15 12L2 12M2 12L5.5 9M2 12L5.5 15",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})),t$||(t$=r.createElement("path",{d:"M9.00195 7C9.01406 4.82497 9.11051 3.64706 9.87889 2.87868C10.7576 2 12.1718 2 15.0002 2L16.0002 2C18.8286 2 20.2429 2 21.1215 2.87868C22.0002 3.75736 22.0002 5.17157 22.0002 8L22.0002 16C22.0002 18.8284 22.0002 20.2426 21.1215 21.1213C20.3531 21.8897 19.1752 21.9862 17 21.9983M9.00195 17C9.01406 19.175 9.11051 20.3529 9.87889 21.1213C10.5202 21.7626 11.4467 21.9359 13 21.9827",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round"})))}const i$=r.forwardRef(r$);n.p;var o$;function a$(){return a$=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a$.apply(null,arguments)}function s$(e,t){let{title:n,titleId:i,...o}=e;return r.createElement("svg",a$({width:26,height:33,viewBox:"0 0 32 40",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":i},o),n?r.createElement("title",{id:i},n):null,o$||(o$=r.createElement("path",{d:"M9.98858 4.69657L24.8802 27.4933V4.48546C24.8802 2.99034 25.1932 1.87338 25.8191 1.13457C26.4624 0.378205 27.323 0 28.401 0C29.5137 0 30.3918 0.378205 31.035 1.13457C31.6784 1.87338 32 2.99034 32 4.48546V34.9075C32 38.3022 30.6091 40 27.8272 40C27.1318 40 26.5058 39.8945 25.9495 39.6835C25.3931 39.49 24.8715 39.173 24.3847 38.7335C23.8979 38.2935 23.4458 37.7835 23.0285 37.2031C22.6113 36.605 22.194 35.9981 21.7767 35.3825L7.25019 12.8496V35.5144C7.25019 36.992 6.91115 38.1087 6.23308 38.8652C5.55501 39.6217 4.68567 40 3.62512 40C2.52978 40 1.65174 39.6217 0.991064 38.8652C0.330338 38.0912 0 36.9744 0 35.5144V5.67283C0 4.40631 0.139074 3.4125 0.417272 2.69129C0.74761 1.89973 1.29531 1.25772 2.06031 0.76516C2.82532 0.255053 3.65116 0 4.5379 0C5.23337 0 5.82451 0.114352 6.31132 0.343005C6.81552 0.571709 7.25019 0.879513 7.61532 1.26652C7.99785 1.65347 8.38033 2.15478 8.76286 2.77044C9.16273 3.3861 9.57131 4.02816 9.98858 4.69657Z",fill:"currentColor"})))}const l$=r.forwardRef(s$);n.p;function c$(){const e=Ce(),t=Rw(us.MobileOnly),n=he((e=>e.auth.authorizationStatus)),i=he((e=>e.page.isLoginFormOpened)),o=he((e=>e.page.isRegisterFormOpened)),a=he((e=>e.page.activeMeal)),[s,l]=(0,r.useState)(!1),c=Yb()("header-nav__list",{"header-nav__list-mobile":t,"header-nav__list-mobile--opened":t&&s});return(0,Kt.jsx)("header",{className:"header",children:(0,Kt.jsxs)("div",{className:"header__container",children:[(0,Kt.jsx)("ul",{className:c,children:(0,Kt.jsx)("li",{className:"header-nav__item",children:(0,Kt.jsx)(Vx,{className:"header-nav__link header-nav__link--black",to:qa.Root,onClick:()=>(a&&e(La({meal:null})),void l(!1)),children:(0,Kt.jsx)(l$,{})})})}),n===fs.Auth&&(0,Kt.jsx)(Kw,{}),n===fs.Auth?(0,Kt.jsx)("button",{className:"header-nav__button header-nav__item",type:"button",onClick:()=>{e(Wg()),e(Da(qa.Landing))},children:(0,Kt.jsx)(i$,{})}):(0,Kt.jsx)("button",{className:"header-nav__button header-nav__item",type:"button",onClick:()=>{e(Fa({isOpened:!i})),o&&e(ja({isOpened:!1}))},children:(0,Kt.jsx)(Jw,{})})]})})}function u$(e){let{message:t}=e;const n=Ce(),i=!1,o=Mw((()=>{n(Na({message:null}))}));return(0,r.useEffect)((()=>{t&&n(Va({isOpened:i})),n(Wa({isOpened:i})),n(ja({isOpened:i})),n(Fa({isOpened:i})),n(Ua({isOpened:i}))})),(0,Kt.jsxs)("div",{className:"popup",ref:o,children:[(0,Kt.jsx)("p",{className:"popup__message",children:t}),(0,Kt.jsx)("button",{className:"button button--submit",onClick:()=>n(Na({message:null})),children:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"})]})}function d$(e,t,n){return e*t*(n/60)}function p$(){var e;const t=Ce(),n=he((e=>e.page.activeTraining)),i=he((e=>e.user)),o=null===(e=he((e=>e.data.users.find((e=>e.id===i.id)))))||void 0===e?void 0:e.weight,a=he((e=>e.data.users.find((e=>e.id===i.id)))),[s,l]=(0,r.useState)("moderate"),[c,u]=(0,r.useState)(o||70),[d,p]=(0,r.useState)(30),[h,f]=(0,r.useState)(0),m=Mw((()=>{t(Wa({isOpened:!1}))}));(0,r.useEffect)((()=>{n&&n in Qa&&l("moderate")}),[n]),(0,r.useEffect)((()=>{if(n&&n in Qa){if(n in Qa){const e=Qa[n];if(e&&s in e){const t=e[s];if(t){const{met:e}=t,n=d$(e,c,d);f(n)}else console.error(`Invalid intensity: ${s} for activity ${n}`)}else console.error(`Invalid intensity: ${s} for activity ${n}`)}}else console.error(`Invalid active training type: ${n}`)}),[n,s,d,c]);const g=e=>{t(Ba({training:e})),(()=>{if(!n||!(n in Qa))return void console.error(`No MET data found for activity: ${n}`);const e=Qa[n][s];if(!e)return void console.error(`No data found for intensity: ${s}`);const{met:t}=e,r=d$(t,c,d);f(r)})()};return(0,Kt.jsx)("div",{className:"form__wrapper",children:(0,Kt.jsxs)("form",{className:"form",method:"post",ref:m,children:[(0,Kt.jsxs)("div",{className:"form__header",children:[(0,Kt.jsx)("h1",{className:"title title--2 form__title",children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0442\u0440\u0435\u043d\u0438\u0440\u043e\u0432\u043a\u0443"}),(0,Kt.jsx)("button",{className:"button form__button--close",onClick:()=>t(Wa({isOpened:!1})),children:(0,Kt.jsx)(Qb,{})})]}),(0,Kt.jsxs)("fieldset",{className:"form__fieldset",children:[(0,Kt.jsxs)("label",{className:"form__item form__item--row",htmlFor:"training-type",children:["\u0410\u043a\u0442\u0438\u0432\u043d\u043e\u0441\u0442\u044c:",(0,Kt.jsx)("select",{className:"form__input form__input--select",value:n||"",id:"training-type",onChange:e=>g(e.target.value),children:Object.keys(Qa).map((e=>(0,Kt.jsx)("option",{value:e,children:Xa[e]},e)))})]}),(0,Kt.jsxs)("label",{className:"form__item",htmlFor:"training-intensity",children:["\u0418\u043d\u0442\u0435\u043d\u0441\u0438\u0432\u043d\u043e\u0441\u0442\u044c:",(0,Kt.jsx)("select",{className:"form__input form__input--select",value:s,id:"training-intensity",onChange:e=>l(e.target.value),children:Object.keys(Qa[n]||{}).map((e=>{const t=Qa[n][e];return(0,Kt.jsx)("option",{value:e,children:t.intensity},e)}))})]}),(0,Kt.jsxs)("label",{className:"form__item",htmlFor:"training-weight",children:["\u0412\u0435\u0441 (\u043a\u0433):",(0,Kt.jsx)("input",{className:"form__input",type:"number",id:"training-weight",value:c||"",onChange:e=>{const t=e.target.value;u(Number(""===t?null:t))}})]}),(0,Kt.jsxs)("label",{className:"form__item",htmlFor:"training-time",children:["\u0412\u0440\u0435\u043c\u044f (\u0432 \u043c\u0438\u043d\u0443\u0442\u0430\u0445):",(0,Kt.jsx)("input",{className:"form__input",type:"number",id:"training-time",value:d||"",onChange:e=>{const t=e.target.value;p(Number(""===t?null:t))}})]}),h>0?(0,Kt.jsxs)("p",{children:["\u0422\u044b \u0437\u0430\u0442\u0440\u0430\u0442\u0438\u043b \u043f\u0440\u0438\u043c\u0435\u0440\u043d\u043e ",(0,Kt.jsx)("strong",{children:Math.floor(h)})," ","\u043a\u0430\u043b\u043e\u0440\u0438\u0439! \u0422\u0430\u043a \u0434\u0435\u0440\u0436\u0430\u0442\u044c!"]}):(0,Kt.jsx)("p",{children:"\u0412\u0432\u0435\u0434\u0438 \u0432\u0440\u0435\u043c\u044f \u0442\u0440\u0435\u043d\u0438\u0440\u043e\u0432\u0438 \u0434\u043b\u044f \u0440\u0430\u0441\u0447\u0435\u0442\u0430 \u043a\u0430\u043b\u043e\u0440\u0438\u0439"})]}),(0,Kt.jsx)("button",{className:"button button--submit form__submit",type:"submit",onClick:async e=>{var r;e.preventDefault();const o={activity:n||Za.Walking,date:new Date,duration:d,caloriesBurned:h,id:`${null===a||void 0===a?void 0:a.name}-${n}-${null!==a&&void 0!==a&&null!==(r=a.trainingSessions)&&void 0!==r&&r.length?null===a||void 0===a?void 0:a.trainingSessions.length:"0"}`};try{(async(e,t)=>{try{const n=Dg.ref(Ga.Users),r=await n.orderByChild("id").equalTo(e.id).once("value");if(r.exists()){const e=Object.keys(r.val())[0],i=r.val()[e].trainingSessions||[];i.push(t),await n.child(e).update({trainingSessions:i}),console.log("Training session successfully added to user schedule.")}else console.log("User not found in the database.")}catch(Eu){console.error("Error adding training session to user schedule:",Eu)}})(i,o),t(Aa({user:i,session:o})),t(Na(a?{message:hs.TrainingAdded}:{message:ps.TrainingNoAuthError}))}catch(e){t(Na({message:ps.ConnectionError})),console.error("error!",e)}finally{Wa({isOpened:!1})}},children:"\u0417\u0430\u043f\u0438\u0441\u0430\u0442\u044c \u0442\u0440\u0435\u043d\u0438\u0440\u043e\u0432\u043a\u0443!"})]})})}function h$(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function f$(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{l(r.next(e))}catch(UK){o(UK)}}function s(e){try{l(r.throw(e))}catch(UK){o(UK)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;function m$(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const g$=m$,y$=new Ys("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),v$=new Pl("@firebase/auth");function b$(e){if(v$.logLevel<=Cl.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];v$.error(`Auth (${jc}): ${e}`,...n)}}function x$(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw C$(e,...n)}function w$(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return C$(e,...n)}function $$(e,t,n){const r=Object.assign(Object.assign({},g$()),{[t]:n});return new Ys("auth","Firebase",r).create(t,{appName:e.name})}function S$(e){return $$(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function _$(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&x$(e,"argument-error"),$$(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function C$(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return y$.create(e,...n)}function k$(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw C$(t,...r)}}function E$(e){const t="INTERNAL ASSERTION FAILED: "+e;throw b$(t),new Error(t)}function T$(e,t){e||E$(t)}function I$(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function P$(){return"http:"===R$()||"https:"===R$()}function R$(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function M$(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(P$()||function(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}class A${constructor(e,t){this.shortDelay=e,this.longDelay=t,T$(t>e,"Short delay should be less than long delay!"),this.isMobile=Vs()||qs()}get(){return M$()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function O$(e,t){T$(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class L${static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void E$("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void E$("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void E$("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const N$={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},D$=new A$(3e4,6e4);function F$(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function j$(e,t,n,r){return z$(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},(async()=>{let i={},o={};r&&("GET"===t?o=r:i={body:JSON.stringify(r)});const a=al(Object.assign({key:e.config.apiKey},o)).slice(1),s=await e._getAdditionalHeaders();s["Content-Type"]="application/json",e.languageCode&&(s["X-Firebase-Locale"]=e.languageCode);const l=Object.assign({method:t,headers:s},i);return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||(l.referrerPolicy="no-referrer"),L$.fetch()(U$(e,e.config.apiHost,n,a),l)}))}async function z$(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},N$),t);try{const t=new V$(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw H$(e,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const t=i.ok?o.errorMessage:o.error.message,[n,a]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw H$(e,"credential-already-in-use",o);if("EMAIL_EXISTS"===n)throw H$(e,"email-already-in-use",o);if("USER_DISABLED"===n)throw H$(e,"user-disabled",o);const s=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(a)throw $$(e,s,a);x$(e,s)}}catch(UK){if(UK instanceof Ks)throw UK;x$(e,"network-request-failed",{message:String(UK)})}}async function B$(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const o=await j$(e,t,n,r,i);return"mfaPendingCredential"in o&&x$(e,"multi-factor-auth-required",{_serverResponse:o}),o}function U$(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?O$(e.config,i):`${e.config.apiScheme}://${i}`}function W$(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class V${clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(w$(this.auth,"network-request-failed"))),D$.get())}))}}function H$(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=w$(e,t,r);return i.customData._tokenResponse=n,i}function q$(e){return void 0!==e&&void 0!==e.enterprise}class G${constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return W$(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function K$(e,t){return j$(e,"GET","/v2/recaptchaConfig",F$(e,t))}async function Y$(e,t){return j$(e,"POST","/v1/accounts:lookup",t)}function Z$(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(UK){}}function X$(e){return 1e3*Number(e)}function Q$(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return b$("JWT malformed, contained fewer than 3 sections"),null;try{const e=Ls(n);return e?JSON.parse(e):(b$("Failed to decode base64 JWT payload"),null)}catch(UK){return b$("Caught error parsing JWT payload as JSON",null===UK||void 0===UK?void 0:UK.toString()),null}}function J$(e){const t=Q$(e);return k$(t,"internal-error"),k$("undefined"!==typeof t.exp,"internal-error"),k$("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function eS(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(UK){throw UK instanceof Ks&&function(e){let{code:t}=e;return"auth/user-disabled"===t||"auth/user-token-expired"===t}(UK)&&e.auth.currentUser===e&&await e.auth.signOut(),UK}}class tS{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(UK){return void("auth/network-request-failed"===(null===UK||void 0===UK?void 0:UK.code)&&this.schedule(!0))}this.schedule()}}class nS{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Z$(this.lastLoginAt),this.creationTime=Z$(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function rS(e){var t;const n=e.auth,r=await e.getIdToken(),i=await eS(e,Y$(n,{idToken:r}));k$(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const o=i.users[0];e._notifyReloadListener(o);const a=(null===(t=o.providerUserInfo)||void 0===t?void 0:t.length)?iS(o.providerUserInfo):[],s=function(e,t){const n=e.filter((e=>!t.some((t=>t.providerId===e.providerId))));return[...n,...t]}(e.providerData,a),l=e.isAnonymous,c=!(e.email&&o.passwordHash)&&!(null===s||void 0===s?void 0:s.length),u=!!l&&c,d={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:s,metadata:new nS(o.createdAt,o.lastLoginAt),isAnonymous:u};Object.assign(e,d)}function iS(e){return e.map((e=>{var{providerId:t}=e,n=h$(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}class oS{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){k$(e.idToken,"internal-error"),k$("undefined"!==typeof e.idToken,"internal-error"),k$("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):J$(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){k$(0!==e.length,"internal-error");const t=J$(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(k$(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await z$(e,{},(async()=>{const n=al({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,o=U$(e,r,"/v1/token",`key=${i}`),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",L$.fetch()(o,{method:"POST",headers:a,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,o=new oS;return n&&(k$("string"===typeof n,"internal-error",{appName:e}),o.refreshToken=n),r&&(k$("string"===typeof r,"internal-error",{appName:e}),o.accessToken=r),i&&(k$("number"===typeof i,"internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new oS,this.toJSON())}_performRefresh(){return E$("not implemented")}}function aS(e,t){k$("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class sS{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=h$(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new tS(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new nS(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await eS(this,this.stsTokenManager.getToken(this.auth,e));return k$(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=vl(e),r=await n.getIdToken(t),i=Q$(r);k$(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const o="object"===typeof i.firebase?i.firebase:void 0,a=null===o||void 0===o?void 0:o.sign_in_provider;return{claims:i,token:r,authTime:Z$(X$(i.auth_time)),issuedAtTime:Z$(X$(i.iat)),expirationTime:Z$(X$(i.exp)),signInProvider:a||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=vl(e);await rS(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(k$(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new sS(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){k$(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await rS(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Oc(this.auth.app))return Promise.reject(S$(this.auth));const e=await this.getIdToken();return await eS(this,async function(e,t){return j$(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,o,a,s,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,d=null!==(r=t.email)&&void 0!==r?r:void 0,p=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,h=null!==(o=t.photoURL)&&void 0!==o?o:void 0,f=null!==(a=t.tenantId)&&void 0!==a?a:void 0,m=null!==(s=t._redirectEventId)&&void 0!==s?s:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,y=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:v,emailVerified:b,isAnonymous:x,providerData:w,stsTokenManager:$}=t;k$(v&&$,e,"internal-error");const S=oS.fromJSON(this.name,$);k$("string"===typeof v,e,"internal-error"),aS(u,e.name),aS(d,e.name),k$("boolean"===typeof b,e,"internal-error"),k$("boolean"===typeof x,e,"internal-error"),aS(p,e.name),aS(h,e.name),aS(f,e.name),aS(m,e.name),aS(g,e.name),aS(y,e.name);const _=new sS({uid:v,auth:e,email:d,emailVerified:b,displayName:u,isAnonymous:x,photoURL:h,phoneNumber:p,tenantId:f,stsTokenManager:S,createdAt:g,lastLoginAt:y});return w&&Array.isArray(w)&&(_.providerData=w.map((e=>Object.assign({},e)))),m&&(_._redirectEventId=m),_}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new oS;r.updateFromServerResponse(t);const i=new sS({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await rS(i),i}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];k$(void 0!==r.localId,"internal-error");const i=void 0!==r.providerUserInfo?iS(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length),a=new oS;a.updateFromIdToken(n);const s=new sS({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:o}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new nS(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length)};return Object.assign(s,l),s}}const lS=new Map;function cS(e){T$(e instanceof Function,"Expected a class definition");let t=lS.get(e);return t?(T$(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,lS.set(e,t),t)}class uS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}uS.type="NONE";const dS=uS;function pS(e,t,n){return`firebase:${e}:${t}:${n}`}class hS{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=pS(this.userKey,r.apiKey,i),this.fullPersistenceKey=pS("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?sS._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new hS(cS(dS),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let i=r[0]||cS(dS);const o=pS(n,e.config.apiKey,e.name);let a=null;for(const l of t)try{const t=await l._get(o);if(t){const n=sS._fromJSON(e,t);l!==i&&(a=n),i=l;break}}catch(CO){}const s=r.filter((e=>e._shouldAllowMigration));return i._shouldAllowMigration&&s.length?(i=s[0],a&&await i._set(o,a.toJSON()),await Promise.all(t.map((async e=>{if(e!==i)try{await e._remove(o)}catch(CO){}}))),new hS(i,e,n)):new hS(i,e,n)}}function fS(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(vS(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(mS(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(xS(t))return"Blackberry";if(wS(t))return"Webos";if(gS(t))return"Safari";if((t.includes("chrome/")||yS(t))&&!t.includes("edge/"))return"Chrome";if(bS(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function mS(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ws();return/firefox\//i.test(e)}function gS(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ws()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function yS(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ws();return/crios\//i.test(e)}function vS(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ws();return/iemobile/i.test(e)}function bS(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ws();return/android/i.test(e)}function xS(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ws();return/blackberry/i.test(e)}function wS(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ws();return/webos/i.test(e)}function $S(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ws();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function SS(){return function(){const e=Ws();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function _S(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ws();return $S(e)||bS(e)||wS(e)||xS(e)||/windows phone/i.test(e)||vS(e)}function CS(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=fS(Ws());break;case"Worker":t=`${fS(Ws())}-${e}`;break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return`${t}/JsCore/${jc}/${r}`}class kS{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,r)=>{try{n(e(t))}catch(UK){r(UK)}}));n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(UK){t.reverse();for(const n of t)try{n()}catch(oa){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===UK||void 0===UK?void 0:UK.message})}}}class ES{constructor(e){var t,n,r,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=o.minPasswordLength)&&void 0!==t?t:6,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),void 0!==o.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),void 0!==o.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),void 0!==o.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),void 0!==o.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,o,a;const s={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,s),this.validatePasswordCharacterOptions(e,s),s.isValid&&(s.isValid=null===(t=s.meetsMinPasswordLength)||void 0===t||t),s.isValid&&(s.isValid=null===(n=s.meetsMaxPasswordLength)||void 0===n||n),s.isValid&&(s.isValid=null===(r=s.containsLowercaseLetter)||void 0===r||r),s.isValid&&(s.isValid=null===(i=s.containsUppercaseLetter)||void 0===i||i),s.isValid&&(s.isValid=null===(o=s.containsNumericCharacter)||void 0===o||o),s.isValid&&(s.isValid=null===(a=s.containsNonAlphanumericCharacter)||void 0===a||a),s}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class TS{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new PS(this),this.idTokenSubscription=new PS(this),this.beforeStateQueue=new kS(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=y$,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=cS(t)),this._initializationPromise=this.queue((async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await hS.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(UK){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await Y$(this,{idToken:e}),n=await sS._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Oc(this.app)){const e=this.app.settings.authIdToken;return e?new Promise((t=>{setTimeout((()=>this.initializeCurrentUserFromIdToken(e).then(t,t)))})):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,o=null===r||void 0===r?void 0:r._redirectEventId,a=await this.tryRedirectSignIn(e);n&&n!==o||!(null===a||void 0===a?void 0:a.user)||(r=a.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(UK){r=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(UK)))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return k$(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(UK){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await rS(e)}catch(UK){if("auth/network-request-failed"!==(null===UK||void 0===UK?void 0:UK.code))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Oc(this.app))return Promise.reject(S$(this));const t=e?vl(e):null;return t&&k$(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&k$(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return Oc(this.app)?Promise.reject(S$(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Oc(this.app)?Promise.reject(S$(this)):this.queue((async()=>{await this.assertedPersistence.setPersistence(cS(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return j$(e,"GET","/v2/passwordPolicy",F$(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new ES(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Ys("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise(((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged((()=>{n(),e()}),t)}}))}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return j$(e,"POST","/v2/accounts:revokeToken",F$(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&cS(e)||this._popupRedirectResolver;k$(t,this,"argument-error"),this.redirectPersistenceManager=await hS.create(this,[cS(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(k$(a,this,"internal-error"),a.then((()=>{o||i(this.currentUser)})),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{o=!0,i()}}{const n=e.addObserver(t);return()=>{o=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return k$(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=CS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(v$.logLevel<=Cl.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];v$.warn(`Auth (${jc}): ${e}`,...n)}}(`Error while retrieving App Check token: ${t.error}`),null===t||void 0===t?void 0:t.token}}function IS(e){return vl(e)}class PS{constructor(e){this.auth=e,this.observer=null,this.addObserver=ul((e=>this.observer=e))}get next(){return k$(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let RS={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function MS(e){return RS.loadJS(e)}function AS(e){return`__${e}${Math.floor(1e6*Math.random())}`}class OS{constructor(){this.enterprise=new LS}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class LS{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const NS="NO_RECAPTCHA";class DS{constructor(e){this.type="recaptcha-enterprise",this.auth=IS(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;q$(i)?i.enterprise.ready((()=>{i.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n(NS)}))})):r(Error("No reCAPTCHA enterprise script loaded."))}if(this.auth.settings.appVerificationDisabledForTesting){return(new OS).execute("siteKey",{action:"verify"})}return new Promise(((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{K$(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((r=>{if(void 0!==r.recaptchaKey){const n=new G$(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))})(this.auth).then((i=>{if(!t&&q$(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=RS.recaptchaEnterpriseScript;0!==t.length&&(t+=i),MS(t).then((()=>{n(i,e,r)})).catch((e=>{r(e)}))}})).catch((e=>{r(e)}))}))}}async function FS(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const o=new DS(e);let a;if(i)a=NS;else try{a=await o.verify(n)}catch(Eu){a=await o.verify(n,!0)}const s=Object.assign({},t);if("mfaSmsEnrollment"===n||"mfaSmsSignIn"===n){if("phoneEnrollmentInfo"in s){const e=s.phoneEnrollmentInfo.phoneNumber,t=s.phoneEnrollmentInfo.recaptchaToken;Object.assign(s,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:t,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in s){const e=s.phoneSignInInfo.recaptchaToken;Object.assign(s,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return s}return r?Object.assign(s,{captchaResp:a}):Object.assign(s,{captchaResponse:a}),Object.assign(s,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(s,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),s}async function jS(e,t,n,r,i){var o,a;if("EMAIL_PASSWORD_PROVIDER"===i){if(null===(o=e._getRecaptchaConfig())||void 0===o?void 0:o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await FS(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch((async i=>{if("auth/missing-recaptcha-token"===i.code){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const i=await FS(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)}))}if("PHONE_PROVIDER"===i){if(null===(a=e._getRecaptchaConfig())||void 0===a?void 0:a.isProviderEnabled("PHONE_PROVIDER")){const i=await FS(e,t,n);return r(e,i).catch((async i=>{var o;if("AUDIT"===(null===(o=e._getRecaptchaConfig())||void 0===o?void 0:o.getProviderEnforcementState("PHONE_PROVIDER"))&&("auth/missing-recaptcha-token"===i.code||"auth/invalid-app-credential"===i.code)){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);const i=await FS(e,t,n,!1,!0);return r(e,i)}return Promise.reject(i)}))}{const i=await FS(e,t,n,!1,!0);return r(e,i)}}return Promise.reject(i+" provider is not supported.")}async function zS(e){const t=IS(e),n=await K$(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new G$(n);if(null==t.tenantId?t._agentRecaptchaConfig=r:t._tenantRecaptchaConfigs[t.tenantId]=r,r.isAnyProviderEnabled()){new DS(t).verify()}}function BS(e,t,n){const r=IS(e);k$(r._canInitEmulator,r,"emulator-config-failed"),k$(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null===n||void 0===n?void 0:n.disableWarnings),o=US(t),{host:a,port:s}=function(e){const t=US(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:WS(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:WS(t)}}}(t),l=null===s?"":`:${s}`;r.config.emulator={url:`${o}//${a}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:a,port:s,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function US(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function WS(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class VS{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return E$("not implemented")}_getIdTokenResponse(e){return E$("not implemented")}_linkToIdToken(e,t){return E$("not implemented")}_getReauthenticationResolver(e){return E$("not implemented")}}async function HS(e,t){return j$(e,"POST","/v1/accounts:signUp",t)}async function qS(e,t){return B$(e,"POST","/v1/accounts:signInWithPassword",F$(e,t))}class GS extends VS{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new GS(e,t,"password")}static _fromEmailAndCode(e,t){return new GS(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return jS(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",qS,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return B$(e,"POST","/v1/accounts:signInWithEmailLink",F$(e,t))}(e,{email:this._email,oobCode:this._password});default:x$(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return jS(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",HS,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return B$(e,"POST","/v1/accounts:signInWithEmailLink",F$(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:x$(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function KS(e,t){return B$(e,"POST","/v1/accounts:signInWithIdp",F$(e,t))}class YS extends VS{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new YS(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):x$("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=h$(t,["providerId","signInMethod"]);if(!n||!r)return null;const o=new YS(n,r);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){return KS(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,KS(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,KS(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=al(t)}return e}}async function ZS(e,t){return j$(e,"POST","/v1/accounts:sendVerificationCode",F$(e,t))}const XS={USER_NOT_FOUND:"user-not-found"};class QS extends VS{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new QS({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new QS({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return B$(e,"POST","/v1/accounts:signInWithPhoneNumber",F$(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await B$(e,"POST","/v1/accounts:signInWithPhoneNumber",F$(e,t));if(n.temporaryProof)throw H$(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return B$(e,"POST","/v1/accounts:signInWithPhoneNumber",F$(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),XS)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new QS({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class JS{constructor(e){var t,n,r,i,o,a;const s=sl(ll(e)),l=null!==(t=s.apiKey)&&void 0!==t?t:null,c=null!==(n=s.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=s.mode)&&void 0!==r?r:null);k$(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(i=s.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(o=s.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(a=s.tenantId)&&void 0!==a?a:null}static parseLink(e){const t=function(e){const t=sl(ll(e)).link,n=t?sl(ll(t)).deep_link_id:null,r=sl(ll(e)).deep_link_id;return(r?sl(ll(r)).link:null)||r||n||t||e}(e);try{return new JS(t)}catch(CO){return null}}}class e_{constructor(){this.providerId=e_.PROVIDER_ID}static credential(e,t){return GS._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=JS.parseLink(t);return k$(n,"argument-error"),GS._fromEmailAndCode(e,n.code,n.tenantId)}}e_.PROVIDER_ID="password",e_.EMAIL_PASSWORD_SIGN_IN_METHOD="password",e_.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class t_{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class n_ extends t_{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class r_ extends n_{constructor(){super("facebook.com")}static credential(e){return YS._fromParams({providerId:r_.PROVIDER_ID,signInMethod:r_.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return r_.credentialFromTaggedObject(e)}static credentialFromError(e){return r_.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return r_.credential(t.oauthAccessToken)}catch(CO){return null}}}r_.FACEBOOK_SIGN_IN_METHOD="facebook.com",r_.PROVIDER_ID="facebook.com";class i_ extends n_{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return YS._fromParams({providerId:i_.PROVIDER_ID,signInMethod:i_.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return i_.credentialFromTaggedObject(e)}static credentialFromError(e){return i_.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return i_.credential(n,r)}catch(CO){return null}}}i_.GOOGLE_SIGN_IN_METHOD="google.com",i_.PROVIDER_ID="google.com";class o_ extends n_{constructor(){super("github.com")}static credential(e){return YS._fromParams({providerId:o_.PROVIDER_ID,signInMethod:o_.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return o_.credentialFromTaggedObject(e)}static credentialFromError(e){return o_.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return o_.credential(t.oauthAccessToken)}catch(CO){return null}}}o_.GITHUB_SIGN_IN_METHOD="github.com",o_.PROVIDER_ID="github.com";class a_ extends n_{constructor(){super("twitter.com")}static credential(e,t){return YS._fromParams({providerId:a_.PROVIDER_ID,signInMethod:a_.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return a_.credentialFromTaggedObject(e)}static credentialFromError(e){return a_.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return a_.credential(n,r)}catch(CO){return null}}}async function s_(e,t){return B$(e,"POST","/v1/accounts:signUp",F$(e,t))}a_.TWITTER_SIGN_IN_METHOD="twitter.com",a_.PROVIDER_ID="twitter.com";class l_{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await sS._fromIdTokenResponse(e,n,r),o=c_(n);return new l_({user:i,providerId:o,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=c_(n);return new l_({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function c_(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class u_ extends Ks{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,u_.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new u_(e,t,n,r)}}function d_(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if("auth/multi-factor-auth-required"===n.code)throw u_._fromErrorAndOperation(e,n,t,r);throw n}))}async function p_(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await eS(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return l_._forOperation(e,"link",r)}async function h_(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if(Oc(r.app))return Promise.reject(S$(r));const i="reauthenticate";try{const o=await eS(e,d_(r,i,t,e),n);k$(o.idToken,r,"internal-error");const a=Q$(o.idToken);k$(a,r,"internal-error");const{sub:s}=a;return k$(e.uid===s,r,"user-mismatch"),l_._forOperation(e,i,o)}catch(UK){throw"auth/user-not-found"===(null===UK||void 0===UK?void 0:UK.code)&&x$(r,"user-mismatch"),UK}}async function f_(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Oc(e.app))return Promise.reject(S$(e));const r="signIn",i=await d_(e,r,t),o=await l_._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(o.user),o}async function m_(e,t){return f_(IS(e),t)}async function g_(e){const t=IS(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}function y_(e,t){return j$(e,"POST","/v2/accounts/mfaEnrollment:start",F$(e,t))}new WeakMap;const v_="__sak";class b_{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(v_,"1"),this.storage.removeItem(v_),Promise.resolve(!0)):Promise.resolve(!1)}catch(CO){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class x_ extends b_{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=_S(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);SS()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}x_.type="LOCAL";const w_=x_;class $_ extends b_{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}$_.type="SESSION";const S_=$_;class __{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new __(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,o=this.handlersMap[r];if(!(null===o||void 0===o?void 0:o.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const a=Array.from(o).map((async e=>e(t.origin,i))),s=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}})))}(a);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:s})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function C_(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}__.receivers=[];class k_{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,o;return new Promise(((a,s)=>{const l=C_("",20);r.port1.start();const c=setTimeout((()=>{s(new Error("unsupported_event"))}),n);o={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),i=setTimeout((()=>{s(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),a(t.data.response);break;default:clearTimeout(c),clearTimeout(i),s(new Error("invalid_response"))}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])})).finally((()=>{o&&this.removeMessageHandler(o)}))}}function E_(){return window}function T_(){return"undefined"!==typeof E_().WorkerGlobalScope&&"function"===typeof E_().importScripts}const I_="firebaseLocalStorageDb",P_="firebaseLocalStorage",R_="fbase_key";class M_{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function A_(e,t){return e.transaction([P_],t?"readwrite":"readonly").objectStore(P_)}function O_(){const e=indexedDB.open(I_,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(P_,{keyPath:R_})}catch(UK){n(UK)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(P_)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(I_);return new M_(e).toPromise()}(),t(await O_()))}))}))}async function L_(e,t,n){const r=A_(e,!0).put({[R_]:t,value:n});return new M_(r).toPromise()}function N_(e,t){const n=A_(e,!0).delete(t);return new M_(n).toPromise()}class D_{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await O_()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(UK){if(t++>3)throw UK;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return T_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=__._getInstance(T_()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new k_(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(CO){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await O_();return await L_(e,v_,"1"),await N_(e,v_),!0}catch(CO){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>L_(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=A_(e,!1).get(t),r=await new M_(n).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>N_(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=A_(e,!1).getAll();return new M_(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}D_.type="LOCAL";const F_=D_;function j_(e,t){return j$(e,"POST","/v2/accounts/mfaSignIn:start",F$(e,t))}AS("rcb"),new A$(3e4,6e4);const z_="recaptcha";async function B_(e,t,n){var r;if(!e._getRecaptchaConfig())try{await zS(e)}catch(Eu){console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let i;if(i="string"===typeof t?{phoneNumber:t}:t,"session"in i){const t=i.session;if("phoneNumber"in i){k$("enroll"===t.type,e,"internal-error");const r={idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"}},o=jS(e,r,"mfaSmsEnrollment",(async(e,t)=>{if(t.phoneEnrollmentInfo.captchaResponse===NS){k$((null===n||void 0===n?void 0:n.type)===z_,e,"argument-error");return y_(e,await U_(e,t,n))}return y_(e,t)}),"PHONE_PROVIDER"),a=await o.catch((e=>Promise.reject(e)));return a.phoneSessionInfo.sessionInfo}{k$("signin"===t.type,e,"internal-error");const o=(null===(r=i.multiFactorHint)||void 0===r?void 0:r.uid)||i.multiFactorUid;k$(o,e,"missing-multi-factor-info");const a={mfaPendingCredential:t.credential,mfaEnrollmentId:o,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}},s=jS(e,a,"mfaSmsSignIn",(async(e,t)=>{if(t.phoneSignInInfo.captchaResponse===NS){k$((null===n||void 0===n?void 0:n.type)===z_,e,"argument-error");return j_(e,await U_(e,t,n))}return j_(e,t)}),"PHONE_PROVIDER"),l=await s.catch((e=>Promise.reject(e)));return l.phoneResponseInfo.sessionInfo}}{const t={phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"},r=jS(e,t,"sendVerificationCode",(async(e,t)=>{if(t.captchaResponse===NS){k$((null===n||void 0===n?void 0:n.type)===z_,e,"argument-error");return ZS(e,await U_(e,t,n))}return ZS(e,t)}),"PHONE_PROVIDER"),o=await r.catch((e=>Promise.reject(e)));return o.sessionInfo}}finally{null===n||void 0===n||n._reset()}}async function U_(e,t,n){k$(n.type===z_,e,"argument-error");const r=await n.verify();k$("string"===typeof r,e,"argument-error");const i=Object.assign({},t);if("phoneEnrollmentInfo"in i){const e=i.phoneEnrollmentInfo.phoneNumber,t=i.phoneEnrollmentInfo.captchaResponse,n=i.phoneEnrollmentInfo.clientType,o=i.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(i,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:r,captchaResponse:t,clientType:n,recaptchaVersion:o}}),i}if("phoneSignInInfo"in i){const e=i.phoneSignInInfo.captchaResponse,t=i.phoneSignInInfo.clientType,n=i.phoneSignInInfo.recaptchaVersion;return Object.assign(i,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:e,clientType:t,recaptchaVersion:n}}),i}return Object.assign(i,{recaptchaToken:r}),i}class W_{constructor(e){this.providerId=W_.PROVIDER_ID,this.auth=IS(e)}verifyPhoneNumber(e,t){return B_(this.auth,e,vl(t))}static credential(e,t){return QS._fromVerification(e,t)}static credentialFromResult(e){const t=e;return W_.credentialFromTaggedObject(t)}static credentialFromError(e){return W_.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?QS._fromTokenResponse(n,r):null}}function V_(e,t){return t?cS(t):(k$(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}W_.PROVIDER_ID="phone",W_.PHONE_SIGN_IN_METHOD="phone";class H_ extends VS{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return KS(e,this._buildIdpRequest())}_linkToIdToken(e,t){return KS(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return KS(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function q_(e){return f_(e.auth,new H_(e),e.bypassAuthState)}function G_(e){const{auth:t,user:n}=e;return k$(n,t,"internal-error"),h_(n,new H_(e),e.bypassAuthState)}async function K_(e){const{auth:t,user:n}=e;return k$(n,t,"internal-error"),p_(n,new H_(e),e.bypassAuthState)}class Y_{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(UK){this.reject(UK)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:o,type:a}=e;if(o)return void this.reject(o);const s={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(s))}catch(UK){this.reject(UK)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return q_;case"linkViaPopup":case"linkViaRedirect":return K_;case"reauthViaPopup":case"reauthViaRedirect":return G_;default:x$(this.auth,"internal-error")}}resolve(e){T$(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){T$(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Z_=new A$(2e3,1e4);class X_ extends Y_{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,X_.currentPopupAction&&X_.currentPopupAction.cancel(),X_.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return k$(e,this.auth,"internal-error"),e}async onExecution(){T$(1===this.filter.length,"Popup operations only handle one event");const e=C_();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(w$(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(w$(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,X_.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(w$(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,Z_.get())};e()}}X_.currentPopupAction=null;const Q_=new Map;class J_ extends Y_{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=Q_.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=nC(t),r=tC(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(UK){e=()=>Promise.reject(UK)}Q_.set(this.auth._key(),e)}return this.bypassAuthState||Q_.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function eC(e,t){Q_.set(e._key(),t)}function tC(e){return cS(e._redirectPersistence)}function nC(e){return pS("pendingRedirect",e.config.apiKey,e.name)}async function rC(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Oc(e.app))return Promise.reject(S$(e));const r=IS(e),i=V_(r,t),o=new J_(r,i,n),a=await o.execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,t)),a}class iC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return aC(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!aC(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(w$(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(oC(e))}saveEventToCache(e){this.cachedEventUids.add(oC(e)),this.lastProcessedEventTime=Date.now()}}function oC(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function aC(e){let{type:t,error:n}=e;return"unknown"===t&&"auth/no-auth-event"===(null===n||void 0===n?void 0:n.code)}const sC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,lC=/^https?/;async function cC(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return j$(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const n of t)try{if(uC(n))return}catch(CO){}x$(e,"unauthorized-domain")}function uC(e){const t=I$(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!lC.test(n))return!1;if(sC.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const dC=new A$(3e4,6e4);function pC(){const e=E_().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function hC(e){return new Promise(((t,n)=>{var r,i,o;function a(){pC(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{pC(),n(w$(e,"network-request-failed"))},timeout:dC.get()})}if(null===(i=null===(r=E_().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(o=E_().gapi)||void 0===o?void 0:o.load)){const t=AS("iframefcb");return E_()[t]=()=>{gapi.load?a():n(w$(e,"network-request-failed"))},MS(`${RS.gapiScript}?onload=${t}`).catch((e=>n(e)))}a()}})).catch((e=>{throw fC=null,e}))}let fC=null;const mC=new A$(5e3,15e3),gC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},yC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function vC(e){const t=e.config;k$(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?O$(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,r={apiKey:t.apiKey,appName:e.name,v:jc},i=yC.get(e.config.apiHost);i&&(r.eid=i);const o=e._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${al(r).slice(1)}`}async function bC(e){const t=await function(e){return fC=fC||hC(e),fC}(e),n=E_().gapi;return k$(n,e,"internal-error"),t.open({where:document.body,url:vC(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:gC,dontclear:!0},(t=>new Promise((async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=w$(e,"network-request-failed"),o=E_().setTimeout((()=>{r(i)}),mC.get());function a(){E_().clearTimeout(o),n(t)}t.ping(a).then(a,(()=>{r(i)}))}))))}const xC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class wC{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(UK){}}}function $C(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const o=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let s="";const l=Object.assign(Object.assign({},xC),{width:r.toString(),height:i.toString(),top:o,left:a}),c=Ws().toLowerCase();n&&(s=yS(c)?"_blank":n),mS(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce(((e,t)=>{let[n,r]=t;return`${e}${n}=${r},`}),"");if(function(){var e;return $S(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ws())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==s)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",s),new wC(null);const d=window.open(t||"",s,u);k$(d,e,"popup-blocked");try{d.focus()}catch(UK){}return new wC(d)}const SC="__/auth/handler",_C="emulator/auth/handler",CC=encodeURIComponent("fac");async function kC(e,t,n,r,i,o){k$(e.config.authDomain,e,"auth-domain-config-required"),k$(e.config.apiKey,e,"invalid-api-key");const a={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:jc,eventId:i};if(t instanceof t_){t.setDefaultLanguage(e.languageCode),a.providerId=t.providerId||"",nl(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(o||{}))a[e]=t}if(t instanceof n_){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(a.scopes=e.join(","))}e.tenantId&&(a.tid=e.tenantId);const s=a;for(const u of Object.keys(s))void 0===s[u]&&delete s[u];const l=await e._getAppCheckToken(),c=l?`#${CC}=${encodeURIComponent(l)}`:"";return`${function(e){let{config:t}=e;if(!t.emulator)return`https://${t.authDomain}/${SC}`;return O$(t,_C)}(e)}?${al(s).slice(1)}${c}`}const EC="webStorageSupport";const TC=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=S_,this._completeRedirectFn=rC,this._overrideRedirectResult=eC}async _openPopup(e,t,n,r){var i;T$(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return $C(e,await kC(e,t,n,I$(),r),C_())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){E_().location.href=e}(await kC(e,t,n,I$(),r)),new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(T$(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await bC(e),n=new iC(e);return t.register("authEvent",(t=>{k$(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(EC,{type:EC},(n=>{var r;const i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[EC];void 0!==i&&t(!!i),x$(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=cC(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return _S()||gS()||$S()}};var IC="@firebase/auth",PC="1.8.1";class RC{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){k$(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const MC=Bs("authIdTokenMaxAge")||300;let AC=null;function OC(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Uc();const t=Rc(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=Rc(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(il(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;x$(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:TC,persistence:[F_,w_,S_]}),r=Bs("authTokenSyncURL");if(r&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=(i=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>MC)return;const r=null===t||void 0===t?void 0:t.token;AC!==r&&(AC=r,await fetch(i,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))});!function(e,t,n){vl(e).beforeAuthStateChanged(t,n)}(n,t,(()=>t(n.currentUser))),function(e,t,n,r){vl(e).onIdTokenChanged(t,n,r)}(n,(e=>t(e)))}}var i;const o=js("auth");return o&&BS(n,`http://${o}`),n}var LC,NC,DC,FC;function jC(){return jC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},jC.apply(null,arguments)}function zC(e,t){let{title:n,titleId:i,...o}=e;return r.createElement("svg",jC({width:24,height:24,viewBox:"-0.5 0 48 48",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",ref:t,"aria-labelledby":i},o),n?r.createElement("title",{id:i},n):null,NC||(NC=r.createElement("desc",null,"Created with Sketch.")),DC||(DC=r.createElement("defs",null)),FC||(FC=r.createElement("g",{id:"Icons",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},r.createElement("g",{id:"Color-",transform:"translate(-401.000000, -860.000000)"},r.createElement("g",{id:"Google",transform:"translate(401.000000, 860.000000)"},r.createElement("path",{d:"M9.82727273,24 C9.82727273,22.4757333 10.0804318,21.0144 10.5322727,19.6437333 L2.62345455,13.6042667 C1.08206818,16.7338667 0.213636364,20.2602667 0.213636364,24 C0.213636364,27.7365333 1.081,31.2608 2.62025,34.3882667 L10.5247955,28.3370667 C10.0772273,26.9728 9.82727273,25.5168 9.82727273,24",id:"Fill-1",fill:"#FBBC05"}),r.createElement("path",{d:"M23.7136364,10.1333333 C27.025,10.1333333 30.0159091,11.3066667 32.3659091,13.2266667 L39.2022727,6.4 C35.0363636,2.77333333 29.6954545,0.533333333 23.7136364,0.533333333 C14.4268636,0.533333333 6.44540909,5.84426667 2.62345455,13.6042667 L10.5322727,19.6437333 C12.3545909,14.112 17.5491591,10.1333333 23.7136364,10.1333333",id:"Fill-2",fill:"#EB4335"}),r.createElement("path",{d:"M23.7136364,37.8666667 C17.5491591,37.8666667 12.3545909,33.888 10.5322727,28.3562667 L2.62345455,34.3946667 C6.44540909,42.1557333 14.4268636,47.4666667 23.7136364,47.4666667 C29.4455,47.4666667 34.9177955,45.4314667 39.0249545,41.6181333 L31.5177727,35.8144 C29.3995682,37.1488 26.7323182,37.8666667 23.7136364,37.8666667",id:"Fill-3",fill:"#34A853"}),r.createElement("path",{d:"M46.1454545,24 C46.1454545,22.6133333 45.9318182,21.12 45.6113636,19.7333333 L23.7136364,19.7333333 L23.7136364,28.8 L36.3181818,28.8 C35.6879545,31.8912 33.9724545,34.2677333 31.5177727,35.8144 L39.0249545,41.6181333 C43.3393409,37.6138667 46.1454545,31.6490667 46.1454545,24",id:"Fill-4",fill:"#4285F4"}))))))}!function(e){RS=e}({loadJS:e=>new Promise(((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=w$("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)})),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),LC="Browser",Pc(new bl("auth",((e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:a,authDomain:s}=r.options;k$(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:a,authDomain:s,clientPlatform:LC,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:CS(LC)},c=new TS(r,i,o,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(cS);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),Pc(new bl("auth-internal",(e=>(e=>new RC(e))(IS(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),Hc(IC,PC,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(LC)),Hc(IC,PC,"esm2017");const BC=r.forwardRef(zC);n.p;function UC(){const e=OC();return new Promise((t=>{e.onAuthStateChanged((e=>{if(e){console.log("User ID:",e.uid);const n=e.providerData[0];if(n)switch(n.providerId){case"password":console.log("User signed in with Email/Password."),t("password");break;case"google.com":console.log("User signed in with Google."),t("Google");break;default:console.log("User signed in with another provider:",n.providerId),t("another")}else t("unknown provider")}else console.log("No user is signed in."),t("no user")}))}))}function WC(e){let{className:t}=e;const n=Ce(),[i,o]=(0,r.useState)(!1),[a,s]=(0,r.useState)(!1),l=he((e=>e.page.isLoginFormOpened)),c=Mw((()=>{n(Fa({isOpened:!1}))})),u=he((e=>e.auth.authorizationStatus))===fs.Auth,d={email:{value:"",error:!1,errorValue:ps.EmailError,regexp:/^[^\s@]+@[^\s@]+\.[^\s@]{2,}$/},password:{value:"",error:!1,errorValue:ps.PasswordError,regexp:/(?=.*[0-9])(?=.*[A-Za-z])[A-Za-z0-9]{6,}/}},[p,h]=(0,r.useState)(d),f=he((e=>e.data.users)),m=e=>{let{target:t}=e;const{name:n,value:r}=t,i=p[n];h({...p,[n]:{...i,value:r,error:!i.regexp.test(r)}})},g=e=>f.some((t=>t.email===e)),y=()=>{n(Fa({isOpened:!1})),n(ja({isOpened:!1}))};return(0,Kt.jsx)("div",{className:"form__wrapper",children:(0,Kt.jsxs)("form",{className:`form login__form ${t}`,onSubmit:async e=>{e.preventDefault(),o(!0);const t=OC(),{email:r,password:i}=p;if(UC(),r.error||i.error)return n(Na({message:ps.AuthError})),void o(!1);try{const{user:e}=await function(e,t,n){return Oc(e.app)?Promise.reject(S$(e)):m_(vl(e),e_.credential(t,n)).catch((async t=>{throw"auth/password-does-not-meet-requirements"===t.code&&g_(e),t}))}(t,r.value,i.value),o=await e.getIdToken(),a={email:e.email,id:e.uid,token:o};g(a.email)?(localStorage.setItem("nutrition-user",JSON.stringify(a)),n(ys(a)),n(Pa({authorizationStatus:fs.Auth})),n(Ra({userInformation:a})),Ug({login:r.value,password:i.value}),y()):"Google"===await UC()&&n(Na({message:ps.HasAccountError}))}catch(Eu){"auth/wrong-password"===Eu.code||"auth/user-not-found"===Eu.code||"auth/invalid-credential"===Eu.code?n(Na({message:ps.AuthError})):n(Na({message:ps.ConnectionError})),console.error("Login error:",Eu)}finally{u&&n(Da(qa.Root)),o(!1)}},autoComplete:"off",ref:c,children:[(0,Kt.jsxs)("div",{className:"form__header",children:[(0,Kt.jsx)("h3",{className:"title title--3 form__title",children:"\u0412\u043e\u0439\u0442\u0438"}),(0,Kt.jsx)("button",{className:"button form__button--close",onClick:()=>n(Fa({isOpened:!l})),children:(0,Kt.jsx)(Qb,{})})]}),(0,Kt.jsxs)("fieldset",{className:"form__fieldset form__fieldset--no-grid",children:[Object.keys(p).map((e=>{const t=p[e];return(0,Kt.jsxs)("label",{className:"form__item",htmlFor:`login-${e}`,children:[(0,Kt.jsx)("span",{className:"form__label",children:"email"===e?"E-mail:":"\u041f\u0430\u0440\u043e\u043b\u044c:"}),(0,Kt.jsx)("input",{className:"form__input "+(t.error?"input--error":""),type:"email"===e?"email":"password",name:e,id:`login-${e}`,required:!0,value:t.value,onChange:m,autoComplete:"password"===e?"off":"on"}),t.error&&(0,Kt.jsx)("span",{className:"form__error",children:t.errorValue})]},e)})),(0,Kt.jsxs)("div",{className:"form__buttons",children:[(0,Kt.jsx)("button",{className:"button button--submit",type:"submit",disabled:a,children:i?(0,Kt.jsx)(Vb,{color:"white",size:"16"}):"\u0412\u043e\u0439\u0442\u0438"}),(0,Kt.jsx)("button",{className:"button button--google",type:"button",onClick:async()=>{s(!0);try{const e=OC(),t=new i_,r=await async function(e,t,n){if(Oc(e.app))return Promise.reject(w$(e,"operation-not-supported-in-this-environment"));const r=IS(e);_$(e,t,t_);const i=V_(r,n);return new X_(r,"signInViaPopup",t,i).executeNotNull()}(e,t),i=r.user;if(!i.email)throw new Error("Google account email not found");const o=await i.getIdToken(),a={email:i.email,id:i.uid,token:o};if(g(i.email))localStorage.setItem("nutrition-user",JSON.stringify(a)),n(ys(a));else{const e=i.displayName||"Unknown",t=i.photoURL||"";await zg({id:i.uid,name:e,email:i.email,isAdmin:!1,mealSchedule:[],trainingSessions:[],avatar:t,token:o,gender:ls.Male,age:0,weight:0,target:ns.WeightMaintenance,height:0,activityLevel:es.Sedentary},n)}n(Pa({authorizationStatus:fs.Auth})),y()}catch(Eu){console.error("Google Sign-In Error:",Eu),n(Na({message:ps.AuthError}))}finally{u&&n(Da(qa.Root)),s(!1)}},disabled:i,children:a?(0,Kt.jsx)(Vb,{color:"white",size:"16"}):(0,Kt.jsxs)(Kt.Fragment,{children:["\u0412\u043e\u0439\u0442\u0438 \u0441 ",(0,Kt.jsx)(BC,{})]})})]}),(0,Kt.jsxs)("div",{className:"form__buttons form__buttons--column",children:[(0,Kt.jsx)("p",{children:"\u0415\u0449\u0435 \u043d\u0435\u0442 \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u0430?"}),(0,Kt.jsx)("button",{className:"button",type:"button",onClick:()=>{n(Fa({isOpened:!1})),n(ja({isOpened:!0})),n(za({step:cs.AccountSetup}))},disabled:i||a,children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"})]})]})]})})}var VC,HC;function qC(){return qC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qC.apply(null,arguments)}function GC(e,t){let{title:n,titleId:i,...o}=e;return r.createElement("svg",qC({width:52,height:52,viewBox:"0 0 52 52",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":i},o),n?r.createElement("title",{id:i},n):null,VC||(VC=r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.78491 11.1497C6.78491 6.43315 10.6084 2.60962 15.325 2.60962H33.1378C35.4028 2.60962 37.575 3.50938 39.1765 5.11095L42.714 8.64837C44.3155 10.2499 45.2153 12.4222 45.2153 14.6871V41.04C45.2153 45.7566 41.3918 49.5801 36.6752 49.5801H15.325C10.6084 49.5801 6.78491 45.7566 6.78491 41.04V11.1497ZM40.9452 17.5548V41.04C40.9452 43.3983 39.0335 45.31 36.6752 45.31H15.325C12.9667 45.31 11.055 43.3983 11.055 41.04V11.1497C11.055 8.79142 12.9667 6.87966 15.325 6.87966H30.2701V11.1497C30.2701 14.6871 33.1378 17.5548 36.6752 17.5548H40.9452ZM40.7084 13.2847C40.4987 12.6818 40.1545 12.1277 39.6946 11.6677L36.1572 8.13033C35.6972 7.67037 35.1431 7.32618 34.5402 7.11652V11.1497C34.5402 12.3288 35.4961 13.2847 36.6752 13.2847H40.7084Z",fill:"#141416"})),HC||(HC=r.createElement("path",{d:"M25.1828 19.8517C24.931 19.9559 24.6951 20.1103 24.4904 20.315L18.0853 26.7201C17.2515 27.5539 17.2515 28.9057 18.0853 29.7395C18.9191 30.5732 20.2709 30.5732 21.1047 29.7395L23.865 26.9791V36.7699C23.865 37.949 24.8209 38.9049 26 38.9049C27.1792 38.9049 28.1351 37.949 28.1351 36.7699V26.9791L30.8954 29.7395C31.7292 30.5732 33.081 30.5732 33.9148 29.7395C34.7486 28.9057 34.7486 27.5539 33.9148 26.7201L27.5097 20.315C26.8807 19.686 25.9567 19.5315 25.1828 19.8517Z",fill:"#141416"})))}const KC=r.forwardRef(GC);n.p;var YC=n(173),ZC=n.n(YC);const XC=new Map([["1km","application/vnd.1000minds.decision-model+xml"],["3dml","text/vnd.in3d.3dml"],["3ds","image/x-3ds"],["3g2","video/3gpp2"],["3gp","video/3gp"],["3gpp","video/3gpp"],["3mf","model/3mf"],["7z","application/x-7z-compressed"],["7zip","application/x-7z-compressed"],["123","application/vnd.lotus-1-2-3"],["aab","application/x-authorware-bin"],["aac","audio/x-acc"],["aam","application/x-authorware-map"],["aas","application/x-authorware-seg"],["abw","application/x-abiword"],["ac","application/vnd.nokia.n-gage.ac+xml"],["ac3","audio/ac3"],["acc","application/vnd.americandynamics.acc"],["ace","application/x-ace-compressed"],["acu","application/vnd.acucobol"],["acutc","application/vnd.acucorp"],["adp","audio/adpcm"],["aep","application/vnd.audiograph"],["afm","application/x-font-type1"],["afp","application/vnd.ibm.modcap"],["ahead","application/vnd.ahead.space"],["ai","application/pdf"],["aif","audio/x-aiff"],["aifc","audio/x-aiff"],["aiff","audio/x-aiff"],["air","application/vnd.adobe.air-application-installer-package+zip"],["ait","application/vnd.dvb.ait"],["ami","application/vnd.amiga.ami"],["amr","audio/amr"],["apk","application/vnd.android.package-archive"],["apng","image/apng"],["appcache","text/cache-manifest"],["application","application/x-ms-application"],["apr","application/vnd.lotus-approach"],["arc","application/x-freearc"],["arj","application/x-arj"],["asc","application/pgp-signature"],["asf","video/x-ms-asf"],["asm","text/x-asm"],["aso","application/vnd.accpac.simply.aso"],["asx","video/x-ms-asf"],["atc","application/vnd.acucorp"],["atom","application/atom+xml"],["atomcat","application/atomcat+xml"],["atomdeleted","application/atomdeleted+xml"],["atomsvc","application/atomsvc+xml"],["atx","application/vnd.antix.game-component"],["au","audio/x-au"],["avi","video/x-msvideo"],["avif","image/avif"],["aw","application/applixware"],["azf","application/vnd.airzip.filesecure.azf"],["azs","application/vnd.airzip.filesecure.azs"],["azv","image/vnd.airzip.accelerator.azv"],["azw","application/vnd.amazon.ebook"],["b16","image/vnd.pco.b16"],["bat","application/x-msdownload"],["bcpio","application/x-bcpio"],["bdf","application/x-font-bdf"],["bdm","application/vnd.syncml.dm+wbxml"],["bdoc","application/x-bdoc"],["bed","application/vnd.realvnc.bed"],["bh2","application/vnd.fujitsu.oasysprs"],["bin","application/octet-stream"],["blb","application/x-blorb"],["blorb","application/x-blorb"],["bmi","application/vnd.bmi"],["bmml","application/vnd.balsamiq.bmml+xml"],["bmp","image/bmp"],["book","application/vnd.framemaker"],["box","application/vnd.previewsystems.box"],["boz","application/x-bzip2"],["bpk","application/octet-stream"],["bpmn","application/octet-stream"],["bsp","model/vnd.valve.source.compiled-map"],["btif","image/prs.btif"],["buffer","application/octet-stream"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["c","text/x-c"],["c4d","application/vnd.clonk.c4group"],["c4f","application/vnd.clonk.c4group"],["c4g","application/vnd.clonk.c4group"],["c4p","application/vnd.clonk.c4group"],["c4u","application/vnd.clonk.c4group"],["c11amc","application/vnd.cluetrust.cartomobile-config"],["c11amz","application/vnd.cluetrust.cartomobile-config-pkg"],["cab","application/vnd.ms-cab-compressed"],["caf","audio/x-caf"],["cap","application/vnd.tcpdump.pcap"],["car","application/vnd.curl.car"],["cat","application/vnd.ms-pki.seccat"],["cb7","application/x-cbr"],["cba","application/x-cbr"],["cbr","application/x-cbr"],["cbt","application/x-cbr"],["cbz","application/x-cbr"],["cc","text/x-c"],["cco","application/x-cocoa"],["cct","application/x-director"],["ccxml","application/ccxml+xml"],["cdbcmsg","application/vnd.contact.cmsg"],["cda","application/x-cdf"],["cdf","application/x-netcdf"],["cdfx","application/cdfx+xml"],["cdkey","application/vnd.mediastation.cdkey"],["cdmia","application/cdmi-capability"],["cdmic","application/cdmi-container"],["cdmid","application/cdmi-domain"],["cdmio","application/cdmi-object"],["cdmiq","application/cdmi-queue"],["cdr","application/cdr"],["cdx","chemical/x-cdx"],["cdxml","application/vnd.chemdraw+xml"],["cdy","application/vnd.cinderella"],["cer","application/pkix-cert"],["cfs","application/x-cfs-compressed"],["cgm","image/cgm"],["chat","application/x-chat"],["chm","application/vnd.ms-htmlhelp"],["chrt","application/vnd.kde.kchart"],["cif","chemical/x-cif"],["cii","application/vnd.anser-web-certificate-issue-initiation"],["cil","application/vnd.ms-artgalry"],["cjs","application/node"],["cla","application/vnd.claymore"],["class","application/octet-stream"],["clkk","application/vnd.crick.clicker.keyboard"],["clkp","application/vnd.crick.clicker.palette"],["clkt","application/vnd.crick.clicker.template"],["clkw","application/vnd.crick.clicker.wordbank"],["clkx","application/vnd.crick.clicker"],["clp","application/x-msclip"],["cmc","application/vnd.cosmocaller"],["cmdf","chemical/x-cmdf"],["cml","chemical/x-cml"],["cmp","application/vnd.yellowriver-custom-menu"],["cmx","image/x-cmx"],["cod","application/vnd.rim.cod"],["coffee","text/coffeescript"],["com","application/x-msdownload"],["conf","text/plain"],["cpio","application/x-cpio"],["cpp","text/x-c"],["cpt","application/mac-compactpro"],["crd","application/x-mscardfile"],["crl","application/pkix-crl"],["crt","application/x-x509-ca-cert"],["crx","application/x-chrome-extension"],["cryptonote","application/vnd.rig.cryptonote"],["csh","application/x-csh"],["csl","application/vnd.citationstyles.style+xml"],["csml","chemical/x-csml"],["csp","application/vnd.commonspace"],["csr","application/octet-stream"],["css","text/css"],["cst","application/x-director"],["csv","text/csv"],["cu","application/cu-seeme"],["curl","text/vnd.curl"],["cww","application/prs.cww"],["cxt","application/x-director"],["cxx","text/x-c"],["dae","model/vnd.collada+xml"],["daf","application/vnd.mobius.daf"],["dart","application/vnd.dart"],["dataless","application/vnd.fdsn.seed"],["davmount","application/davmount+xml"],["dbf","application/vnd.dbf"],["dbk","application/docbook+xml"],["dcr","application/x-director"],["dcurl","text/vnd.curl.dcurl"],["dd2","application/vnd.oma.dd2+xml"],["ddd","application/vnd.fujixerox.ddd"],["ddf","application/vnd.syncml.dmddf+xml"],["dds","image/vnd.ms-dds"],["deb","application/x-debian-package"],["def","text/plain"],["deploy","application/octet-stream"],["der","application/x-x509-ca-cert"],["dfac","application/vnd.dreamfactory"],["dgc","application/x-dgc-compressed"],["dic","text/x-c"],["dir","application/x-director"],["dis","application/vnd.mobius.dis"],["disposition-notification","message/disposition-notification"],["dist","application/octet-stream"],["distz","application/octet-stream"],["djv","image/vnd.djvu"],["djvu","image/vnd.djvu"],["dll","application/octet-stream"],["dmg","application/x-apple-diskimage"],["dmn","application/octet-stream"],["dmp","application/vnd.tcpdump.pcap"],["dms","application/octet-stream"],["dna","application/vnd.dna"],["doc","application/msword"],["docm","application/vnd.ms-word.template.macroEnabled.12"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["dot","application/msword"],["dotm","application/vnd.ms-word.template.macroEnabled.12"],["dotx","application/vnd.openxmlformats-officedocument.wordprocessingml.template"],["dp","application/vnd.osgi.dp"],["dpg","application/vnd.dpgraph"],["dra","audio/vnd.dra"],["drle","image/dicom-rle"],["dsc","text/prs.lines.tag"],["dssc","application/dssc+der"],["dtb","application/x-dtbook+xml"],["dtd","application/xml-dtd"],["dts","audio/vnd.dts"],["dtshd","audio/vnd.dts.hd"],["dump","application/octet-stream"],["dvb","video/vnd.dvb.file"],["dvi","application/x-dvi"],["dwd","application/atsc-dwd+xml"],["dwf","model/vnd.dwf"],["dwg","image/vnd.dwg"],["dxf","image/vnd.dxf"],["dxp","application/vnd.spotfire.dxp"],["dxr","application/x-director"],["ear","application/java-archive"],["ecelp4800","audio/vnd.nuera.ecelp4800"],["ecelp7470","audio/vnd.nuera.ecelp7470"],["ecelp9600","audio/vnd.nuera.ecelp9600"],["ecma","application/ecmascript"],["edm","application/vnd.novadigm.edm"],["edx","application/vnd.novadigm.edx"],["efif","application/vnd.picsel"],["ei6","application/vnd.pg.osasli"],["elc","application/octet-stream"],["emf","image/emf"],["eml","message/rfc822"],["emma","application/emma+xml"],["emotionml","application/emotionml+xml"],["emz","application/x-msmetafile"],["eol","audio/vnd.digital-winds"],["eot","application/vnd.ms-fontobject"],["eps","application/postscript"],["epub","application/epub+zip"],["es","application/ecmascript"],["es3","application/vnd.eszigno3+xml"],["esa","application/vnd.osgi.subsystem"],["esf","application/vnd.epson.esf"],["et3","application/vnd.eszigno3+xml"],["etx","text/x-setext"],["eva","application/x-eva"],["evy","application/x-envoy"],["exe","application/octet-stream"],["exi","application/exi"],["exp","application/express"],["exr","image/aces"],["ext","application/vnd.novadigm.ext"],["ez","application/andrew-inset"],["ez2","application/vnd.ezpix-album"],["ez3","application/vnd.ezpix-package"],["f","text/x-fortran"],["f4v","video/mp4"],["f77","text/x-fortran"],["f90","text/x-fortran"],["fbs","image/vnd.fastbidsheet"],["fcdt","application/vnd.adobe.formscentral.fcdt"],["fcs","application/vnd.isac.fcs"],["fdf","application/vnd.fdf"],["fdt","application/fdt+xml"],["fe_launch","application/vnd.denovo.fcselayout-link"],["fg5","application/vnd.fujitsu.oasysgp"],["fgd","application/x-director"],["fh","image/x-freehand"],["fh4","image/x-freehand"],["fh5","image/x-freehand"],["fh7","image/x-freehand"],["fhc","image/x-freehand"],["fig","application/x-xfig"],["fits","image/fits"],["flac","audio/x-flac"],["fli","video/x-fli"],["flo","application/vnd.micrografx.flo"],["flv","video/x-flv"],["flw","application/vnd.kde.kivio"],["flx","text/vnd.fmi.flexstor"],["fly","text/vnd.fly"],["fm","application/vnd.framemaker"],["fnc","application/vnd.frogans.fnc"],["fo","application/vnd.software602.filler.form+xml"],["for","text/x-fortran"],["fpx","image/vnd.fpx"],["frame","application/vnd.framemaker"],["fsc","application/vnd.fsc.weblaunch"],["fst","image/vnd.fst"],["ftc","application/vnd.fluxtime.clip"],["fti","application/vnd.anser-web-funds-transfer-initiation"],["fvt","video/vnd.fvt"],["fxp","application/vnd.adobe.fxp"],["fxpl","application/vnd.adobe.fxp"],["fzs","application/vnd.fuzzysheet"],["g2w","application/vnd.geoplan"],["g3","image/g3fax"],["g3w","application/vnd.geospace"],["gac","application/vnd.groove-account"],["gam","application/x-tads"],["gbr","application/rpki-ghostbusters"],["gca","application/x-gca-compressed"],["gdl","model/vnd.gdl"],["gdoc","application/vnd.google-apps.document"],["geo","application/vnd.dynageo"],["geojson","application/geo+json"],["gex","application/vnd.geometry-explorer"],["ggb","application/vnd.geogebra.file"],["ggt","application/vnd.geogebra.tool"],["ghf","application/vnd.groove-help"],["gif","image/gif"],["gim","application/vnd.groove-identity-message"],["glb","model/gltf-binary"],["gltf","model/gltf+json"],["gml","application/gml+xml"],["gmx","application/vnd.gmx"],["gnumeric","application/x-gnumeric"],["gpg","application/gpg-keys"],["gph","application/vnd.flographit"],["gpx","application/gpx+xml"],["gqf","application/vnd.grafeq"],["gqs","application/vnd.grafeq"],["gram","application/srgs"],["gramps","application/x-gramps-xml"],["gre","application/vnd.geometry-explorer"],["grv","application/vnd.groove-injector"],["grxml","application/srgs+xml"],["gsf","application/x-font-ghostscript"],["gsheet","application/vnd.google-apps.spreadsheet"],["gslides","application/vnd.google-apps.presentation"],["gtar","application/x-gtar"],["gtm","application/vnd.groove-tool-message"],["gtw","model/vnd.gtw"],["gv","text/vnd.graphviz"],["gxf","application/gxf"],["gxt","application/vnd.geonext"],["gz","application/gzip"],["gzip","application/gzip"],["h","text/x-c"],["h261","video/h261"],["h263","video/h263"],["h264","video/h264"],["hal","application/vnd.hal+xml"],["hbci","application/vnd.hbci"],["hbs","text/x-handlebars-template"],["hdd","application/x-virtualbox-hdd"],["hdf","application/x-hdf"],["heic","image/heic"],["heics","image/heic-sequence"],["heif","image/heif"],["heifs","image/heif-sequence"],["hej2","image/hej2k"],["held","application/atsc-held+xml"],["hh","text/x-c"],["hjson","application/hjson"],["hlp","application/winhlp"],["hpgl","application/vnd.hp-hpgl"],["hpid","application/vnd.hp-hpid"],["hps","application/vnd.hp-hps"],["hqx","application/mac-binhex40"],["hsj2","image/hsj2"],["htc","text/x-component"],["htke","application/vnd.kenameaapp"],["htm","text/html"],["html","text/html"],["hvd","application/vnd.yamaha.hv-dic"],["hvp","application/vnd.yamaha.hv-voice"],["hvs","application/vnd.yamaha.hv-script"],["i2g","application/vnd.intergeo"],["icc","application/vnd.iccprofile"],["ice","x-conference/x-cooltalk"],["icm","application/vnd.iccprofile"],["ico","image/x-icon"],["ics","text/calendar"],["ief","image/ief"],["ifb","text/calendar"],["ifm","application/vnd.shana.informed.formdata"],["iges","model/iges"],["igl","application/vnd.igloader"],["igm","application/vnd.insors.igm"],["igs","model/iges"],["igx","application/vnd.micrografx.igx"],["iif","application/vnd.shana.informed.interchange"],["img","application/octet-stream"],["imp","application/vnd.accpac.simply.imp"],["ims","application/vnd.ms-ims"],["in","text/plain"],["ini","text/plain"],["ink","application/inkml+xml"],["inkml","application/inkml+xml"],["install","application/x-install-instructions"],["iota","application/vnd.astraea-software.iota"],["ipfix","application/ipfix"],["ipk","application/vnd.shana.informed.package"],["irm","application/vnd.ibm.rights-management"],["irp","application/vnd.irepository.package+xml"],["iso","application/x-iso9660-image"],["itp","application/vnd.shana.informed.formtemplate"],["its","application/its+xml"],["ivp","application/vnd.immervision-ivp"],["ivu","application/vnd.immervision-ivu"],["jad","text/vnd.sun.j2me.app-descriptor"],["jade","text/jade"],["jam","application/vnd.jam"],["jar","application/java-archive"],["jardiff","application/x-java-archive-diff"],["java","text/x-java-source"],["jhc","image/jphc"],["jisp","application/vnd.jisp"],["jls","image/jls"],["jlt","application/vnd.hp-jlyt"],["jng","image/x-jng"],["jnlp","application/x-java-jnlp-file"],["joda","application/vnd.joost.joda-archive"],["jp2","image/jp2"],["jpe","image/jpeg"],["jpeg","image/jpeg"],["jpf","image/jpx"],["jpg","image/jpeg"],["jpg2","image/jp2"],["jpgm","video/jpm"],["jpgv","video/jpeg"],["jph","image/jph"],["jpm","video/jpm"],["jpx","image/jpx"],["js","application/javascript"],["json","application/json"],["json5","application/json5"],["jsonld","application/ld+json"],["jsonl","application/jsonl"],["jsonml","application/jsonml+json"],["jsx","text/jsx"],["jxr","image/jxr"],["jxra","image/jxra"],["jxrs","image/jxrs"],["jxs","image/jxs"],["jxsc","image/jxsc"],["jxsi","image/jxsi"],["jxss","image/jxss"],["kar","audio/midi"],["karbon","application/vnd.kde.karbon"],["kdb","application/octet-stream"],["kdbx","application/x-keepass2"],["key","application/x-iwork-keynote-sffkey"],["kfo","application/vnd.kde.kformula"],["kia","application/vnd.kidspiration"],["kml","application/vnd.google-earth.kml+xml"],["kmz","application/vnd.google-earth.kmz"],["kne","application/vnd.kinar"],["knp","application/vnd.kinar"],["kon","application/vnd.kde.kontour"],["kpr","application/vnd.kde.kpresenter"],["kpt","application/vnd.kde.kpresenter"],["kpxx","application/vnd.ds-keypoint"],["ksp","application/vnd.kde.kspread"],["ktr","application/vnd.kahootz"],["ktx","image/ktx"],["ktx2","image/ktx2"],["ktz","application/vnd.kahootz"],["kwd","application/vnd.kde.kword"],["kwt","application/vnd.kde.kword"],["lasxml","application/vnd.las.las+xml"],["latex","application/x-latex"],["lbd","application/vnd.llamagraphics.life-balance.desktop"],["lbe","application/vnd.llamagraphics.life-balance.exchange+xml"],["les","application/vnd.hhe.lesson-player"],["less","text/less"],["lgr","application/lgr+xml"],["lha","application/octet-stream"],["link66","application/vnd.route66.link66+xml"],["list","text/plain"],["list3820","application/vnd.ibm.modcap"],["listafp","application/vnd.ibm.modcap"],["litcoffee","text/coffeescript"],["lnk","application/x-ms-shortcut"],["log","text/plain"],["lostxml","application/lost+xml"],["lrf","application/octet-stream"],["lrm","application/vnd.ms-lrm"],["ltf","application/vnd.frogans.ltf"],["lua","text/x-lua"],["luac","application/x-lua-bytecode"],["lvp","audio/vnd.lucent.voice"],["lwp","application/vnd.lotus-wordpro"],["lzh","application/octet-stream"],["m1v","video/mpeg"],["m2a","audio/mpeg"],["m2v","video/mpeg"],["m3a","audio/mpeg"],["m3u","text/plain"],["m3u8","application/vnd.apple.mpegurl"],["m4a","audio/x-m4a"],["m4p","application/mp4"],["m4s","video/iso.segment"],["m4u","application/vnd.mpegurl"],["m4v","video/x-m4v"],["m13","application/x-msmediaview"],["m14","application/x-msmediaview"],["m21","application/mp21"],["ma","application/mathematica"],["mads","application/mads+xml"],["maei","application/mmt-aei+xml"],["mag","application/vnd.ecowin.chart"],["maker","application/vnd.framemaker"],["man","text/troff"],["manifest","text/cache-manifest"],["map","application/json"],["mar","application/octet-stream"],["markdown","text/markdown"],["mathml","application/mathml+xml"],["mb","application/mathematica"],["mbk","application/vnd.mobius.mbk"],["mbox","application/mbox"],["mc1","application/vnd.medcalcdata"],["mcd","application/vnd.mcd"],["mcurl","text/vnd.curl.mcurl"],["md","text/markdown"],["mdb","application/x-msaccess"],["mdi","image/vnd.ms-modi"],["mdx","text/mdx"],["me","text/troff"],["mesh","model/mesh"],["meta4","application/metalink4+xml"],["metalink","application/metalink+xml"],["mets","application/mets+xml"],["mfm","application/vnd.mfmp"],["mft","application/rpki-manifest"],["mgp","application/vnd.osgeo.mapguide.package"],["mgz","application/vnd.proteus.magazine"],["mid","audio/midi"],["midi","audio/midi"],["mie","application/x-mie"],["mif","application/vnd.mif"],["mime","message/rfc822"],["mj2","video/mj2"],["mjp2","video/mj2"],["mjs","application/javascript"],["mk3d","video/x-matroska"],["mka","audio/x-matroska"],["mkd","text/x-markdown"],["mks","video/x-matroska"],["mkv","video/x-matroska"],["mlp","application/vnd.dolby.mlp"],["mmd","application/vnd.chipnuts.karaoke-mmd"],["mmf","application/vnd.smaf"],["mml","text/mathml"],["mmr","image/vnd.fujixerox.edmics-mmr"],["mng","video/x-mng"],["mny","application/x-msmoney"],["mobi","application/x-mobipocket-ebook"],["mods","application/mods+xml"],["mov","video/quicktime"],["movie","video/x-sgi-movie"],["mp2","audio/mpeg"],["mp2a","audio/mpeg"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mp4a","audio/mp4"],["mp4s","application/mp4"],["mp4v","video/mp4"],["mp21","application/mp21"],["mpc","application/vnd.mophun.certificate"],["mpd","application/dash+xml"],["mpe","video/mpeg"],["mpeg","video/mpeg"],["mpg","video/mpeg"],["mpg4","video/mp4"],["mpga","audio/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["mpm","application/vnd.blueice.multipass"],["mpn","application/vnd.mophun.application"],["mpp","application/vnd.ms-project"],["mpt","application/vnd.ms-project"],["mpy","application/vnd.ibm.minipay"],["mqy","application/vnd.mobius.mqy"],["mrc","application/marc"],["mrcx","application/marcxml+xml"],["ms","text/troff"],["mscml","application/mediaservercontrol+xml"],["mseed","application/vnd.fdsn.mseed"],["mseq","application/vnd.mseq"],["msf","application/vnd.epson.msf"],["msg","application/vnd.ms-outlook"],["msh","model/mesh"],["msi","application/x-msdownload"],["msl","application/vnd.mobius.msl"],["msm","application/octet-stream"],["msp","application/octet-stream"],["msty","application/vnd.muvee.style"],["mtl","model/mtl"],["mts","model/vnd.mts"],["mus","application/vnd.musician"],["musd","application/mmt-usd+xml"],["musicxml","application/vnd.recordare.musicxml+xml"],["mvb","application/x-msmediaview"],["mvt","application/vnd.mapbox-vector-tile"],["mwf","application/vnd.mfer"],["mxf","application/mxf"],["mxl","application/vnd.recordare.musicxml"],["mxmf","audio/mobile-xmf"],["mxml","application/xv+xml"],["mxs","application/vnd.triscape.mxs"],["mxu","video/vnd.mpegurl"],["n-gage","application/vnd.nokia.n-gage.symbian.install"],["n3","text/n3"],["nb","application/mathematica"],["nbp","application/vnd.wolfram.player"],["nc","application/x-netcdf"],["ncx","application/x-dtbncx+xml"],["nfo","text/x-nfo"],["ngdat","application/vnd.nokia.n-gage.data"],["nitf","application/vnd.nitf"],["nlu","application/vnd.neurolanguage.nlu"],["nml","application/vnd.enliven"],["nnd","application/vnd.noblenet-directory"],["nns","application/vnd.noblenet-sealer"],["nnw","application/vnd.noblenet-web"],["npx","image/vnd.net-fpx"],["nq","application/n-quads"],["nsc","application/x-conference"],["nsf","application/vnd.lotus-notes"],["nt","application/n-triples"],["ntf","application/vnd.nitf"],["numbers","application/x-iwork-numbers-sffnumbers"],["nzb","application/x-nzb"],["oa2","application/vnd.fujitsu.oasys2"],["oa3","application/vnd.fujitsu.oasys3"],["oas","application/vnd.fujitsu.oasys"],["obd","application/x-msbinder"],["obgx","application/vnd.openblox.game+xml"],["obj","model/obj"],["oda","application/oda"],["odb","application/vnd.oasis.opendocument.database"],["odc","application/vnd.oasis.opendocument.chart"],["odf","application/vnd.oasis.opendocument.formula"],["odft","application/vnd.oasis.opendocument.formula-template"],["odg","application/vnd.oasis.opendocument.graphics"],["odi","application/vnd.oasis.opendocument.image"],["odm","application/vnd.oasis.opendocument.text-master"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogex","model/vnd.opengex"],["ogg","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["omdoc","application/omdoc+xml"],["onepkg","application/onenote"],["onetmp","application/onenote"],["onetoc","application/onenote"],["onetoc2","application/onenote"],["opf","application/oebps-package+xml"],["opml","text/x-opml"],["oprc","application/vnd.palm"],["opus","audio/ogg"],["org","text/x-org"],["osf","application/vnd.yamaha.openscoreformat"],["osfpvg","application/vnd.yamaha.openscoreformat.osfpvg+xml"],["osm","application/vnd.openstreetmap.data+xml"],["otc","application/vnd.oasis.opendocument.chart-template"],["otf","font/otf"],["otg","application/vnd.oasis.opendocument.graphics-template"],["oth","application/vnd.oasis.opendocument.text-web"],["oti","application/vnd.oasis.opendocument.image-template"],["otp","application/vnd.oasis.opendocument.presentation-template"],["ots","application/vnd.oasis.opendocument.spreadsheet-template"],["ott","application/vnd.oasis.opendocument.text-template"],["ova","application/x-virtualbox-ova"],["ovf","application/x-virtualbox-ovf"],["owl","application/rdf+xml"],["oxps","application/oxps"],["oxt","application/vnd.openofficeorg.extension"],["p","text/x-pascal"],["p7a","application/x-pkcs7-signature"],["p7b","application/x-pkcs7-certificates"],["p7c","application/pkcs7-mime"],["p7m","application/pkcs7-mime"],["p7r","application/x-pkcs7-certreqresp"],["p7s","application/pkcs7-signature"],["p8","application/pkcs8"],["p10","application/x-pkcs10"],["p12","application/x-pkcs12"],["pac","application/x-ns-proxy-autoconfig"],["pages","application/x-iwork-pages-sffpages"],["pas","text/x-pascal"],["paw","application/vnd.pawaafile"],["pbd","application/vnd.powerbuilder6"],["pbm","image/x-portable-bitmap"],["pcap","application/vnd.tcpdump.pcap"],["pcf","application/x-font-pcf"],["pcl","application/vnd.hp-pcl"],["pclxl","application/vnd.hp-pclxl"],["pct","image/x-pict"],["pcurl","application/vnd.curl.pcurl"],["pcx","image/x-pcx"],["pdb","application/x-pilot"],["pde","text/x-processing"],["pdf","application/pdf"],["pem","application/x-x509-user-cert"],["pfa","application/x-font-type1"],["pfb","application/x-font-type1"],["pfm","application/x-font-type1"],["pfr","application/font-tdpfr"],["pfx","application/x-pkcs12"],["pgm","image/x-portable-graymap"],["pgn","application/x-chess-pgn"],["pgp","application/pgp"],["php","application/x-httpd-php"],["php3","application/x-httpd-php"],["php4","application/x-httpd-php"],["phps","application/x-httpd-php-source"],["phtml","application/x-httpd-php"],["pic","image/x-pict"],["pkg","application/octet-stream"],["pki","application/pkixcmp"],["pkipath","application/pkix-pkipath"],["pkpass","application/vnd.apple.pkpass"],["pl","application/x-perl"],["plb","application/vnd.3gpp.pic-bw-large"],["plc","application/vnd.mobius.plc"],["plf","application/vnd.pocketlearn"],["pls","application/pls+xml"],["pm","application/x-perl"],["pml","application/vnd.ctc-posml"],["png","image/png"],["pnm","image/x-portable-anymap"],["portpkg","application/vnd.macports.portpkg"],["pot","application/vnd.ms-powerpoint"],["potm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["potx","application/vnd.openxmlformats-officedocument.presentationml.template"],["ppa","application/vnd.ms-powerpoint"],["ppam","application/vnd.ms-powerpoint.addin.macroEnabled.12"],["ppd","application/vnd.cups-ppd"],["ppm","image/x-portable-pixmap"],["pps","application/vnd.ms-powerpoint"],["ppsm","application/vnd.ms-powerpoint.slideshow.macroEnabled.12"],["ppsx","application/vnd.openxmlformats-officedocument.presentationml.slideshow"],["ppt","application/powerpoint"],["pptm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["pqa","application/vnd.palm"],["prc","application/x-pilot"],["pre","application/vnd.lotus-freelance"],["prf","application/pics-rules"],["provx","application/provenance+xml"],["ps","application/postscript"],["psb","application/vnd.3gpp.pic-bw-small"],["psd","application/x-photoshop"],["psf","application/x-font-linux-psf"],["pskcxml","application/pskc+xml"],["pti","image/prs.pti"],["ptid","application/vnd.pvi.ptid1"],["pub","application/x-mspublisher"],["pvb","application/vnd.3gpp.pic-bw-var"],["pwn","application/vnd.3m.post-it-notes"],["pya","audio/vnd.ms-playready.media.pya"],["pyv","video/vnd.ms-playready.media.pyv"],["qam","application/vnd.epson.quickanime"],["qbo","application/vnd.intu.qbo"],["qfx","application/vnd.intu.qfx"],["qps","application/vnd.publishare-delta-tree"],["qt","video/quicktime"],["qwd","application/vnd.quark.quarkxpress"],["qwt","application/vnd.quark.quarkxpress"],["qxb","application/vnd.quark.quarkxpress"],["qxd","application/vnd.quark.quarkxpress"],["qxl","application/vnd.quark.quarkxpress"],["qxt","application/vnd.quark.quarkxpress"],["ra","audio/x-realaudio"],["ram","audio/x-pn-realaudio"],["raml","application/raml+yaml"],["rapd","application/route-apd+xml"],["rar","application/x-rar"],["ras","image/x-cmu-raster"],["rcprofile","application/vnd.ipunplugged.rcprofile"],["rdf","application/rdf+xml"],["rdz","application/vnd.data-vision.rdz"],["relo","application/p2p-overlay+xml"],["rep","application/vnd.businessobjects"],["res","application/x-dtbresource+xml"],["rgb","image/x-rgb"],["rif","application/reginfo+xml"],["rip","audio/vnd.rip"],["ris","application/x-research-info-systems"],["rl","application/resource-lists+xml"],["rlc","image/vnd.fujixerox.edmics-rlc"],["rld","application/resource-lists-diff+xml"],["rm","audio/x-pn-realaudio"],["rmi","audio/midi"],["rmp","audio/x-pn-realaudio-plugin"],["rms","application/vnd.jcp.javame.midlet-rms"],["rmvb","application/vnd.rn-realmedia-vbr"],["rnc","application/relax-ng-compact-syntax"],["rng","application/xml"],["roa","application/rpki-roa"],["roff","text/troff"],["rp9","application/vnd.cloanto.rp9"],["rpm","audio/x-pn-realaudio-plugin"],["rpss","application/vnd.nokia.radio-presets"],["rpst","application/vnd.nokia.radio-preset"],["rq","application/sparql-query"],["rs","application/rls-services+xml"],["rsa","application/x-pkcs7"],["rsat","application/atsc-rsat+xml"],["rsd","application/rsd+xml"],["rsheet","application/urc-ressheet+xml"],["rss","application/rss+xml"],["rtf","text/rtf"],["rtx","text/richtext"],["run","application/x-makeself"],["rusd","application/route-usd+xml"],["rv","video/vnd.rn-realvideo"],["s","text/x-asm"],["s3m","audio/s3m"],["saf","application/vnd.yamaha.smaf-audio"],["sass","text/x-sass"],["sbml","application/sbml+xml"],["sc","application/vnd.ibm.secure-container"],["scd","application/x-msschedule"],["scm","application/vnd.lotus-screencam"],["scq","application/scvp-cv-request"],["scs","application/scvp-cv-response"],["scss","text/x-scss"],["scurl","text/vnd.curl.scurl"],["sda","application/vnd.stardivision.draw"],["sdc","application/vnd.stardivision.calc"],["sdd","application/vnd.stardivision.impress"],["sdkd","application/vnd.solent.sdkm+xml"],["sdkm","application/vnd.solent.sdkm+xml"],["sdp","application/sdp"],["sdw","application/vnd.stardivision.writer"],["sea","application/octet-stream"],["see","application/vnd.seemail"],["seed","application/vnd.fdsn.seed"],["sema","application/vnd.sema"],["semd","application/vnd.semd"],["semf","application/vnd.semf"],["senmlx","application/senml+xml"],["sensmlx","application/sensml+xml"],["ser","application/java-serialized-object"],["setpay","application/set-payment-initiation"],["setreg","application/set-registration-initiation"],["sfd-hdstx","application/vnd.hydrostatix.sof-data"],["sfs","application/vnd.spotfire.sfs"],["sfv","text/x-sfv"],["sgi","image/sgi"],["sgl","application/vnd.stardivision.writer-global"],["sgm","text/sgml"],["sgml","text/sgml"],["sh","application/x-sh"],["shar","application/x-shar"],["shex","text/shex"],["shf","application/shf+xml"],["shtml","text/html"],["sid","image/x-mrsid-image"],["sieve","application/sieve"],["sig","application/pgp-signature"],["sil","audio/silk"],["silo","model/mesh"],["sis","application/vnd.symbian.install"],["sisx","application/vnd.symbian.install"],["sit","application/x-stuffit"],["sitx","application/x-stuffitx"],["siv","application/sieve"],["skd","application/vnd.koan"],["skm","application/vnd.koan"],["skp","application/vnd.koan"],["skt","application/vnd.koan"],["sldm","application/vnd.ms-powerpoint.slide.macroenabled.12"],["sldx","application/vnd.openxmlformats-officedocument.presentationml.slide"],["slim","text/slim"],["slm","text/slim"],["sls","application/route-s-tsid+xml"],["slt","application/vnd.epson.salt"],["sm","application/vnd.stepmania.stepchart"],["smf","application/vnd.stardivision.math"],["smi","application/smil"],["smil","application/smil"],["smv","video/x-smv"],["smzip","application/vnd.stepmania.package"],["snd","audio/basic"],["snf","application/x-font-snf"],["so","application/octet-stream"],["spc","application/x-pkcs7-certificates"],["spdx","text/spdx"],["spf","application/vnd.yamaha.smaf-phrase"],["spl","application/x-futuresplash"],["spot","text/vnd.in3d.spot"],["spp","application/scvp-vp-response"],["spq","application/scvp-vp-request"],["spx","audio/ogg"],["sql","application/x-sql"],["src","application/x-wais-source"],["srt","application/x-subrip"],["sru","application/sru+xml"],["srx","application/sparql-results+xml"],["ssdl","application/ssdl+xml"],["sse","application/vnd.kodak-descriptor"],["ssf","application/vnd.epson.ssf"],["ssml","application/ssml+xml"],["sst","application/octet-stream"],["st","application/vnd.sailingtracker.track"],["stc","application/vnd.sun.xml.calc.template"],["std","application/vnd.sun.xml.draw.template"],["stf","application/vnd.wt.stf"],["sti","application/vnd.sun.xml.impress.template"],["stk","application/hyperstudio"],["stl","model/stl"],["stpx","model/step+xml"],["stpxz","model/step-xml+zip"],["stpz","model/step+zip"],["str","application/vnd.pg.format"],["stw","application/vnd.sun.xml.writer.template"],["styl","text/stylus"],["stylus","text/stylus"],["sub","text/vnd.dvb.subtitle"],["sus","application/vnd.sus-calendar"],["susp","application/vnd.sus-calendar"],["sv4cpio","application/x-sv4cpio"],["sv4crc","application/x-sv4crc"],["svc","application/vnd.dvb.service"],["svd","application/vnd.svd"],["svg","image/svg+xml"],["svgz","image/svg+xml"],["swa","application/x-director"],["swf","application/x-shockwave-flash"],["swi","application/vnd.aristanetworks.swi"],["swidtag","application/swid+xml"],["sxc","application/vnd.sun.xml.calc"],["sxd","application/vnd.sun.xml.draw"],["sxg","application/vnd.sun.xml.writer.global"],["sxi","application/vnd.sun.xml.impress"],["sxm","application/vnd.sun.xml.math"],["sxw","application/vnd.sun.xml.writer"],["t","text/troff"],["t3","application/x-t3vm-image"],["t38","image/t38"],["taglet","application/vnd.mynfc"],["tao","application/vnd.tao.intent-module-archive"],["tap","image/vnd.tencent.tap"],["tar","application/x-tar"],["tcap","application/vnd.3gpp2.tcap"],["tcl","application/x-tcl"],["td","application/urc-targetdesc+xml"],["teacher","application/vnd.smart.teacher"],["tei","application/tei+xml"],["teicorpus","application/tei+xml"],["tex","application/x-tex"],["texi","application/x-texinfo"],["texinfo","application/x-texinfo"],["text","text/plain"],["tfi","application/thraud+xml"],["tfm","application/x-tex-tfm"],["tfx","image/tiff-fx"],["tga","image/x-tga"],["tgz","application/x-tar"],["thmx","application/vnd.ms-officetheme"],["tif","image/tiff"],["tiff","image/tiff"],["tk","application/x-tcl"],["tmo","application/vnd.tmobile-livetv"],["toml","application/toml"],["torrent","application/x-bittorrent"],["tpl","application/vnd.groove-tool-template"],["tpt","application/vnd.trid.tpt"],["tr","text/troff"],["tra","application/vnd.trueapp"],["trig","application/trig"],["trm","application/x-msterminal"],["ts","video/mp2t"],["tsd","application/timestamped-data"],["tsv","text/tab-separated-values"],["ttc","font/collection"],["ttf","font/ttf"],["ttl","text/turtle"],["ttml","application/ttml+xml"],["twd","application/vnd.simtech-mindmapper"],["twds","application/vnd.simtech-mindmapper"],["txd","application/vnd.genomatix.tuxedo"],["txf","application/vnd.mobius.txf"],["txt","text/plain"],["u8dsn","message/global-delivery-status"],["u8hdr","message/global-headers"],["u8mdn","message/global-disposition-notification"],["u8msg","message/global"],["u32","application/x-authorware-bin"],["ubj","application/ubjson"],["udeb","application/x-debian-package"],["ufd","application/vnd.ufdl"],["ufdl","application/vnd.ufdl"],["ulx","application/x-glulx"],["umj","application/vnd.umajin"],["unityweb","application/vnd.unity"],["uoml","application/vnd.uoml+xml"],["uri","text/uri-list"],["uris","text/uri-list"],["urls","text/uri-list"],["usdz","model/vnd.usdz+zip"],["ustar","application/x-ustar"],["utz","application/vnd.uiq.theme"],["uu","text/x-uuencode"],["uva","audio/vnd.dece.audio"],["uvd","application/vnd.dece.data"],["uvf","application/vnd.dece.data"],["uvg","image/vnd.dece.graphic"],["uvh","video/vnd.dece.hd"],["uvi","image/vnd.dece.graphic"],["uvm","video/vnd.dece.mobile"],["uvp","video/vnd.dece.pd"],["uvs","video/vnd.dece.sd"],["uvt","application/vnd.dece.ttml+xml"],["uvu","video/vnd.uvvu.mp4"],["uvv","video/vnd.dece.video"],["uvva","audio/vnd.dece.audio"],["uvvd","application/vnd.dece.data"],["uvvf","application/vnd.dece.data"],["uvvg","image/vnd.dece.graphic"],["uvvh","video/vnd.dece.hd"],["uvvi","image/vnd.dece.graphic"],["uvvm","video/vnd.dece.mobile"],["uvvp","video/vnd.dece.pd"],["uvvs","video/vnd.dece.sd"],["uvvt","application/vnd.dece.ttml+xml"],["uvvu","video/vnd.uvvu.mp4"],["uvvv","video/vnd.dece.video"],["uvvx","application/vnd.dece.unspecified"],["uvvz","application/vnd.dece.zip"],["uvx","application/vnd.dece.unspecified"],["uvz","application/vnd.dece.zip"],["vbox","application/x-virtualbox-vbox"],["vbox-extpack","application/x-virtualbox-vbox-extpack"],["vcard","text/vcard"],["vcd","application/x-cdlink"],["vcf","text/x-vcard"],["vcg","application/vnd.groove-vcard"],["vcs","text/x-vcalendar"],["vcx","application/vnd.vcx"],["vdi","application/x-virtualbox-vdi"],["vds","model/vnd.sap.vds"],["vhd","application/x-virtualbox-vhd"],["vis","application/vnd.visionary"],["viv","video/vnd.vivo"],["vlc","application/videolan"],["vmdk","application/x-virtualbox-vmdk"],["vob","video/x-ms-vob"],["vor","application/vnd.stardivision.writer"],["vox","application/x-authorware-bin"],["vrml","model/vrml"],["vsd","application/vnd.visio"],["vsf","application/vnd.vsf"],["vss","application/vnd.visio"],["vst","application/vnd.visio"],["vsw","application/vnd.visio"],["vtf","image/vnd.valve.source.texture"],["vtt","text/vtt"],["vtu","model/vnd.vtu"],["vxml","application/voicexml+xml"],["w3d","application/x-director"],["wad","application/x-doom"],["wadl","application/vnd.sun.wadl+xml"],["war","application/java-archive"],["wasm","application/wasm"],["wav","audio/x-wav"],["wax","audio/x-ms-wax"],["wbmp","image/vnd.wap.wbmp"],["wbs","application/vnd.criticaltools.wbs+xml"],["wbxml","application/wbxml"],["wcm","application/vnd.ms-works"],["wdb","application/vnd.ms-works"],["wdp","image/vnd.ms-photo"],["weba","audio/webm"],["webapp","application/x-web-app-manifest+json"],["webm","video/webm"],["webmanifest","application/manifest+json"],["webp","image/webp"],["wg","application/vnd.pmi.widget"],["wgt","application/widget"],["wks","application/vnd.ms-works"],["wm","video/x-ms-wm"],["wma","audio/x-ms-wma"],["wmd","application/x-ms-wmd"],["wmf","image/wmf"],["wml","text/vnd.wap.wml"],["wmlc","application/wmlc"],["wmls","text/vnd.wap.wmlscript"],["wmlsc","application/vnd.wap.wmlscriptc"],["wmv","video/x-ms-wmv"],["wmx","video/x-ms-wmx"],["wmz","application/x-msmetafile"],["woff","font/woff"],["woff2","font/woff2"],["word","application/msword"],["wpd","application/vnd.wordperfect"],["wpl","application/vnd.ms-wpl"],["wps","application/vnd.ms-works"],["wqd","application/vnd.wqd"],["wri","application/x-mswrite"],["wrl","model/vrml"],["wsc","message/vnd.wfa.wsc"],["wsdl","application/wsdl+xml"],["wspolicy","application/wspolicy+xml"],["wtb","application/vnd.webturbo"],["wvx","video/x-ms-wvx"],["x3d","model/x3d+xml"],["x3db","model/x3d+fastinfoset"],["x3dbz","model/x3d+binary"],["x3dv","model/x3d-vrml"],["x3dvz","model/x3d+vrml"],["x3dz","model/x3d+xml"],["x32","application/x-authorware-bin"],["x_b","model/vnd.parasolid.transmit.binary"],["x_t","model/vnd.parasolid.transmit.text"],["xaml","application/xaml+xml"],["xap","application/x-silverlight-app"],["xar","application/vnd.xara"],["xav","application/xcap-att+xml"],["xbap","application/x-ms-xbap"],["xbd","application/vnd.fujixerox.docuworks.binder"],["xbm","image/x-xbitmap"],["xca","application/xcap-caps+xml"],["xcs","application/calendar+xml"],["xdf","application/xcap-diff+xml"],["xdm","application/vnd.syncml.dm+xml"],["xdp","application/vnd.adobe.xdp+xml"],["xdssc","application/dssc+xml"],["xdw","application/vnd.fujixerox.docuworks"],["xel","application/xcap-el+xml"],["xenc","application/xenc+xml"],["xer","application/patch-ops-error+xml"],["xfdf","application/vnd.adobe.xfdf"],["xfdl","application/vnd.xfdl"],["xht","application/xhtml+xml"],["xhtml","application/xhtml+xml"],["xhvml","application/xv+xml"],["xif","image/vnd.xiff"],["xl","application/excel"],["xla","application/vnd.ms-excel"],["xlam","application/vnd.ms-excel.addin.macroEnabled.12"],["xlc","application/vnd.ms-excel"],["xlf","application/xliff+xml"],["xlm","application/vnd.ms-excel"],["xls","application/vnd.ms-excel"],["xlsb","application/vnd.ms-excel.sheet.binary.macroEnabled.12"],["xlsm","application/vnd.ms-excel.sheet.macroEnabled.12"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xlt","application/vnd.ms-excel"],["xltm","application/vnd.ms-excel.template.macroEnabled.12"],["xltx","application/vnd.openxmlformats-officedocument.spreadsheetml.template"],["xlw","application/vnd.ms-excel"],["xm","audio/xm"],["xml","application/xml"],["xns","application/xcap-ns+xml"],["xo","application/vnd.olpc-sugar"],["xop","application/xop+xml"],["xpi","application/x-xpinstall"],["xpl","application/xproc+xml"],["xpm","image/x-xpixmap"],["xpr","application/vnd.is-xpr"],["xps","application/vnd.ms-xpsdocument"],["xpw","application/vnd.intercon.formnet"],["xpx","application/vnd.intercon.formnet"],["xsd","application/xml"],["xsl","application/xml"],["xslt","application/xslt+xml"],["xsm","application/vnd.syncml+xml"],["xspf","application/xspf+xml"],["xul","application/vnd.mozilla.xul+xml"],["xvm","application/xv+xml"],["xvml","application/xv+xml"],["xwd","image/x-xwindowdump"],["xyz","chemical/x-xyz"],["xz","application/x-xz"],["yaml","text/yaml"],["yang","application/yang"],["yin","application/yin+xml"],["yml","text/yaml"],["ymp","text/x-suse-ymp"],["z","application/x-compress"],["z1","application/x-zmachine"],["z2","application/x-zmachine"],["z3","application/x-zmachine"],["z4","application/x-zmachine"],["z5","application/x-zmachine"],["z6","application/x-zmachine"],["z7","application/x-zmachine"],["z8","application/x-zmachine"],["zaz","application/vnd.zzazz.deck+xml"],["zip","application/zip"],["zir","application/vnd.zul"],["zirz","application/vnd.zul"],["zmm","application/vnd.handheld-entertainment+xml"],["zsh","text/x-scriptzsh"]]);function QC(e,t,n){const r=function(e){const{name:t}=e;if(t&&-1!==t.lastIndexOf(".")&&!e.type){const n=t.split(".").pop().toLowerCase(),r=XC.get(n);r&&Object.defineProperty(e,"type",{value:r,writable:!1,configurable:!1,enumerable:!0})}return e}(e),{webkitRelativePath:i}=e,o="string"===typeof t?t:"string"===typeof i&&i.length>0?i:`./${e.name}`;return"string"!==typeof r.path&&JC(r,"path",o),void 0!==n&&Object.defineProperty(r,"handle",{value:n,writable:!1,configurable:!1,enumerable:!0}),JC(r,"relativePath",o),r}function JC(e,t,n){Object.defineProperty(e,t,{value:n,writable:!1,configurable:!1,enumerable:!0})}const ek=[".DS_Store","Thumbs.db"];function tk(e){return"object"===typeof e&&null!==e}function nk(e){return e.filter((e=>-1===ek.indexOf(e.name)))}function rk(e){if(null===e)return[];const t=[];for(let n=0;n<e.length;n++){const r=e[n];t.push(r)}return t}function ik(e){if("function"!==typeof e.webkitGetAsEntry)return ak(e);const t=e.webkitGetAsEntry();return t&&t.isDirectory?lk(t):ak(e,t)}function ok(e){return e.reduce(((e,t)=>[...e,...Array.isArray(t)?ok(t):[t]]),[])}function ak(e,t){var n;if("function"===typeof e.getAsFileSystemHandle)return e.getAsFileSystemHandle().then((e=>f$(this,void 0,void 0,(function*(){const t=yield e.getFile();return t.handle=e,QC(t)}))));const r=e.getAsFile();if(!r)return Promise.reject(`${e} is not a File`);const i=QC(r,null!==(n=null===t||void 0===t?void 0:t.fullPath)&&void 0!==n?n:void 0);return Promise.resolve(i)}function sk(e){return f$(this,void 0,void 0,(function*(){return e.isDirectory?lk(e):function(e){return f$(this,void 0,void 0,(function*(){return new Promise(((t,n)=>{e.file((n=>{const r=QC(n,e.fullPath);t(r)}),(e=>{n(e)}))}))}))}(e)}))}function lk(e){const t=e.createReader();return new Promise(((e,n)=>{const r=[];!function i(){t.readEntries((t=>f$(this,void 0,void 0,(function*(){if(t.length){const e=Promise.all(t.map(sk));r.push(e),i()}else try{const t=yield Promise.all(r);e(t)}catch(o){n(o)}}))),(e=>{n(e)}))}()}))}var ck=n(628);function uk(e){return function(e){if(Array.isArray(e))return gk(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||mk(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pk(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dk(Object(n),!0).forEach((function(t){hk(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dk(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function hk(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fk(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){s=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}(e,t)||mk(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mk(e,t){if(e){if("string"===typeof e)return gk(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?gk(e,t):void 0}}function gk(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var yk="function"===typeof ck.A?ck.A:ck.A.default,vk="file-invalid-type",bk="file-too-large",xk="file-too-small",wk="too-many-files",$k=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").split(","),t=e.length>1?"one of ".concat(e.join(", ")):e[0];return{code:vk,message:"File type must be ".concat(t)}},Sk=function(e){return{code:bk,message:"File is larger than ".concat(e," ").concat(1===e?"byte":"bytes")}},_k=function(e){return{code:xk,message:"File is smaller than ".concat(e," ").concat(1===e?"byte":"bytes")}},Ck={code:wk,message:"Too many files"};function kk(e,t){var n="application/x-moz-file"===e.type||yk(e,t);return[n,n?null:$k(t)]}function Ek(e,t,n){if(Tk(e.size))if(Tk(t)&&Tk(n)){if(e.size>n)return[!1,Sk(n)];if(e.size<t)return[!1,_k(t)]}else{if(Tk(t)&&e.size<t)return[!1,_k(t)];if(Tk(n)&&e.size>n)return[!1,Sk(n)]}return[!0,null]}function Tk(e){return void 0!==e&&null!==e}function Ik(e){return"function"===typeof e.isPropagationStopped?e.isPropagationStopped():"undefined"!==typeof e.cancelBubble&&e.cancelBubble}function Pk(e){return e.dataTransfer?Array.prototype.some.call(e.dataTransfer.types,(function(e){return"Files"===e||"application/x-moz-file"===e})):!!e.target&&!!e.target.files}function Rk(e){e.preventDefault()}function Mk(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return t.some((function(t){return!Ik(e)&&t&&t.apply(void 0,[e].concat(r)),Ik(e)}))}}function Ak(e){return"audio/*"===e||"video/*"===e||"image/*"===e||"text/*"===e||"application/*"===e||/\w+\/[-+.\w]+/g.test(e)}function Ok(e){return/^.*\.[\w]+$/.test(e)}var Lk=["children"],Nk=["open"],Dk=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],Fk=["refKey","onChange","onClick"];function jk(e){return function(e){if(Array.isArray(e))return Uk(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Bk(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zk(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){s=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}(e,t)||Bk(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Bk(e,t){if(e){if("string"===typeof e)return Uk(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Uk(e,t):void 0}}function Uk(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Wk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Vk(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wk(Object(n),!0).forEach((function(t){Hk(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wk(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Hk(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qk(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var Gk=(0,r.forwardRef)((function(e,t){var n=e.children,i=Zk(qk(e,Lk)),o=i.open,a=qk(i,Nk);return(0,r.useImperativeHandle)(t,(function(){return{open:o}}),[o]),r.createElement(r.Fragment,null,n(Vk(Vk({},a),{},{open:o})))}));Gk.displayName="Dropzone";var Kk={disabled:!1,getFilesFromEvent:function(e){return f$(this,void 0,void 0,(function*(){return tk(e)&&tk(e.dataTransfer)?function(e,t){return f$(this,void 0,void 0,(function*(){if(e.items){const n=rk(e.items).filter((e=>"file"===e.kind));if("drop"!==t)return n;return nk(ok(yield Promise.all(n.map(ik))))}return nk(rk(e.files).map((e=>QC(e))))}))}(e.dataTransfer,e.type):function(e){return tk(e)&&tk(e.target)}(e)?function(e){return rk(e.target.files).map((e=>QC(e)))}(e):Array.isArray(e)&&e.every((e=>"getFile"in e&&"function"===typeof e.getFile))?function(e){return f$(this,void 0,void 0,(function*(){const t=yield Promise.all(e.map((e=>e.getFile())));return t.map((e=>QC(e)))}))}(e):[]}))},maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!1,autoFocus:!1};Gk.defaultProps=Kk,Gk.propTypes={children:ZC().func,accept:ZC().objectOf(ZC().arrayOf(ZC().string)),multiple:ZC().bool,preventDropOnDocument:ZC().bool,noClick:ZC().bool,noKeyboard:ZC().bool,noDrag:ZC().bool,noDragEventsBubbling:ZC().bool,minSize:ZC().number,maxSize:ZC().number,maxFiles:ZC().number,disabled:ZC().bool,getFilesFromEvent:ZC().func,onFileDialogCancel:ZC().func,onFileDialogOpen:ZC().func,useFsAccessApi:ZC().bool,autoFocus:ZC().bool,onDragEnter:ZC().func,onDragLeave:ZC().func,onDragOver:ZC().func,onDrop:ZC().func,onDropAccepted:ZC().func,onDropRejected:ZC().func,onError:ZC().func,validator:ZC().func};var Yk={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function Zk(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Vk(Vk({},Kk),e),n=t.accept,i=t.disabled,o=t.getFilesFromEvent,a=t.maxSize,s=t.minSize,l=t.multiple,c=t.maxFiles,u=t.onDragEnter,d=t.onDragLeave,p=t.onDragOver,h=t.onDrop,f=t.onDropAccepted,m=t.onDropRejected,g=t.onFileDialogCancel,y=t.onFileDialogOpen,v=t.useFsAccessApi,b=t.autoFocus,x=t.preventDropOnDocument,w=t.noClick,$=t.noKeyboard,S=t.noDrag,_=t.noDragEventsBubbling,C=t.onError,k=t.validator,E=(0,r.useMemo)((function(){return function(e){if(Tk(e))return Object.entries(e).reduce((function(e,t){var n=fk(t,2),r=n[0],i=n[1];return[].concat(uk(e),[r],uk(i))}),[]).filter((function(e){return Ak(e)||Ok(e)})).join(",")}(n)}),[n]),T=(0,r.useMemo)((function(){return function(e){return Tk(e)?[{description:"Files",accept:Object.entries(e).filter((function(e){var t=fk(e,2),n=t[0],r=t[1],i=!0;return Ak(n)||(console.warn('Skipped "'.concat(n,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),i=!1),Array.isArray(r)&&r.every(Ok)||(console.warn('Skipped "'.concat(n,'" because an invalid file extension was provided.')),i=!1),i})).reduce((function(e,t){var n=fk(t,2),r=n[0],i=n[1];return pk(pk({},e),{},hk({},r,i))}),{})}]:e}(n)}),[n]),I=(0,r.useMemo)((function(){return"function"===typeof y?y:Qk}),[y]),P=(0,r.useMemo)((function(){return"function"===typeof g?g:Qk}),[g]),R=(0,r.useRef)(null),M=(0,r.useRef)(null),A=zk((0,r.useReducer)(Xk,Yk),2),O=A[0],L=A[1],N=O.isFocused,D=O.isFileDialogActive,F=(0,r.useRef)("undefined"!==typeof window&&window.isSecureContext&&v&&"showOpenFilePicker"in window),j=function(){!F.current&&D&&setTimeout((function(){M.current&&(M.current.files.length||(L({type:"closeDialog"}),P()))}),300)};(0,r.useEffect)((function(){return window.addEventListener("focus",j,!1),function(){window.removeEventListener("focus",j,!1)}}),[M,D,P,F]);var z=(0,r.useRef)([]),B=function(e){R.current&&R.current.contains(e.target)||(e.preventDefault(),z.current=[])};(0,r.useEffect)((function(){return x&&(document.addEventListener("dragover",Rk,!1),document.addEventListener("drop",B,!1)),function(){x&&(document.removeEventListener("dragover",Rk),document.removeEventListener("drop",B))}}),[R,x]),(0,r.useEffect)((function(){return!i&&b&&R.current&&R.current.focus(),function(){}}),[R,b,i]);var U=(0,r.useCallback)((function(e){C?C(e):console.error(e)}),[C]),W=(0,r.useCallback)((function(e){e.preventDefault(),e.persist(),ne(e),z.current=[].concat(jk(z.current),[e.target]),Pk(e)&&Promise.resolve(o(e)).then((function(t){if(!Ik(e)||_){var n=t.length,r=n>0&&function(e){var t=e.files,n=e.accept,r=e.minSize,i=e.maxSize,o=e.multiple,a=e.maxFiles,s=e.validator;return!(!o&&t.length>1||o&&a>=1&&t.length>a)&&t.every((function(e){var t=fk(kk(e,n),1)[0],o=fk(Ek(e,r,i),1)[0],a=s?s(e):null;return t&&o&&!a}))}({files:t,accept:E,minSize:s,maxSize:a,multiple:l,maxFiles:c,validator:k});L({isDragAccept:r,isDragReject:n>0&&!r,isDragActive:!0,type:"setDraggedFiles"}),u&&u(e)}})).catch((function(e){return U(e)}))}),[o,u,U,_,E,s,a,l,c,k]),V=(0,r.useCallback)((function(e){e.preventDefault(),e.persist(),ne(e);var t=Pk(e);if(t&&e.dataTransfer)try{e.dataTransfer.dropEffect="copy"}catch(n){}return t&&p&&p(e),!1}),[p,_]),H=(0,r.useCallback)((function(e){e.preventDefault(),e.persist(),ne(e);var t=z.current.filter((function(e){return R.current&&R.current.contains(e)})),n=t.indexOf(e.target);-1!==n&&t.splice(n,1),z.current=t,t.length>0||(L({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),Pk(e)&&d&&d(e))}),[R,d,_]),q=(0,r.useCallback)((function(e,t){var n=[],r=[];e.forEach((function(e){var t=zk(kk(e,E),2),i=t[0],o=t[1],l=zk(Ek(e,s,a),2),c=l[0],u=l[1],d=k?k(e):null;if(i&&c&&!d)n.push(e);else{var p=[o,u];d&&(p=p.concat(d)),r.push({file:e,errors:p.filter((function(e){return e}))})}})),(!l&&n.length>1||l&&c>=1&&n.length>c)&&(n.forEach((function(e){r.push({file:e,errors:[Ck]})})),n.splice(0)),L({acceptedFiles:n,fileRejections:r,isDragReject:r.length>0,type:"setFiles"}),h&&h(n,r,t),r.length>0&&m&&m(r,t),n.length>0&&f&&f(n,t)}),[L,l,E,s,a,c,h,f,m,k]),G=(0,r.useCallback)((function(e){e.preventDefault(),e.persist(),ne(e),z.current=[],Pk(e)&&Promise.resolve(o(e)).then((function(t){Ik(e)&&!_||q(t,e)})).catch((function(e){return U(e)})),L({type:"reset"})}),[o,q,U,_]),K=(0,r.useCallback)((function(){if(F.current){L({type:"openDialog"}),I();var e={multiple:l,types:T};window.showOpenFilePicker(e).then((function(e){return o(e)})).then((function(e){q(e,null),L({type:"closeDialog"})})).catch((function(e){!function(e){return e instanceof DOMException&&("AbortError"===e.name||e.code===e.ABORT_ERR)}(e)?!function(e){return e instanceof DOMException&&("SecurityError"===e.name||e.code===e.SECURITY_ERR)}(e)?U(e):(F.current=!1,M.current?(M.current.value=null,M.current.click()):U(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):(P(e),L({type:"closeDialog"}))}))}else M.current&&(L({type:"openDialog"}),I(),M.current.value=null,M.current.click())}),[L,I,P,v,q,U,T,l]),Y=(0,r.useCallback)((function(e){R.current&&R.current.isEqualNode(e.target)&&(" "!==e.key&&"Enter"!==e.key&&32!==e.keyCode&&13!==e.keyCode||(e.preventDefault(),K()))}),[R,K]),Z=(0,r.useCallback)((function(){L({type:"focus"})}),[]),X=(0,r.useCallback)((function(){L({type:"blur"})}),[]),Q=(0,r.useCallback)((function(){w||(!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.navigator.userAgent;return function(e){return-1!==e.indexOf("MSIE")||-1!==e.indexOf("Trident/")}(e)||function(e){return-1!==e.indexOf("Edge/")}(e)}()?K():setTimeout(K,0))}),[w,K]),J=function(e){return i?null:e},ee=function(e){return $?null:J(e)},te=function(e){return S?null:J(e)},ne=function(e){_&&e.stopPropagation()},re=(0,r.useMemo)((function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.refKey,n=void 0===t?"ref":t,r=e.role,o=e.onKeyDown,a=e.onFocus,s=e.onBlur,l=e.onClick,c=e.onDragEnter,u=e.onDragOver,d=e.onDragLeave,p=e.onDrop,h=qk(e,Dk);return Vk(Vk(Hk({onKeyDown:ee(Mk(o,Y)),onFocus:ee(Mk(a,Z)),onBlur:ee(Mk(s,X)),onClick:J(Mk(l,Q)),onDragEnter:te(Mk(c,W)),onDragOver:te(Mk(u,V)),onDragLeave:te(Mk(d,H)),onDrop:te(Mk(p,G)),role:"string"===typeof r&&""!==r?r:"presentation"},n,R),i||$?{}:{tabIndex:0}),h)}}),[R,Y,Z,X,Q,W,V,H,G,$,S,i]),ie=(0,r.useCallback)((function(e){e.stopPropagation()}),[]),oe=(0,r.useMemo)((function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.refKey,n=void 0===t?"ref":t,r=e.onChange,i=e.onClick,o=qk(e,Fk);return Vk(Vk({},Hk({accept:E,multiple:l,type:"file",style:{border:0,clip:"rect(0, 0, 0, 0)",clipPath:"inset(50%)",height:"1px",margin:"0 -1px -1px 0",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"},onChange:J(Mk(r,G)),onClick:J(Mk(i,ie)),tabIndex:-1},n,M)),o)}}),[M,n,l,G,i]);return Vk(Vk({},O),{},{isFocused:N&&!i,getRootProps:re,getInputProps:oe,rootRef:R,inputRef:M,open:J(K)})}function Xk(e,t){switch(t.type){case"focus":return Vk(Vk({},e),{},{isFocused:!0});case"blur":return Vk(Vk({},e),{},{isFocused:!1});case"openDialog":return Vk(Vk({},Yk),{},{isFileDialogActive:!0});case"closeDialog":return Vk(Vk({},e),{},{isFileDialogActive:!1});case"setDraggedFiles":return Vk(Vk({},e),{},{isDragActive:t.isDragActive,isDragAccept:t.isDragAccept,isDragReject:t.isDragReject});case"setFiles":return Vk(Vk({},e),{},{acceptedFiles:t.acceptedFiles,fileRejections:t.fileRejections,isDragReject:t.isDragReject});case"reset":return Vk({},Yk);default:return e}}function Qk(){}const Jk=function(e,t,n,r){let i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];const o=[];let a=t;const s=Math.min(e.byteLength,t+n-16);for(;a<s;a+=12){const t=a;e.getUint16(t,i)===r&&o.push(t)}return o};var eE=function(){};const tE=[{value:65504,name:"jfif",getTags:eE},{value:65498,name:"sos",getTags:eE},{value:65505,subvalue:17784,name:"exif",getTags:(e,t)=>{if(65505!==e.getUint16(t))return;const n=e.getUint16(t+2);if(t+=4,1165519206!==e.getUint32(t))return;t+=6;const r=e.getUint16(t);if(18761!==r&&19789!==r)return;const i=18761===r;return t+=2,42===e.getUint16(t,i)?(t+=e.getUint32(t+2,i),{read:r=>{const o=Jk(e,t,n,r,i);if(o.length)return e.getUint16(o[0]+8,i)},write:(r,o)=>{const a=Jk(e,t,n,r,i);return!!a.length&&(a.forEach((t=>e.setUint16(t+8,o,i))),!0)}}):void 0}},{value:65505,subvalue:26740,name:"xmp",getTags:eE},{value:65506,subvalue:19792,name:"mpf",getTags:eE},{value:65506,name:"app2",getTags:(e,t)=>{if(65506!==e.getUint16(t))return;const n=e.getUint16(t+2);if("ICC_PROFILE"!==(new TextDecoder).decode(e.buffer.slice(t+4,t+15)))return;function r(e){return String.fromCharCode(o.getUint8(e),o.getUint8(e+1),o.getUint8(e+2),o.getUint8(e+3))}function i(e,t,n){const{buffer:r}=o;let i,a;if("text"===e)i=t+8,a=t+n-7;else if("desc"===e)i=t+12,a=t+o.getUint32(t+8)+12;else{if("mluc"!==e)return;{const e=o.getUint32(t+20),n=o.getUint32(t+24);i=t+n,a=t+n+e}}return(new TextDecoder).decode(r.slice(i,a)).replace(/\u0000|\x00/g,"")}t+=18;const o=new DataView(e.buffer.slice(t,t+n)),a=o.getUint32(128),s=[];let l=132;for(let c=0;c<a;c++){const e=o.getUint32(l),t=o.getUint32(l+4),n=o.getUint32(l+8),a=r(t),c=i(a,t,n);if(e===nE){s.push({address:e,offset:t,size:n,type:a,value:c});break}l+=12}return{read:e=>{const t=s.find((t=>t.address===e));return t?t.value:void 0},write:(e,t)=>{}}}}],nE=1684370275,rE=e=>{if(e)return(e=>{if(65496!==e.getUint16(0))return;const t=e.byteLength;let n,r,i=2;for(;i<t&&255===e.getUint8(i);){n=e.getUint16(i);const t=tE.find((t=>t.value===n&&(!t.subvalue||t.subvalue===e.getUint16(i+2+2))));if(t){const{name:n,getTags:o}=t;if(r||(r={}),!r[n]){let t=i;r[n]={offset:i,size:e.getUint16(i+2),getTags:()=>o(e,t)}}}if(65498===n)break;i+=2+e.getUint16(i+2)}return r})(new DataView(e))},iE=(e,t)=>{const n=rE(e);if(n)return Object.entries(t).reduce(((e,t)=>{let[r,i]=t;if(!n[r])return e;const o=n[r].getTags();if(!o)return e;for(const n of i){const t=o.read(n);e[r]={...e[r],[n]:t}}return e}),{})};var oE=e=>window.__pqina_webapi__?window.__pqina_webapi__[e]:window[e];const aE={ArrayBuffer:"readAsArrayBuffer"};var sE=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:eE,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise(((r,i)=>{const{dataFormat:o=aE.ArrayBuffer}=n,a=new(oE("FileReader"));a.onload=()=>r(a.result),a.onerror=()=>i(a.error),a.onprogress=t,a[o](e)}))};let lE=null;var cE=()=>(null===lE&&(lE="undefined"!=typeof window&&void 0!==window.document),lE);let uE=null;var dE=()=>new Promise((e=>{if(null===uE){const t="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEASABIAAD/4QA6RXhpZgAATU0AKgAAAAgAAwESAAMAAAABAAYAAAEoAAMAAAABAAIAAAITAAMAAAABAAEAAAAAAAD/2wBDAP//////////////////////////////////////////////////////////////////////////////////////wAALCAABAAIBASIA/8QAJgABAAAAAAAAAAAAAAAAAAAAAxABAAAAAAAAAAAAAAAAAAAAAP/aAAgBAQAAPwBH/9k=";let n=cE()?new Image:{};return n.onload=()=>{uE=1===n.naturalWidth,n=void 0,e(uE)},void(n.src=t)}return e(uE)})),pE=(e,t)=>{const{colorSpace:n="srgb"}=t||{};return e.getContext("2d",{colorSpace:n}).getImageData(0,0,e.width,e.height)},hE=e=>"string"==typeof e;function fE(e,t){t.split(";").forEach((t=>{const[n,r]=t.split(":");if(!n.length||!r)return;const[i,o]=r.split("!important");e.style.setProperty(n,i,hE(o)?"important":void 0)}))}var mE=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];const r=document.createElement(e),i=Object.getOwnPropertyDescriptors(r.__proto__);for(const o in t)"style"===o?fE(r,t[o]):i[o]&&i[o].set||/textContent|innerHTML/.test(o)||"function"==typeof t[o]?r[o]=t[o]:r.setAttribute(o,t[o]);return n.forEach((e=>r.appendChild(e))),r};const gE={1:()=>[1,0,0,1,0,0],2:e=>[-1,0,0,1,e,0],3:(e,t)=>[-1,0,0,-1,e,t],4:(e,t)=>[1,0,0,-1,0,t],5:()=>[0,1,1,0,0,0],6:(e,t)=>[0,1,-1,0,t,0],7:(e,t)=>[0,-1,-1,0,t,e],8:e=>[0,-1,1,0,0,e]};var yE=e=>{e.width=1,e.height=1;const t=e.getContext("2d");t&&t.clearRect(0,0,1,1)},vE=e=>"data"in e,bE=e=>cE()?RegExp(e).test(window.navigator.userAgent):void 0;let xE=null;var wE=()=>(null===xE&&(xE=bE(/Android/)),xE),$E=(e,t)=>{const n=mE("canvas",{width:e.width,height:e.height});return n.getContext("2d",t).drawImage(e,0,0),n},SE=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const n=e instanceof ImageData&&e.colorSpace||"srgb",r=await dE(),[i,o]=r||t<5?[e.width,e.height]:[e.height,e.width],a=mE("canvas",{width:i,height:o}),s=a.getContext("2d",{willReadFrequently:!0,colorSpace:n});if(vE(e)&&!r&&t>1){const t=mE("canvas",{width:e.width,height:e.height});t.getContext("2d",{willReadFrequently:!0,colorSpace:n}).putImageData(e,0,0),e=t}if(!r&&t>1&&s.transform.apply(s,function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;return-1===n&&(n=1),gE[n](e,t)}(e.width,e.height,t)),vE(e)){if(s.putImageData(e,0,0),wE())return $E(a)}else s.drawImage(e,0,0);return e instanceof HTMLCanvasElement&&yE(e),a},_E=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return 1===t||await dE()?e:pE(await SE(e,t))},CE=e=>"object"==typeof e;const kE=e=>e instanceof HTMLElement?e:CE(e)?EE(e):e,EE=e=>{let t;return Array.isArray(e)?(t=[],e.forEach(((e,n)=>{t[n]=kE(e)}))):(t={},null!==e&&Object.keys(e).forEach((n=>{const r=e[n];t[n]=kE(r)}))),t};var TE=e=>"function"==typeof e,IE=(e,t)=>{const{width:n,height:r,canvasMemoryLimit:i,contextOptions:o}=t||{};let a=n||e.naturalWidth,s=r||e.naturalHeight;a||s||(a=300,s=150);const l=a*s;if(i&&l>i){const e=Math.sqrt(i)/Math.sqrt(l);a=Math.floor(a*e),s=Math.floor(s*e)}const c=mE("canvas");return c.width=a,c.height=s,c.getContext("2d",o).drawImage(e,0,0,a,s),c},PE=()=>"createImageBitmap"in window,RE=e=>/svg/.test(e.type),ME=()=>Math.random().toString(36).substring(2,9);const AE=new Map;var OE=(e,t,n)=>new Promise(((r,i)=>{const o=e.toString();let a=AE.get(o);if(!a){const t=(e=>`function () {self.onmessage = function (message) {(${e.toString()}).apply(null, message.data.content.concat([function (err, response) {\n    response = response || {};\n    const transfer = 'data' in response ? [response.data.buffer] : 'width' in response ? [response] : [];\n    return self.postMessage({ id: message.data.id, content: response, error: err }, transfer);\n}]))}}`)(e),n=URL.createObjectURL((e=>new Blob(["(","function"==typeof e?e.toString():e,")()"],{type:"application/javascript"}))(t)),r=new Map,i=new Worker(n);a={url:n,worker:i,messages:r,terminationTimeout:void 0,terminate:()=>{clearTimeout(a.terminationTimeout),a.worker.terminate(),URL.revokeObjectURL(n),AE.delete(o)}},i.onmessage=function(e){const{id:t,content:n,error:i}=e.data;if(clearTimeout(a.terminationTimeout),a.terminationTimeout=setTimeout((()=>{r.size>0||a.terminate()}),500),!r.has(t))return;const o=r.get(t);r.delete(t),null!=i?o.reject(i):o.resolve(n)},AE.set(o,a)}const s=ME();a.messages.set(s,{resolve:r,reject:i}),a.worker.postMessage({id:s,content:t},n)}));let LE=null;var NE=()=>(null===LE&&(LE=bE(/Firefox/)),LE);const DE=async(e,t)=>{const{canvasMemoryLimit:n,colorSpace:r}=t||{},i=await(async(e,t)=>{const n=mE("img",{src:URL.createObjectURL(e)}),r=await((e,t)=>new Promise(((n,r)=>{const i=()=>n(IE(e,t));e.complete&&e.width?i():(e.onload=i,e.onerror=()=>r(new Error("Failed to load image")))})))(n,t);return URL.revokeObjectURL(n.src),r})(e,{colorSpace:r,canvasMemoryLimit:n,contextOptions:{willReadFrequently:!0,colorSpace:r}}),o=pE(i,{colorSpace:r});return yE(i),o};var FE=async(e,t)=>{const{canvasMemoryLimit:n,colorSpace:r}=t||{},i=/p3/i.test(r)?"display-p3":"srgb";if(wE()&&!NE())return await DE(e,{canvasMemoryLimit:n,colorSpace:i});let o;if(PE()&&!RE(e)&&"OffscreenCanvas"in window)try{o=await OE(((e,t,n,r)=>{createImageBitmap(e).then((e=>{let i=e.width,o=e.height;const a=i*o;if(t&&a>t){const e=Math.sqrt(t)/Math.sqrt(a);i=Math.floor(i*e),o=Math.floor(o*e)}const s=new OffscreenCanvas(i,o),l=s.getContext("2d",{colorSpace:n,willReadFrequently:!0});l.drawImage(e,0,0,i,o);const c=l.getImageData(0,0,s.width,s.height);r(null,c)})).catch((e=>{r(e)}))}),[e,n,i])}catch(e){}return o&&o.width?o:await DE(e,{canvasMemoryLimit:n,colorSpace:i})},jE=(e,t,n)=>new Promise(((r,i)=>{try{e.toBlob((e=>{if(!e)return i(new Error("Failed to create blob"));r(e)}),t,n)}catch(e){i(e)}})),zE=async(e,t,n)=>{const r=await SE(e),i=await jE(r,t,n);return yE(r),i};const BE={matroska:"mkv"};var UE=e=>{const t=(e.match(/\/([a-z0-9]+)/)||[])[1];if(/^x/.test(t)){const[,t=""]=e.split("/x-");return BE[t]}return t},WE=e=>e.substring(0,e.lastIndexOf("."))||e;const VE=/avif|bmp|gif|jpg|jpeg|jpe|jif|jfif|png|svg|tiff|webp/;var HE=e=>{return e&&(t=(n=e,n.split(".").pop()).toLowerCase(),VE.test(t)?"image/"+(/jfif|jif|jpe|jpg/.test(t)?"jpeg":"svg"===t?"svg+xml":t):"");var t,n},qE=(e,t,n)=>{const r=(new Date).getTime(),i=e.type.length&&!/null|text/.test(e.type),o=i?e.type:n,a=((e,t)=>{const n=HE(e);if(n===t)return e;const r=UE(t)||n;return`${WE(e)}.${r}`})(t,o);try{return new(oE("File"))([e],a,{lastModified:r,type:i?e.type:o})}catch(t){const n=i?e.slice():e.slice(0,e.size,o);return n.lastModified=r,n.name=a,n}},GE=(e,t)=>e/t,KE=e=>e;const YE=Math.PI,ZE=Math.PI/2,XE=ZE/2;var QE=e=>{const t=Math.abs(e)%Math.PI;return t>XE&&t<Math.PI-XE};const JE={Top:"t",Right:"r",Bottom:"b",Left:"l",TopLeft:"tl",TopRight:"tr",BottomRight:"br",BottomLeft:"bl"},{Top:eT,Right:tT,Bottom:nT,Left:rT,TopLeft:iT,TopRight:oT,BottomRight:aT,BottomLeft:sT}=JE;var lT={[eT]:[.5,0],[tT]:[1,.5],[nT]:[.5,1],[rT]:[0,.5],[iT]:[0,0],[oT]:[1,0],[aT]:[1,1],[sT]:[0,1]},cT=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12;return parseFloat(e.toFixed(t))};const uT=(e,t,n)=>n+(e-n)*t,dT=e=>({x:e.x+.5*e.width,y:e.y+.5*e.height,rx:.5*e.width,ry:.5*e.height}),pT=()=>hT(0,0),hT=(e,t)=>({x:e,y:t}),fT=e=>hT(e.pageX,e.pageY),mT=e=>hT(e.x,e.y),gT=e=>(e.x=-e.x,e.y=-e.y,e),yT=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:pT();const r=Math.cos(t),i=Math.sin(t),o=e.x-n.x,a=e.y-n.y;return e.x=n.x+r*o-i*a,e.y=n.y+i*o+r*a,e},vT=e=>Math.sqrt(e.x*e.x+e.y*e.y),bT=e=>{const t=Math.sqrt(e.x*e.x+e.y*e.y);return 0===t?pT():(e.x/=t,e.y/=t,e)},xT=(e,t)=>Math.atan2(t.y-e.y,t.x-e.x),wT=(e,t)=>e.x===t.x&&e.y===t.y,$T=(e,t)=>(e.x=t(e.x),e.y=t(e.y),e),ST=(e,t)=>(e.x+=t.x,e.y+=t.y,e),_T=(e,t)=>(e.x-=t.x,e.y-=t.y,e),CT=(e,t)=>(e.x/=t,e.y/=t,e),kT=(e,t)=>(e.x*=t,e.y*=t,e),ET=(e,t)=>e.x*t.x+e.y*t.y,TT=(e,t)=>e.x*t.y-e.y*t.x,IT=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:pT();const n=e.x-t.x,r=e.y-t.y;return n*n+r*r},PT=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:pT();return Math.sqrt(IT(e,t))},RT=e=>{let t=0,n=0;return e.forEach((e=>{t+=e.x,n+=e.y})),hT(t/e.length,n/e.length)},MT=(e,t,n,r,i)=>(e.forEach((e=>{e.x=t?r-(e.x-r):e.x,e.y=n?i-(e.y-i):e.y})),e),AT=(e,t,n,r)=>{const i=Math.sin(t),o=Math.cos(t);return e.forEach((e=>{e.x-=n,e.y-=r;const t=e.x*o-e.y*i,a=e.x*i+e.y*o;e.x=n+t,e.y=r+a})),e},OT=(e,t)=>({width:e,height:t}),LT=e=>OT(e.width,e.height),NT=e=>OT(e.width,e.height),DT=e=>OT(e.width,e.height),FT=e=>OT(e[0],e[1]),jT=e=>{return/img/i.test(e.nodeName)?OT((t=e).naturalWidth,t.naturalHeight):NT(e);var t},zT=(e,t)=>OT(e,t),BT=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:KE;return n(e.width)===n(t.width)&&n(e.height)===n(t.height)},UT=(e,t)=>(e.width*=t,e.height*=t,e),WT=e=>hT(.5*e.width,.5*e.height),VT=(e,t)=>{const n=Math.abs(t),r=Math.abs(Math.cos(n)),i=Math.abs(Math.sin(n)),o=r*e.width+i*e.height,a=i*e.width+r*e.height;return e.width=o,e.height=a,e},HT=(e,t)=>e.width>=t.width&&e.height>=t.height,qT=(e,t)=>(e.width=t(e.width),e.height=t(e.height),e),GT=(e,t)=>({start:e,end:t}),KT=e=>GT(mT(e.start),mT(e.end)),YT=(e,t)=>{if(0===t)return e;const n=hT(e.start.x-e.end.x,e.start.y-e.end.y),r=bT(n),i=kT(r,t);return e.start.x+=i.x,e.start.y+=i.y,e.end.x-=i.x,e.end.y-=i.y,e},ZT=[hT(-1,-1),hT(-1,1),hT(1,1),hT(1,-1)],XT=(e,t,n,r)=>({x:e,y:t,width:n,height:r}),QT=e=>XT(e.x,e.y,e.width,e.height),JT=()=>XT(0,0,0,0),eI=e=>XT(0,0,e.width,e.height),tI=e=>XT(e[3],e[0],e[1]-e[3],e[2]-e[0]),nI=e=>XT(e.x||0,e.y||0,e.width||0,e.height||0),rI=e=>{let t=e[0].x,n=e[0].x,r=e[0].y,i=e[0].y;return e.forEach((e=>{t=Math.min(t,e.x),n=Math.max(n,e.x),r=Math.min(r,e.y),i=Math.max(i,e.y)})),XT(t,r,n-t,i-r)},iI=e=>aI(e.x-e.rx,e.y-e.ry,2*e.rx,2*e.ry),oI=(e,t)=>XT(e.x-.5*t.width,e.y-.5*t.height,t.width,t.height),aI=(e,t,n,r)=>XT(e,t,n,r),sI=e=>hT(e.x+.5*e.width,e.y+.5*e.height),lI=(e,t)=>(e.x+=t.x,e.y+=t.y,e),cI=(e,t,n)=>(n=n||sI(e),e.x=t*(e.x-n.x)+n.x,e.y=t*(e.y-n.y)+n.y,e.width=t*e.width,e.height=t*e.height,e),uI=(e,t,n,r)=>{const i=(r.x-e.x)/e.width,o=(r.y-e.y)/e.height;let a=Math.max(t.width,e.width),s=Math.max(t.height,e.height);return a=Math.min(n.width,a),s=Math.min(n.height,s),e.x=r.x-i*a,e.y=r.y-o*s,e.width=a,e.height=s,e},dI=(e,t)=>{const[n,r]=lT[t],i=n*e.width,o=r*e.height;return hT(e.x+i,e.y+o)},pI=(e,t)=>(e.x*=t,e.y*=t,e.width*=t,e.height*=t,e),hI=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:KE;return n(e.x)===n(t.x)&&n(e.y)===n(t.y)&&n(e.width)===n(t.width)&&n(e.height)===n(t.height)},fI=e=>GE(e.width,e.height),mI=(e,t,n,r,i)=>(e.x=t,e.y=n,e.width=r,e.height=i,e),gI=(e,t)=>(e.x=t.x,e.y=t.y,e.width=t.width,e.height=t.height,e),yI=(e,t,n)=>(n||(n=sI(e)),SI(e).map((e=>yT(e,t,n)))),vI=(e,t)=>XT(.5*e.width-.5*t.width,.5*e.height-.5*t.height,t.width,t.height),bI=(e,t)=>!(t.x<e.x)&&!(t.y<e.y)&&!(t.x>e.x+e.width)&&!(t.y>e.y+e.height),xI=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:pT();if(0===e.width||0===e.height)return JT();const r=fI(e);t||(t=r);let i=e.width,o=e.height;return t>r?i=o*t:o=i/t,XT(n.x+.5*(e.width-i),n.y+.5*(e.height-o),i,o)},wI=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:fI(e),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:pT();if(0===e.width||0===e.height)return JT();let r=e.width,i=r/t;return i>e.height&&(i=e.height,r=i*t),XT(n.x+.5*(e.width-r),n.y+.5*(e.height-i),r,i)},$I=e=>[Math.min(e.y,e.y+e.height),Math.max(e.x,e.x+e.width),Math.max(e.y,e.y+e.height),Math.min(e.x,e.x+e.width)],SI=e=>[hT(e.x,e.y),hT(e.x+e.width,e.y),hT(e.x+e.width,e.y+e.height),hT(e.x,e.y+e.height)],_I=(e,t)=>{if(e)return e.x=t(e.x),e.y=t(e.y),e.width=t(e.width),e.height=t(e.height),e},CI=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:sI(e);return SI(e).map(((e,r)=>{const i=ZT[r];return hT(uT(e.x,1+i.x*t.x,n.x),uT(e.y,1+i.y*t.y,n.y))}))},kI=e=>(e.x=0,e.y=0,e),EI=e=>{const t=e[0],n=e[e.length-1];e=wT(t,n)?e:[...e,t];const r=t.x,i=t.y;let o,a,s,l=0,c=0,u=0,d=0;const p=e.length;for(;c<p;c++)o=e[c],a=e[c+1>p-1?0:c+1],s=(o.y-i)*(a.x-r)-(a.y-i)*(o.x-r),l+=s,u+=(o.x+a.x-2*r)*s,d+=(o.y+a.y-2*i)*s;return s=3*l,hT(r+u/s,i+d/s)},TI=(e,t)=>II(e.start,e.end,t.start,t.end),II=(e,t,n,r)=>{const i=(r.y-n.y)*(t.x-e.x)-(r.x-n.x)*(t.y-e.y);if(0===i)return;const o=((r.x-n.x)*(e.y-n.y)-(r.y-n.y)*(e.x-n.x))/i,a=((t.x-e.x)*(e.y-n.y)-(t.y-e.y)*(e.x-n.x))/i;return o<0||o>1||a<0||a>1?void 0:hT(e.x+o*(t.x-e.x),e.y+o*(t.y-e.y))},PI=function(e,t){let{ignoreIdenticalLines:n=!1,breakOnIntersection:r=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=t.length,o=[];for(let a=0;a<i-1;a++){if(n&&(wT(e.start,t[a])||wT(e.start,t[a+1])||wT(e.end,t[a])||wT(e.end,t[a+1])))continue;const i=II(e.start,e.end,t[a],t[a+1]);if(i){if(r)return[i];o.push(i)}}return o.length?o:void 0},RI=(e,t)=>{let n=0,r=0,i=!1;const o=t.length;for(n=0,r=o-1;n<o;r=n++)t[n].y>e.y!=t[r].y>e.y&&e.x<(t[r].x-t[n].x)*(e.y-t[n].y)/(t[r].y-t[n].y)+t[n].x&&(i=!i);return i},MI=(e,t,n,r)=>({x:(1-r)*(1-r)*e.x+2*(1-r)*r*t.x+r*r*n.x,y:(1-r)*(1-r)*e.y+2*(1-r)*r*t.y+r*r*n.y}),AI=(e,t,n,r,i)=>{const o=((e,t,n,r)=>{let i=(t.x-e.x)*r,o=(t.y-e.y)*r;return PT(n,t)<PT(t,e)&&(i*=.15,o*=.15),{x:t.x+i,y:t.y+o}})(e,t,n,i),a=[];for(let s=0;s<=r;s++){const e=s/r;a.push(MI(t,o,n,e))}return a},OI=e=>{const t=[];for(let n=0;n<e.length;n++){let r=n+1;r===e.length&&(r=0),t.push(GT(mT(e[n]),mT(e[r])))}return t},LI=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return OI(e).map((e=>YT(e,t)))},NI=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:12;const s=[];for(let l=0;l<a;l++)s.push(hT(e.x+t*Math.cos(l*(2*Math.PI)/a),e.y+n*Math.sin(l*(2*Math.PI)/a)));return(i||o)&&MT(s,i,o,e.x,e.y),r&&AT(s,r,e.x,e.y),s},DI=(e,t,n,r)=>{const i=hT(e.x-n.x,e.y-n.y),o=hT(r.x-n.x,r.y-n.y),a=ET(o,o);let s=ET(i,o)/a;s=s<0?0:s,s=s>1?1:s;const l=hT(o.x*s+n.x-e.x,o.y*s+n.y-e.y);return ET(l,l)<=t*t},FI=(e,t,n)=>{const r=n.length;for(let i=0;i<r-1;i++)if(DI(e,t,n[i],n[i+1]))return!0;return!1},jI=(e,t,n)=>!!RI(e,n)||!!FI(e,t,n)||DI(e,t,n[0],n[n.length-1]),zI=(e,t,n,r,i)=>jI(e,t,yI(n,r,i||sI(n)));var BI=(e,t)=>{const n=eI(e),r=sI(n),i=yI(n,t,r);return kI(rI(i))},UI=(e,t)=>e instanceof HTMLElement&&(!t||new RegExp(`^${t}$`,"i").test(e.nodeName)),WI=e=>e instanceof File,VI=async(e,t,n)=>{const r=await jE(e,t,n);return qE(r,"canvas")},HI=e=>e.split("/").pop().split(/\?|\#/).shift();const qI=cE()&&Node.prototype.replaceChildren?(e,t)=>e.replaceChildren(t):(e,t)=>{for(;e.lastChild;)e.removeChild(e.lastChild);void 0!==t&&e.append(t)},GI=cE()&&mE("div",{class:"PinturaMeasure",style:"position:absolute;left:0;top:0;width:99999px;height:0;pointer-events:none;contain:strict;margin:0;padding:0;"});let KI;var YI=e=>(qI(GI,e),GI.parentNode||document.body.append(GI),clearTimeout(KI),KI=setTimeout((()=>{GI.remove()}),500),e);let ZI=null;var XI=()=>(null===ZI&&(ZI=cE()&&/^((?!chrome|android).)*(safari|iphone|ipad)/i.test(navigator.userAgent)),ZI),QI=e=>new Promise(((t,n)=>{let r=!1;!e.parentNode&&XI()&&(r=!0,e.style.cssText="position:absolute;visibility:hidden;pointer-events:none;left:0;top:0;width:0;height:0;",YI(e));const i=()=>{const n=e.naturalWidth,i=e.naturalHeight;n&&i&&(r&&e.remove(),clearInterval(o),t({width:n,height:i}))};e.onerror=e=>{clearInterval(o),n(e)};const o=setInterval(i,1);i()})),JI=e=>new Promise(((t,n)=>{const r=()=>{t({width:e.videoWidth,height:e.videoHeight})};if(e.readyState>=1)return r();e.onloadedmetadata=r,e.onerror=()=>n(e.error)})),eP=e=>/^image/.test(e.type),tP=e=>new Promise((t=>{const n=hE(e)?e:URL.createObjectURL(e),r=()=>{const e=new Image;e.src=n,t(e)};if(e instanceof Blob&&eP(e))return r();const i=document.createElement("video");i.preload="metadata",i.onloadedmetadata=()=>t(i),i.onerror=r,i.src=n})),nP=e=>"VIDEO"===e.nodeName,rP=async e=>{let t,n;t=e.src?e:await tP(e);try{n=nP(t)?await JI(t):await QI(t)}finally{WI(e)&&URL.revokeObjectURL(t.src)}return n},iP=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return new(oE("ProgressEvent"))("progress",{loaded:100*e,total:100,lengthComputable:t})},oP=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e=>e;return e.getAllResponseHeaders().indexOf(t)>=0?n(e.getResponseHeader(t)):void 0},aP=e=>{if(!e)return null;const t=e.split(/filename=|filename\*=.+''/).splice(1).map((e=>e.trim().replace(/^["']|[;"']{0,2}$/g,""))).filter((e=>e.length));return t.length?decodeURI(t[t.length-1]):null};class sP extends Error{constructor(e,t,n){super(e),this.name="EditorError",this.code=t,this.metadata=n}}var lP=(e,t)=>{const{headers:n={},credentials:r}=t||{};Object.entries(n).forEach((t=>{let[n,r]=t;return e.setRequestHeader(n,r)})),r&&(e.withCredentials="omit"!==r)},cP=e=>e instanceof Blob&&!(e instanceof File),uP=e=>"close"in e,dP=async(e,t,n)=>{if(WI(e)||cP(e))return e;if(hE(e))return await((e,t,n)=>/^data:/.test(e)?async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"data-uri",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:eE;n(iP(0));const r=await fetch(e);n(iP(.33));const i=await r.blob();let o;eP(i)||(o="image/"+(e.includes(",/9j/")?"jpeg":"png")),n(iP(.66));const a=qE(i,t,o);return n(iP(1)),a}(e,void 0,t):((e,t,n)=>new Promise(((r,i)=>{const o=()=>i(new sP("Error fetching image","URL_REQUEST",a)),a=new XMLHttpRequest;a.onprogress=t,a.onerror=o,a.onload=()=>{if(!a.response||a.status>=300||a.status<200)return o();const t=oP(a,"Content-Type"),n=oP(a,"Content-Disposition",aP)||HI(e);r(qE(a.response,n,t||HE(n)))};const{willRequest:s}=n;Promise.resolve(s&&s(e,{resourceType:"image"})).then((t=>{if(!1===t)return i("Image load rejected");a.open("GET",e,!0),lP(a,t),a.responseType="blob",a.send()})).catch(console.error)})))(e,t,n))(e,t,n);if(UI(e,"canvas"))return await VI(e);if(UI(e,"img"))return await(async e=>{const t=await rP(e),n=await(e=>new Promise(((t,n)=>{if(e.complete)return t(e);e.onload=()=>t(e),e.onerror=()=>n(new Error("Failed to load image"))})))(e),r=mE("canvas",t);r.getContext("2d",{willReadFrequently:!0}).drawImage(n,0,0);const i=await jE(r);return qE(i,HI(n.src))})(e);if(vE(e)||uP(e))return await VI(await SE(e));throw new sP("Invalid image source","invalid-image-source")};let pP=null;var hP=()=>(null===pP&&(pP=cE()&&/^mac/i.test(navigator.platform)),pP);let fP=null;var mP=()=>(null===fP&&(fP=cE()&&(bE(/iPhone|iPad|iPod/)||hP()&&navigator.maxTouchPoints>=1)),fP),gP=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return await dE()||mP()||t<5?e:zT(e.height,e.width)},yP=e=>/jpeg/.test(e.type),vP=e=>{return"object"!=typeof(t=e)||t.constructor!=Object?e:JSON.stringify(e);var t},bP=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0;return 0===t||(e.translate(n.x,n.y),e.rotate(t),e.translate(-n.x,-n.y)),e},xP=(e,t,n)=>(e.scale(t,n),e),wP=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{flipX:n,flipY:r,rotation:i,crop:o}=t,a=NT(e),s=n||r,l=!!i,c=o&&(o.x||o.y||o.width||o.height),u=c&&hI(o,eI(a)),d=c&&!u;if(!s&&!l&&!d)return e;const p={willReadFrequently:!0,colorSpace:e.colorSpace};let h,f=mE("canvas",{width:e.width,height:e.height});if(f.getContext("2d",p).putImageData(e,0,0),s){const e=mE("canvas",{width:f.width,height:f.height}).getContext("2d",p);xP(e,n?-1:1,r?-1:1),e.drawImage(f,n?-f.width:0,r?-f.height:0),e.restore(),yE(f),f=e.canvas}if(l){const e=qT(DT(rI(yI(nI(f),i))),Math.floor),t=mE("canvas",{width:o.width,height:o.height}).getContext("2d",p);((e,t,n)=>{e.translate(t,n)})(t,-o.x,-o.y),bP(t,i,WT(e)),t.drawImage(f,.5*(e.width-f.width),.5*(e.height-f.height)),t.restore(),yE(f),f=t.canvas}else if(d)return h=f.getContext("2d",p).getImageData(o.x,o.y,o.width,o.height),yE(f),h;return h=f.getContext("2d",p).getImageData(0,0,f.width,f.height),yE(f),h},$P=(e,t)=>{const{imageData:n,width:r,height:i}=e,o=n.width,a=n.height,s=n.colorSpace,l=Math.round(r),c=Math.round(i),u=n.data,d=new Uint8ClampedArray(l*c*4),p=o/l,h=a/c,f=Math.ceil(.5*p),m=Math.ceil(.5*h);for(let g=0;g<c;g++)for(let e=0;e<l;e++){const t=4*(e+g*l);let n=0,r=0,i=0,a=0,s=0,c=0,y=0;const v=(g+.5)*h;for(let l=Math.floor(g*h);l<(g+1)*h;l++){const t=Math.abs(v-(l+.5))/m,d=(e+.5)*p,h=t*t;for(let m=Math.floor(e*p);m<(e+1)*p;m++){let e=Math.abs(d-(m+.5))/f;const t=Math.sqrt(h+e*e);if(t<-1||t>1)continue;if(n=2*t*t*t-3*t*t+1,n<=0)continue;e=4*(m+l*o);const p=u[e+3];y+=n*p,i+=n,p<255&&(n=n*p/250),a+=n*u[e],s+=n*u[e+1],c+=n*u[e+2],r+=n}}d[t]=a/r,d[t+1]=s/r,d[t+2]=c/r,d[t+3]=y/i}t(null,{data:d,width:l,height:c,colorSpace:s})},SP=e=>{if(e instanceof ImageData)return e;let t;try{t=new ImageData(e.width,e.height,{colorSpace:e.colorSpace||"srgb"})}catch(n){t=mE("canvas").getContext("2d").createImageData(e.width,e.height)}return t.data.set(e.data),t},_P=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;const{width:r,height:i,fit:o,upscale:a}=t;if(!r&&!i)return e;let s=r,l=i;if(r?i||(l=r):s=i,"force"!==o){const t=s/e.width,n=l/e.height;let c=1;if("cover"===o?c=Math.max(t,n):"contain"===o&&(c=Math.min(t,n)),c>1&&!1===a)return e;s=Math.round(e.width*c),l=Math.round(e.height*c),r&&i&&(Math.abs(s-r)<=1&&(s=r),Math.abs(l-i)<=1&&(l=i))}return s=Math.max(s,1),l=Math.max(l,1),e.width===s&&e.height===l?e:n?n(e,s,l):(e=await OE($P,[{imageData:e,width:s,height:l}],[e.data.buffer]),SP(e))},CP=(e,t)=>{const{imageData:n,matrix:r}=e;if(!r||20!==r.length)return t(null,n);const i=n.colorSpace,o=n.data,a=o.length,s=r[0],l=r[1],c=r[2],u=r[3],d=r[4],p=r[5],h=r[6],f=r[7],m=r[8],g=r[9],y=r[10],v=r[11],b=r[12],x=r[13],w=r[14],$=r[15],S=r[16],_=r[17],C=r[18],k=r[19];let E=0,T=0,I=0,P=0,R=0,M=0,A=0,O=0,L=0;const N=e=>Math.max(0,Math.min(255,255*e));for(;E<a;E+=4)T=o[E]/255,I=o[E+1]/255,P=o[E+2]/255,R=o[E+3]/255,R>0&&(T/=R,I/=R,P/=R),M=T*s+I*l+P*c+R*u+d,A=T*p+I*h+P*f+R*m+g,O=T*y+I*v+P*b+R*x+w,L=T*$+I*S+P*_+R*C+k,R>0?(T=M*R,I=A*R,P=O*R):(T=0,I=0,P=0),o[E]=N(M*L),o[E+1]=N(A*L),o[E+2]=N(O*L),o[E+3]=N(R);t(null,{data:o,width:n.width,height:n.height,colorSpace:i})},kP=(e,t)=>{const{imageData:n,matrix:r}=e;if(!r)return t(null,n);let i=r.reduce(((e,t)=>e+t));i=i<=0?1:i;const o=n.width,a=n.height,s=n.data,l=n.colorSpace;let c=0,u=0,d=0;const p=Math.round(Math.sqrt(r.length)),h=Math.floor(p/2);let f=0,m=0,g=0,y=0,v=0,b=0,x=0,w=0,$=0,S=0;const _=new Uint8ClampedArray(o*a*4);for(d=0;d<a;d++)for(u=0;u<o;u++){for(f=0,m=0,g=0,y=0,b=0;b<p;b++)for(v=0;v<p;v++)x=d+b-h,w=u+v-h,x<0&&(x=a-1),x>=a&&(x=0),w<0&&(w=o-1),w>=o&&(w=0),$=4*(x*o+w),S=r[b*p+v],f+=s[$]*S,m+=s[$+1]*S,g+=s[$+2]*S,y+=s[$+3]*S;_[c]=f/i,_[c+1]=m/i,_[c+2]=g/i,_[c+3]=y/i,c+=4}t(null,{data:_,width:o,height:a,colorSpace:l})},EP=(e,t)=>{let{imageData:n,strength:r}=e;if(!r)return t(null,n);const i=n.colorSpace,o=n.width,a=n.height,s=n.data,l=(e,t)=>(c=e-$,u=t-S,Math.sqrt(c*c+u*u));let c,u,d,p,h,f,m,g,y,v,b,x=0,w=0,$=.5*o,S=.5*a,_=l(0,0);for(r>0?(d=0,p=0,h=0):(r=Math.abs(r),d=1,p=1,h=1),w=0;w<a;w++)for(x=0;x<o;x++)C=4*(x+w*o),k=s,E=s,T=l(x,w)*r/_,f=k[C]/255,m=k[C+1]/255,g=k[C+2]/255,y=k[C+3]/255,v=1-T,b=v*y+T,E[C]=(v*y*f+T*d)/b*255,E[C+1]=(v*y*m+T*p)/b*255,E[C+2]=(v*y*g+T*h)/b*255,E[C+3]=255*b;var C,k,E,T;t(null,{data:s,width:n.width,height:n.height,colorSpace:i})},TP=(e,t)=>{const{imageData:n,level:r,monochrome:i=!1}=e;if(!r)return t(null,n);const o=n.colorSpace,a=n.data,s=a.length;let l,c,u,d=0;const p=()=>255*(2*Math.random()-1)*r,h=i?()=>{const e=p();return[e,e,e]}:()=>[p(),p(),p()];for(;d<s;d+=4)[l,c,u]=h(),a[d]=a[d]+l,a[d+1]=a[d+1]+c,a[d+2]=a[d+2]+u;t(null,{data:a,width:n.width,height:n.height,colorSpace:o})},IP=(e,t)=>{const{imageData:n,level:r}=e;if(!r)return t(null,n);const i=n.colorSpace,o=n.data,a=o.length;let s,l,c,u=0;for(;u<a;u+=4)s=o[u]/255,l=o[u+1]/255,c=o[u+2]/255,o[u]=255*Math.pow(s,r),o[u+1]=255*Math.pow(l,r),o[u+2]=255*Math.pow(c,r);t(null,{data:o,width:n.width,height:n.height,colorSpace:i})},PP=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{colorMatrix:n,convolutionMatrix:r,gamma:i,noise:o,vignette:a}=t,s=[];if(r&&s.push([kP,{matrix:r.clarity}]),i>0&&s.push([IP,{level:1/i}]),n&&!(e=>{const t=e.length;let n;const r=t>=20?6:t>=16?5:3;for(let i=0;i<t;i++){if(n=e[i],1===n&&i%r!=0)return!1;if(0!==n&&1!==n)return!1}return!0})(n)&&s.push([CP,{matrix:n}]),(o>0||o<0)&&s.push([TP,{level:o}]),(a>0||a<0)&&s.push([EP,{strength:a}]),!s.length)return e;const l=(e,t)=>`(err, imageData) => {\n            (${e[t][0].toString()})(Object.assign({ imageData: imageData }, filterInstructions[${t}]), \n                ${e[t+1]?l(e,t+1):"done"})\n        }`,c=`function (options, done) {\n        const filterInstructions = options.filterInstructions;\n        const imageData = options.imageData;\n        (${l(s,0)})(null, imageData)\n    }`;return e=await OE(c,[{imageData:e,filterInstructions:s.map((e=>e[1]))}],[e.data.buffer]),SP(e)},RP=e=>"number"==typeof e,MP=e=>hE(e)&&null!==e.match(/(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\u0023-\u0039]\ufe0f?\u20e3|\u3299|\u3297|\u303d|\u3030|\u24c2|\ud83c[\udd70-\udd71]|\ud83c[\udd7e-\udd7f]|\ud83c\udd8e|\ud83c[\udd91-\udd9a]|\ud83c[\udde6-\uddff]|\ud83c[\ude01-\ude02]|\ud83c\ude1a|\ud83c\ude2f|\ud83c[\ude32-\ude3a]|\ud83c[\ude50-\ude51]|\u203c|\u2049|[\u25aa-\u25ab]|\u25b6|\u25c0|[\u25fb-\u25fe]|\u00a9|\u00ae|\u2122|\u2139|\ud83c\udc04|[\u2600-\u26FF]|\u2b05|\u2b06|\u2b07|\u2b1b|\u2b1c|\u2b50|\u2b55|\u231a|\u231b|\u2328|\u23cf|[\u23e9-\u23f3]|[\u23f8-\u23fa]|\ud83c\udccf|\u2934|\u2935|[\u2190-\u21ff])/g),AP=(e,t)=>e.hasOwnProperty(t),OP=e=>Array.isArray(e);let LP=64,NP=102,DP=112,FP=!1;var jP=(e,t)=>(!FP&&cE()&&(/^win/i.test(navigator.platform)&&(NP=103),(mP()||hP())&&(LP=63.5,NP=110,DP=123),FP=!0),`<svg${t?` aria-label="${t}"`:""} width="128" height="128" viewBox="0 0 128 128" preserveAspectRatio="xMinYMin meet" xmlns="http://www.w3.org/2000/svg"><text x="${LP}" y="${NP}" alignment-baseline="text-top" dominant-baseline="text-top" text-anchor="middle" font-size="${DP}px">${e}</text></svg>`),zP=e=>e instanceof Blob,BP=(e,t)=>e/t*100+"%",UP=e=>`rgba(${Math.round(255*e[0])}, ${Math.round(255*e[1])}, ${Math.round(255*e[2])}, ${RP(e[3])?e[3]:1})`,WP=e=>Object.values(e).join("_");const VP=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=mE("canvas",{width:80,height:80}).getContext("2d");return await function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new Promise((t=>{setTimeout(t,e)}))}(t),n.drawImage(e,0,0,80,80),!((e=>!new Uint32Array(e.getImageData(0,0,e.canvas.width,e.canvas.height).data.buffer).some((e=>0!==e)))(n)&&t<=256)||await VP(e,t+16)},HP=new Map;var qP=e=>new Promise(((t,n)=>{const r=new FileReader;r.onerror=()=>n(r.error),r.onload=()=>t(r.result),r.readAsDataURL(e)})),GP=()=>{let e=[];return{sub:(t,n)=>(e.push({event:t,callback:n}),()=>e=e.filter((e=>e.event!==t||e.callback!==n))),pub:(t,n)=>{e.filter((e=>e.event===t)).forEach((e=>e.callback(n)))}}};const KP=32,YP=function(e){let{color:t=[0,0,0],fontSize:n=16,fontFamily:r="sans-serif",fontVariant:i="normal",fontWeight:o="normal",fontStyle:a="normal",textAlign:s="left",letterSpacing:l="normal",lineHeight:c=20}=e,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return`font-size:${n*u}px;font-style:${a};font-weight:${o};font-family:${r};font-variant:${i};line-height:${c*u}px;text-align:${s};letter-spacing:${RP(l)?l+"px":"normal"};color:${UP(t)};`},ZP=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;const{width:r,height:i,disableNewline:o}=t,a=!r,s=!1===o?function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").split("\n").length}(e):void 0,l=a?"normal":"break-word",c=a&&!s?"nowrap":"pre-line";return`max-width:none;min-width:auto;width:${a?"auto":r*n+"px"};height:${i?i*n+"px":"auto"};margin-top:0;margin-bottom:0;padding-top:${function(){let{fontSize:e=16,lineHeight:t=20}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return.5*Math.max(0,e-t)}(t)*n}px;word-break:${l};word-wrap:normal;white-space:${c};`},XP=new Map,QP=e=>{const t=[];for(const n of Array.from(e.childNodes))n.nodeType===Node.TEXT_NODE?t.push(eR(n)):t.push(...QP(n));return t},JP="pointer-events:none;visibility:hidden;position:absolute;left:0;top:0;",eR=e=>{const t=e.nodeValue;if(!t)return[];const n=t.length,r=document.createRange();r.selectNodeContents(e);const i=[];for(let a=0;a<n;a++){r.setStart(e,0),r.setEnd(e,a+1);const n=r.getClientRects().length-1,o=t.charAt(a);i[n]?i[n]+=o:i.push(o)}const o=r.getClientRects();return i.map(((e,t)=>({rect:o[t],text:e})))},tR=new Map,nR=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;const{width:n,height:r}=t;if(RP(n)&&RP(r))return zT(n,r);let{fontSize:i=16,fontFamily:o,lineHeight:a=20,fontWeight:s,fontStyle:l,fontVariant:c,letterSpacing:u}=t;const d=WP({text:e,fontFamily:o,fontWeight:s,fontStyle:l,fontVariant:c,fontSize:i,letterSpacing:u,lineHeight:a,width:n});let p=tR.get(d);if(p)return p;let h=1;i>1e3&&NE()&&(h=i/1e3,i=1e3,a/=h);const f=YI(mE("pre",{contenteditable:"true",spellcheck:"false",style:`${JP}${YP({...t,fontSize:i,lineHeight:a})};${ZP(e,t)}"`,innerHTML:e})).getBoundingClientRect();return p=NT(f),p=qT(p,(e=>e*h)),n&&(p.width=n),tR.set(d,p),p},rR=new Map,iR=async(e,t,n)=>{let r;try{r=await((e,t)=>new Promise(((n,r)=>{let i=rR.get(e);void 0===i&&(i=((e,t)=>{const{sub:n,pub:r}=GP();let i,o;return Promise.resolve(t&&t(e,{resourceType:"stylesheet"})).then((t=>{if(!1===t)return o="requestPrevented",r("error",o);const{headers:n,credentials:a}=t||{};fetch(e,{headers:n,credentials:a}).then((e=>e.text())).then((e=>{i=e,r("load",i)})).catch((e=>{o=e,r("error",o)}))})),{sub:(e,t)=>"load"===e&&i?t(i):"error"===e&&o?t(o):void n(e,t)}})(e,t),rR.set(e,i)),i.sub("load",n),i.sub("error",r)})))(e,t)}catch(e){return[]}const i={innerHTML:r,id:ME()};n&&(i.nonce=n);const o=mE("style",i);document.head.append(o);const a=Array.from(document.styleSheets).find((e=>e.ownerNode.id===o.id));return o.remove(),Array.from(a.cssRules)},oR=new Map,aR=(e,t)=>e.style.getPropertyValue(t),sR=(e,t)=>!!e.style&&aR(e,"font-family").replace(/^"|"$/g,"")==t,lR=async(e,t,n)=>{const r=((e,t)=>{const n=[];for(const r of e)sR(r,t)&&n.push(r);return n})(await(async(e,t)=>{const n=Array.from(document.styleSheets).map((n=>(async(e,t,n)=>{if(oR.has(e.href))return oR.get(e.href);let r;try{r=Array.from(e.cssRules);for(const e of(e=>e.filter((e=>e instanceof CSSImportRule)))(r)){const i=e.href;if(oR.has(i)){const e=oR.get(i);r=[...r,...e];continue}const o=await iR(i,t,n);oR.set(i,o),r=[...r,...o]}}catch(i){const a=e.href;r=await iR(a,t,n),oR.set(a,r)}return(e=>e.filter((e=>e instanceof CSSFontFaceRule)))(r)})(n,e,t))),r=await Promise.all(n),i=[];return r.forEach((e=>i.push(...e))),i})(t,n),e);return r.length?r.map((e=>{const t=e.parentStyleSheet&&e.parentStyleSheet.href&&new URL(e.parentStyleSheet.href),n=t?t.origin+(e=>e.pathname.split("/").slice(0,-1).join("/"))(t)+"/":"",r=e.style.getPropertyValue("src").match(/url\("?(.*?)"?\)/)[1],i=Array.from(e.style).filter((e=>"src"!=e)).reduce(((t,n)=>t+(n+":")+aR(e,n)+";"),"");return[/^http/.test(r)?r:n+r,i]})):[]},cR=new Map,uR=new Map;var dR=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;if(!e.length)return;let{color:n,imageWidth:r=300,imageHeight:i=150,paddingTop:o=0,paddingRight:a=KP,paddingBottom:s=0,paddingLeft:l=KP,fontFamily:c,fontSize:u,pixelRatio:d=1,willRequest:p,outline:h,blur:f,styleNonce:m}=t,g=1,y="";u>1e3&&NE()&&(g=u/1e3,y=`transform-origin:0 0;transform:scale(${g})`);const v=d/g,b=(r+l+a)*d,x=(i+s+o)*d,w=await(async(e,t,n)=>{if(cR.get(e))return;let r=uR.get(e);if(!r){const o=await lR(e,t,n);if(!o.length)return void cR.set(e,!0);const a=[];for(const[e,t]of o){const n=await fetch(e).then((e=>e.blob())),r=!(i=n.type)||/woff2/.test(i)?"woff2":/woff/.test(i)?"woff":/ttf|truetype/.test(i)?"truetype":/otf|opentype/.test(i)?"opentype":/svg/.test(i)?"svg":"woff2",o=await qP(n);a.push(`@font-face { src:url(${o}) format('${r}');${t};font-display:block; }`)}r=a.join(""),uR.set(e,r)}var i;return r})(c,p,m);let $="";w&&($=`<style${m?` nonce="${m}"`:""}>${w}</style>`);const S=e.replace(/%/g,"%25").replace(/#/g,"%23").replace(/&nbsp;/g,"\xa0").replace(/&(?!#\d{4};|[a-z]+;)/gi,"&amp;").replace(/<br>|\n/g,"<br/>"),_=`top:${o*v}px;right:${a*v}px;bottom:${s*v}px;left:${l*v}px`;let C=n,k="",E="";if(h||f){const e=UP(n);h&&(C=[0,0,0,0],k=`-webkit-text-stroke: ${2*h*v}px ${e}`),f&&(XI()?E=`filter:blur(${f*v*.4}px)`:(C=[0,0,0,0],E=`text-shadow: 0 0 ${f*v}px ${e}`))}return function(e){let{safariCacheKey:t="*"}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise(((n,r)=>{const i=new Image;i.onerror=()=>r(new Error("Failed to load SVG")),i.onload=()=>{if(!XI()||!e.includes("@font-face")||HP.has(t))return n(i);VP(i).then((()=>{HP.set(t,!0),n(i)}))},i.src="data:image/svg+xml,"+e}))}(`<svg xmlns="http://www.w3.org/2000/svg" width="${b}" height="${x}" viewBox="0 0 ${b} ${x}"><foreignObject x="0" y="0" width="${b}" height="${x}"><div xmlns="http://www.w3.org/1999/xhtml">${$}<pre contenteditable="true" spellcheck="false" style="position:absolute;${_};${YP({...t,color:C,fontSize:u},v)};${ZP(e,t,v)};${y};${k};${E}">${S}</pre></div></foreignObject></svg>`,{safariCacheKey:c})};const pR=e=>{const t={...e};return EE(t)},hR=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=fI(e);let r,i;const o=t.width||t.rx,a=t.height||t.ry;if(o&&a)return LT(t);if(o||a){r=parseFloat(o||Number.MAX_SAFE_INTEGER),i=parseFloat(a||Number.MAX_SAFE_INTEGER);const e=Math.min(r,i);hE(o)||hE(a)?(r=e+"%",i=e*n+"%"):(r=e,i=e)}else{const e=10;r=e+"%",i=e*n+"%"}return{[(t.width?"width":t.rx?"rx":void 0)||"width"]:r,[(t.width?"height":t.rx?"ry":void 0)||"height"]:i}},fR=function(e){return{width:void 0,height:void 0,...arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},aspectRatio:1,backgroundImage:(t=jP(e),"data:image/svg+xml,"+t.replace("<","%3C").replace(">","%3E"))};var t},mR=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{backgroundColor:[0,0,0,0],...SR(t)?{}:{width:void 0,height:void 0,aspectRatio:void 0},...t,backgroundImage:hE(e)?e:zP(e)?URL.createObjectURL(e):e}},gR=(e,t)=>{let n;if(hE(e)||zP(e)){const r={...hR(t),backgroundSize:"contain"};n=MP(e)?fR(e,r):mR(e,r)}else if(e.src){const r=hR(t,e.shape||e),i={...e.shape,...r};if(e.width&&e.height&&!AP(i,"aspectRatio")){const e=fM(r,"width",t),n=fM(r,"height",t);i.aspectRatio=GE(e,n)}i.backgroundSize||e.shape||e.width&&e.height||(i.backgroundSize="contain"),n=MP(e.src)?fR(e.src,i):mR(e.src,i)}else e.shape&&(n=pR(e.shape));return AP(n,"backgroundImage")&&(AP(n,"backgroundColor")||(n.backgroundColor=[0,0,0,0]),AP(n,"disableStyle")||(n.disableStyle=["cornerRadius","backgroundColor","strokeColor","strokeWidth"])),t?pM(n,t):n},yR=e=>hT(e.x1,e.y1),vR=e=>hT(e.x2,e.y2),bR=e=>AP(e,"text"),xR=e=>bR(e)&&!(AR(e)||AP(e,"width")),wR=e=>bR(e)&&(AR(e)||AP(e,"width")),$R=e=>!bR(e)&&OR(e),SR=e=>AP(e,"rx"),_R=e=>AP(e,"x1"),CR=e=>AP(e,"points"),kR=e=>bR(e)&&e.isEditing,ER=e=>!AP(e,"opacity")||e.opacity>0,TR=e=>e.isSelected,IR=e=>e.isEditing,PR=e=>e._isDraft,RR=e=>AP(e,"width")&&AP(e,"height"),MR=e=>{const t=AP(e,"right"),n=AP(e,"bottom");return t||n},AR=e=>(AP(e,"x")||AP(e,"left"))&&AP(e,"right")||(AP(e,"y")||AP(e,"top"))&&AP(e,"bottom"),OR=e=>RR(e)||AR(e),LR=e=>(e._isDraft=!0,e),NR=e=>(e._isDraft=!1,e),DR=(e,t)=>!0!==e.disableStyle&&(!OP(e.disableStyle)||!t||!e.disableStyle.includes(t)),FR=e=>!0!==e.disableSelect,jR=e=>!0!==e.disableRemove,zR=e=>!0!==e.disableDuplicate&&GR(e),BR=e=>!e.disableFlip&&!PR(e)&&!MR(e)&&(e=>AP(e,"backgroundImage")||AP(e,"text"))(e),UR=(e,t)=>!!bR(e)&&!0!==e.disableInput&&(TE(e.disableInput)?e.disableInput(null!=t?t:e.text):t||!0),WR=(e,t)=>!0!==e.disableTextLayout&&(!OP(e.disableTextLayout)||!t||!e.disableTextLayout.includes(t)),VR=e=>HR(e)&&e.points.length>3,HR=e=>!!CR(e)&&void 0!==e.disableAddPoints&&!0!==e.disableAddPoints,qR=e=>!0!==e.disableManipulate&&!PR(e)&&!MR(e),GR=e=>qR(e)&&!0!==e.disableMove,KR=e=>(delete e.left,delete e.right,delete e.top,delete e.bottom,e),YR=e=>(delete e.rotation,e),ZR=e=>(e.strokeWidth=e.strokeWidth||1,e.strokeColor=e.strokeColor||[0,0,0],e),XR=e=>(e.backgroundColor=e.backgroundColor?e.backgroundColor:e.strokeWidth||e.backgroundImage?void 0:[0,0,0],e),QR=e=>{let t=e.text;t=t.replace(/&(#[0-9]+|[a-z]+);/gi,((e,t)=>`___${t}___`)),t=t.replace(/&/,"&amp;"),e.text=t.replace(/___(#[0-9]+|[a-z]+)___/gi,((e,t)=>`&${t};`))},JR=e=>{if(!e.textShadow)return e;const[t,n,r,i]=e.textShadow;return e.textShadowX=t,e.textShadowY=n,e.textShadowBlur=r,e.textShadowColor=i,delete e.textShadow,e},eM=e=>{if(!e.textOutline)return e;const[t,n]=e.textOutline;e.textOutlineWidth=t,e.textOutlineColor=n,delete e.textOutline},tM=e=>(!1!==e.disableNewline&&(delete e.textAlign,e.text=e.text.replace(/\n/g," ")),KR(e)),nM=e=>(e.textAlign=e.textAlign||"left",e),rM=e=>((e=>{hE(e.id)||(e.id=ME()),AP(e,"rotation")||(e.rotation=0),AP(e,"opacity")||(e.opacity=1),AP(e,"disableErase")||(e.disableErase=!0)})(e),bR(e)?(e=>{e.fontSize=e.fontSize||"4%",e.fontFamily=e.fontFamily||"sans-serif",e.fontWeight=e.fontWeight||"normal",e.fontStyle=e.fontStyle||"normal",e.fontVariant=e.fontVariant||"normal",e.lineHeight=e.lineHeight||"120%",e.color=e.color||[0,0,0],e.format="html"===e.format?"html":"text",JR(e),eM(e),"html"===e.format?QR(e):(e=>{QR(e);let t=e.text;t=t.replace(/</g,"&gt;"),t=t.replace(/>/g,"&lt;"),e.text=t})(e),xR(e)?tM(e):nM(e)})(e):$R(e)?(e=>{e.cornerRadius=e.cornerRadius||0,e.strokeWidth=e.strokeWidth||0,e.strokeColor=e.strokeColor||[0,0,0],XR(e)})(e):CR(e)?(e=>{ZR(e),YR(e),AP(e,"pathClose")||(e.disableResize=!0,AP(e,"disableMove")||(e.disableMove=!0)),KR(e)})(e):_R(e)?(e=>{ZR(e),e.lineStart=e.lineStart||void 0,e.lineEnd=e.lineEnd||void 0,YR(e),KR(e)})(e):SR(e)&&(e=>{e.strokeWidth=e.strokeWidth||0,e.strokeColor=e.strokeColor||[0,0,0],XR(e)})(e),e),iM=e=>bR(e)?"text":$R(e)?"rectangle":CR(e)?"path":_R(e)?"line":SR(e)?"ellipse":void 0,oM=(e,t)=>parseFloat(e)/100*t,aM=new RegExp(/^x|left|right|^width|rx|fontSize|eraseRadius|feather|cornerRadius|strokeWidth|strokeDash/,"i"),sM=new RegExp(/^y|top|bottom|^height|ry/,"i"),lM=(e,t,n)=>{let{width:r,height:i}=n;if(Array.isArray(t))return t.map((t=>(CE(t)&&dM(t,{width:r,height:i}),hE(t)&&(t=lM(e,t,{width:r,height:i})),t)));if("string"!=typeof t)return t;if(!t.endsWith("%"))return t;const o=parseFloat(t)/100;return aM.test(e)?cT(r*o,6):sM.test(e)?cT(i*o,6):t},cM=lM,uM=["lineHeight","textOutlineWidth","textShadowX","textShadowY","textShadowBlur"],dM=(e,t)=>{Object.entries(e).map((n=>{let[r,i]=n;e[r]=lM(r,i,t)})),e.text&&uM.filter((t=>hE(e[t]))).forEach((t=>{var n,r;e[t]=(n=e[t],r=e.fontSize,Math.round(r*(parseFloat(n)/100)))}))},pM=(e,t)=>(dM(e,t),bM(e,t),e),hM=(e,t)=>{let n;return/^x|width|rx|fontSize|strokeWidth|cornerRadius/.test(e)?n=t.width:/^y|height|ry/.test(e)&&(n=t.height),n},fM=(e,t,n)=>Array.isArray(e[t])?e[t].map((e=>Object.entries(e).reduce(((e,t)=>{let[r,i]=t;return e[r]=hE(i)?oM(i,hM(r,n)):i,e}),{}))):hE(e[t])?oM(e[t],hM(t,n)):e[t],mM=(e,t,n)=>t.reduce(((t,r)=>{const i=fM(e,r,n);return t[r]=i,t}),{}),gM=(e,t,n)=>(Object.keys(t).forEach((r=>((e,t,n,r)=>{if(!hE(e[t]))return e[t]=n,e;const i=hM(t,r);return e[t]=void 0===i?n:BP(n,i),e})(e,r,t[r],n))),e),yM=(e,t)=>{const n=e.filter((e=>e.x<0||e.y<0||e.x1<0||e.y1<0)).reduce(((e,t)=>{const[n,r,i,o]=(e=>{const t=JT(),n=e.strokeWidth||0;if($R(e))t.x=e.x-.5*n,t.y=e.y-.5*n,t.width=e.width+n,t.height=e.height+n;else if(_R(e)){const{x1:r,y1:i,x2:o,y2:a}=e,s=Math.abs(Math.min(r,o)),l=Math.abs(Math.max(r,o)),c=Math.abs(Math.min(i,a)),u=Math.abs(Math.min(i,a));t.x=s+.5*n,t.y=l+.5*n,t.width=l-s+n,t.height=u-c+n}else SR(e)&&(t.x=e.x-e.rx+.5*n,t.y=e.y-e.ry+.5*n,t.width=2*e.rx+n,t.height=2*e.ry+n);return t&&AP(e,"rotation")&&yI(t,e.rotation),$I(t)})(t);return e.top=Math.min(n,e.top),e.left=Math.min(o,e.left),e.bottom=Math.max(i,e.bottom),e.right=Math.max(r,e.right),e}),{top:0,right:0,bottom:0,left:0});return n.right>0&&(n.right-=t.width),n.bottom>0&&(n.bottom-=t.height),n},vM=(e,t,n)=>{const r=pR(e);pM(r,t);const i=n(r);return Array.isArray(i)?i:[i]},bM=(e,t)=>{if(AP(e,"left")&&(e.x=e.left),AP(e,"right")&&!hE(e.right)){const n=t.width-e.right;AP(e,"left")?(e.x=e.left,e.width=Math.max(0,n-e.left)):AP(e,"width")&&(e.x=n-e.width)}if(AP(e,"top")&&(e.y=e.top),AP(e,"bottom")&&!hE(e.bottom)){const n=t.height-e.bottom;AP(e,"top")?(e.y=e.top,e.height=Math.max(0,n-e.top)):AP(e,"height")&&(e.y=n-e.height)}return e},xM=(e,t)=>(CR(e)&&e.points.filter((e=>RP(e.x))).forEach((e=>{e.x*=t,e.y*=t})),_R(e)&&RP(e.x1)&&(e.x1*=t,e.y1*=t,e.x2*=t,e.y2*=t),RP(e.x)&&RP(e.y)&&(e.x*=t,e.y*=t),RP(e.width)&&RP(e.height)&&(e.width*=t,e.height*=t),RP(e.rx)&&RP(e.ry)&&(e.rx*=t,e.ry*=t),(e=>RP(e.strokeWidth)&&e.strokeWidth>0)(e)&&(e.strokeWidth*=t),bR(e)&&(e._scale=t,RP(e.fontSize)&&(e.fontSize*=t),RP(e.lineHeight)&&(e.lineHeight*=t),RP(e.width)&&!RP(e.height)&&(e.width*=t)),AP(e,"cornerRadius")&&RP(e.cornerRadius)&&(e.cornerRadius*=t),e),wM=e=>{if($R(e))return hT(e.x+.5*e.width,e.y+.5*e.height);if(SR(e))return hT(e.x,e.y);if(e.text){if(wR(e)){const t=e.height||nR(e.text,e).height;return hT(e.x+.5*e.width,e.y+.5*t)}const t=nR(e.text,e);return hT(e.x+.5*t.width,e.y+.5*t.height)}return CR(e)?RT(e.points):_R(e)?RT([yR(e),vR(e)]):void 0};var $M=e=>/canvas/i.test(e.nodeName);const SM=new Map([]),_M=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise(((n,r)=>{const{onMetadata:i=eE,onLoad:o=n,onError:a=r,onComplete:s=eE}=t;let l=SM.get(e);if(l||(l={loading:!1,complete:!1,error:!1,image:void 0,size:void 0,bus:GP()},SM.set(e,l)),l.bus.sub("meta",i),l.bus.sub("load",o),l.bus.sub("error",a),l.bus.sub("complete",s),$M(e)){const t=e,n=t.cloneNode();l.complete=!0,l.image=n,l.size=jT(t)}if(l.complete)return l.bus.pub("meta",{size:l.size}),l.error?l.bus.pub("error",l.error):l.bus.pub("load",l.image),l.bus.pub("complete"),void(l.bus=GP());l.loading||(l.loading=!0,((e,t)=>new Promise(((n,r)=>{let i=e,o=!1;const a=()=>{o||(o=!0,TE(t)&&Promise.resolve().then((()=>t(zT(i.naturalWidth,i.naturalHeight)))))};if(i.src||(i=new Image,hE(e)&&new URL(e,location.href).origin!==location.origin&&(i.crossOrigin="anonymous"),i.src=hE(e)?e:URL.createObjectURL(e)),i.complete)return a(),n(i);TE(t)&&QI(i).then(a).catch(r),i.onload=()=>{a(),n(i)},i.onerror=()=>r(new Error("Failed to load image"))})))(e,(e=>{l.size=e,l.bus.pub("meta",{size:e})})).then((e=>{l.image=e,l.bus.pub("load",e)})).catch((e=>{l.error=e,l.bus.pub("error",e)})).finally((()=>{l.complete=!0,l.loading=!1,l.bus.pub("complete"),l.bus=GP()})))}))},CM=(e,t,n,r)=>e.drawImage(t,n.x,n.x,n.width,n.height,r.x,r.y,r.width,r.height);var kM=async function(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:CM,o=arguments.length>5?arguments[5]:void 0;e.save(),e.clip(),await i(e,t,n,r,o),e.restore()};const EM=(e,t,n,r,i)=>{const o=QT(e);if(r){const e=_I(rI(r),cT);return e.x*=n.width,e.width*=n.width,e.y*=n.height,e.height*=n.height,{srcRect:e,destRect:o}}const a=aI(0,0,n.width,n.height);if("contain"===t){const t=wI(e,fI(a));o.width=t.width,o.height=t.height,i?(o.x+=i.x,o.y+=i.y):(o.x+=t.x,o.y+=t.y)}else if("cover"===t){const e=xI(o,a.width/a.height);o.width=e.width,o.height=e.height,i?(o.x+=i.x,o.y+=i.y):(o.x+=e.x,o.y+=e.y)}else t?(o.width=t.width,o.height=t.height,i&&(o.x+=i.x,o.y+=i.y)):i&&(o.width=n.width,o.height=n.height,o.x+=i.x,o.y+=i.y);return{srcRect:a,destRect:o}},TM=(e,t)=>(t.cornerRadius>0?((e,t,n,r,i,o)=>{r<2*o&&(o=r/2),i<2*o&&(o=i/2),e.beginPath(),e.moveTo(t+o,n),e.arcTo(t+r,n,t+r,n+i,o),e.arcTo(t+r,n+i,t,n+i,o),e.arcTo(t,n+i,t,n,o),e.arcTo(t,n,t+r,n,o),e.closePath()})(e,t.x,t.y,t.width,t.height,t.cornerRadius):e.rect(t.x,t.y,t.width,t.height),e),IM=(e,t)=>(t.backgroundColor&&e.fill(),e),PM=(e,t)=>(t.strokeWidth&&e.stroke(),e);var RM=async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{drawImage:r}=n;if(e.lineWidth=t.strokeWidth?t.strokeWidth:1,e.strokeStyle=t.strokeColor?UP(t.strokeColor):"none",e.fillStyle=t.backgroundColor?UP(t.backgroundColor):"none",e.globalAlpha=t.opacity,t.backgroundImage){let n;if(n=$M(t.backgroundImage)?t.backgroundImage:await _M(t.backgroundImage),TM(e,t),IM(e,t),"repeat"===t.backgroundRepeat){const i=t.backgroundPosition||{x:0,y:0},{srcRect:o,destRect:a}=EM(t,t.backgroundSize||jT(n),jT(n),t.backgroundCorners,{x:0,y:0}),s=document.createElement("canvas");s.width=a.width,s.height=a.height;const l=s.getContext("2d",{willReadFrequently:!1,desynchronized:!0});await r(l,n,o,{...a,x:0,y:0});const c=e.createPattern(s,"repeat");e.fillStyle=c,e.save(),e.beginPath(),e.rect(t.x+i.x,t.y+i.y,t.width-i.x,t.height-i.y),e.clip(),e.translate(a.x+i.x,a.y+i.y),e.fill(),yE(s),e.restore()}else{const{srcRect:i,destRect:o}=EM(t,t.backgroundSize,jT(n),t.backgroundCorners,t.backgroundPosition);await kM(e,n,i,o,r,{feather:t.feather})}return e.beginPath(),TM(e,t),PM(e,t),[]}return TM(e,t),IM(e,t),PM(e,t),[]},MM=async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise((async(r,i)=>{const{drawImage:o}=n;if(e.lineWidth=t.strokeWidth||1,e.strokeStyle=t.strokeColor?UP(t.strokeColor):"none",e.fillStyle=t.backgroundColor?UP(t.backgroundColor):"none",e.globalAlpha=t.opacity,e.ellipse(t.x,t.y,t.rx,t.ry,0,0,2*Math.PI),t.backgroundColor&&e.fill(),t.backgroundImage){let n;try{n=await _M(t.backgroundImage)}catch(e){i(e)}const a=aI(t.x-t.rx,t.y-t.ry,2*t.rx,2*t.ry),{srcRect:s,destRect:l}=EM(a,t.backgroundSize,jT(n),t.backgroundCorners,t.backgroundPosition);await kM(e,n,s,l,o),t.strokeWidth&&e.stroke(),r([])}else t.strokeWidth&&e.stroke(),r([])}))},AM=async(e,t,n)=>{const r=RP(t.width)?Math.floor(t.width):void 0,i=RP(t.height)?Math.floor(t.height):void 0,o=r&&i?NT(t):nR(t.text,{...t,width:r,height:i}),a={x:t.x,y:t.y,width:o.width,height:o.height};if(RM(e,{...t,...a,options:n}),!t.text.length)return[];const{textOutlineWidth:s=0,textShadowX:l=0,textShadowY:c=0,textShadowBlur:u=0,textShadowColor:d,outline:p,blur:h,...f}=t,m=!!t.height;if(m&&(e.rect(a.x,a.y,a.width,a.height),e.save(),e.clip()),l||c||u){e.save(),e.translate(l,c);const o={...a};m||(o.height+=KP+u),await OM(e,o,{...t,width:r,height:i},{...n,paddingLeft:KP+u,paddingRight:KP+u,paddingTop:u,paddingBottom:u+(m?-1*c:t.fontSize),shapeExtendedProps:{color:d,blur:u}}),e.restore()}if(s){const o={...a};m||(o.height+=KP+s),await OM(e,o,{...t,width:r,height:i},{...n,paddingLeft:KP+s,paddingRight:KP+s,paddingTop:s,paddingBottom:s+m?0:t.fontSize,shapeExtendedProps:{color:t.textOutlineColor,outline:s}})}return m&&e.restore(),await OM(e,a,{...f,width:r,height:i},{...n,paddingLeft:KP,paddingRight:KP,paddingTop:0,paddingBottom:m?0:t.fontSize}),[]};const OM=async(e,t,n,r)=>{const{willRequest:i,shapeExtendedProps:o,paddingLeft:a,paddingRight:s,paddingTop:l,paddingBottom:c,styleNonce:u}=r,d=RP(n.width)?Math.floor(t.width):void 0,p=RP(n.height)?Math.floor(t.height):void 0,h=Math.ceil(t.width),f=Math.ceil(t.height),m=await dR(n.text,{...n,...o,...t,width:d,height:p,paddingLeft:a,paddingRight:s,paddingTop:l,paddingBottom:c,imageWidth:h,imageHeight:f,willRequest:i,styleNonce:u});e.drawImage(m,n.x-a,n.y-l,m.width,m.height)};var LM=async(e,t)=>new Promise((async n=>{e.lineWidth=t.strokeWidth||1,e.strokeStyle=t.strokeColor?UP(t.strokeColor):"none",e.globalAlpha=t.opacity,t.bitmap&&(e.lineCap=t.strokeCap,e.lineJoin=t.strokeJoin,e.setLineDash(t.strokeDash||[]));let r=yR(t),i=vR(t);e.moveTo(r.x,r.y),e.lineTo(i.x,i.y),t.strokeWidth&&e.stroke(),n([])})),NM=async(e,t)=>new Promise(((n,r)=>{if(t.bitmap&&1===t.points.length)return void MM(e,{x:t.points[0].x,y:t.points[0].y,rx:.5*t.strokeWidth,ry:.5*t.strokeWidth,backgroundColor:t.strokeColor}).then((()=>n([])));e.lineWidth=t.strokeWidth||1,e.strokeStyle=t.strokeColor?UP(t.strokeColor):"none",e.fillStyle=t.backgroundColor?UP(t.backgroundColor):"none",e.globalAlpha=t.opacity;const{points:i}=t;t.bitmap&&(e.lineCap=t.strokeCap,e.lineJoin=t.strokeJoin,e.setLineDash(t.strokeDash||[])),t.pathClose&&e.beginPath(),e.moveTo(i[0].x,i[0].y);const o=i.length;for(let t=1;t<o;t++)e.lineTo(i[t].x,i[t].y);t.pathClose&&e.closePath(),t.strokeWidth&&e.stroke(),t.backgroundColor&&e.fill(),n([])})),DM=(e,t,n,r)=>t||n?(e.translate(r.x,r.y),e.scale(t?-1:1,n?-1:1),e.translate(-r.x,-r.y),e):e;const FM=async(e,t,n)=>{e.globalCompositeOperation="subtract"===t.drawMode?"destination-out":"source-over";const r=wM(t);let i;if(bP(e,t.rotation,r),DM(e,t.flipX,t.flipY,r),$R(t)?i=RM:SR(t)?i=MM:_R(t)?i=LM:CR(t)?i=NM:bR(t)&&(i=AM),i){const r=await i(e,t,n);return r.length?[t,...await jM(e,r,n)]:[]}return[]};var jM=async(e,t,n)=>{let r=[];for(const i of t)e.save(),e.beginPath(),r=[...r,...await FM(e,i,n)],e.restore();return r},zM=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{shapes:n=[],contextBounds:r=e,transform:i=eE,drawImage:o,willRequest:a,styleNonce:s,canvasMemoryLimit:l,computeShape:c=KE,preprocessShape:u=KE}=t;if(!n.length)return e;const d={willReadFrequently:!0,colorSpace:e.colorSpace},p=mE("canvas");p.width=r.width,p.height=r.height;const h=p.getContext("2d",d);h.putImageData(e,r.x||0,r.y||0);const f=n.map(pR).map(c).map(u).flat().filter(Boolean);i(h),await jM(h,f,{drawImage:o,canvasMemoryLimit:l,willRequest:a,styleNonce:s});const m=h.getImageData(0,0,p.width,p.height);return yE(p),m},BM=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{backgroundFilterMode:n,backgroundColor:r,backgroundImage:i}=t,o=!(!r||r&&0===r[3]);if(!i&&!o)return e;const a={willReadFrequently:!0,colorSpace:e.colorSpace},s=mE("canvas");s.width=e.width,s.height=e.height;const l=s.getContext("2d",a);if(l.putImageData(e,0,0),l.globalCompositeOperation="destination-over",o&&(l.fillStyle=UP(r),l.fillRect(0,0,s.width,s.height)),i){let r,o;if($M(i)?r=i:(r=await _M(i),"image"===n&&(r=IE(r,{contextOptions:a}))),"image"===n){const e=pE(r),n=await PP(e,t);o=await SE(n)}const{srcRect:s,destRect:c}=EM({x:0,y:0,width:e.width,height:e.height},"cover",{width:r.width,height:r.height});l.drawImage(o||r,s.x,s.y,s.width,s.height,c.x,c.y,c.width,c.height),o&&yE(o),n&&"none"!==n&&r&&!$M(i)&&yE(r)}const c=l.getImageData(0,0,s.width,s.height);return yE(s),c},UM=e=>e.length?e.reduce(((e,t)=>((e,t)=>{const n=new Array(20);return n[0]=e[0]*t[0]+e[1]*t[5]+e[2]*t[10]+e[3]*t[15],n[1]=e[0]*t[1]+e[1]*t[6]+e[2]*t[11]+e[3]*t[16],n[2]=e[0]*t[2]+e[1]*t[7]+e[2]*t[12]+e[3]*t[17],n[3]=e[0]*t[3]+e[1]*t[8]+e[2]*t[13]+e[3]*t[18],n[4]=e[0]*t[4]+e[1]*t[9]+e[2]*t[14]+e[3]*t[19]+e[4],n[5]=e[5]*t[0]+e[6]*t[5]+e[7]*t[10]+e[8]*t[15],n[6]=e[5]*t[1]+e[6]*t[6]+e[7]*t[11]+e[8]*t[16],n[7]=e[5]*t[2]+e[6]*t[7]+e[7]*t[12]+e[8]*t[17],n[8]=e[5]*t[3]+e[6]*t[8]+e[7]*t[13]+e[8]*t[18],n[9]=e[5]*t[4]+e[6]*t[9]+e[7]*t[14]+e[8]*t[19]+e[9],n[10]=e[10]*t[0]+e[11]*t[5]+e[12]*t[10]+e[13]*t[15],n[11]=e[10]*t[1]+e[11]*t[6]+e[12]*t[11]+e[13]*t[16],n[12]=e[10]*t[2]+e[11]*t[7]+e[12]*t[12]+e[13]*t[17],n[13]=e[10]*t[3]+e[11]*t[8]+e[12]*t[13]+e[13]*t[18],n[14]=e[10]*t[4]+e[11]*t[9]+e[12]*t[14]+e[13]*t[19]+e[14],n[15]=e[15]*t[0]+e[16]*t[5]+e[17]*t[10]+e[18]*t[15],n[16]=e[15]*t[1]+e[16]*t[6]+e[17]*t[11]+e[18]*t[16],n[17]=e[15]*t[2]+e[16]*t[7]+e[17]*t[12]+e[18]*t[17],n[18]=e[15]*t[3]+e[16]*t[8]+e[17]*t[13]+e[18]*t[18],n[19]=e[15]*t[4]+e[16]*t[9]+e[17]*t[14]+e[18]*t[19]+e[19],n})([...e],t)),e.shift()):[],WM=(e,t)=>{const n=e.width*e.height,r=t.reduce(((e,t)=>(t.width>e.width&&t.height>e.height&&(e.width=t.width,e.height=t.height),e)),{width:0,height:0}),i=r.width*r.height;return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return Math.round(e*t)/t}(Math.max(.5,.5+(1-i/n)/2),5)};function VM(){}const HM=e=>e;function qM(e,t){for(const n in t)e[n]=t[n];return e}function GM(e){return e()}function KM(){return Object.create(null)}function YM(e){e.forEach(GM)}function ZM(e){return"function"==typeof e}function XM(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}let QM;function JM(e,t){return QM||(QM=document.createElement("a")),QM.href=t,e===QM.href}function eA(e){if(null==e)return VM;for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=e.subscribe(...n);return i.unsubscribe?()=>i.unsubscribe():i}function tA(e){let t;return eA(e,(e=>t=e))(),t}function nA(e,t,n){e.$$.on_destroy.push(eA(t,n))}function rA(e,t,n,r){if(e){const i=iA(e,t,n,r);return e[0](i)}}function iA(e,t,n,r){return e[1]&&r?qM(n.ctx.slice(),e[1](r(t))):n.ctx}function oA(e,t,n,r){if(e[2]&&r){const i=e[2](r(n));if(void 0===t.dirty)return i;if("object"==typeof i){const e=[],n=Math.max(t.dirty.length,i.length);for(let r=0;r<n;r+=1)e[r]=t.dirty[r]|i[r];return e}return t.dirty|i}return t.dirty}function aA(e,t,n,r,i,o){if(i){const a=iA(t,n,r,o);e.p(a,i)}}function sA(e){if(e.ctx.length>32){const t=[],n=e.ctx.length/32;for(let e=0;e<n;e++)t[e]=-1;return t}return-1}function lA(e){const t={};for(const n in e)"$"!==n[0]&&(t[n]=e[n]);return t}function cA(e,t){const n={};t=new Set(t);for(const r in e)t.has(r)||"$"===r[0]||(n[r]=e[r]);return n}function uA(e,t,n){return e.set(n),t}function dA(e){return e&&ZM(e.destroy)?e.destroy:VM}const pA="undefined"!=typeof window;let hA=pA?()=>window.performance.now():()=>Date.now(),fA=pA?e=>requestAnimationFrame(e):VM;const mA=new Set;function gA(e){mA.forEach((t=>{t.c(e)||(mA.delete(t),t.f())})),0!==mA.size&&fA(gA)}function yA(e){let t;return 0===mA.size&&fA(gA),{promise:new Promise((n=>{mA.add(t={c:e,f:n})})),abort(){mA.delete(t)}}}function vA(e,t){e.appendChild(t)}function bA(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function xA(e){const t=SA("style");return function(e,t){vA(e.head||e,t),t.sheet}(bA(e),t),t.sheet}function wA(e,t,n){e.insertBefore(t,n||null)}function $A(e){e.parentNode.removeChild(e)}function SA(e){return document.createElement(e)}function _A(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function CA(e){return document.createTextNode(e)}function kA(){return CA(" ")}function EA(){return CA("")}function TA(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function IA(e){return function(t){return t.preventDefault(),e.call(this,t)}}function PA(e){return function(t){return t.stopPropagation(),e.call(this,t)}}function RA(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function MA(e,t){const n=Object.getOwnPropertyDescriptors(e.__proto__);for(const r in t)null==t[r]?e.removeAttribute(r):"style"===r?e.style.cssText=t[r]:"__value"===r?e.value=e[r]=t[r]:n[r]&&n[r].set?e[r]=t[r]:RA(e,r,t[r])}function AA(e,t){Object.keys(t).forEach((n=>{!function(e,t,n){t in e?e[t]="boolean"==typeof e[t]&&""===n||n:RA(e,t,n)}(e,n,t[n])}))}function OA(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function LA(e,t){e.value=null==t?"":t}function NA(e,t,n,r){null===n?e.style.removeProperty(t):e.style.setProperty(t,n,r?"important":"")}function DA(e,t){let{bubbles:n=!1,cancelable:r=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=document.createEvent("CustomEvent");return i.initCustomEvent(e,n,r,t),i}class FA{constructor(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.is_svg=!1,this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.e||(this.is_svg?this.e=_A(t.nodeName):this.e=SA(t.nodeName),this.t=t,this.c(e)),this.i(n)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.childNodes)}i(e){for(let t=0;t<this.n.length;t+=1)wA(this.t,this.n[t],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach($A)}}function jA(e,t){return new e(t)}const zA=new Map;let BA,UA=0;function WA(e,t,n,r,i,o,a){let s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0;const l=16.666/r;let c="{\n";for(let g=0;g<=1;g+=l){const e=t+(n-t)*o(g);c+=100*g+`%{${a(e,1-e)}}\n`}const u=c+`100% {${a(n,1-n)}}\n}`,d=`__svelte_${function(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}(u)}_${s}`,p=bA(e),{stylesheet:h,rules:f}=zA.get(p)||function(e,t){const n={stylesheet:xA(t),rules:{}};return zA.set(e,n),n}(p,e);f[d]||(f[d]=!0,h.insertRule(`@keyframes ${d} ${u}`,h.cssRules.length));const m=e.style.animation||"";return e.style.animation=`${m?m+", ":""}${d} ${r}ms linear ${i}ms 1 both`,UA+=1,d}function VA(e){BA=e}function HA(){if(!BA)throw new Error("Function called outside component initialization");return BA}function qA(e){HA().$$.on_mount.push(e)}function GA(e){HA().$$.after_update.push(e)}function KA(e){HA().$$.on_destroy.push(e)}function YA(){const e=HA();return function(t,n){let{cancelable:r=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=e.$$.callbacks[t];if(i){const o=DA(t,n,{cancelable:r});return i.slice().forEach((t=>{t.call(e,o)})),!o.defaultPrevented}return!0}}function ZA(e,t){return HA().$$.context.set(e,t),t}function XA(e){return HA().$$.context.get(e)}function QA(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach((e=>e.call(this,t)))}const JA=[],eO=[],tO=[],nO=[],rO=Promise.resolve();let iO=!1;function oO(){iO||(iO=!0,rO.then(pO))}function aO(){return oO(),rO}function sO(e){tO.push(e)}function lO(e){nO.push(e)}const cO=new Set;let uO,dO=0;function pO(){const e=BA;do{for(;dO<JA.length;){const e=JA[dO];dO++,VA(e),hO(e.$$)}for(VA(null),JA.length=0,dO=0;eO.length;)eO.pop()();for(let e=0;e<tO.length;e+=1){const t=tO[e];cO.has(t)||(cO.add(t),t())}tO.length=0}while(JA.length);for(;nO.length;)nO.pop()();iO=!1,cO.clear(),VA(e)}function hO(e){if(null!==e.fragment){e.update(),YM(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(sO)}}function fO(e,t,n){e.dispatchEvent(DA(`${t?"intro":"outro"}${n}`))}const mO=new Set;let gO;function yO(){gO={r:0,c:[],p:gO}}function vO(){gO.r||YM(gO.c),gO=gO.p}function bO(e,t){e&&e.i&&(mO.delete(e),e.i(t))}function xO(e,t,n,r){if(e&&e.o){if(mO.has(e))return;mO.add(e),gO.c.push((()=>{mO.delete(e),r&&(n&&e.d(1),r())})),e.o(t)}else r&&r()}const wO={duration:0};function $O(e,t,n,r){let i=t(e,n),o=r?0:1,a=null,s=null,l=null;function c(){l&&function(e,t){const n=(e.style.animation||"").split(", "),r=n.filter(t?e=>e.indexOf(t)<0:e=>-1===e.indexOf("__svelte")),i=n.length-r.length;i&&(e.style.animation=r.join(", "),UA-=i,UA||fA((()=>{UA||(zA.forEach((e=>{const{ownerNode:t}=e.stylesheet;t&&$A(t)})),zA.clear())})))}(e,l)}function u(e,t){const n=e.b-o;return t*=Math.abs(n),{a:o,b:e.b,d:n,duration:t,start:e.start,end:e.start+t,group:e.group}}function d(t){const{delay:n=0,duration:r=300,easing:d=HM,tick:p=VM,css:h}=i||wO,f={start:hA()+n,b:t};t||(f.group=gO,gO.r+=1),a||s?s=f:(h&&(c(),l=WA(e,o,t,r,n,d,h)),t&&p(0,1),a=u(f,r),sO((()=>fO(e,t,"start"))),yA((t=>{if(s&&t>s.start&&(a=u(s,r),s=null,fO(e,a.b,"start"),h&&(c(),l=WA(e,o,a.b,a.duration,0,d,i.css))),a)if(t>=a.end)p(o=a.b,1-o),fO(e,a.b,"end"),s||(a.b?c():--a.group.r||YM(a.group.c)),a=null;else if(t>=a.start){const e=t-a.start;o=a.a+a.d*d(e/a.duration),p(o,1-o)}return!(!a&&!s)})))}return{run(e){ZM(i)?(uO||(uO=Promise.resolve(),uO.then((()=>{uO=null}))),uO).then((()=>{i=i(),d(e)})):d(e)},end(){c(),a=s=null}}}const SO="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function _O(e,t){e.d(1),t.delete(e.key)}function CO(e,t){xO(e,1,1,(()=>{t.delete(e.key)}))}function kO(e,t,n,r,i,o,a,s,l,c,u,d){let p=e.length,h=o.length,f=p;const m={};for(;f--;)m[e[f].key]=f;const g=[],y=new Map,v=new Map;for(f=h;f--;){const e=d(i,o,f),s=n(e);let l=a.get(s);l?r&&l.p(e,t):(l=c(s,e),l.c()),y.set(s,g[f]=l),s in m&&v.set(s,Math.abs(f-m[s]))}const b=new Set,x=new Set;function w(e){bO(e,1),e.m(s,u),a.set(e.key,e),u=e.first,h--}for(;p&&h;){const t=g[h-1],n=e[p-1],r=t.key,i=n.key;t===n?(u=t.first,p--,h--):y.has(i)?!a.has(r)||b.has(r)?w(t):x.has(i)?p--:v.get(r)>v.get(i)?(x.add(r),w(t)):(b.add(i),p--):(l(n,a),p--)}for(;p--;){const t=e[p];y.has(t.key)||l(t,a)}for(;h;)w(g[h-1]);return g}function EO(e,t){const n={},r={},i={$$scope:1};let o=e.length;for(;o--;){const a=e[o],s=t[o];if(s){for(const e in a)e in s||(r[e]=1);for(const e in s)i[e]||(n[e]=s[e],i[e]=1);e[o]=s}else for(const e in a)i[e]=1}for(const a in r)a in n||(n[a]=void 0);return n}function TO(e){return"object"==typeof e&&null!==e?e:{}}function IO(e,t,n){const r=e.$$.props[t];void 0!==r&&(e.$$.bound[r]=n,n(e.$$.ctx[r]))}function PO(e){e&&e.c()}function RO(e,t,n,r){const{fragment:i,after_update:o}=e.$$;i&&i.m(t,n),r||sO((()=>{const t=e.$$.on_mount.map(GM).filter(ZM);e.$$.on_destroy?e.$$.on_destroy.push(...t):YM(t),e.$$.on_mount=[]})),o.forEach(sO)}function MO(e,t){const n=e.$$;null!==n.fragment&&(YM(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function AO(e,t,n,r,i,o,a){let s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:[-1];const l=BA;VA(e);const c=e.$$={fragment:null,ctx:[],props:o,update:VM,not_equal:i,bound:KM(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(l?l.$$.context:[])),callbacks:KM(),dirty:s,skip_bound:!1,root:t.target||l.$$.root};a&&a(c.root);let u=!1;if(c.ctx=n?n(e,t.props||{},(function(t,n){const r=!(arguments.length<=2)&&arguments.length-2?arguments.length<=2?void 0:arguments[2]:n;return c.ctx&&i(c.ctx[t],c.ctx[t]=r)&&(!c.skip_bound&&c.bound[t]&&c.bound[t](r),u&&function(e,t){-1===e.$$.dirty[0]&&(JA.push(e),oO(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}(e,t)),n})):[],c.update(),u=!0,YM(c.before_update),c.fragment=!!r&&r(c.ctx),t.target){if(t.hydrate){const e=function(e){return Array.from(e.childNodes)}(t.target);c.fragment&&c.fragment.l(e),e.forEach($A)}else c.fragment&&c.fragment.c();t.intro&&bO(e.$$.fragment),RO(e,t.target,t.anchor,t.customElement),pO()}VA(l)}class OO{$destroy(){MO(this,1),this.$destroy=VM}$on(e,t){if(!ZM(t))return VM;const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const LO=[];function NO(e,t){return{subscribe:DO(e,t).subscribe}}function DO(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:VM;const r=new Set;function i(n){if(XM(e,n)&&(e=n,t)){const t=!LO.length;for(const n of r)n[1](),LO.push(n,e);if(t){for(let e=0;e<LO.length;e+=2)LO[e][0](LO[e+1]);LO.length=0}}}return{set:i,update:function(t){i(t(e))},subscribe:function(o){const a=[o,arguments.length>1&&void 0!==arguments[1]?arguments[1]:VM];return r.add(a),1===r.size&&(t=n(i)||VM),o(e),()=>{r.delete(a),0===r.size&&(t(),t=null)}}}}function FO(e,t,n){const r=!Array.isArray(e),i=r?[e]:e,o=t.length<2;return NO(n,(e=>{let n=!1;const a=[];let s=0,l=VM;const c=()=>{if(s)return;l();const n=t(r?a[0]:a,e);o?e(n):l=ZM(n)?n:VM},u=i.map(((e,t)=>eA(e,(e=>{a[t]=e,s&=~(1<<t),n&&c()}),(()=>{s|=1<<t}))));return n=!0,c(),function(){YM(u),l()}}))}var jO=e=>e.reduce(((e,t)=>Object.assign(e,t)),{});const zO=e=>({updateValue:e}),BO=e=>({defaultValue:e}),UO=e=>({store:e}),WO=e=>({store:(t,n)=>FO(...e(n))}),VO=e=>({store:(t,n)=>{const[r,i,o=()=>!1]=e(n);let a,s=!0;return FO(r,((e,t)=>{i(e,(e=>{!s&&o(a,e)||(a=e,s=!1,t(e))}))}))}}),HO=e=>({store:(t,n)=>{const[r,i={},o]=e(n);let a=[];const s={},l=e=>r(e,s),c=e=>{(a.length||e.length)&&(a=e,u())},u=()=>{const e=a.map(l);o&&e.sort(o),a=[...e],p(e)};Object.entries(i).map((e=>{let[t,n]=e;return n.subscribe((e=>{s[t]=e,e&&u()}))}));const{subscribe:d,set:p}=DO(t||[]);return{set:c,update:e=>c(e(a)),subscribe:d}}});var qO=e=>{const t={},n={};return e.forEach((e=>{let[r,...i]=e;const o=jO(i),a=t[r]=((e,t,n)=>{const{store:r=e=>DO(e),defaultValue:i=eE,updateValue:o}=n,a=r(i(),t,e),{subscribe:s,update:l=eE}=a;let c;const u=e=>{let t=!0;c&&c(),c=s((n=>{if(t)return t=!1;e(n),c(),c=void 0}))},d=o?o(e):KE;return a.set=e=>l((t=>d(e,t,u))),a.defaultValue=i,a})(n,t,o),s={get:()=>tA(a),set:a.set};Object.defineProperty(n,r,s)})),{stores:t,accessors:n}},GO=[["src",UO((()=>{let e;const{subscribe:t,set:n}=DO(),r=t=>{e!==t&&(e=t,n(e))};return{set:r,subscribe:t,update:t=>r(t(e))}}))],["imageReader"],["imageWriter"],["imageScrambler"],["imageRedactionRendering",BO((()=>"pixelated"))],["images",BO((()=>[]))],["shapePreprocessor"],["willRequestResource"],["willRequest"],["csp"]],KO=e=>e.charAt(0).toUpperCase()+e.slice(1),YO=(e,t)=>{Object.keys(t).forEach((n=>{const r=TE(t[n])?{value:t[n],writable:!1}:t[n];Object.defineProperty(e,n,r)}))};const ZO=(e,t)=>{let n,r,i,o,a,s,l,c,u,d;const p=t.length;for(n=0;n<p;n++)if(r=t[n],i=t[n+1>p-1?0:n+1],o=r.x-e.x,a=r.y-e.y,s=i.x-e.x,l=i.y-e.y,c=o-s,u=a-l,d=c*a-u*o,d<-1e-5)return!1;return!0};var XO=(e,t)=>{const n=OI(t),r=pT();SI(e).forEach((e=>{ST(e,r),ZO(e,t)||n.forEach((t=>{const n=Math.atan2(t.start.y-t.end.y,t.start.x-t.end.x),i=1e4*Math.sin(Math.PI-n),o=1e4*Math.cos(Math.PI-n),a=hT(e.x+i,e.y+o),s=YT(KT(t),1e4),l=TI(GT(e,a),s);l&&ST(r,_T(mT(l),e))}))}));const i=QT(e);return ST(i,r),!!SI(i).every((e=>ZO(e,t)))&&(gI(e,i),!0)},QO=(e,t)=>{const n=SI(e),r=LI(t,5),i=sI(e),o=[];n.forEach((e=>{const t=((e,t)=>{const n=hT(e.start.x-e.end.x,e.start.y-e.end.y),r=bT(n),i=kT(r,t);return e.end.x+=i.x,e.end.y+=i.y,e})(GT(mT(i),mT(e)),1e6);let n=!1;r.map(KT).forEach((e=>{const r=TI(t,e);r&&!n&&(o.push(r),n=!0)}))}));const a=PT(o[0],o[2])<PT(o[1],o[3])?[o[0],o[2]]:[o[1],o[3]],s=rI(a);return s.width<e.width&&(gI(e,s),!0)},JO=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{x:0,y:0};const r=eI(e),i=sI(r),o=CI(r,n,i).map((e=>yT(e,t,i))),a=rI(o);return o.map((e=>_T(e,a)))},eL=function(e){let t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:fI(e);if(0!==r){const o=Math.atan2(1,i),a=Math.sign(r)*r,s=a%Math.PI,l=a%ZE;let c;c=s>XE&&s<ZE+XE?l>XE?a:ZE-l:l>XE?ZE-l:a;const u=Math.min(Math.abs(e.height/Math.sin(o+c)),Math.abs(e.width/Math.cos(o-c)));t=Math.cos(o)*u,n=t/i}else t=e.width,n=t/i,n>e.height&&(n=e.height,t=n*i);return zT(t,n)},tL=(e,t,n)=>{const r=eI(e),i=sI(r),o=yI(r,n,i),a=sI(kI(rI(o))),s=sI(t),l=yT(s,-n,a),c=_T(l,a),u=$T(ST(i,c),cT);return aI(u.x-.5*t.width,u.y-.5*t.height,t.width,t.height)},nL=(e,t,n)=>Math.max(t,Math.min(e,n));const rL=["cropLimitToImage","cropMinSize","cropMaxSize","cropAspectRatio","flipX","flipY","rotation","crop","colorMatrix","convolutionMatrix","gamma","vignette","manipulation","redaction","annotation","decoration","selection","frame","backgroundColor","backgroundImage","backgroundFilterMode","targetSize","metadata","trim","volume","minDuration","maxDuration","currentTime"],iL=e=>OP(e)?e.map(iL):cP(e)||WI(e)?e:CE(e)?{...e}:e,oL=e=>e.map((e=>Object.entries(e).reduce(((e,t)=>{let[n,r]=t;return n.startsWith("_")||(e[n]=r),e}),{}))),aL=(e,t)=>e===t;var sL=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:aL;if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(!n(e[r],t[r]))return!1;return!0};const lL=(e,t,n)=>{const r=$T(sI(e),(e=>cT(e,8))),i=eI(t),o=sI(i),a=yI(i,n,o),s=$T(WT(rI(a)),(e=>cT(e,8))),l=Math.abs(s.x-r.x),c=Math.abs(s.y-r.y);return l<1&&c<1},cL=(e,t)=>{const{context:n,props:r}=t;return e._isFormatted||((e=rM(e))._isFormatted=!0,Object.assign(e,r)),e._isDraft||!AR(e)||e._context&&hI(n,e._context)||(bM(e,n),e._context={...n}),e},uL=(e,t)=>(e._isFormatted||(e.disableMove=!0,e.disableSelect=!0,e.disableResize=!0,e.disableRotate=!0),cL(e,t));var dL=[["file"],["size"],["loadState"],["processState"],["aspectRatio",WO((e=>{let{size:t}=e;return[t,e=>e?fI(e):void 0]}))],["perspectiveX",BO((()=>0))],["perspectiveY",BO((()=>0))],["perspective",WO((e=>{let{perspectiveX:t,perspectiveY:n}=e;return[[t,n],e=>{let[t,n]=e;return{x:t,y:n}}]}))],["rotation",BO((()=>0)),zO((e=>(t,n,r)=>{if(t===n)return t;const{loadState:i,size:o,rotationRange:a,cropMinSize:s,cropMaxSize:l,crop:c,perspective:u,cropLimitToImage:d,cropOrigin:p}=e;if(!c||!i||!i.beforeComplete)return t;const h=d&&((e,t,n)=>{const r=eL(t,n,fI(e));return BT(qT(r,Math.round),qT(LT(e),Math.round))})(c,o,n),f=d&&lL(c,o,n),m=((e,t,n,r,i,o,a,s,l,c)=>{const u=LT(l),d=LT(c);a&&(d.width=Math.min(c.width,i.width),d.height=Math.min(c.height,i.height));let p=!1;const h=(t,n)=>{const l=tL(i,r,t),c=eI(i),f=sI(c),m=CI(c,o,f),g=_T(mT(f),EI(m)),y=yT(sI(l),n,f),v=_T(mT(f),y);m.forEach((e=>yT(e,n,f)));const b=rI(m),x=EI(m),w=ST(_T(_T(x,v),b),g),$=aI(w.x-.5*l.width,w.y-.5*l.height,l.width,l.height);if(s&&cI($,s.width/$.width),a){const e=JO(i,n,o);QO($,e)}const S=cT(Math.min($.width/u.width,$.height/u.height),8),_=cT(Math.max($.width/d.width,$.height/d.height),8);return(S<1||_>1)&&cT(Math.abs(n-t))===cT(Math.PI/2)&&!p?(p=!0,h(e,e+Math.sign(n-t)*Math.PI)):{rotation:n,crop:_I($,(e=>cT(e,8)))}},f=Math.sign(t)*Math.round(Math.abs(t)/ZE)*ZE,m=nL(t,f+n[0],f+n[1]);return h(e,m)})(n,t,a,c,o,u,d,p,s,l);if(h&&f){const e=eL(o,t,fI(m.crop));m.crop.x+=.5*m.crop.width,m.crop.y+=.5*m.crop.height,m.crop.x-=.5*e.width,m.crop.y-=.5*e.height,m.crop.width=e.width,m.crop.height=e.height}return r((()=>{e.crop=_I(m.crop,(e=>cT(e,8)))})),m.rotation}))],["flipX",BO((()=>!1))],["flipY",BO((()=>!1))],["flip",WO((e=>{let{flipX:t,flipY:n}=e;return[[t,n],e=>{let[t,n]=e;return{x:t,y:n}}]}))],["isRotatedSideways",VO((e=>{let{rotation:t}=e;return[[t],(e,t)=>{let[n]=e;return t(QE(n))},(e,t)=>e!==t]}))],["crop",zO((e=>function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t;const{loadState:r,size:i,cropMinSize:o,cropMaxSize:a,cropLimitToImage:s,cropAspectRatio:l,rotation:c,perspective:u}=e;if(!t&&!n||!r||!r.beforeComplete)return t;t||(t=eI(eL(i,c,l||fI(i))));const d=((e,t,n,r,i,o,a,s)=>{const l=LT(a),c=LT(s),u=cT(Math.max(t.width/c.width,t.height/c.height)),d=cT(Math.min(t.width/l.width,t.height/l.height)),p=QT(t);if(d<1||u>1){const n=sI(e),r=sI(t),i=d<1?d:u,o=(r.x+n.x)/2,a=(r.y+n.y)/2,s=p.width/i,l=p.height/i;mI(p,o-.5*s,a-.5*l,s,l)}return o?(function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:pT(),i=arguments.length>4?arguments[4]:void 0;if(RP(n)&&0!==n||r.x||r.y){const i=fI(e),o=JO(t,n,r),a=eL(t,n,i);if(!(e.width<a.width&&e.height<a.height)){const t=.5*e.width-.5*a.width,n=.5*e.height-.5*a.height;e.width>a.width&&(e.width=a.width,e.x+=t),e.height>a.height&&(e.height=a.height,e.y+=n)}XO(e,o),QO(e,o)&&XO(e,o)}else{const n=fI(e);e.width=Math.min(e.width,t.width),e.height=Math.min(e.height,t.height),e.x=Math.max(e.x,0),e.x+e.width>t.width&&(e.x-=e.x+e.width-t.width),e.y=Math.max(e.y,0),e.y+e.height>t.height&&(e.y-=e.y+e.height-t.height);const r=sI(e),o=wI(e,n);o.width=Math.max(i.width,o.width),o.height=Math.max(i.height,o.height),o.x=r.x-.5*o.width,o.y=r.y-.5*o.height,gI(e,o)}}(p,n,r,i,l),{crop:p}):{crop:p}})(n,t,i,c,u,s,o,a),p=_I(d.crop,(e=>cT(e,8)));return hI(n,p)?n:p}))],["cropAspectRatio",zO((e=>(t,n)=>{const{loadState:r,crop:i,size:o,rotation:a,cropLimitToImage:s}=e,l=(e=>{if(e){if(/:/.test(e)){const[t,n]=e.split(":");return t/n}return parseFloat(e)}})(t);if(!l)return;if(!i||!r||!r.beforeComplete)return l;const c=n?Math.abs(t-n):1;if(lL(i,o,a)&&s&&c>=.1){const n=((e,t)=>{const n=e.width,r=e.height;return QE(t)&&(e.width=r,e.height=n),e})(LT(o),a);e.crop=_I(wI(eI(n),t),cT)}else{const t={width:i.height*l,height:i.height},n=.5*(i.width-t.width),r=.5*(i.height-t.height);e.crop=_I(aI(i.x+n,i.y+r,t.width,t.height),cT)}return l}))],["cropOrigin"],["cropMinSize",BO((()=>({width:1,height:1})))],["cropMaxSize",BO((()=>({width:32768,height:32768})))],["cropLimitToImage",BO((()=>!0)),zO((e=>(t,n,r)=>{const{crop:i}=e;return i?(!n&&t&&r((()=>e.crop=QT(e.crop))),t):t}))],["cropSize",VO((e=>{let{crop:t}=e;return[[t],(e,t)=>{let[n]=e;n&&t(zT(n.width,n.height))},(e,t)=>BT(e,t)]}))],["cropRectAspectRatio",WO((e=>{let{cropSize:t}=e;return[[t],(e,t)=>{let[n]=e;n&&t(cT(fI(n),5))}]}))],["cropRange",VO((e=>{let{size:t,rotation:n,cropRectAspectRatio:r,cropMinSize:i,cropMaxSize:o,cropLimitToImage:a}=e;return[[t,n,r,i,o,a],(e,t)=>{let[n,r,i,o,a,s]=e;n&&t(((e,t,n,r,i,o)=>{const a=LT(r),s=LT(i);return o?[a,qT(eL(e,t,n),Math.round)]:[a,s]})(n,r,i,o,a,s))},(e,t)=>sL(e,t)]}))],["rotationRange",VO((e=>{let{size:t,isRotatedSideways:n,cropMinSize:r,cropSize:i,cropLimitToImage:o}=e;return[[t,n,r,i,o],(e,t)=>{let[n,r,i,o,a]=e;n&&o&&t(((e,t,n,r,i)=>{if(!i)return[-1/0,1/0];const o=Math.max(n.width/r.width,n.height/r.height),a=zT(r.width*o,r.height*o),s=(l=a,Math.sqrt(l.width*l.width+l.height*l.height));var l;if(s<Math.min(e.width,e.height))return[-1/0,1/0];const c=t?e.height:e.width,u=t?e.width:e.height,d=Math.acos(a.height/s),p=d-Math.acos(u/s),h=Math.asin(c/s)-d;if(Number.isNaN(p)&&Number.isNaN(h))return[-1/0,1/0];const f=Number.isNaN(p)?h:Number.isNaN(h)?p:Math.min(p,h);return[-f,f]})(n,r,i,o,a))},(e,t)=>sL(e,t)]}))],["backgroundColor",zO((()=>e=>function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0,0,0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return 4===e.length?e:[...e,t]}(e)))],["backgroundImage"],["backgroundFilterMode"],["targetSize"],["colorMatrix"],["convolutionMatrix"],["gamma"],["noise"],["vignette"],["duration"],["currentTime"],["minDuration",BO((()=>1/24))],["maxDuration",BO((()=>1/0))],["volume",BO((()=>1))],["trim"],["redaction",HO((e=>{let{size:t}=e;return[cL,{context:t}]}))],["manipulation",HO((e=>{let{size:t}=e;return[cL,{context:t}]}))],["annotation",HO((e=>{let{size:t}=e;return[cL,{context:t}]}))],["decoration",HO((e=>{let{crop:t}=e;return[cL,{context:t}]}))],["selection",HO((e=>{let{size:t}=e;return[uL,{context:t}]}))],["frame",zO((()=>e=>{if(!e)return;const t={frameStyle:void 0,x:0,y:0,width:"100%",height:"100%",disableStyle:["backgroundColor","strokeColor","strokeWidth"]};return hE(e)?t.frameStyle=e:Object.assign(t,e),t}))],["metadata"],["state",UO(((e,t,n)=>{const r=rL.map((e=>t[e]));let i=!1;const o=DO({}),{subscribe:a}=FO([...r,o],((e,t)=>{if(i)return;const n=rL.reduce(((t,n,r)=>(t[n]=iL(e[r]),t)),{});n.crop&&_I(n.crop,Math.round),n.manipulation=n.manipulation&&oL(n.manipulation),n.redaction=n.redaction&&oL(n.redaction),n.annotation=n.annotation&&oL(n.annotation),n.decoration=n.decoration&&oL(n.decoration),n.selection=n.selection&&oL(n.selection),t(n)})),s=e=>{e&&(i=!0,n.cropOrigin=void 0,rL.filter((t=>AP(e,t))).forEach((t=>{const r=e[t];n[t]=null===r?void 0:iL(r)})),i=!1,o.set({}))};return{set:s,update:e=>s(e(null)),subscribe:a}}))]],pL=async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0;const{ontaskstart:i,ontaskprogress:o,ontaskend:a,token:s}=r;let l=!1;const c={cancel:eE};s.cancel=()=>{l=!0,c.cancel()};for(const[u,d]of t.entries()){if(l)return;const[t,r]=d;i(u,r);try{e=await t(e,{...n,taskCancelToken:c},(e=>o(u,r,e)))}catch(e){throw l=!0,e}a(u,r)}return e};const hL=e=>console.warn(`Pintura: ${e} is a required prop.`),fL=["loadstart","loadabort","loaderror","loadprogress","load","processstart","processabort","processerror","processprogress","process"],mL=["flip","cropOrigin","isRotatedSideways","perspective","perspectiveX","perspectiveY","cropRange"],gL=dL.map((e=>{let[t]=e;return t})).filter((e=>!mL.includes(e))),yL=e=>"image"+KO(e),vL=e=>AP(e,"crop");var bL=()=>{const{stores:e,accessors:t}=qO(GO),{sub:n,pub:r}=GP(),i=()=>t.images?t.images[0]:{};let o={};const a={};gL.forEach((e=>{Object.defineProperty(t,yL(e),{get:()=>{const t=i();if(t)return t.accessors[e]},set:t=>{o[yL(e)]=t,a[yL(e)]=t;const n=i();n&&(n.accessors[e]=t)}})}));const s=()=>t.images&&t.images[0];let l;const c=e.src.subscribe((e=>{if(!e)return t.images=[];t.imageReader?(t.images.length&&(o={}),d(e)):l=setTimeout((()=>hL("imageReader")),32)})),u=e.imageReader.subscribe((e=>{e&&(clearTimeout(l),t.images.length||t.src&&d(t.src))})),d=e=>{Promise.resolve().then((()=>h(e,o))).catch((()=>{}))};let p;const h=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise(((i,l)=>{let c=s();const u=!(!1===n.cropLimitToImage||!1===n.imageCropLimitToImage||!1===a.imageCropLmitedToImage),d=n.cropMinSize||n.imageCropMinSize||a.imageCropMinSize,h=u?d:c&&c.accessors.cropMinSize,f=n.minDuration||n.imageMinDuration;c&&m(),c=function(){let{minSize:e={width:1,height:1},minDuration:t=0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{stores:n,accessors:r}=qO(dL),{pub:i,sub:o}=GP(),a=(e,t)=>{const n=()=>r[e]||{},o=t=>{r[e]={...n(),...t,timeStamp:Date.now()}},a=()=>n().error,s=e=>{a()||(o({error:e}),i(t+"error",{...n()}))};return{start(){i(t+"start")},onabort(){o({abort:!0}),i(t+"abort",{...n()})},ontaskstart(e,r){a()||(o({index:e,task:r,taskProgress:void 0,taskLengthComputable:void 0}),i(t+"taskstart",{...n()}))},ontaskprogress(e,r,s){a()||(o({index:e,task:r,taskProgress:s.loaded/s.total,taskLengthComputable:s.lengthComputable}),i(t+"taskprogress",{...n()}),i(t+"progress",{...n()}))},ontaskend(e,r){a()||(o({index:e,task:r}),i(t+"taskend",{...n()}))},ontaskerror(e){s(e)},error(e){s(e)},beforeComplete(e){a()||(o({beforeComplete:!0}),i("before"+t,e))},complete(e){a()||(o({complete:!0}),i(t,e))}}};return YO(r,{read:function(n,i){let{reader:o}=i,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!o)return;Object.assign(r,{file:void 0,size:void 0,loadState:void 0});let l={cancel:eE},c=!1;const u=a("loadState","load"),d={token:l,...u},p={src:n,size:void 0,dest:void 0,duration:void 0};return Promise.resolve().then((async()=>{try{if(u.start(),c)return u.onabort();const n=await pL(p,o,s,d);if(c)return u.onabort();const{size:i,duration:a,dest:l}=n||{};if(!i||!i.width||!i.height)throw new sP("Image size missing","IMAGE_SIZE_MISSING",n);if(a>0&&a<t)throw new sP("Video too short","VIDEO_TOO_SHORT",{...n,minDuration:t});if(i.width<e.width||i.height<e.height)throw new sP("Image too small","IMAGE_TOO_SMALL",{...n,minWidth:e.width,minHeight:e.height});Object.assign(r,{file:l,size:i,duration:a}),u.beforeComplete(n),u.complete(n)}catch(e){u.error(e)}finally{l=void 0}})),()=>{c=!0,l&&l.cancel(),u.onabort()}},write:(e,t)=>{if(!r.loadState.complete)return;r.processState=void 0;const n=a("processState","process"),i={src:r.file,imageState:r.state,dest:void 0};if(TE(e)&&(e=e(r.file,r.state)),!e)return n.start(),void n.complete(i);let o={cancel:eE},s=!1;const l=t,c={token:o,...n};return Promise.resolve().then((async()=>{try{if(n.start(),s)return n.onabort();const t=await pL(i,e,l,c);if(s)return n.onabort();n.complete(t)}catch(e){n.error(e)}finally{o=void 0}})),()=>{s=!0,o&&o.cancel(),n.onabort()}},on:o}),{accessors:r,stores:n}}({minSize:h,minDuration:f}),fL.map((e=>{return c.accessors.on(e,(t=e,e=>r(t,e)));var t}));const g=()=>{o={},y.forEach((e=>e()))},y=[];y.push(c.accessors.on("loaderror",(e=>{g(),l(e)}))),y.push(c.accessors.on("loadabort",(()=>{g(),l({name:"AbortError"})}))),y.push(c.accessors.on("load",(e=>{p=void 0,g(),i(e)}))),y.push(c.accessors.on("beforeload",(()=>((e,n)=>{if(vL(n))return void(t.imageState=n);if(!n.imageCrop){const t=e.accessors.size,r=n.imageRotation||0,i=VT(LT(t),r),o=eI(i);o.width=cT(Math.abs(o.width),6),o.height=cT(Math.abs(o.height),6);const a=n.imageCropAspectRatio||(n.imageCropLimitToImage?fI(t):fI(o));let s;n.imageCropLimitToImage?s=wI(o,a):(s=xI(o,a),s.x=(t.width-s.width)/2,s.y=(t.height-s.height)/2),n.imageCrop=s}if(e.accessors.duration&&!n.imageTrim&&n.imageMaxDuration){const{duration:t}=e.accessors;n.imageTrim=[[0,Math.min(n.imageMaxDuration/t,1)]]}const r=["imageCropLimitToImage","imageCrop","imageCropAspectRatio","imageRotation"];r.filter((e=>AP(n,e))).forEach((e=>{t[e]=n[e],delete n[e]}));const i=Object.keys(n).filter((e=>!r.includes(e))).reduce(((e,t)=>(e[t]=n[t],e)),{});Object.assign(t,i)})(c,n)))),t.images=[c],n.imageReader&&(t.imageReader=n.imageReader),n.imageWriter&&(t.imageWriter=n.imageWriter),p=c.accessors.read(e,{reader:t.imageReader},{willRequest:t.willRequest})}))};let f;const m=()=>{const e=s();e&&(p&&p(),e.accessors.loadState=void 0,t.images=[])};return Object.defineProperty(t,"stores",{get:()=>e}),YO(t,{on:n,loadImage:h,abortLoadImage:()=>{p&&p(),t.images=[]},editImage:(e,n)=>new Promise(((r,i)=>{h(e,n).then((()=>{const{images:e}=t,n=e[0],o=()=>{a(),s()},a=n.accessors.on("processerror",(e=>{o(),i(e)})),s=n.accessors.on("process",(e=>{o(),r(e)}))})).catch(i)})),removeImage:m,processImage:(e,n)=>new Promise(((r,i)=>{try{const o=[],a=()=>{o.forEach((e=>e()))};(async()=>{if((e=>hE(e)||zP(e)||UI(e))(e))try{await h(e,n)}catch(e){i(e)}else e&&(vL(e)?t.imageState=e:Object.assign(t,e));const l=s();if(!l)return i("no image");o.push(l.accessors.on("processerror",(e=>{a(),i(e)}))),o.push(l.accessors.on("processabort",(()=>{a(),i({name:"AbortError"})}))),o.push(l.accessors.on("process",(e=>{f=void 0,a(),r(e)}))),f=l.accessors.write(t.imageWriter,{redactionRenderStyle:t.imageRedactionRendering,shapePreprocessor:t.shapePreprocessor||KE,imageScrambler:t.imageScrambler,willRequest:t.willRequest,csp:t.csp||{},willRequestResource:t.willRequestResource})})()}catch(e){i(e)}})),abortProcessImage:()=>{const e=s();e&&(f&&f(),e.accessors.processState=void 0)},destroy:()=>{c&&c(),u&&u()}}),t};const xL=(e,t)=>{const{processImage:n}=bL();return n(e,t)};var wL=()=>XI()?mP()?/15_|16_/.test(navigator.userAgent)?14745600:16777216:/15_/.test(navigator.userAgent)?16777216:1/0:1/0,$L=(e,t)=>Object.keys(e).filter((e=>!t.includes(e))).reduce(((t,n)=>(t[n]=e[n],t)),{}),SL=e=>new Promise((t=>{if(e.duration===1/0)return e.ontimeupdate=()=>{e.ontimeupdate=void 0,t(e)},void(e.currentTime=Number.MAX_SAFE_INTEGER);t(e)}));const _L=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=[],r=t+(arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.byteLength);for(;t<r;){const r=e.getUint32(t);if(r<0)break;const i=e.getUint32(t+4);if(n.push({type:i,size:r,offset:t,bodyOffset:t+8,bodySize:r-8}),r<8)break;t+=r}return n};var CL=e=>new Promise(((t,n)=>{(NE()?(async e=>{const t=await(e=>new Promise((t=>{const n=new FileReader;n.onload=()=>t(n.result),n.readAsArrayBuffer(e)})))(e);return function(e){let{limit:t=1024}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=0;if(n+=4,1718909296!==e.getUint32(n))return 0;n+=4;const r=e.getUint32(n);return 1836069938===r?((e,t,n)=>{let r=!1,i=-1;for(let c=t;c<n;c++)if(r||1953653099!==e.getUint32(c)||(r=!0,c+=4),r&&64==e.getUint8(c)){i=c;break}if(i<0)return 0;const o=e.getUint32(i-28),a=e.getUint32(i-20),s=e.getUint32(i-32),l=e.getUint32(i-16);return 65536===o&&4294901760===a?90:4294901760===s&&4294901760===l?180:4294901760===o&&65536===a?270:0})(e,n,t):1903435808===r?(e=>{const t=_L(e).find((e=>1836019574===e.type));if(!t)return 0;const n=_L(e,t.bodyOffset,t.bodySize);n.filter((e=>1953653099===e.type)).forEach((t=>{n.push(..._L(e,t.bodyOffset,t.bodySize))}));const r=[1836476516,1953196132],i=n.filter((e=>r.includes(e.type)));for(const{type:o,bodyOffset:a}of i){let t=a+4;t+=1836476516===o?32:36,t+=1===e.getUint8(a)?12:0;const n=e.getInt32(t),r=e.getInt32(t+4);if(0===n&&r>0)return 90;if(n<0&&0===r)return 180;if(0===n&&r<0)return 270}return 0})(e):0}(new DataView(t))})(e):Promise.resolve(0)).then((r=>{const i=document.createElement("video");i.onerror=()=>n(i.error),i.playsInline=!0,i.preload="auto",i.onseeked=()=>{i.onseeked=void 0,t(i)},i.onloadeddata=()=>{i.onloadeddata=void 0,i.dataset.rotation=r?""+r:"0",SL(i).then(t),i.currentTime=0},mP()&&XI()?(i.srcObject=e,i.load()):i.src=URL.createObjectURL(e)}))})),kL=(e,t)=>new Promise((n=>{if(e.currentTime===t)return n(e);let r=e.onseeked;e.onseeked=()=>{e.onseeked=r,n(e)},e.currentTime=nL(t,0,e.duration)})),EL=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return new Promise(((n,r)=>{CL(e).then((e=>{kL(e,t).then((e=>{const t=mE("canvas");JI(e).then((r=>{let{width:i,height:o}=r;t.width=i,t.height=o;const a=t.getContext("2d",{willReadFrequently:!0}),s=()=>{a.drawImage(e,0,0,t.width,t.height);const r=a.getImageData(0,0,t.width,t.height);yE(t),URL.revokeObjectURL(e.src),n(r)};XI()?setTimeout(s,16):s()}))}))}))}))},TL=e=>/video/.test(e.type);let IL=null;const PL=function(){let{imageDataResizer:e,canvasMemoryLimit:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return async(n,r,i,o,a)=>{i.width=Math.max(i.width,1),i.height=Math.max(i.height,1),o.width=Math.max(o.width,1),o.height=Math.max(o.height,1);const{dest:s}=await xL(r,{imageReader:iN(),imageWriter:aN({format:"canvas",targetSize:{...o,upscale:!0},imageDataResizer:e,canvasMemoryLimit:t}),imageCrop:i}),{feather:l=0}=a||{};if(l>0){const e=mE("canvas");e.width=s.width,e.height=s.height;const t=e.getContext("2d",{willReadFrequently:!0}),n=1/l;let r=0;for(r=0;r<l;r++){const e=r*n;t.strokeStyle=`rgba(0,0,0,${e*e})`,t.strokeRect(r+.5,r+.5,s.width-2*r-1,s.height-2*r-1)}t.fillStyle="#000",t.fillRect(r,r,s.width+.5-2*r,s.height+.5-2*r);const i=s.getContext("2d");i.globalCompositeOperation="destination-in",i.drawImage(e,0,0),yE(e)}n.drawImage(s,o.x,o.y,o.width,o.height),yE(s)}},RL=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t},n=arguments.length>2?arguments[2]:void 0;return async(r,i,o)=>{o(iP(0,!1));let a=!1;const s=await e(...t(r,i,(e=>{a=!0,o(e)})));return n&&n(r,s),a||o(iP(1,!1)),r}},ML=function(){let{willRequest:e,srcProp:t="src",destProp:n="dest"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[RL(dP,((n,r,i)=>[n[t],i,{...r,willRequest:e}]),((e,t)=>e[n]=t)),"any-to-file"]},AL=function(){let{srcProp:e="dest",destProp:t="dest"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[RL((async e=>{if(/octet-stream/.test(e.type)){console.warn(`Pintura: File has unknown mime type "${e.type}", make sure your server sets the correct Content-Type header.`);let t="image";const n=await tP(e);/video/i.test(n.nodeName)&&(t="video");const r={type:t+"/unknown"};return WI(e)?new File([e],e.name,{...r,lastModified:e.lastModified}):new Blob([e],r)}return e}),(t=>[t[e]]),((e,n)=>e[t]=n)),"guard-mimetype"]},OL=function(){let{srcProp:e="src",destProp:t="size"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[RL(rP,(t=>[t[e]]),((e,n)=>e[t]=n)),"read-image-size"]},LL=async e=>{const t=await tP(e);if(nP(t))return await(e=>new Promise(((t,n)=>{const r=()=>{SL(e).then((()=>{t(e.duration)}))};if(e.readyState>=1)return r();e.onloadedmetadata=r,e.onerror=()=>n(e.error)})))(t)},NL=function(){let{srcProp:e="src",destProp:t="duration"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[RL(LL,(t=>[t[e]]),((e,n)=>e[t]=n)),"read-media-duration"]},DL=function(){let{srcSize:e="size",srcOrientation:t="orientation",destSize:n="size"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[RL(gP,(n=>[n[e],n[t]]),((e,t)=>e[n]=t)),"image-size-match-orientation"]},FL=function(){let{srcProp:e="src",destProp:t="copy"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[RL(((e,t)=>yP(e)?sE(e,t):void 0),(t=>[t[e],onprogress]),((e,n)=>{n&&(e[t]=n)})),"read-image-head"]},jL=function(){let{srcProp:e="copy",orientationProp:t="orientation",colorSpaceProp:n="colorSpace"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[RL(((e,t)=>{if(e)return iE(e,t)}),(t=>[t[e],{exif:[274],app2:[nE]}]),((e,r)=>{r&&(e[t]=r.exif&&r.exif[274]||1,e[n]=(r.app2&&r.app2[nE]||"sRGB").toLowerCase())})),"read-image-head-tags"]},zL=function(){let{srcProp:e="copy"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[RL(((e,t)=>{if(e)return((e,t)=>{const n=rE(e);n&&Object.entries(t).forEach((e=>{let[t,r]=e;if(!n[t])return;const i=n[t].getTags();i&&r.forEach((e=>{let[t,n]=e;i.write(t,n)}))}))})(e,t)}),(t=>[t[e],{exif:[[274,1]]}])),"clear-exif-orientation-tag"]},BL=function(){let{srcImageSize:e="size",srcCanvasSize:t="imageData",srcImageState:n="imageState",destImageSize:r="size",destScalar:i="scalar"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[RL(((e,t)=>[Math.min(t.width/e.width,t.height/e.height),NT(t)]),(r=>[r[e],r[t],r[n]]),((e,t)=>{let[n,o]=t;e[i]=n,e[r]=o})),"calculate-canvas-scalar"]},UL=function(){let{srcProp:e="src",destProp:t="imageData",canvasMemoryLimit:n,colorSpaceProp:r="colorSpace",srcImageState:i="imageState"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[RL(((e,t,n,r)=>TL(e)?EL(e,r.currentTime):FE(e,{canvasMemoryLimit:t,colorSpace:n})),(t=>[t[e],n,t[r],t[i]]),((e,n)=>e[t]=n)),"blob-to-image-data"]},WL=function(){let{srcImageData:e="imageData",srcOrientation:t="orientation"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[RL(_E,(n=>[n[e],n[t]]),((e,t)=>e.imageData=t)),"image-data-match-orientation"]},VL=function(){let{srcImageData:e="imageData",srcImageState:t="imageState"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[RL(BM,(n=>{const{colorMatrix:r}=n[t],i=r&&Object.keys(r).map((e=>r[e])).filter(Boolean);return[n[e],{backgroundColor:n[t].backgroundColor,backgroundImage:n[t].backgroundImage,backgroundFilterMode:n[t].backgroundFilterMode,colorMatrix:i&&UM(i),convolutionMatrix:n[t].convolutionMatrix,gamma:n[t].gamma,noise:n[t].noise,vignette:n[t].vignette}]}),((e,t)=>e.imageData=t)),"image-data-fill"]},HL=function(){let{srcImageData:e="imageData",srcImageState:t="imageState",destScalar:n="scalar"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[RL(wP,(r=>{const i=r[n];let{crop:o}=r[t];return o&&1!==i&&(o=cI(QT(o),i,pT())),[r[e],{crop:o,rotation:r[t].rotation,flipX:r[t].flipX,flipY:r[t].flipY}]}),((e,t)=>e.imageData=t)),"image-data-crop"]},qL=e=>{let{targetSize:t={width:void 0,height:void 0,fit:void 0,upscale:void 0},imageDataResizer:n,srcProp:r="imageData",srcImageState:i="imageState",destImageScaledSize:o="imageScaledSize"}=e;return[RL(_P,(e=>{const o=Math.min(t.width||Number.MAX_SAFE_INTEGER,e[i].targetSize&&e[i].targetSize.width||Number.MAX_SAFE_INTEGER),a=Math.min(t.height||Number.MAX_SAFE_INTEGER,e[i].targetSize&&e[i].targetSize.height||Number.MAX_SAFE_INTEGER);return[e[r],{width:o,height:a,fit:t.fit||"contain",upscale:(s=e[i],!!(s.targetSize&&s.targetSize.width||s.targetSize&&s.targetSize.height)||t.upscale||!1)},n];var s}),((e,t)=>{BT(e.imageData,t)||(e[o]=NT(t)),e.imageData=t})),"image-data-resize"]},GL=function(){let{srcImageData:e="imageData",srcImageState:t="imageState",destImageData:n="imageData"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[RL(PP,(n=>{const{colorMatrix:r}=n[t],i=r&&Object.keys(r).map((e=>r[e])).filter(Boolean);return[n[e],{colorMatrix:i&&UM(i),convolutionMatrix:n[t].convolutionMatrix,gamma:n[t].gamma,noise:n[t].noise,vignette:n[t].vignette}]}),((e,t)=>e[n]=t)),"image-data-filter"]},KL=function(){let{srcImageData:e="imageData",srcImageState:t="imageState",destImageData:n="imageData",destScalar:r="scalar"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[RL((async(e,t,n,r,i,o)=>{if(!t||!r.length)return e;let a;try{const i={dataSizeScalar:WM(e,r)};n&&n[3]>0&&(i.backgroundColor=[...n]),a=await t(e,i)}catch(e){}const s=mE("canvas");s.width=e.width,s.height=e.height;const l=s.getContext("2d",{willReadFrequently:!0,colorSpace:e.colorSpace});if(l.putImageData(e,0,0),"auto"===o){const t=Math.sqrt(e.width*e.height);l.filter=`blur(${Math.round(t/100)}px)`}const c=new Path2D;r.forEach((e=>{const t=aI(e.x,e.y,e.width,e.height);pI(t,i);const n=yI(QT(t),e.rotation),r=new Path2D;n.forEach(((e,t)=>{if(0===t)return r.moveTo(e.x,e.y);r.lineTo(e.x,e.y)})),c.addPath(r)})),l.clip(c,"nonzero"),l.imageSmoothingEnabled=!1,l.drawImage(a,0,0,s.width,s.height),yE(a);const u=l.getImageData(0,0,s.width,s.height);return yE(s),u}),((n,i)=>{let{imageScrambler:o,redactionRenderStyle:a}=i;return[n[e],o,n[t].backgroundColor,n[t].redaction,n[r],a]}),((e,t)=>e[n]=t)),"image-data-redact"]},YL=function(){let{srcImageData:e="imageData",srcSize:t="size",srcImageState:n="imageState",srcShapes:r="annotation",destImageData:i="imageData",destImageScaledSize:o="imageScaledSize",destScalar:a="scalar",imageDataResizer:s,canvasMemoryLimit:l,shapeFilter:c=KE,shapeClip:u=!0,destImageContext:d="imageContext"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[RL(zM,((i,p)=>{let{shapePreprocessor:h,willRequestResource:f,csp:m,willRequest:g}=p;const y=i[n][r].filter(c);if(!y.length)return[i[e]];const v=i[a],{crop:b}=i[n],x=i[t];let w=v;const $=i[o];$&&(w=Math.min($.width/b.width,$.height/b.height));const S={width:x.width/v,height:x.height/v};return[i[e],{shapes:y,computeShape:e=>(e=pM(e,S),e=$L(e,["left","right","top","bottom"]),xM(e,w)),transform:e=>{const r=i[t],{rotation:a=0,flipX:s,flipY:l,cropLimitToImage:c}=i[n],{crop:p=eI(r)}=i[n];let h=1;h=i[o]?w:v;const f={width:r.width/v*h,height:r.height/v*h},m=BI(f,a),g=m.width,y=m.height,b=.5*f.width-.5*g,x=.5*f.height-.5*y,$=WT(f);e.translate(-b,-x),e.translate(-p.x*h,-p.y*h),e.translate($.x,$.y),e.rotate(a),e.translate(-$.x,-$.y);const S=i[d]||{x:0,y:0};e.translate(S.x,S.y),e.scale(s?-1:1,l?-1:1),e.translate(s?-f.width*v:0,l?-f.height*v:0),c&&u&&(e.rect(0,0,f.width,f.height),e.clip())},drawImage:PL({imageDataResizer:s,canvasMemoryLimit:l}),preprocessShape:e=>h(e,{isPreview:!1,...i[n]}),canvasMemoryLimit:l,willRequest:g||f,styleNonce:m.styleNonce}]}),((e,t)=>e[i]=t)),"image-data-annotate"]},ZL=function(){let{srcImageData:e="imageData",srcImageState:t="imageState",destImageData:n="imageData",destImageScaledSize:r="imageScaledSize",imageDataResizer:i,canvasMemoryLimit:o,destScalar:a="scalar",shapeFilter:s=KE,destImageContext:l="imageContext"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[RL(zM,((n,c)=>{let{shapePreprocessor:u,willRequestResource:d,willRequest:p,csp:h}=c,f=n[t].decoration.filter(s);if("undefined"!=typeof window&&(e=>{if(e&&e._gp4y96c)return;const[r]=[[85,110,108,105,99,101,110,115,101,100,32,80,105,110,116,117,114,97,32,105,110,115,116,97,110,99,101,32]].map((e=>e.map((e=>String.fromCharCode(e))).join(""))),{width:i,height:o}=n[t].crop,a=o/15;f=[...f,{x:.5*-a,y:.5*-a,width:1.5*i,height:1.25*o,text:Array(50).fill(r).join(""),fontWeight:900,lineHeight:a,fontSize:a,color:[1,1,1,.05]}]})(window),!f.length)return[n[e]];let m=n[a];const{crop:g}=n[t],y=n[r];if(y){const e=Math.min(y.width/g.width,y.height/g.height);m=e}return[n[e],{shapes:f,drawImage:PL({imageDataResizer:i,canvasMemoryLimit:o}),computeShape:e=>(e=pM(e,g),e=$L(e,["left","right","top","bottom"]),xM(e,m)),preprocessShape:e=>u(e,{isPreview:!1,...n[t]}),canvasMemoryLimit:o,willRequest:p||d,styleNonce:h.styleNonce,transform:e=>{const t=n[l]||{x:0,y:0};e.translate(t.x,t.y)}}]}),((e,t)=>e[n]=t)),"image-data-decorate"]},XL=function(){let{srcImageData:e="imageData",srcImageState:t="imageState",destImageData:n="imageData",destImageScaledSize:r="imageScaledSize",imageDataResizer:i,canvasMemoryLimit:o,destScalar:a="scalar",destImageContext:s="imageContext"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[RL(((e,t)=>new Promise((n=>{if(!t)return n([e]);zM(e,t).then((e=>{n([e,t.contextBounds])}))}))),((n,s)=>{let{shapePreprocessor:l,willRequestResource:c,willRequest:u,csp:d}=s;const p=n[t].frame;if(!p)return[n[e]];const h=n[a];let{crop:f}=n[t];f&&1!==h&&(f=cI(QT(f),h,pT()));const m={...f},g=yM(vM(p,m,l),m);m.x=Math.abs(g.left),m.y=Math.abs(g.top),m.width+=Math.abs(g.left)+Math.abs(g.right),m.height+=Math.abs(g.top)+Math.abs(g.bottom);const y=n[r],v=y?y.width/f.width:1,b=y?y.height/f.height:1;return m.x*=v,m.y*=b,m.width*=v,m.height*=b,m.x=Math.round(m.x),m.y=Math.round(m.y),m.width=Math.round(m.width),m.height=Math.round(m.height),y&&(Math.abs(m.width-y.width)<=1&&(m.width=y.width),Math.abs(m.height-y.height)<=1&&(m.height=y.height)),[n[e],{shapes:[p],contextBounds:m,computeShape:t=>pM(t,n[e]),transform:e=>{e.translate(m.x,m.y)},drawImage:PL({imageDataResizer:i,canvasMemoryLimit:o}),preprocessShape:e=>l(e,{isPreview:!1,...n[t]}),canvasMemoryLimit:o,willRequest:u||c,styleNonce:d.styleNonce}]}),((e,t)=>{let[r,i]=t;e[s]=i,e[n]=r})),"image-data-frame"]},QL=function(){let{mimeType:e,quality:t,srcImageData:n="imageData",srcFile:r="src",destBlob:i="blob"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[RL(zE,(i=>[i[n],e||HE(i[r].name)||i[r].type,t]),((e,t)=>e[i]=t)),"image-data-to-blob"]},JL=function(){let{srcImageData:e="imageData",srcOrientation:t="orientation",destCanvas:n="dest"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[RL(SE,(n=>[n[e],n[t]]),((e,t)=>e[n]=t)),"image-data-to-canvas"]},eN=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"blob",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"copy",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"colorSpace",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"blob";return[RL(((e,t,n)=>{if(t)return(async(e,t,n)=>{if(!yP(e)||!t)return e;const r=/p3/i.test(n),i=(e,t)=>{let n=2;const r=new DataView(e),i=r.byteLength;for(t(r.getUint8(0),0,2,i);n<i&&255==r.getUint8(n);){const e=r.getUint8(n+1),o=r.getUint16(n+2)+2;if(!1===t(e,n,o,i))break;n+=o}},o=e=>e>=224&&e<=237,a=(e=>{const t=[];return i(e,((n,i,a)=>{if(218===n)return!1;if(o(n)){if(226===n){if(!r)return!1;if(null===IL&&(IL=void 0!==new ImageData(1,1).colorSpace),!IL)return!1}t.push(new Uint8Array(e,i,a))}})),t})(t),s=((e,t)=>{const n=[];i(e,((r,i,a,s)=>0===i?(n.push(new Uint8Array(e,i,a)),void n.push(...t)):218===r?(n.push(new Uint8Array(e,i,s-i)),!1):void(o(r)||n.push(new Uint8Array(e,i,a)))));let r=n.reduce(((e,t)=>e+t.length),0),a=new Uint8Array(r),s=0;return n.forEach((e=>{a.set(e,s),s+=e.length})),a})(await sE(e),a);return new Blob([s],{type:"image/jpeg"})})(e,t,n)}),(r=>[r[e],r[t],r[n]]),((e,t)=>{t&&(e[r]=t)})),"blob-write-image-head"]},tN=function(){let{renameFile:e,srcBlob:t="blob",srcFile:n="src",destFile:r="dest",defaultFilename:i}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[RL(qE,(r=>[r[t],e?e(r[n]):r[n].name||`${i}.${UE(r[t].type)}`]),((e,t)=>e[r]=t)),"blob-to-file"]},nN=e=>{let{url:t="./",dataset:n=e=>[["dest",e.dest,e.dest.name],["imageState",e.imageState]],destStore:r="store",credentials:i,headers:o={}}=e;return[RL((async(e,n)=>await((e,t,n)=>new Promise(((r,i)=>{const{token:o={},beforeSend:a=eE,onprogress:s=eE}=n;o.cancel=()=>l.abort();const l=new XMLHttpRequest;l.upload.onprogress=s,l.onload=()=>l.status>=200&&l.status<300?r(l):i(l),l.onerror=()=>i(l),l.ontimeout=()=>i(l),l.open("POST",encodeURI(e)),a(l),l.send(t instanceof FormData?t:t.reduce(((e,t)=>(e.append(...t.map(vP)),e)),new FormData))})))(t,e,{onprogress:n,beforeSend:e=>lP(e,{headers:o,credentials:i})})),((e,t,r)=>[n(e),r]),((e,t)=>e[r]=t)),"store"]},rN=e=>[RL((t=>e&&e.length?(Object.keys(t).forEach((n=>{e.includes(n)||delete t[n]})),t):t)),"prop-filter"],iN=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{orientImage:t=!0,outputProps:n=["src","dest","size","duration"],preprocessImageFile:r,request:i={}}=e;return[ML({willRequest:()=>i}),AL(),r&&[RL(r,((e,t,n)=>[e.dest,t,n]),((e,t)=>e.dest=t)),"preprocess-image-file"],OL({srcProp:"dest"}),NL({srcProp:"dest"}),t&&FL({srcProp:"dest"}),t&&jL(),t&&DL(),rN(n)].filter(Boolean)},oN=e=>e&&(hE(e)?nN({url:e}):TE(e)?[e,"store"]:nN(e)),aN=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{canvasMemoryLimit:i=wL(),orientImage:o=!0,copyImageHead:a=!0,mimeType:s,quality:l,renameFile:c,targetSize:u,imageDataResizer:d,store:p,format:h="file",outputProps:f=["src","dest","imageState","store"],preprocessImageSource:m,preprocessImageState:g,postprocessImageData:y,postprocessImageBlob:v,testSrcSupport:b=!1}={...e,...r};if(!b||eP(t))return"blob"===h&&(h="file"),[m&&[RL(m,((e,t,n)=>[e.src,t,n,e.imageState]),((e,t)=>e.src=t)),"preprocess-image-source"],(o||a)&&FL(),jL(),OL(),g&&[RL(g,((e,t,n,r)=>[e.imageState,t,n,{size:e.size,orientation:e.orientation}]),((e,t)=>e.imageState=t)),"preprocess-image-state"],UL({canvasMemoryLimit:i}),o&&DL(),o&&WL(),BL(),KL(),HL(),qL({imageDataResizer:d,targetSize:u}),YL({imageDataResizer:d,canvasMemoryLimit:i,srcShapes:"manipulation"}),GL(),VL(),YL({imageDataResizer:d,canvasMemoryLimit:i,srcShapes:"annotation",shapeFilter:e=>!e.aboveFrame}),ZL({imageDataResizer:d,canvasMemoryLimit:i,shapeFilter:e=>!e.aboveFrame}),XL({imageDataResizer:d,canvasMemoryLimit:i}),YL({imageDataResizer:d,canvasMemoryLimit:i,srcShapes:"annotation",shapeFilter:e=>e.aboveFrame,shapeClip:!1}),ZL({imageDataResizer:d,canvasMemoryLimit:i,shapeFilter:e=>e.aboveFrame}),y&&[RL(y,((e,t,n)=>[e.imageData,t,n]),((e,t)=>e.imageData=t)),"postprocess-image-data"],"file"===h?QL({mimeType:s,quality:l}):"canvas"===h?JL():[e=>(e.dest=e.imageData,e)],"file"===h&&o&&zL(),"file"===h&&a&&eN(),v&&[RL(v,((e,t,n)=>{let{blob:r,imageData:i,src:o}=e;return[{blob:r,imageData:i,src:o},t,n]}),((e,t)=>e.blob=t)),"postprocess-image-file"],"file"===h&&tN({defaultFilename:"image",renameFile:c}),"file"===h?oN(p):TE(p)&&[p,"store"],rN(f)].filter(Boolean)}};var sN=(e,t,n,r,i,o,a,s,l,c,u)=>{if(!(e&&t&&n&&r&&s))return;s*=o;const d=kI(QT(t)),p=sI(d),h=sI(e),f=eI(n),m=sI(f),g=tL(n,r,l),y=sI(g),v=_T(mT(m),y),b=_T(mT(h),p);v.x+=b.x,v.y+=b.y;const x=gT(mT(v));x.x+=b.x,x.y+=b.y;const w=sI(lI(lI(QT(i),a),e)),$=_T(w,h);return ST(v,$),{origin:x,translation:v,rotation:{x:u?Math.PI:0,y:c?Math.PI:0,z:l},scale:s}};let lN=null;var cN=()=>{if(null===lN)if("WebGL2RenderingContext"in window){let e;try{e=mE("canvas"),lN=!!e.getContext("webgl2")}catch(UK){lN=!1}e&&yE(e),e=void 0}else lN=!1;return lN},uN=e=>0==(e&e-1),dN=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return Object.keys(t).filter((e=>!CE(t[e]))).reduce(((e,i)=>e.replace(new RegExp(n+i+r),t[i])),e)};const pN={head:"#version 300 es\n\nin vec4 aPosition;uniform mat4 uMatrix;",text:"\nin vec2 aTexCoord;out vec2 vTexCoord;",matrix:"\ngl_Position=uMatrix*vec4(aPosition.x,aPosition.y,0,1);"},hN={head:"#version 300 es\nprecision highp float;\n\nout vec4 fragColor;",mask:"\nuniform float uMaskFeather[8];uniform float uMaskBounds[4];uniform float uMaskOpacity;float mask(float x,float y,float bounds[4],float opacity){return 1.0-(1.0-(smoothstep(bounds[3],bounds[3]+1.0,x)*(1.0-smoothstep(bounds[1]-1.0,bounds[1],x))*(1.0-step(bounds[0],y))*step(bounds[2],y)))*(1.0-opacity);}",init:"\nfloat a=1.0;vec4 fillColor=uColor;vec4 textureColor=texture(uTexture,vTexCoord);textureColor*=(1.0-step(uRepeat.y,vTexCoord.y))*step(0.0,vTexCoord.y)*(1.0-step(uRepeat.x,vTexCoord.x))*step(0.0,vTexCoord.x);",colorize:"\nif(uTextureColor.a!=0.0&&textureColor.a>0.0){vec3 colorFlattened=textureColor.rgb/textureColor.a;if(colorFlattened.r>=.9999&&colorFlattened.g==0.0&&colorFlattened.b>=.9999){textureColor.rgb=uTextureColor.rgb*textureColor.a;}textureColor*=uTextureColor.a;}",maskapply:"\nfloat m=mask(gl_FragCoord.x,gl_FragCoord.y,uMaskBounds,uMaskOpacity);",maskfeatherapply:"\nfloat leftFeatherOpacity=step(uMaskFeather[1],gl_FragCoord.x)*uMaskFeather[0]+((1.0-uMaskFeather[0])*smoothstep(uMaskFeather[1],uMaskFeather[3],gl_FragCoord.x));float rightFeatherOpacity=(1.0-step(uMaskFeather[7],gl_FragCoord.x))*uMaskFeather[4]+((1.0-uMaskFeather[4])*smoothstep(uMaskFeather[7],uMaskFeather[5],gl_FragCoord.x));a*=leftFeatherOpacity*rightFeatherOpacity;",rectaa:"\nvec2 scaledPoint=vec2(vRectCoord.x*uSize.x,vRectCoord.y*uSize.y);a*=smoothstep(0.0,uEdgeFeather,uSize.x-scaledPoint.x);a*=smoothstep(0.0,uEdgeFeather,uSize.y-scaledPoint.y);a*=smoothstep(0.0,uEdgeFeather,scaledPoint.x);a*=smoothstep(0.0,uEdgeFeather,scaledPoint.y);",cornerradius:"\nvec2 s=(uSize-2.0)*.5;vec2 r=(vRectCoord*uSize)-1.0;vec2 p=r-s;float cornerRadius=uCornerRadius[0];bool left=r.x<s.x;bool top=r.y<s.y;if(!left&&top){cornerRadius=uCornerRadius[1];}if(!left&&!top){cornerRadius=uCornerRadius[3];}if(left&&!top){cornerRadius=uCornerRadius[2];}a*=1.0-clamp(length(max(abs(p)-(s-cornerRadius),0.0))-cornerRadius,0.0,1.0);",fragcolor:"\nif(m<=0.0)discard;fillColor.a*=a;fillColor.rgb*=fillColor.a;fillColor.rgb*=m;fillColor.rgb+=(1.0-m)*(uCanvasColor.rgb*fillColor.a);textureColor*=uTextureOpacity;textureColor.a*=a;textureColor.rgb*=m*a;textureColor.rgb+=(1.0-m)*(uCanvasColor.rgb*textureColor.a);fragColor=textureColor+(fillColor*(1.0-textureColor.a));"},fN=(e,t,n)=>{const r=e.createShader(n),i=((e,t,n)=>(t=dN(t,n===e.VERTEX_SHADER?pN:hN,"##").trim(),cN()?t:(t=(t=t.replace(/#version.+/gm,"").trim()).replace(/^\/\/\#/gm,"#"),n===e.VERTEX_SHADER&&(t=t.replace(/in /gm,"attribute ").replace(/out /g,"varying ")),n===e.FRAGMENT_SHADER&&(t=t.replace(/in /gm,"varying ").replace(/out.*?;/gm,"").replace(/texture\(/g,"texture2D(").replace(/fragColor/g,"gl_FragColor")),""+t)))(e,t,n);return e.shaderSource(r,i),e.compileShader(r),e.getShaderParameter(r,e.COMPILE_STATUS)||console.error(e.getShaderInfoLog(r)),r},mN=(e,t,n,r,i)=>{const o=fN(e,t,e.VERTEX_SHADER),a=fN(e,n,e.FRAGMENT_SHADER),s=e.createProgram();e.attachShader(s,o),e.attachShader(s,a),e.linkProgram(s);const l={};return r.forEach((t=>{l[t]=e.getAttribLocation(s,t)})),i.forEach((t=>{l[t]=e.getUniformLocation(s,t)})),{program:s,locations:l,destroy(){e.detachShader(s,o),e.detachShader(s,a),e.deleteShader(o),e.deleteShader(a),e.deleteProgram(s)}}},gN=e=>"VIDEO"!==e.nodeName&&(!!cN()||uN(e.width)&&uN(e.height)),yN=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return e?[e[0],e[1],e[2],RP(e[3])?t*e[3]:t]:[0,0,0,0]},vN=()=>{const e=new Float32Array(16);return e[0]=1,e[5]=1,e[10]=1,e[15]=1,e},bN=(e,t,n,r,i,o,a)=>{const s=1/(t-n),l=1/(r-i),c=1/(o-a);e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(t+n)*s,e[13]=(i+r)*l,e[14]=(a+o)*c,e[15]=1},xN=(e,t,n,r)=>{e[12]=e[0]*t+e[4]*n+e[8]*r+e[12],e[13]=e[1]*t+e[5]*n+e[9]*r+e[13],e[14]=e[2]*t+e[6]*n+e[10]*r+e[14],e[15]=e[3]*t+e[7]*n+e[11]*r+e[15]},wN=(e,t)=>{e[0]*=t,e[1]*=t,e[2]*=t,e[3]*=t,e[4]*=t,e[5]*=t,e[6]*=t,e[7]*=t,e[8]*=t,e[9]*=t,e[10]*=t,e[11]*=t},$N=(e,t)=>{const n=Math.sin(t),r=Math.cos(t),i=e[4],o=e[5],a=e[6],s=e[7],l=e[8],c=e[9],u=e[10],d=e[11];e[4]=i*r+l*n,e[5]=o*r+c*n,e[6]=a*r+u*n,e[7]=s*r+d*n,e[8]=l*r-i*n,e[9]=c*r-o*n,e[10]=u*r-a*n,e[11]=d*r-s*n},SN=(e,t)=>{const n=Math.sin(t),r=Math.cos(t),i=e[0],o=e[1],a=e[2],s=e[3],l=e[8],c=e[9],u=e[10],d=e[11];e[0]=i*r-l*n,e[1]=o*r-c*n,e[2]=a*r-u*n,e[3]=s*r-d*n,e[8]=i*n+l*r,e[9]=o*n+c*r,e[10]=a*n+u*r,e[11]=s*n+d*r},_N=(e,t)=>{const n=Math.sin(t),r=Math.cos(t),i=e[0],o=e[1],a=e[2],s=e[3],l=e[4],c=e[5],u=e[6],d=e[7];e[0]=i*r+l*n,e[1]=o*r+c*n,e[2]=a*r+u*n,e[3]=s*r+d*n,e[4]=l*r-i*n,e[5]=c*r-o*n,e[6]=u*r-a*n,e[7]=d*r-s*n};var CN=(e,t)=>cN()?e.getContext("webgl2",t):e.getContext("webgl",t)||e.getContext("experimental-webgl",t);const kN=(e,t)=>{const n=e.length;return t>=n?e[t%n]:t<0?e[t%n+n]:e[t]},EN=(e,t,n,r)=>{const i=hT(n.x-t.x,n.y-t.y),o=hT(r.x-n.x,r.y-n.y),a=hT(t.x-r.x,t.y-r.y),s=hT(e.x-t.x,e.y-t.y),l=hT(e.x-n.x,e.y-n.y),c=hT(e.x-r.x,e.y-r.y),u=TT(i,s),d=TT(o,l),p=TT(a,c);return u<=0&&d<=0&&p<=0},TN=(e,t,n,r,i)=>{const o=bT(hT(r.x-n.x,r.y-n.y)),a=bT(hT(i.x-r.x,i.y-r.y)),s=bT(hT(o.x+a.x,o.y+a.y)),l=hT(-s.y,s.x),c=hT(-o.y,o.x),u=Math.min(1/ET(l,c),5);e[t]=r.x,e[t+1]=r.y,e[t+2]=l.x*u,e[t+3]=l.y*u,e[t+4]=-1,e[t+5]=r.x,e[t+6]=r.y,e[t+7]=l.x*u,e[t+8]=l.y*u,e[t+9]=1},IN=e=>{const t=new Float32Array(8);return t[0]=e[3].x,t[1]=e[3].y,t[2]=e[0].x,t[3]=e[0].y,t[4]=e[2].x,t[5]=e[2].y,t[6]=e[1].x,t[7]=e[1].y,t},PN=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;const i=SI(e),o=e.x+.5*e.width,a=e.y+.5*e.height;return(n||r)&&MT(i,n,r,o,a),0!==t&&AT(i,t,o,a),i},RN=(e,t,n,r,i)=>{const o=Math.min(20,Math.max(4,Math.round(r/2)));let a=0,s=0,l=0,c=0,u=0;for(;u<o;u++)a=u/o,s=i*ZE+a*ZE,l=r*Math.cos(s),c=r*Math.sin(s),e.push(hT(t+l,n+c))};let MN=null;var AN=()=>{if(null!==MN)return MN;let e=mE("canvas");const t=CN(e);return MN=t?t.getParameter(t.MAX_TEXTURE_SIZE):void 0,yE(e),e=void 0,MN},ON=()=>cE()&&!!window.chrome;const LN=new Float32Array([0,1,0,0,1,1,1,0]),NN=new Float32Array([1,0,0,0,1,1,0,1]),DN=cE()&&NE(),FN=[0,0,0,0,1,0,0,0,0],jN=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],zN=[0,0,0,0],BN=[0,0,0,0],UN=(e,t,n,r,i)=>{if(!n||!r)return LN;let o=r.x/n.width,a=r.y/n.height,s=e/n.width/i,l=t/n.height/i;return s-=o,l-=a,new Float32Array([-o,l,-o,-a,s,l,s,-a])};var WN=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{alpha:n=!1}=t,r={width:0,height:0},i={width:0,height:0},o=AN()||1024;let a,s,l;const c=vN(),u=vN();let d,p,h,f,m,g,y,v,b,x=0,w=0,$=0,S=1;const _=new Map([]),C=()=>{T.stencilOp(T.KEEP,T.KEEP,T.KEEP),T.stencilFunc(T.ALWAYS,1,255),T.stencilMask(255)},k=(e=>e*Math.PI/180)(30),E=Math.tan(k/2),T=CN(e,{alpha:n,antialias:!1,premultipliedAlpha:!0,stencil:!0});if(!T)return;T.getExtension("OES_standard_derivatives"),T.disable(T.DEPTH_TEST),T.enable(T.STENCIL_TEST),T.enable(T.BLEND),T.blendFunc(T.ONE,T.ONE_MINUS_SRC_ALPHA),C();const I=T.createTexture();T.bindTexture(T.TEXTURE_2D,I),T.texImage2D(T.TEXTURE_2D,0,T.RGBA,1,1,0,T.RGBA,T.UNSIGNED_BYTE,new Uint8Array(zN)),_.set(0,I);const P=T.createTexture();_.set(2,P);const R=T.createFramebuffer(),M=T.createTexture();_.set(1,M);const A=T.createFramebuffer(),O=mN(T,"\n##head\n##text\nvoid main(){vTexCoord=aTexCoord;gl_Position=uMatrix*aPosition;}","\n##head\nin vec2 vTexCoord;uniform sampler2D uTexture;uniform sampler2D uTextureOverlay;uniform sampler2D uTextureBlend;uniform vec2 uTextureSize;uniform float uOpacity;uniform int uAntialias;uniform vec4 uOverlayColor;uniform mat4 uColorMatrix;uniform vec4 uColorOffset;uniform float uClarityKernel[9];uniform float uClarityKernelWeight;uniform float uColorGamma;uniform float uColorVignette;uniform float uMaskClip;uniform float uMaskOpacity;uniform float uMaskBounds[4];uniform float uMaskCornerRadius[4];uniform float uMaskFeather[8];vec4 applyGamma(vec4 c,float g){c.r=pow(c.r,g);c.g=pow(c.g,g);c.b=pow(c.b,g);return c;}vec4 applyColorMatrix(vec4 c,mat4 m,vec4 o){vec4 res=(c*m)+(o*c.a);res=clamp(res,0.0,1.0);return res;}vec4 applyConvolutionMatrix(vec4 c,float k0,float k1,float k2,float k3,float k4,float k5,float k6,float k7,float k8,float w){vec2 pixel=vec2(1)/uTextureSize;vec4 colorSum=texture(uTexture,vTexCoord-pixel)*k0+texture(uTexture,vTexCoord+pixel*vec2(0.0,-1.0))*k1+texture(uTexture,vTexCoord+pixel*vec2(1.0,-1.0))*k2+texture(uTexture,vTexCoord+pixel*vec2(-1.0,0.0))*k3+texture(uTexture,vTexCoord)*k4+texture(uTexture,vTexCoord+pixel*vec2(1.0,0.0))*k5+texture(uTexture,vTexCoord+pixel*vec2(-1.0,1.0))*k6+texture(uTexture,vTexCoord+pixel*vec2(0.0,1.0))*k7+texture(uTexture,vTexCoord+pixel)*k8;vec4 color=vec4(clamp((colorSum/w),0.0,1.0).rgb,c.a);return color;}vec4 blendPremultipliedAlpha(vec4 back,vec4 front){return front+(back*(1.0-front.a));}vec4 applyVignette(vec4 c,vec2 pos,vec2 center,float v){float d=distance(pos,center)/length(center);float f=1.0-(d*abs(v));if(v>0.0){c.rgb*=f;}else if(v<0.0){c.rgb+=(1.0-f)*(1.0-c.rgb);}return c;}void main(){float x=gl_FragCoord.x;float y=gl_FragCoord.y;float a=1.0;float maskTop=uMaskBounds[0];float maskRight=uMaskBounds[1];float maskBottom=uMaskBounds[2];float maskLeft=uMaskBounds[3];float leftFeatherOpacity=step(uMaskFeather[1],x)*uMaskFeather[0]+((1.0-uMaskFeather[0])*smoothstep(uMaskFeather[1],uMaskFeather[3],x));float rightFeatherOpacity=(1.0-step(uMaskFeather[7],x))*uMaskFeather[4]+((1.0-uMaskFeather[4])*smoothstep(uMaskFeather[7],uMaskFeather[5],x));a*=leftFeatherOpacity*rightFeatherOpacity;float overlayColorAlpha=(smoothstep(maskLeft,maskLeft+1.0,x)*(1.0-smoothstep(maskRight-1.0,maskRight,x))*(1.0-step(maskTop,y))*step(maskBottom,y));if(uOverlayColor.a==0.0){a*=overlayColorAlpha;}vec2 offset=vec2(maskLeft,maskBottom);vec2 size=vec2(maskRight-maskLeft,maskTop-maskBottom)*.5;vec2 center=offset.xy+size.xy;int pixelX=int(step(center.x,x));int pixelY=int(step(y,center.y));float cornerRadius=0.0;if(pixelX==0&&pixelY==0)cornerRadius=uMaskCornerRadius[0];if(pixelX==1&&pixelY==0)cornerRadius=uMaskCornerRadius[1];if(pixelX==0&&pixelY==1)cornerRadius=uMaskCornerRadius[2];if(pixelX==1&&pixelY==1)cornerRadius=uMaskCornerRadius[3];float cornerOffset=sign(cornerRadius)*length(max(abs(gl_FragCoord.xy-size-offset)-size+cornerRadius,0.0))-cornerRadius;float cornerOpacity=1.0-smoothstep(0.0,1.0,cornerOffset);a*=cornerOpacity;if(uAntialias==1){vec2 scaledPoint=vec2(vTexCoord.x*uTextureSize.x,vTexCoord.y*uTextureSize.y);a*=smoothstep(0.0,1.0,uTextureSize.x-scaledPoint.x);a*=smoothstep(0.0,1.0,uTextureSize.y-scaledPoint.y);a*=smoothstep(0.0,1.0,scaledPoint.x);a*=smoothstep(0.0,1.0,scaledPoint.y);}vec4 color=texture(uTexture,vTexCoord);if(uClarityKernelWeight!=-1.0){color=applyConvolutionMatrix(color,uClarityKernel[0],uClarityKernel[1],uClarityKernel[2],uClarityKernel[3],uClarityKernel[4],uClarityKernel[5],uClarityKernel[6],uClarityKernel[7],uClarityKernel[8],uClarityKernelWeight);}color=blendPremultipliedAlpha(color,texture(uTextureBlend,vTexCoord));color=applyGamma(color,uColorGamma);color=applyColorMatrix(color,uColorMatrix,uColorOffset);color*=a;if(uColorVignette!=0.0){vec2 pos=gl_FragCoord.xy-offset;color=applyVignette(color,pos,center-offset,uColorVignette);}color=blendPremultipliedAlpha(color,texture(uTextureOverlay,vTexCoord));if(overlayColorAlpha<=0.0){color*=1.0-uOverlayColor.a;}color*=uOpacity;fragColor=color;}",["aPosition","aTexCoord"],["uMatrix","uTexture","uTextureBlend","uTextureOverlay","uTextureSize","uColorGamma","uColorVignette","uColorOffset","uColorMatrix","uClarityKernel","uClarityKernelWeight","uOpacity","uMaskOpacity","uMaskBounds","uMaskCornerRadius","uMaskFeather","uOverlayColor","uAntialias"]),L=T.createBuffer(),N=T.createBuffer();T.bindBuffer(T.ARRAY_BUFFER,N),T.bufferData(T.ARRAY_BUFFER,LN,T.STATIC_DRAW);const D=T.createBuffer();T.bindBuffer(T.ARRAY_BUFFER,D),T.bufferData(T.ARRAY_BUFFER,NN,T.STATIC_DRAW);const F=mN(T,"#version 300 es\n\nin vec4 aPosition;in vec2 aNormal;in float aMiter;out vec2 vNormal;out float vMiter;out float vWidth;uniform float uWidth;uniform float uSharpness;uniform mat4 uMatrix;void main(){vMiter=aMiter;vNormal=aNormal;vWidth=(uWidth*.5)+uSharpness;gl_Position=uMatrix*vec4(aPosition.x+(aNormal.x*vWidth*aMiter),aPosition.y+(aNormal.y*vWidth*aMiter),0,1);}","\n##head\n##mask\nin vec2 vNormal;in float vMiter;in float vWidth;uniform float uWidth;uniform vec4 uColor;uniform vec4 uCanvasColor;void main(){vec4 fillColor=uColor;float m=mask(gl_FragCoord.x,gl_FragCoord.y,uMaskBounds,uMaskOpacity);if(m<=0.0)discard;fillColor.a*=clamp(smoothstep(vWidth-.5,vWidth-1.0,abs(vMiter)*vWidth),0.0,1.0);fillColor.rgb*=fillColor.a;fillColor.rgb*=m;fillColor.rgb+=(1.0-m)*(uCanvasColor.rgb*fillColor.a);fragColor=fillColor;}",["aPosition","aNormal","aMiter"],["uColor","uCanvasColor","uMatrix","uWidth","uSharpness","uMaskBounds","uMaskOpacity"]),j=T.createBuffer();ON()&&(T.bindBuffer(T.ARRAY_BUFFER,j),T.bufferData(T.ARRAY_BUFFER,1,T.DYNAMIC_DRAW));const z=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const{program:i,locations:o}=F;T.useProgram(i),T.enableVertexAttribArray(o.aPosition),T.enableVertexAttribArray(o.aNormal),T.enableVertexAttribArray(o.aMiter);const a=((e,t)=>{let n,r,i,o=0;const a=e.length,s=new Float32Array(10*(t?a+1:a)),l=e[0],c=e[a-1];for(o=0;o<a;o++)n=e[o-1],r=e[o],i=e[o+1],n||(n=t?c:hT(r.x+(r.x-i.x),r.y+(r.y-i.y))),i||(i=t?l:hT(r.x+(r.x-n.x),r.y+(r.y-n.y))),TN(s,10*o,n,r,i);return t&&TN(s,10*a,c,l,e[1]),s})(e,r),s=5*Float32Array.BYTES_PER_ELEMENT,c=2*Float32Array.BYTES_PER_ELEMENT,u=4*Float32Array.BYTES_PER_ELEMENT;T.uniform1f(o.uWidth,t),T.uniform1f(o.uSharpness,l),T.uniform4fv(o.uColor,n),T.uniformMatrix4fv(o.uMatrix,!1,d),T.uniform4f(o.uCanvasColor,x,w,$,S),T.uniform1fv(o.uMaskBounds,y),T.uniform1f(o.uMaskOpacity,g),T.bindBuffer(T.ARRAY_BUFFER,j),T.bufferData(T.ARRAY_BUFFER,a,T.STATIC_DRAW),T.vertexAttribPointer(o.aPosition,2,T.FLOAT,!1,s,0),T.vertexAttribPointer(o.aNormal,2,T.FLOAT,!1,s,c),T.vertexAttribPointer(o.aMiter,1,T.FLOAT,!1,s,u),T.drawArrays(T.TRIANGLE_STRIP,0,a.length/5),T.disableVertexAttribArray(o.aPosition),T.disableVertexAttribArray(o.aNormal),T.disableVertexAttribArray(o.aMiter)},B=mN(T,"\n##head\nvoid main(){\n##matrix\n}","\n##head\n##mask\nuniform vec4 uColor;uniform vec4 uCanvasColor;void main(){vec4 fillColor=uColor;\n##maskapply\nfillColor.rgb*=fillColor.a;fillColor.rgb*=m;fillColor.rgb+=(1.0-m)*(uCanvasColor.rgb*fillColor.a);fragColor=fillColor;}",["aPosition"],["uColor","uCanvasColor","uMatrix","uMaskBounds","uMaskOpacity"]),U=T.createBuffer(),W=mN(T,"\n##head\n##text\nin vec2 aRectCoord;out vec2 vRectCoord;void main(){vTexCoord=aTexCoord;vRectCoord=aRectCoord;\n##matrix\n}","\n##head\n##mask\nin vec2 vTexCoord;in vec2 vRectCoord;uniform sampler2D uTexture;uniform vec4 uTextureColor;uniform float uTextureOpacity;uniform vec2 uRepeat;uniform vec4 uColor;uniform float uCornerRadius[4];uniform vec2 uSize;uniform vec2 uPosition;uniform vec4 uCanvasColor;uniform int uInverted;uniform float uEdgeFeather;void main(){\n##init\n##colorize\n##rectaa\n##cornerradius\n##maskfeatherapply\nif(uInverted==1)a=1.0-a;\n##maskapply\n##fragcolor\n}",["aPosition","aTexCoord","aRectCoord"],["uTexture","uColor","uMatrix","uCanvasColor","uTextureColor","uTextureOpacity","uRepeat","uPosition","uSize","uMaskBounds","uMaskOpacity","uMaskFeather","uCornerRadius","uInverted","uEdgeFeather"]),V=T.createBuffer(),H=T.createBuffer(),q=T.createBuffer(),G=mN(T,"\n##head\n##text\nout vec2 vTexCoordDouble;void main(){vTexCoordDouble=vec2(aTexCoord.x*2.0-1.0,aTexCoord.y*2.0-1.0);vTexCoord=aTexCoord;\n##matrix\n}","\n##head\n##mask\nin vec2 vTexCoord;in vec2 vTexCoordDouble;uniform sampler2D uTexture;uniform float uTextureOpacity;uniform vec2 uTextureAdjust;uniform vec2 uRepeat;uniform vec2 uRadius;uniform vec4 uColor;uniform int uInverted;uniform vec4 uCanvasColor;void main(){\n##init\nfloat ar=uRadius.x/uRadius.y;vec2 rAA=vec2(uRadius.x-1.0,uRadius.y-(1.0/ar));vec2 scaledPointSq=vec2((vTexCoordDouble.x*uTextureAdjust.x*uRadius.x)*(vTexCoordDouble.x*uTextureAdjust.x*uRadius.x),(vTexCoordDouble.y*uTextureAdjust.y*uRadius.y)*(vTexCoordDouble.y*uTextureAdjust.y*uRadius.y));float p=(scaledPointSq.x/(uRadius.x*uRadius.x))+(scaledPointSq.y/(uRadius.y*uRadius.y));float pAA=(scaledPointSq.x/(rAA.x*rAA.x))+(scaledPointSq.y/(rAA.y*rAA.y));a=smoothstep(1.0,p/pAA,p);if(uInverted==1)a=1.0-a;\n##maskapply\n##fragcolor\n}",["aPosition","aTexCoord"],["uTexture","uTextureOpacity","uTextureAdjust","uRepeat","uColor","uCanvasColor","uMatrix","uRadius","uInverted","uMaskBounds","uMaskOpacity"]),K=T.createBuffer(),Y=T.createBuffer(),Z=new Map,X={2:{width:0,height:0},1:{width:0,height:0}},Q=function(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;const a=Math.min(Math.min(4096,o)/n.width,Math.min(4096,o)/n.height,i),l=Math.floor(a*n.width),c=Math.floor(a*n.height);BT(n,X[e])?T.bindFramebuffer(T.FRAMEBUFFER,t):(T.bindTexture(T.TEXTURE_2D,_.get(e)),T.texImage2D(T.TEXTURE_2D,0,T.RGBA,l,c,0,T.RGBA,T.UNSIGNED_BYTE,null),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_MIN_FILTER,T.LINEAR),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_WRAP_S,T.CLAMP_TO_EDGE),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_WRAP_T,T.CLAMP_TO_EDGE),T.bindFramebuffer(T.FRAMEBUFFER,t),T.framebufferTexture2D(T.FRAMEBUFFER,T.COLOR_ATTACHMENT0,T.TEXTURE_2D,_.get(e),0),X[e]=n);const p=n.width*s,h=n.height*s;var f;bN(u,0,p,h,0,-1,1),xN(u,0,h,0),(f=u)[0]*=1,f[1]*=1,f[2]*=1,f[3]*=1,(e=>{e[4]*=-1,e[5]*=-1,e[6]*=-1,e[7]*=-1})(u),d=u,T.viewport(0,0,l,c),T.colorMask(!0,!0,!0,!0),T.clearColor(0,0,0,0),T.clear(T.COLOR_BUFFER_BIT),b=[1,0,1,0,1,Math.max(r.width,n.width),1,Math.max(r.width,n.width)]},J=(e,t)=>{const{forceRelease:n=!1}=t||{},{src:r}=Z.get(e);r instanceof HTMLCanvasElement&&(n||r.dataset.retain||yE(r)),Z.delete(e),T.deleteTexture(e)};return{drawPath:function(e){let t=arguments.length>4?arguments[4]:void 0,n=arguments.length>5?arguments[5]:void 0,r=arguments.length>6?arguments[6]:void 0,i=arguments.length>7?arguments[7]:void 0,o=arguments.length>8?arguments[8]:void 0;if(e.length<2)return;const a=e.map((e=>({x:e.x*s,y:e.y*s}))),l=t*s;if(l>0&&z(a,l,yN(n,o),r),a.length<3||!i||0===i[3]||!r)return;const c=(e=>{if(e.length<3)return[];if((e=>{const t=e.length;for(let n=0;n<t;n++){const t=GT(e[n],kN(e,n+1));if(PI(t,e,{ignoreIdenticalLines:!0,breakOnIntersection:!0}))return!0}return!1})(e))return[];(e=>{let t,n,r,i,o,a=0;const s=e.length;for(t=0;t<s;t++)n=e[t],r=e[(t+1)%s],i=r.x-n.x,o=(r.y+n.y)/2,a+=i*o;return a})(e)<0&&e.reverse();const t=e.length,n=[...Array(t).keys()],r=[];let i,o,a,s,l,c,u,d,p,h,f,m,g=1024;for(;n.length>3;){if(g<=0)return[];for(g--,i=0;i<n.length;i++)if(a=n[i],s=kN(n,i-1),l=kN(n,i+1),c=e[a],u=e[s],d=e[l],p=hT(u.x-c.x,u.y-c.y),h=hT(d.x-c.x,d.y-c.y),!(TT(p,h)<0)){for(f=!0,o=0;o<t;o++)if(o!==a&&o!==s&&o!==l&&(m=e[o],EN(m,u,c,d))){f=!1;break}if(f){r.push([u,c,d]),n.splice(i,1);break}}}return r.push([e[n[0]],e[n[1]],e[n[2]]]),r})(a),u=new Float32Array(6*c.length);c.forEach(((e,t)=>{let[n,r,i]=e;const o=6*t;u[o+0]=n.x,u[o+1]=n.y,u[o+2]=r.x,u[o+3]=r.y,u[o+4]=i.x,u[o+5]=i.y})),((e,t)=>{const{program:n,locations:r}=B;T.useProgram(n),T.enableVertexAttribArray(r.aPosition),T.uniform4fv(r.uColor,t),T.uniformMatrix4fv(r.uMatrix,!1,d),T.uniform1fv(r.uMaskBounds,y),T.uniform1f(r.uMaskOpacity,g),T.uniform4f(r.uCanvasColor,x,w,$,S),T.bindBuffer(T.ARRAY_BUFFER,U),T.bufferData(T.ARRAY_BUFFER,e,T.STATIC_DRAW),T.vertexAttribPointer(r.aPosition,2,T.FLOAT,!1,0,0),T.drawArrays(T.TRIANGLES,0,e.length/2),T.disableVertexAttribArray(r.aPosition)})(u,yN(i,o))},drawRect:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4?arguments[4]:void 0,o=arguments.length>5?arguments[5]:void 0,a=arguments.length>6?arguments[6]:void 0,l=arguments.length>7?arguments[7]:void 0,c=arguments.length>8?arguments[8]:void 0,u=arguments.length>9&&void 0!==arguments[9]&&arguments[9],p=arguments.length>10?arguments[10]:void 0,h=arguments.length>11?arguments[11]:void 0,f=arguments.length>12?arguments[12]:void 0,m=arguments.length>13?arguments[13]:void 0,v=arguments.length>14?arguments[14]:void 0,_=arguments.length>15&&void 0!==arguments[15]?arguments[15]:1/s,C=arguments.length>16?arguments[16]:void 0,k=arguments.length>17?arguments[17]:void 0;const E=pI(QT(e),s),P=i.map((t=>((e,t)=>Math.floor(nL(e,0,Math.min(.5*(t.width-1),.5*(t.height-1)))))(t||0,e))).map((e=>e*s));if(o||a){const e=QT(E);e.x-=.5,e.y-=.5,e.width+=1,e.height+=1;const i=PN(e,t,n,r),h=IN(i);let f;C&&(f=yN(C),0===f[3]&&(f[3]=.001));const R=l&&u?[e.width/l.width,e.height/l.height]:[1,1];!function(e,t,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:I,a=arguments.length>6?arguments[6]:void 0,l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:1,c=arguments.length>8&&void 0!==arguments[8]?arguments[8]:zN,u=arguments.length>9&&void 0!==arguments[9]?arguments[9]:LN,p=arguments.length>10&&void 0!==arguments[10]?arguments[10]:b,h=arguments.length>11&&void 0!==arguments[11]?arguments[11]:1,f=arguments.length>12?arguments[12]:void 0;const{program:m,locations:v}=W;T.useProgram(m),T.enableVertexAttribArray(v.aPosition),T.enableVertexAttribArray(v.aTexCoord),T.enableVertexAttribArray(v.aRectCoord),T.uniform4fv(v.uColor,i),T.uniform2fv(v.uSize,[t,n]),T.uniform2fv(v.uPosition,[e[2],e[3]]),T.uniform2fv(v.uRepeat,a),T.uniform1i(v.uInverted,f?1:0),T.uniform1fv(v.uCornerRadius,r),T.uniform4f(v.uCanvasColor,x,w,$,S),T.uniform1fv(v.uMaskFeather,p.map(((e,t)=>t%2==0?e:e*s))),T.uniform1fv(v.uMaskBounds,y),T.uniform1f(v.uMaskOpacity,g),T.uniform1f(v.uEdgeFeather,Math.max(0,h)),T.uniformMatrix4fv(v.uMatrix,!1,d),T.uniform1i(v.uTexture,4),T.uniform4fv(v.uTextureColor,c),T.uniform1f(v.uTextureOpacity,l),T.activeTexture(T.TEXTURE0+4),T.bindTexture(T.TEXTURE_2D,o),T.bindBuffer(T.ARRAY_BUFFER,H),T.bufferData(T.ARRAY_BUFFER,u,T.STATIC_DRAW),T.vertexAttribPointer(v.aTexCoord,2,T.FLOAT,!1,0,0),T.bindBuffer(T.ARRAY_BUFFER,q),T.bufferData(T.ARRAY_BUFFER,LN,T.STATIC_DRAW),T.vertexAttribPointer(v.aRectCoord,2,T.FLOAT,!1,0,0),T.bindBuffer(T.ARRAY_BUFFER,V),T.bufferData(T.ARRAY_BUFFER,e,T.STATIC_DRAW),T.vertexAttribPointer(v.aPosition,2,T.FLOAT,!1,0,0),T.drawArrays(T.TRIANGLE_STRIP,0,e.length/2),T.disableVertexAttribArray(v.aPosition),T.disableVertexAttribArray(v.aTexCoord),T.disableVertexAttribArray(v.aRectCoord)}(h,e.width,e.height,P,yN(o,m),a,R,m,f,p?new Float32Array(p):UN(e.width,e.height,l,c,s),v,_*s,k)}h&&(h=Math.min(h,E.width,E.height),z(((e,t,n,r,i,o,a,s)=>{const l=[];if(o.every((e=>0===e)))l.push(hT(e,t),hT(e+n,t),hT(e+n,t+r),hT(e,t+r));else{const[i,a,s,c]=o,u=e,d=e+n,p=t,h=t+r;l.push(hT(u+i,p)),RN(l,d-a,p+a,a,-1),l.push(hT(d,p+a)),RN(l,d-c,h-c,c,0),l.push(hT(d-c,h)),RN(l,u+s,h-s,s,1),l.push(hT(u,h-s)),RN(l,u+i,p+i,i,2)}return(a||s)&&MT(l,a,s,e+.5*n,t+.5*r),i&&AT(l,i,e+.5*n,t+.5*r),l})(E.x,E.y,E.width,E.height,t,P,n,r),h*s,yN(f,m),!0))},drawEllipse:(e,t,n,r,i,o,a,l,c,u,p,h,f,m,v)=>{const b=pI(aI(e.x-t,e.y-n,2*t,2*n),s);if(a||l){const e=QT(b);v||(e.x-=.5,e.y-=.5,e.width+=1,e.height+=1);const t=PN(e,r,i,o);!function(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:I,o=arguments.length>5?arguments[5]:void 0,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:LN,l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:1,c=arguments.length>8&&void 0!==arguments[8]&&arguments[8];const{program:u,locations:p}=G;T.useProgram(u),T.enableVertexAttribArray(p.aPosition),T.enableVertexAttribArray(p.aTexCoord),T.uniformMatrix4fv(p.uMatrix,!1,d),T.uniform2fv(p.uRadius,[.5*t,.5*n]),T.uniform2fv(p.uTextureAdjust,[o.width/(t/s),o.height/(n/s)]),T.uniform1i(p.uInverted,c?1:0),T.uniform4fv(p.uColor,r),T.uniform4f(p.uCanvasColor,x,w,$,S),T.uniform2fv(p.uRepeat,[1,1]),T.uniform1fv(p.uMaskBounds,y),T.uniform1f(p.uMaskOpacity,g),T.uniform1i(p.uTexture,4),T.uniform1f(p.uTextureOpacity,l),T.activeTexture(T.TEXTURE0+4),T.bindTexture(T.TEXTURE_2D,i),T.bindBuffer(T.ARRAY_BUFFER,Y),T.bufferData(T.ARRAY_BUFFER,a,T.STATIC_DRAW),T.vertexAttribPointer(p.aTexCoord,2,T.FLOAT,!1,0,0),T.bindBuffer(T.ARRAY_BUFFER,K),T.bufferData(T.ARRAY_BUFFER,e,T.STATIC_DRAW),T.vertexAttribPointer(p.aPosition,2,T.FLOAT,!1,0,0),T.drawArrays(T.TRIANGLE_STRIP,0,e.length/2),T.disableVertexAttribArray(p.aPosition),T.disableVertexAttribArray(p.aTexCoord)}(IN(t),e.width,e.height,yN(a,m),l,c||zT(e.width/s,e.height/s),p?new Float32Array(p):UN(e.width,e.height,c,u,s),m,v)}h&&z(((e,t,n,r,i,o,a)=>{const s=.5*Math.abs(n),l=.5*Math.abs(r),c=Math.abs(n)+Math.abs(r),u=Math.max(20,Math.round(c/6));return NI(hT(e+s,t+l),s,l,i,o,a,u)})(b.x,b.y,b.width,b.height,r,i,o),h*s,yN(f,m),!0)},drawImage:function(e,t,n,i,o,l,c,u,d,p){let h=arguments.length>10&&void 0!==arguments[10]?arguments[10]:jN,f=arguments.length>11&&void 0!==arguments[11]?arguments[11]:1,m=arguments.length>12?arguments[12]:void 0,b=arguments.length>13&&void 0!==arguments[13]?arguments[13]:1,x=arguments.length>14&&void 0!==arguments[14]?arguments[14]:0,w=arguments.length>15&&void 0!==arguments[15]?arguments[15]:v,$=arguments.length>16&&void 0!==arguments[16]?arguments[16]:BN,S=arguments.length>17&&void 0!==arguments[17]?arguments[17]:zN,C=arguments.length>18&&void 0!==arguments[18]&&arguments[18],I=arguments.length>19&&void 0!==arguments[19]&&arguments[19],P=!(arguments.length>20&&void 0!==arguments[20])||arguments[20];const R=t.width*s,M=t.height*s,A=-.5*R,F=.5*M,j=.5*R,z=-.5*M,B=new Float32Array([A,z,0,A,F,0,j,z,0,j,F,0]);T.bindBuffer(T.ARRAY_BUFFER,L),T.bufferData(T.ARRAY_BUFFER,B,T.STATIC_DRAW);const U=t.height/2/E*(r.height/t.height)*-1;o*=s,l*=s,n*=s,i*=s;const{program:W,locations:V}=O,H=vN();((e,t,n,r,i)=>{const o=1/Math.tan(t/2),a=1/(1-i);e[0]=o/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(i+1)*a,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*i*1*a,e[15]=0})(H,k,a,0,2*-U),xN(H,o,-l,U),xN(H,n,-i,0),_N(H,-d),wN(H,p),xN(H,-n,i,0),SN(H,u),$N(H,c),T.useProgram(W),T.enableVertexAttribArray(V.aPosition),T.enableVertexAttribArray(V.aTexCoord),T.uniform1i(V.uTexture,3),T.uniform2f(V.uTextureSize,t.width,t.height),T.activeTexture(T.TEXTURE0+3),T.bindTexture(T.TEXTURE_2D,e);const q=I?1:0,G=_.get(q);T.uniform1i(V.uTextureBlend,q),T.activeTexture(T.TEXTURE0+q),T.bindTexture(T.TEXTURE_2D,G);const K=C?2:0,Y=_.get(K);T.uniform1i(V.uTextureOverlay,K),T.activeTexture(T.TEXTURE0+K),T.bindTexture(T.TEXTURE_2D,Y),T.bindBuffer(T.ARRAY_BUFFER,L),T.vertexAttribPointer(V.aPosition,3,T.FLOAT,!1,0,0);const X=DN&&(e=>Z.get(e).isRotatedVideo)(e);let Q;T.bindBuffer(T.ARRAY_BUFFER,X?D:N),T.vertexAttribPointer(V.aTexCoord,2,T.FLOAT,!1,0,0),T.uniformMatrix4fv(V.uMatrix,!1,H),T.uniform4fv(V.uOverlayColor,S),!m||sL(m,FN)?(m=FN,Q=-1):(Q=m.reduce(((e,t)=>e+t),0),Q=Q<=0?1:Q),T.uniform1fv(V.uClarityKernel,m),T.uniform1f(V.uClarityKernelWeight,Q),T.uniform1f(V.uColorGamma,1/b),T.uniform1f(V.uColorVignette,x),T.uniform1i(V.uAntialias,P?1:0),T.uniform4f(V.uColorOffset,h[4],h[9],h[14],h[19]),T.uniformMatrix4fv(V.uColorMatrix,!1,[h[0],h[1],h[2],h[3],h[5],h[6],h[7],h[8],h[10],h[11],h[12],h[13],h[15],h[16],h[17],h[18]]),T.uniform1f(V.uOpacity,f),T.uniform1f(V.uMaskOpacity,g),T.uniform1fv(V.uMaskBounds,y),T.uniform1fv(V.uMaskCornerRadius,$.map((e=>e*s))),T.uniform1fv(V.uMaskFeather,w.map(((e,t)=>t%2==0?e:e*s))),T.drawArrays(T.TRIANGLE_STRIP,0,4),T.disableVertexAttribArray(V.aPosition),T.disableVertexAttribArray(V.aTexCoord)},textureFilterNearest:T.NEAREST,textureFilterLinear:T.LINEAR,textureClamp:T.CLAMP_TO_EDGE,textureRepeat:T.REPEAT,textureCreate:()=>T.createTexture(),textureUpdate:(e,t,n)=>(Z.set(e,{src:t,options:n,isRotatedVideo:"VIDEO"===t.nodeName&&(t.dataset&&90==t.dataset.rotation||270==t.dataset.rotation)}),((e,t,n,r)=>{const{premultiply:i=!0}=r;return e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i),e.bindTexture(e.TEXTURE_2D,t),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n),((e,t,n)=>{e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,gN(t)?e.LINEAR_MIPMAP_LINEAR:e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,n.filterParam),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,n.wrapParam),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,n.wrapParam),gN(t)&&e.generateMipmap(e.TEXTURE_2D)})(e,n,r),e.bindTexture(e.TEXTURE_2D,null),t})(T,e,t,n)),textureGetSize:e=>{const{src:t,options:n}=Z.get(e),r=NT(t);return n.scalar?qT(r,(e=>e/n.scalar)):r},textureDelete:J,enablePreviewStencil:()=>{T.stencilOp(T.KEEP,T.KEEP,T.REPLACE),T.stencilFunc(T.ALWAYS,1,255),T.stencilMask(255)},applyPreviewStencil:()=>{T.stencilFunc(T.EQUAL,1,255),T.stencilMask(0)},disablePreviewStencil:C,setCanvasColor(e){x=e[0],w=e[1],$=e[2],S=n?e[3]:1,T.clear(T.COLOR_BUFFER_BIT)},resetCanvasMatrix:()=>{bN(c,0,r.width,r.height,0,-1,1)},updateCanvasMatrix(e,t,n,i,o){const a=e.width,l=e.height,u=r.width*(.5/s),d=r.height*(.5/s),p={x:u+(n.x+t.x),y:d+(n.y+t.y)},h={x:p.x-t.x,y:p.y-t.y},f=.5*a,m=.5*l;yT(h,o.z,p),((e,t,n)=>{e.x=uT(e.x,t,n.x),e.y=uT(e.y,t,n.y)})(h,i,p),xN(c,(h.x-f)*s,(h.y-m)*s,0),xN(c,f*s,m*s,0),_N(c,o.z);const g=o.x>Math.PI/2;$N(c,g?Math.PI:0);const y=o.y>Math.PI/2;SN(c,y?Math.PI:0),wN(c,i),xN(c,-f*s,-m*s,0)},drawToCanvas(){T.bindFramebuffer(T.FRAMEBUFFER,null),d=c,T.viewport(0,0,T.drawingBufferWidth,T.drawingBufferHeight),T.colorMask(!0,!0,!0,!0),T.clearColor(x,w,$,S),T.clear(T.COLOR_BUFFER_BIT),b=[1,0,1,0,1,r.width,1,r.width]},drawToImageBlendBuffer(e,t){Q(1,A,e,t)},drawToImageOverlayBuffer(e,t){Q(2,R,e,t)},enableMask(e,t){const n=e.x*s,i=e.y*s,o=e.width*s,a=e.height*s;m=n,h=m+o,p=r.height-i,f=r.height-(i+a),g=1-t,y=[p,h,f,m]},disableMask(){m=0,h=r.width,p=r.height,f=0,g=1,y=[p,h,f,m]},resize:(t,n,o)=>{s=Math.max(1,o),l=1===s?.75:1,i.width=t,i.height=n,r.width=t*s,r.height=n*s,a=GE(r.width,r.height),e.width=r.width,e.height=r.height,bN(c,0,r.width,r.height,0,-1,1),v=[1,0,1,0,1,i.width,1,i.width]},release(){Array.from(Z.keys()).forEach((e=>J(e,{forceRelease:!0}))),Z.clear(),_.forEach((e=>{T.deleteTexture(e)})),_.clear(),O.destroy(),F.destroy(),B.destroy(),W.destroy(),G.destroy(),e.width=1,e.height=1,e=void 0}}},VN=(e,t)=>{const{imageData:n,amount:r=1}=e,i=Math.round(2*Math.max(1,r)),o=Math.round(.5*i),a=n.width,s=n.height,l=n.colorSpace,c=new Uint8ClampedArray(a*s*4),u=n.data;let d,p,h,f,m,g=0,y=0,v=0;const b=a*s*4-4;for(h=0;h<s;h++)for(d=crypto.getRandomValues(new Uint8ClampedArray(s)),p=0;p<a;p++)f=d[h]/255,y=0,v=0,f<.5&&(y=4*(-o+Math.round(Math.random()*i))),f>.5&&(v=(-o+Math.round(Math.random()*i))*(4*a)),m=Math.min(Math.max(0,g+y+v),b),c[g]=u[m],c[g+1]=u[m+1],c[g+2]=u[m+2],c[g+3]=u[m+3],g+=4;t(null,{data:c,width:n.width,height:n.height,colorSpace:l})};const HN=[.0625,.125,.0625,.125,.25,.125,.0625,.125,.0625];function qN(e){return Math.sqrt(1- --e*e)}function GN(e){return"[object Date]"===Object.prototype.toString.call(e)}function KN(e,t){if(e===t||e!=e)return()=>e;const n=typeof e;if(n!==typeof t||Array.isArray(e)!==Array.isArray(t))throw new Error("Cannot interpolate values of different type");if(Array.isArray(e)){const n=t.map(((t,n)=>KN(e[n],t)));return e=>n.map((t=>t(e)))}if("object"===n){if(!e||!t)throw new Error("Object cannot be null");if(GN(e)&&GN(t)){e=e.getTime();const n=(t=t.getTime())-e;return t=>new Date(e+t*n)}const n=Object.keys(t),r={};return n.forEach((n=>{r[n]=KN(e[n],t[n])})),e=>{const t={};return n.forEach((n=>{t[n]=r[n](e)})),t}}if("number"===n){const n=t-e;return t=>e+t*n}throw new Error(`Cannot interpolate ${n} values`)}function YN(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=DO(e);let r,i=e;function o(o,a){if(null==e)return n.set(e=o),Promise.resolve();i=o;let s=r,l=!1,{delay:c=0,duration:u=400,easing:d=HM,interpolate:p=KN}=qM(qM({},t),a);if(0===u)return s&&(s.abort(),s=null),n.set(e=i),Promise.resolve();const h=hA()+c;let f;return r=yA((t=>{if(t<h)return!0;l||(f=p(e,o),"function"==typeof u&&(u=u(e,o)),l=!0),s&&(s.abort(),s=null);const r=t-h;return r>u?(n.set(e=o),!1):(n.set(e=f(d(r/u))),!0)})),r.promise}return{set:o,update:(t,n)=>o(t(i,e),n),subscribe:n.subscribe}}function ZN(e,t,n,r){if("number"==typeof n){const i=r-n,o=(n-t)/(e.dt||1/60),a=(o+(e.opts.stiffness*i-e.opts.damping*o)*e.inv_mass)*e.dt;return Math.abs(a)<e.opts.precision&&Math.abs(i)<e.opts.precision?r:(e.settled=!1,n+a)}if(OP(n))return n.map(((i,o)=>ZN(e,t[o],n[o],r[o])));if("object"==typeof n){const i={};for(const o in n)i[o]=ZN(e,t[o],n[o],r[o]);return i}throw new Error(`Cannot spring ${typeof n} values`)}function XN(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=DO(e),{stiffness:r=.15,damping:i=.8,precision:o=.01}=t;let a,s,l,c=e,u=e,d=1,p=0,h=!1;function f(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};u=t;const i=l={};if(null==e||r.hard||m.stiffness>=1&&m.damping>=1)return h=!0,a=null,c=t,n.set(e=u),Promise.resolve();if(r.soft){const e=!0===r.soft?.5:+r.soft;p=1/(60*e),d=0}if(!s){a=null,h=!1;const t={inv_mass:void 0,opts:m,settled:!0,dt:void 0};s=yA((r=>{if(null===a&&(a=r),h)return h=!1,s=null,!1;d=Math.min(d+p,1),t.inv_mass=d,t.opts=m,t.settled=!0,t.dt=60*(r-a)/1e3;const i=ZN(t,c,e,u);return a=r,c=e,n.set(e=i),t.settled&&(s=null),!t.settled}))}return new Promise((e=>{s.promise.then((()=>{i===l&&e()}))}))}const m={set:f,update:(t,n)=>f(t(u,e),n),subscribe:n.subscribe,stiffness:r,damping:i,precision:o};return m}var QN=NO(!1,(e=>{const t=window.matchMedia("(prefers-reduced-motion:reduce)"),n=()=>e(t.matches);return n(),t.addListener(n),()=>t.removeListener(n)})),JN=()=>"ResizeObserver"in window;const eD=JT(),tD=(e,t,n,r,i)=>{e.rect||(e.rect=JT());const o=e.rect;mI(eD,t,n,r,i),hI(o,eD)||(gI(o,eD),e.dispatchEvent(new CustomEvent("measure",{detail:o})))},nD=Math.round,rD=e=>{const t=e.getBoundingClientRect();lD&&tD(e,nD(t.x),nD(t.y),nD(t.width),nD(t.height))},iD=e=>{lD&&tD(e,e.offsetLeft,e.offsetTop,e.offsetWidth,e.offsetHeight)},oD=[];let aD,sD,lD;function cD(){oD.length?(oD.forEach((e=>e.measure(e))),lD=requestAnimationFrame(cD)):lD=void 0}let uD=new Map([]),dD=0,pD=0;var hD=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{observePosition:n=!1,observeViewRect:r=!1,once:i=!1,disabled:o=!1,isMeasureRoot:a=!1}=t;if(JN()&&a&&(sD||(sD=new ResizeObserver((e=>{e.forEach((e=>{uD.set(e.target,e.contentRect)}));const t=Array.from(uD.values()).some((e=>{let{width:t,height:n}=e;return t>0&&n>0}));t?t&&!1===lD&&cD():(lD&&cancelAnimationFrame(lD),lD=!1)}))),sD.observe(e),dD++),!o)return!JN()||n||r?(e.measure=r?rD:iD,oD.push(e),void 0===lD&&(lD=requestAnimationFrame(cD)),e.measure(e),{destroy(){a&&sD&&(uD.delete(e),sD.unobserve(e),dD--,0===dD&&(sD.disconnect(),sD=void 0));const t=oD.indexOf(e);oD.splice(t,1),delete e.measure}}):(aD||(aD=new ResizeObserver((e=>{e.forEach((e=>{lD&&iD(e.target)}))}))),aD.observe(e),iD(e),i?aD.unobserve(e):pD++,{destroy(){a&&sD&&(uD.delete(e),sD.unobserve(e),dD--,0===dD&&(sD.disconnect(),sD=void 0)),i||(aD.unobserve(e),pD--,0===pD&&(aD.disconnect(),aD=void 0))}})},fD=e=>{let t;const n={pointerdown:()=>{t=!1},keydown:()=>{t=!0},keyup:()=>{t=!1},focus:e=>{!1!==t&&(e.target.dataset.focusVisible="")},blur:e=>{delete e.target.dataset.focusVisible}};return Object.keys(n).forEach((t=>e.addEventListener(t,n[t],!0))),{destroy(){Object.keys(n).forEach((t=>e.removeEventListener(t,n[t],!0)))}}};const mD=e=>/^http/.test(e),gD=e=>new Promise(((t,n)=>"file"===e.kind?t(e.getAsFile()):"string"===e.kind?e.getAsString(t):void n()));var yD=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=e=>{e.preventDefault()},r=async n=>{n.preventDefault(),n.stopPropagation();try{const r=await(e=>new Promise(((t,n)=>{const{items:r}=e.dataTransfer;if(!r)return t([]);const i=Array.from(r).some((e=>"text/uri-list"===e.type)),o=Array.from(r).filter((e=>("file"===e.kind||"string"===e.kind)&&"text/x-moz-url"!==e.type)).map(gD);Promise.all(o).then((e=>{if(i)return t([e.find(mD)].filter(Boolean));const n=e.filter((e=>zP(e)&&eP(e)||mD(e)));t(n)})).catch(n)})))(n);e.dispatchEvent(new CustomEvent("dropfiles",{detail:{event:n,resources:r},...t}))}catch(e){}};return e.addEventListener("drop",r),e.addEventListener("dragover",n),{destroy(){e.removeEventListener("drop",r),e.removeEventListener("dragover",n)}}};let vD=null;var bD=()=>{if(null===vD)if(cE()){const e=mE("canvas");vD=!CN(e,{failIfMajorPerformanceCaveat:!0}),yE(e)}else vD=!1;return vD},xD=e=>e instanceof WebGLTexture,wD=e=>{let[t,n,r,i]=e;return[i.x,i.y,t.x,t.y,r.x,r.y,n.x,n.y]};function $D(e){let t,n,r,i;return{c(){t=SA("div"),n=SA("canvas"),RA(t,"class","PinturaCanvas")},m(o,a){wA(o,t,a),vA(t,n),e[37](n),r||(i=[TA(n,"measure",e[38]),dA(hD.call(null,n))],r=!0)},p:VM,i:VM,o:VM,d(n){n&&$A(t),e[37](null),r=!1,YM(i)}}}function SD(e,t,n){let r,i,o,a,s,l,c;const u=[0,0,0,0],d=pT(),p=cE()&&(()=>{const e=64,t=mE("canvas",{"data-retain":!0,width:128,height:128}),n=t.getContext("2d");return n.fillStyle="#f0f",n.fillRect(0,0,e,e),n.fillRect(e,e,e,e),t})(),h=YA();let f,{isAnimated:m}=t,{isTransparent:g}=t,{maskRect:y}=t,{maskOpacity:v=1}=t,{maskFrameOpacity:b=.95}=t,{maskMarkupOpacity:x=1}=t,{clipAnnotationsToImage:w=!0}=t,{pixelRatio:$=1}=t,{textPixelRatio:S=$}=t,{backgroundColor:_}=t,{willRender:C=KE}=t,{didRender:k=KE}=t,{willRequest:E}=t,{csp:T}=t,{loadImageData:I=KE}=t,{enableGrid:P=!1}=t,{gridColors:R}=t,{gridSize:M}=t,{gridOpacity:A=0}=t,{images:O=[]}=t,{interfaceImages:L=[]}=t,{selectionColor:N}=t,D=null,F=null,j=null;const z=(e,t)=>e.set(t,{hard:!m}),B={precision:1e-4*.01};let U=0;const W=YN(void 0,{duration:0});nA(e,W,(e=>n(36,c=e)));const V=XN(1,B);nA(e,V,(e=>n(35,s=e)));const H=XN(1,B);nA(e,H,(e=>n(51,o=e)));const q=DO();nA(e,q,(e=>n(53,l=e)));const G=DO();nA(e,G,(e=>n(52,a=e)));const K={};let Y;const Z=()=>{cancelAnimationFrame(Y),Y=requestAnimationFrame((()=>{fe=!0,_e=0,i()}))},X=new Map([]),Q=new Map([]),J=(e,t)=>({filterParam:"pixelated"===e?D.textureFilterNearest:D.textureFilterLinear,wrapParam:"repeat"===t?D.textureRepeat:D.textureClamp}),ee=(e,t,n)=>{if(!X.has(e)){X.set(e,e);const i=J(t,n);if(!hE(r=e)&&(uP(r)||vE(r)||$M(r)||nP(r))){const t=D.textureCreate();D.textureUpdate(t,e,i),X.set(e,t)}else I(e).then((t=>{if(!D||!t)return;const n=D.textureCreate();D.textureUpdate(n,t,i),X.set(e,n),Z()})).catch((t=>{X.set(e,t)}))}var r,i;if(nP(e)&&((i=e).currentTime>0&&!i.paused&&!i.ended&&i.readyState>2||"true"===e.dataset.redraw)){const r=X.get(e),i=J(t,n);return D.textureUpdate(r,e,i),e.dataset.redraw=!1,r}return X.get(e)},te=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=t.id||e.id;if(e.width&&e.width<1||e.height&&e.height<1||!e.text.length)return void Q.delete(n);let{text:r,textAlign:i,fontFamily:o,fontSize:a=16,fontWeight:s,fontVariant:l,fontStyle:c,letterSpacing:u,lineHeight:d=a,width:p,height:h}=e,{outline:f=0,blur:m=0,paddingTop:g=0,paddingRight:y=0,paddingBottom:v=0,paddingLeft:b=0}=t;p=RP(p)?Math.floor(p):p,h=RP(h)?Math.floor(h):h;const{textSize:x,signature:w}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,{width:n=0,height:r="auto",fontSize:i,fontFamily:o,lineHeight:a,fontWeight:s,fontStyle:l,fontVariant:c,letterSpacing:u}=t;const d=WP({text:e,fontFamily:o,fontWeight:s,fontStyle:l,fontVariant:c,fontSize:i,lineHeight:a,letterSpacing:u,width:n,height:r});let p=XP.get(d);if(p)return p;let h=1;i>1e3&&NE()&&(h=i/1e3,i=1e3,a*=h);const f=YI(mE("pre",{contenteditable:"true",spellcheck:"false",style:`${JP}${YP({fontFamily:o,fontWeight:s,fontStyle:l,fontVariant:c,fontSize:i,letterSpacing:u,lineHeight:a})};${ZP(e,t)}"`,innerHTML:e})),m=f.getBoundingClientRect();return p={signature:QP(f).flat().map((e=>e.text)).join("_;_"),textSize:qT(NT(m),(e=>Math.ceil(e*h)))},XP.set(d,p),f.remove(),p}(r,{...e,width:p,height:void 0}),$=WP({text:r,textAlign:i,fontFamily:o,fontSize:a,fontWeight:s,fontVariant:l,fontStyle:c,lineHeight:d,letterSpacing:u,outline:f,blur:m,signature:w});if(!X.has($)){X.set($,r);const e=Math.ceil(x.width),t=Math.ceil(x.height);if(0===e||0===t)return;const w=AN(),_=Math.min(1,(w-(b+y)*S)/(e*S),(w-(g+v)*S)/(t*S));dR(r,{fontSize:a,fontFamily:o,fontWeight:s,fontVariant:l,fontStyle:c,letterSpacing:u,textAlign:i,lineHeight:d,width:p,height:h,imageWidth:e,imageHeight:t,paddingLeft:b,paddingTop:g,paddingRight:y,paddingBottom:v,pixelRatio:S*_,willRequest:E,outline:f,blur:m,styleNonce:T.styleNonce,color:[1,0,1]}).then((e=>{if(!D)return;const t=D.textureCreate();D.textureUpdate(t,e,{filterParam:D.textureFilterLinear,wrapParam:D.textureClamp,scalar:_,premultiply:!NE()}),X.set($,t),Q.set(n,t),Z()})).catch(console.error)}const _=X.get($);return xD(_)?_:Q.get(n)},ne=new Map,re=e=>{let{texture:t,size:n,origin:r,translation:i,rotation:o,scale:a,colorMatrix:s,opacity:l,convolutionMatrix:c,gamma:u,vignette:d,maskFeather:p,maskCornerRadius:h,overlayColor:f,enableOverlay:m,enableManipulation:g,enableAntialiasing:y}=e,v=0,b=0;if(1===$){const e=Math.abs(1-a)<Number.EPSILON;v=e&&F%2!=0?.5:0,b=e&&j%2!=0?.5:0}return D.drawImage(t,n,r.x,r.y,i.x+v,i.y+b,o.x,o.y,o.z,a,s,nL(l,0,1),c,u,d,p,h,f,m,g,y),t},ie=(e,t,n)=>{const r=sI(t),i=sI(e),o=r.x-i.x,a=r.y-i.y,s=yT(r,n,i);return{x:s.x-i.x-o,y:s.y-i.y-a}},oe=(e,t,n)=>{let r,i;const o=GE(n.width,n.height);if("repeat"===e.backgroundRepeat&&(r={...n},i={x:0,y:0}),"contain"===e.backgroundSize){const n=wI(t,o,t);r=DT(n),i=e.backgroundPosition?e.backgroundPosition:hT(.5*(t.width-r.width),.5*(t.height-r.height))}else if("cover"===e.backgroundSize){const n=xI(t,o,t);r=DT(n),e.backgroundPosition?i=e.backgroundPosition:(i=hT(n.x,n.y),i=hT(.5*(t.width-r.width),.5*(t.height-r.height)))}else e.backgroundSize?(r=e.backgroundSize,i=e.backgroundPosition||{x:0,y:0}):e.backgroundPosition&&(r={...n},i=e.backgroundPosition);return{backgroundSize:r,backgroundPosition:i}},ae=function(){let e=arguments.length>1?arguments[1]:void 0;(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach((t=>{let n=(e=>{let t;return e.backgroundImage?t=ee(e.backgroundImage,e.backgroundImageRendering,"repeat"===e.backgroundRepeat?"repeat":void 0):e.bitmap&&e.points&&(t=(e=>{const{id:t,points:n,strokeWidth:r,strokeCap:i,strokeJoin:o,strokeColor:a,strokeDash:s}=e;let l=X.get(t),c=ne.get(t);const u=WP({points:n.map((e=>`${e.x},${e.y}`)).join(","),strokeWidth:r,strokeCap:i,strokeJoin:o,strokeColor:a,strokeDash:(s||[]).join(",")});if(c){const{hash:e}=c;if(X.has(t)){if(u===e)return X.get(t)}else c=void 0}if(!c){const n=mE("canvas",{width:1,height:1});c={canvas:n,hash:void 0},ne.set(e.id,c),l=D.textureCreate(),D.textureUpdate(l,n,{filterParam:D.textureFilterLinear,wrapParam:D.textureClamp}),X.set(t,l)}const{canvas:d}=c,p=Math.ceil(e.strokeWidth),h=rI(n),f=Math.floor(h.x)-.5*p,m=Math.floor(h.y)-.5*p,g=Math.ceil(h.width+p),y=Math.ceil(h.height+p);d.width=Math.max(g,1),d.height=Math.max(y,1);const v=d.getContext("2d");return v.clearRect(0,0,d.width,d.height),g>=1&&y>=1&&(v.translate(-f,-m),NM(v,e),v.resetTransform()),D.textureUpdate(l,d,{filterParam:D.textureFilterLinear,wrapParam:D.textureClamp}),ne.set(t,{canvas:d,hash:u}),X.get(t)})(e)),t})(t);const r="complete"!==t.status&&("loading"===t.status||t.backgroundImage&&n===t.backgroundImage);r&&Z();const i="error"===t.status||t.backgroundImage&&n instanceof Error;let o=xD(n)?n:void 0;const a=t._scale||1,s=t._translate||d,l=t.strokeWidth&&t.strokeWidth*a,c=t.cornerRadius?((e,t)=>[e,e,e,e].map((e=>e*t)))(t.cornerRadius,a):u,p=!!t.width,h=hE(t.text),f=OP(t.points),m=SR(t);if(f){const r=t.points.map((e=>hT(e.x*a+s.x,e.y*a+s.y)));if(t.bitmap){n&&e.push(n);const i=rI(r),s=Math.ceil(t.strokeWidth*a);D.drawRect({x:Math.floor(i.x)-.5*s,y:Math.floor(i.y)-.5*s,width:Math.ceil(i.width+s),height:Math.ceil(i.height+s)},t.rotation,t.flipX,t.flipY,[0,0,0,0],void 0,o,void 0,void 0,void 0,void 0,void 0,void 0,t.opacity,void 0,void 0,!1,!1)}else D.drawPath(r,t.rotation,t.flipX,t.flipY,l,t.strokeColor,t.pathClose,t.backgroundColor,t.opacity)}else if(m){let c=t.x,u=t.y;c*=a,u*=a,c+=s.x,u+=s.y;const d=iI({x:c,y:u,rx:t.rx*a,ry:t.ry*a}),p=hT(c,u),h=o&&D.textureGetSize(o);let f,m;if(h&&t.backgroundImage&&(t.backgroundSize||t.backgroundPosition||t.backgroundRepeat)){const e=oe(t,d,h);f=e.backgroundSize,m=e.backgroundPosition}if(D.drawEllipse(p,t.rx*a,t.ry*a,t.rotation,t.flipX,t.flipY,t.backgroundColor,o,f,m,t.backgroundCorners&&wD(t.backgroundCorners),l,t.strokeColor,t.opacity,t.inverted),n&&e.push(n),r||i){if(!(t.backgroundColor||t.strokeColor&&t.strokeWidth)){const e=t.opacity||1;D.drawEllipse(p,t.rx*a,t.ry*a,t.rotation,t.flipX,t.flipY,i?[1,.2549,.2118,.25*e]:[0,0,0,.25*e])}i&&pe(p),r&&de(p)}}else if(h){const{fontSize:n=16}=t,r=n>1e3&&NE()?n/1e3:1,i=Math.max(16,Math.ceil(n/r*.25)),o=Math.abs(t.rotation)>0,d=RP(t.width)?Math.floor(t.width):t.width,p=RP(t.height)?Math.floor(t.height):t.height,h=nR(t.text,{...t,width:d,height:p}),f=Math.ceil(h.width),m=Math.ceil(h.height),g={x:t.x*a+s.x,y:t.y*a+s.y,width:f*a,height:m*a},y=!!t.height;(t.backgroundColor||t.strokeColor)&&D.drawRect(g,t.rotation,t.flipX,t.flipY,c,t.backgroundColor,void 0,void 0,void 0,!1,void 0,l,t.strokeColor,t.opacity,void 0,void 0,void 0,t.inverted);const{textShadowX:v,textShadowY:b,textShadowBlur:x}=t;if(v||b||x){const n=Math.ceil(.5*x),l=Math.max(i,y?0:n),c=te(t,{id:t.id+"shadow",blur:x,paddingTop:l,paddingRight:l,paddingBottom:l,paddingLeft:l});if(c&&!t._prerender){e.push(c);const n=D.textureGetSize(c),l={x:0,y:0},u={width:n.width/S*a,height:n.height/S*a},d=i*a/r;let p;if(y)p={...g},l.x=v-d,l.y=b-d;else if(p={x:t.x*a+s.x-d,y:t.y*a+s.y-d,width:u.width,height:u.height},o){const e=ie(g,p,t.rotation);p.x+=e.x,p.y+=e.y;const n=yT(hT(v,b),t.rotation);p.x+=n.x,p.y+=n.y}else p.x+=v,p.y+=b;D.drawRect(p,t.rotation,t.flipX,t.flipY,[0,0,0,0],void 0,c,u,l,!1,void 0,void 0,void 0,t.opacity,void 0,0,t.textShadowColor)}}if(t.textOutlineWidth){const n=Math.ceil(.5*t.textOutlineWidth),l=i+n,c=te(t,{id:t.id+"outline",outline:t.textOutlineWidth,paddingTop:l,paddingRight:l,paddingBottom:l,paddingLeft:l});if(c&&!t._prerender){e.push(c);const l=D.textureGetSize(c),u={x:0,y:0},d={width:l.width/S*a,height:l.height/S*a},p=(i+n)*a/r,h={x:t.x*a+s.x-p,y:t.y*a+s.y-p,width:d.width,height:t.height?m+p:d.height};if(o){const e=ie(g,h,t.rotation);h.x+=e.x,h.y+=e.y}D.drawRect(h,t.rotation,t.flipX,t.flipY,[0,0,0,0],void 0,c,d,u,!1,void 0,void 0,void 0,t.opacity,void 0,0,t.textOutlineColor)}}const w=te(t,{id:t.id+"text",paddingTop:i,paddingRight:i,paddingBottom:i,paddingLeft:i});if(w&&!t._prerender){e.push(w);const n=D.textureGetSize(w),l={x:0,y:0},c={width:n.width/S*a,height:n.height/S*a},d=i*a/r,p={x:t.x*a+s.x-d,y:t.y*a+s.y-d,width:c.width,height:t.height?m+d:c.height};if(o){const e=ie(g,p,t.rotation);p.x+=e.x,p.y+=e.y}const h=t.color||[0,0,0];t._prerender&&(h[3]=0),D.drawRect(p,t.rotation,t.flipX,t.flipY,u,!1,w,c,l,!1,!1,void 0,void 0,t.opacity,void 0,t.feather,h,t.inverted)}}else if(p){n&&e.push(n);const u=nI(t);let d,p;a&&s&&(u.x*=a,u.y*=a,u.x+=s.x,u.y+=s.y,u.width*=a,u.height*=a);const{backgroundRepeat:h="no-repeat"}=t,f=o&&D.textureGetSize(o);if(f&&t.backgroundImage&&(t.backgroundSize||t.backgroundPosition||t.backgroundRepeat)){const e=oe(t,u,f);d=e.backgroundSize,p=e.backgroundPosition}if(D.drawRect(u,t.rotation,t.flipX,t.flipY,c,t.backgroundColor||[0,0,0,0],o,d,p,"repeat"===h,t.backgroundCorners&&wD(t.backgroundCorners),l,t.strokeColor,t.opacity,void 0,t.feather,t.fillColor,t.inverted),r||i){if(!(t.backgroundColor&&0!==t.backgroundColor[3]||t.strokeColor&&t.strokeWidth)){const e=t.opacity||1;D.drawRect(u,t.rotation,t.flipX,t.flipY,c,i?[1,.2549,.2118,.25*e]:[0,0,0,.25*e])}const e=sI(u);i&&pe(e),r&&de(e)}}else n&&e.push(n)}))};let se=0;const le=[{x:-5,y:-5},{x:5,y:5}],ce=[{x:5,y:-5},{x:-5,y:5}],ue=NI({x:0,y:0},10,10,0,!1,!1,16);ue.length=9;const de=e=>{se=Date.now()/50,D.drawEllipse(e,15,15,0,!1,!1,[0,0,0,.5]);const t=AT(ue.map((t=>({x:t.x+e.x,y:t.y+e.y}))),se,e.x,e.y);D.drawPath(t,0,!1,!1,2,[1,1,1])},pe=e=>{D.drawEllipse(e,13,13,0,!1,!1,[1,.2549,.2118,.75]);const t=le.map((t=>({x:t.x+e.x,y:t.y+e.y}))),n=ce.map((t=>({x:t.x+e.x,y:t.y+e.y})));D.drawPath(t,0,!1,!1,3,[1,1,1]),D.drawPath(n,0,!1,!1,3,[1,1,1])},he=(e,t,n,r,i,o)=>D.drawRect(t,0,!1,!1,u,u,e,r,n,!0,void 0,0,void 0,o,void 0,void 0,i);let fe=!1,me=!0,ge=!1;const ye=[],ve=[],be=[],xe=e=>!e.aboveFrame,we=e=>e.aboveFrame,$e=()=>{be.length=0;const e=O[0],{manipulationShapes:t,manipulationShapesDirty:n,annotationShapes:r,annotationShapesDirty:i,interfaceShapes:d,decorationShapes:h,frameShapes:f,selectionShapes:m}=C({opacity:e.opacity,rotation:e.rotation,scale:e.scale,images:O,size:zT(F,j),backgroundColor:[...c],selectionRect:l}),v=[...c],b=l,$=nL(s,0,1),_=a,E=Math.abs(e.rotation.x/Math.PI*2-1),T=Math.abs(e.rotation.y/Math.PI*2-1),I=E<.99||T<.99,z={...e.size},B=e.backgroundColor,U=e.backgroundImage,W=e.backgroundFilterMode,V=t.length>0,H=r.length>0,q=r.filter(we).length>0,G=h.filter(we).length>0,Y=B[3]>0,Z=!!w&&x>=1;if($<1&&Y){const e=v[0],t=v[1],n=v[2],r=1-$,i=B[0]*r,o=B[1]*r,a=B[2]*r,s=1-r;v[0]=i+e*s,v[1]=o+t*s,v[2]=a+n*s,v[3]=1}if(D.setCanvasColor(g?u:v),V&&(n||fe)?(D.disableMask(),D.drawToImageBlendBuffer(z),ye.length=0,ae(t,ye)):V||(ye.length=0),be.push(...ye),me&&(D.drawToImageOverlayBuffer(z,S),me=!1),I){if(H&&(i||fe)||!ge){D.disableMask(),D.drawToImageOverlayBuffer(z,S),ve.length=0;const e=q?r.filter(xe):r;ae(e,ve)}else H||(ve.length=0);ge=!0}else ge=!1;if(D.drawToCanvas(),D.enableMask(b,$),P&&M>=1&&2===R.length&&A&&((e,t,n,r,i)=>{const o=zT(t,t),a=ee(p,"pixelated","repeat"),s=hT(-e.x%t,-e.y%t),l=hT(s.x+.5*o.width,s.y);he(a,e,s,o,n,i),he(a,e,l,o,r,i)})(b,M,R[0],R[1],A),Y&&D.drawRect(b,0,!1,!1,u,B),U){D.enableMask(b,1);const e=Math.max(y.width/U.width,y.height/U.height),t=U.width*e,n=U.height*e,r={x:y.x+.5*y.width,y:y.y+.5*y.height,width:t,height:n},[i]=O,o=re({...i,vignette:"image"===W?i.vignette:void 0,gamma:"image"===W?i.gamma:void 0,convolutionMatrix:"image"===W?i.convolutionMatrix:void 0,colorMatrix:"image"===W?i.colorMatrix:void 0,size:{width:U.width,height:U.height},translation:{x:r.x-.5*F,y:r.y-.5*j},scale:e,origin:{x:0,y:0},rotation:{x:0,y:0,z:0},backgroundColor:[0,0,0,0],backgroundImage:null,enableAntialiasing:!1,texture:ee(U)});be.push(o),D.enableMask(b,$)}if(Z&&D.enablePreviewStencil(),be.push(...[...O].reverse().map((e=>re({...e,texture:ee(e.data),enableOverlay:I&&H,enableManipulation:V,enableAntialiasing:!0,mask:b,maskOpacity:$,overlayColor:_})))),D.enableMask(b,x),!I){Z&&D.applyPreviewStencil(),D.resetCanvasMatrix(),D.updateCanvasMatrix(z,e.origin,e.translation,e.scale,e.rotation),ve.length=0;const t=q?r.filter(xe):r;ae(t,ve),Z&&D.disablePreviewStencil()}if(be.push(...ve),D.resetCanvasMatrix(),D.enableMask(b,x),ae(G?h.filter(xe):h,be),f.length){D.enableMask(b,1);const e=f.filter((e=>!e.expandsCanvas)),t=f.filter((e=>e.expandsCanvas));e.length&&ae(e,be),t.length&&(D.enableMask({x:b.x+.5,y:b.y+.5,width:b.width-1,height:b.height-1},o),ae(t,be))}if(q&&(D.resetCanvasMatrix(),D.updateCanvasMatrix(z,e.origin,e.translation,e.scale,e.rotation),ae(r.filter(we),be),D.resetCanvasMatrix()),G&&(D.resetCanvasMatrix(),ae(h.filter(we),be),D.resetCanvasMatrix()),N&&m.length&&!I){D.resetCanvasMatrix(),D.updateCanvasMatrix(z,e.origin,e.translation,e.scale,e.rotation);const t=[...N];t[3]=.5;const n=[{id:"selection",color:t,actions:[...m]}].map((e=>((e,t)=>{let n=K[e.id];const r=Math.min(1,2048/t.width);let i=n?n.element:mE("canvas",{width:t.width*r,height:t.height*r,"data-retain":!0});if(!n||((e,t)=>{if(e.total!==t.length)return!0;const n=e.last,r=t[t.length-1];return n.drawMode!==r.drawMode||!(!$R(n)||$R(r)&&hI(n,r))||!(!SR(n)||SR(r)&&n.x===r.x&&n.y===r.y&&n.rx===r.rx&&n.ry===r.ry)||!(!CR(n)||CR(r)&&r.points.length===n.points.length)})(n,e.actions)){i=i.cloneNode(),((e,t,n)=>{const{selectionColor:r=[1,1,1],scalar:i=1}=n||{};let o=!1;for(const a of t){const t="subtract"===a.drawMode;if(t&&!o)continue;e.globalCompositeOperation=t?"destination-out":"source-over",e.save(),e.beginPath();const n=wM(a);xP(e,i,i),bP(e,a.rotation,n),DM(e,a.flipX,a.flipY,n),a.width?RM(e,{...a,backgroundColor:r}):a.points?NM(e,Object.assign({},a,a.pathClose?{backgroundColor:r,strokeColor:[0,0,0,0]}:{strokeColor:r,strokeJoin:"round",strokeCap:"round"})):a.rx&&MM(e,{...a,backgroundColor:r,strokeColor:[0,0,0,0],strokeJoin:"round",strokeCap:"round"}),e.restore(),o=!0}})(i.getContext("2d"),e.actions,{selectionColor:[1,0,1],scalar:r});const t=e.actions.length;K[e.id]={total:t,last:{...e.actions[t-1]},element:i}}return{x:0,y:0,...t,fillColor:e.color||[1,1,1],backgroundImage:i}})(e,z)));ae(n,be),D.resetCanvasMatrix()}D.disableMask(),ae(d,be),L.forEach((e=>{if(D.enableMask(e.mask,e.maskOpacity),U){const t=re({...e,vignette:"image"===W?e.vignette:void 0,gamma:"image"===W?e.gamma:void 0,convolutionMatrix:"image"===W?e.convolutionMatrix:void 0,colorMatrix:"image"===W?e.colorMatrix:void 0,texture:ee(U),enableAntialiasing:!1,translation:{x:e.translation.x+e.offset.x-.5*F,y:e.translation.y+e.offset.y-.5*j}});be.push(t)}else e.backgroundColor&&D.drawRect(e.mask,0,!1,!1,e.maskCornerRadius,e.backgroundColor,void 0,void 0,void 0,void 0,void 0,void 0,void 0,e.opacity,e.maskFeather);const t=re({...e,texture:ee(e.data),enableAntialiasing:!1,translation:{x:e.translation.x+e.offset.x-.5*F,y:e.translation.y+e.offset.y-.5*j}});be.push(t)})),D.disableMask(),(e=>{X.forEach(((t,n)=>{!e.find((e=>e===t))&&xD(t)&&(Array.from(Q.values()).includes(t)||(X.delete(n),D.textureDelete(t)))}))})(be),k(),fe=!1};let Se,_e=0;const Ce=()=>{clearTimeout(Se);const e=Date.now();e-_e<48?Se=setTimeout(Ce,48):(_e=e,$e())};return GA((()=>i())),qA((()=>n(31,D=WN(f,{alpha:g})))),KA((()=>{D&&(ne.forEach((e=>{let{canvas:t}=e;return yE(t)})),ne.clear(),D.release(),n(31,D=void 0),n(0,f=void 0))})),e.$$set=e=>{"isAnimated"in e&&n(9,m=e.isAnimated),"isTransparent"in e&&n(10,g=e.isTransparent),"maskRect"in e&&n(11,y=e.maskRect),"maskOpacity"in e&&n(12,v=e.maskOpacity),"maskFrameOpacity"in e&&n(13,b=e.maskFrameOpacity),"maskMarkupOpacity"in e&&n(14,x=e.maskMarkupOpacity),"clipAnnotationsToImage"in e&&n(15,w=e.clipAnnotationsToImage),"pixelRatio"in e&&n(16,$=e.pixelRatio),"textPixelRatio"in e&&n(17,S=e.textPixelRatio),"backgroundColor"in e&&n(18,_=e.backgroundColor),"willRender"in e&&n(19,C=e.willRender),"didRender"in e&&n(20,k=e.didRender),"willRequest"in e&&n(21,E=e.willRequest),"csp"in e&&n(22,T=e.csp),"loadImageData"in e&&n(23,I=e.loadImageData),"enableGrid"in e&&n(24,P=e.enableGrid),"gridColors"in e&&n(25,R=e.gridColors),"gridSize"in e&&n(26,M=e.gridSize),"gridOpacity"in e&&n(27,A=e.gridOpacity),"images"in e&&n(28,O=e.images),"interfaceImages"in e&&n(29,L=e.interfaceImages),"selectionColor"in e&&n(30,N=e.selectionColor)},e.$$.update=()=>{if(1&e.$$.dirty[0]&&f){const e=getComputedStyle(f).getPropertyValue("--color-transition-duration");n(32,U=(e=>{let t=parseFloat(e);return/^[0-9]+s$/.test(e)?1e3*t:t})(e))}262656&e.$$.dirty[0]|2&e.$$.dirty[1]&&_&&W.set(_,{duration:m?U:0}),4096&e.$$.dirty[0]&&z(V,RP(v)?v:1),8192&e.$$.dirty[0]&&z(H,RP(b)?b:1),2048&e.$$.dirty[0]&&y&&q.set(y),48&e.$$.dirty[1]&&c&&G.set([c[0],c[1],c[2],nL(s,0,1)]),268435462&e.$$.dirty[0]|1&e.$$.dirty[1]&&n(34,r=!!(D&&F&&j&&O.length)),65542&e.$$.dirty[0]|1&e.$$.dirty[1]&&F&&j&&D&&(_e=0,D.resize(F,j,$)),8&e.$$.dirty[1]&&n(33,i=r?bD()?Ce:$e:eE),12&e.$$.dirty[1]&&r&&i&&i()},[f,F,j,h,W,V,H,q,G,m,g,y,v,b,x,w,$,S,_,C,k,E,T,I,P,R,M,A,O,L,N,D,U,i,r,s,c,function(e){eO[e?"unshift":"push"]((()=>{f=e,n(0,f)}))},e=>{n(1,F=e.detail.width),n(2,j=e.detail.height),h("measure",{width:F,height:j})}]}class _D extends OO{constructor(e){super(),AO(this,e,SD,$D,XM,{isAnimated:9,isTransparent:10,maskRect:11,maskOpacity:12,maskFrameOpacity:13,maskMarkupOpacity:14,clipAnnotationsToImage:15,pixelRatio:16,textPixelRatio:17,backgroundColor:18,willRender:19,didRender:20,willRequest:21,csp:22,loadImageData:23,enableGrid:24,gridColors:25,gridSize:26,gridOpacity:27,images:28,interfaceImages:29,selectionColor:30},null,[-1,-1,-1])}}var CD=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Boolean,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:" ";return e.filter(t).join(n)};function kD(e,t,n){const r=e.slice();return r[17]=t[n],r}const ED=e=>({tab:4&e}),TD=e=>({tab:e[17]});function ID(e){let t,n,r,i=[],o=new Map,a=e[2];const s=e=>e[17].id;for(let l=0;l<a.length;l+=1){let t=kD(e,a,l),n=s(t);o.set(n,i[l]=PD(n,t))}return{c(){t=SA("div");for(let e=0;e<i.length;e+=1)i[e].c();RA(t,"class",n=CD(["PinturaTabList",e[0]])),RA(t,"role","tablist"),RA(t,"data-layout",e[1])},m(n,o){wA(n,t,o);for(let e=0;e<i.length;e+=1)i[e].m(t,null);e[14](t),r=!0},p(e,l){1124&l&&(a=e[2],yO(),i=kO(i,l,s,1,e,a,o,t,CO,PD,null,kD),vO()),(!r||1&l&&n!==(n=CD(["PinturaTabList",e[0]])))&&RA(t,"class",n),(!r||2&l)&&RA(t,"data-layout",e[1])},i(e){if(!r){for(let e=0;e<a.length;e+=1)bO(i[e]);r=!0}},o(e){for(let t=0;t<i.length;t+=1)xO(i[t]);r=!1},d(n){n&&$A(t);for(let e=0;e<i.length;e+=1)i[e].d();e[14](null)}}}function PD(e,t){let n,r,i,o,a,s,l,c,u;const d=t[11].default,p=rA(d,t,t[10],TD);function h(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t[12](t[17],...n)}function f(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t[13](t[17],...n)}return{key:e,first:null,c(){n=SA("button"),p&&p.c(),r=kA(),RA(n,"role","tab"),RA(n,"id",i=t[17].tabId),RA(n,"aria-controls",o=t[17].href.substring(1)),RA(n,"aria-selected",a=t[17].selected),n.disabled=s=t[17].disabled,RA(n,"type","button"),this.first=n},m(e,t){wA(e,n,t),p&&p.m(n,null),vA(n,r),l=!0,c||(u=[TA(n,"keydown",h),TA(n,"click",f)],c=!0)},p(e,r){t=e,p&&p.p&&(!l||1028&r)&&aA(p,d,t,t[10],l?oA(d,t[10],r,ED):sA(t[10]),TD),(!l||4&r&&i!==(i=t[17].tabId))&&RA(n,"id",i),(!l||4&r&&o!==(o=t[17].href.substring(1)))&&RA(n,"aria-controls",o),(!l||4&r&&a!==(a=t[17].selected))&&RA(n,"aria-selected",a),(!l||4&r&&s!==(s=t[17].disabled))&&(n.disabled=s)},i(e){l||(bO(p,e),l=!0)},o(e){xO(p,e),l=!1},d(e){e&&$A(n),p&&p.d(e),c=!1,YM(u)}}}function RD(e){let t,n,r=e[4]&&ID(e);return{c(){r&&r.c(),t=EA()},m(e,i){r&&r.m(e,i),wA(e,t,i),n=!0},p(e,n){let[i]=n;e[4]?r?(r.p(e,i),16&i&&bO(r,1)):(r=ID(e),r.c(),bO(r,1),r.m(t.parentNode,t)):r&&(yO(),xO(r,1,1,(()=>{r=null})),vO())},i(e){n||(bO(r),n=!0)},o(e){xO(r),n=!1},d(e){r&&r.d(e),e&&$A(t)}}}function MD(e,t,n){let r,i,o,{$$slots:a={},$$scope:s}=t,{class:l}=t,{name:c}=t,{selected:u}=t,{tabs:d=[]}=t,{layout:p}=t;const h=YA(),f=e=>{const t=o.querySelectorAll('[role="tab"] button')[e];t&&t.focus()},m=(e,t)=>{e.preventDefault(),e.stopPropagation(),XI()&&e.target.focus(),h("select",t)},g=(e,t)=>{let{key:n}=e;if(!/arrow/i.test(n))return;const r=d.findIndex((e=>e.id===t));return/right|down/i.test(n)?f(r<d.length-1?r+1:0):/left|up/i.test(n)?f(r>0?r-1:d.length-1):void 0};return e.$$set=e=>{"class"in e&&n(0,l=e.class),"name"in e&&n(7,c=e.name),"selected"in e&&n(8,u=e.selected),"tabs"in e&&n(9,d=e.tabs),"layout"in e&&n(1,p=e.layout),"$$scope"in e&&n(10,s=e.$$scope)},e.$$.update=()=>{896&e.$$.dirty&&n(2,r=d.map((e=>{const t=e.id===u;return{...e,tabId:`tab-${c}-${e.id}`,href:`#panel-${c}-${e.id}`,selected:t}}))),4&e.$$.dirty&&n(4,i=r.length>1)},[l,p,r,o,i,m,g,c,u,d,s,a,(e,t)=>g(t,e.id),(e,t)=>m(t,e.id),function(e){eO[e?"unshift":"push"]((()=>{o=e,n(3,o)}))}]}class AD extends OO{constructor(e){super(),AO(this,e,MD,RD,XM,{class:0,name:7,selected:8,tabs:9,layout:1})}}var OD=(e,t)=>{if(!t)return;const n=t=>{fE(e,t)};return n(t),{update:n}};const LD=e=>({panel:16&e}),ND=e=>({panel:e[4][0].id,panelIsActive:!0});function DD(e,t,n){const r=e.slice();return r[14]=t[n].id,r[15]=t[n].shouldDraw,r[16]=t[n].panelId,r[17]=t[n].labelledBy,r[18]=t[n].isActive,r[19]=t[n].hidden,r[3]=t[n].visible,r}const FD=e=>({panel:16&e,panelIsActive:16&e}),jD=e=>({panel:e[14],panelIsActive:e[18]});function zD(e){let t,n,r,i,o,a,s;const l=e[11].default,c=rA(l,e,e[10],ND);return{c(){t=SA("div"),n=SA("div"),c&&c.c(),RA(n,"class",r=CD([e[1]])),RA(t,"class",e[0])},m(r,l){wA(r,t,l),vA(t,n),c&&c.m(n,null),o=!0,a||(s=[dA(i=OD.call(null,t,e[2])),TA(t,"measure",e[13]),dA(hD.call(null,t))],a=!0)},p(e,a){c&&c.p&&(!o||1040&a)&&aA(c,l,e,e[10],o?oA(l,e[10],a,LD):sA(e[10]),ND),(!o||2&a&&r!==(r=CD([e[1]])))&&RA(n,"class",r),(!o||1&a)&&RA(t,"class",e[0]),i&&ZM(i.update)&&4&a&&i.update.call(null,e[2])},i(e){o||(bO(c,e),o=!0)},o(e){xO(c,e),o=!1},d(e){e&&$A(t),c&&c.d(e),a=!1,YM(s)}}}function BD(e){let t,n,r,i,o,a,s=[],l=new Map,c=e[4];const u=e=>e[14];for(let d=0;d<c.length;d+=1){let t=DD(e,c,d),n=u(t);l.set(n,s[d]=WD(n,t))}return{c(){t=SA("div");for(let e=0;e<s.length;e+=1)s[e].c();RA(t,"class",n=CD(["PinturaTabPanels",e[0]]))},m(n,l){wA(n,t,l);for(let e=0;e<s.length;e+=1)s[e].m(t,null);i=!0,o||(a=[dA(r=OD.call(null,t,e[2])),TA(t,"measure",e[12]),dA(hD.call(null,t,{observePosition:!0}))],o=!0)},p(e,o){1042&o&&(c=e[4],yO(),s=kO(s,o,u,1,e,c,l,t,CO,WD,null,DD),vO()),(!i||1&o&&n!==(n=CD(["PinturaTabPanels",e[0]])))&&RA(t,"class",n),r&&ZM(r.update)&&4&o&&r.update.call(null,e[2])},i(e){if(!i){for(let e=0;e<c.length;e+=1)bO(s[e]);i=!0}},o(e){for(let t=0;t<s.length;t+=1)xO(s[t]);i=!1},d(e){e&&$A(t);for(let t=0;t<s.length;t+=1)s[t].d();o=!1,YM(a)}}}function UD(e){let t;const n=e[11].default,r=rA(n,e,e[10],jD);return{c(){r&&r.c()},m(e,n){r&&r.m(e,n),t=!0},p(e,i){r&&r.p&&(!t||1040&i)&&aA(r,n,e,e[10],t?oA(n,e[10],i,FD):sA(e[10]),jD)},i(e){t||(bO(r,e),t=!0)},o(e){xO(r,e),t=!1},d(e){r&&r.d(e)}}}function WD(e,t){let n,r,i,o,a,s,l,c,u=t[15]&&UD(t);return{key:e,first:null,c(){n=SA("div"),u&&u.c(),r=kA(),RA(n,"class",i=CD(["PinturaTabPanel",t[1]])),n.hidden=o=t[19],RA(n,"id",a=t[16]),RA(n,"aria-labelledby",s=t[17]),RA(n,"data-inert",l=!t[3]),RA(n,"role","tabpanel"),this.first=n},m(e,t){wA(e,n,t),u&&u.m(n,null),vA(n,r),c=!0},p(e,d){(t=e)[15]?u?(u.p(t,d),16&d&&bO(u,1)):(u=UD(t),u.c(),bO(u,1),u.m(n,r)):u&&(yO(),xO(u,1,1,(()=>{u=null})),vO()),(!c||2&d&&i!==(i=CD(["PinturaTabPanel",t[1]])))&&RA(n,"class",i),(!c||16&d&&o!==(o=t[19]))&&(n.hidden=o),(!c||16&d&&a!==(a=t[16]))&&RA(n,"id",a),(!c||16&d&&s!==(s=t[17]))&&RA(n,"aria-labelledby",s),(!c||16&d&&l!==(l=!t[3]))&&RA(n,"data-inert",l)},i(e){c||(bO(u),c=!0)},o(e){xO(u),c=!1},d(e){e&&$A(n),u&&u.d()}}}function VD(e){let t,n,r,i;const o=[BD,zD],a=[];function s(e,t){return e[5]?0:1}return t=s(e),n=a[t]=o[t](e),{c(){n.c(),r=EA()},m(e,n){a[t].m(e,n),wA(e,r,n),i=!0},p(e,i){let[l]=i,c=t;t=s(e),t===c?a[t].p(e,l):(yO(),xO(a[c],1,1,(()=>{a[c]=null})),vO(),n=a[t],n?n.p(e,l):(n=a[t]=o[t](e),n.c()),bO(n,1),n.m(r.parentNode,r))},i(e){i||(bO(n),i=!0)},o(e){xO(n),i=!1},d(e){a[t].d(e),e&&$A(r)}}}function HD(e,t,n){let r,i,{$$slots:o={},$$scope:a}=t,{class:s}=t,{name:l}=t,{selected:c}=t,{panelClass:u}=t,{panels:d=[]}=t,{visible:p}=t,{style:h}=t;const f={};return e.$$set=e=>{"class"in e&&n(0,s=e.class),"name"in e&&n(6,l=e.name),"selected"in e&&n(7,c=e.selected),"panelClass"in e&&n(1,u=e.panelClass),"panels"in e&&n(8,d=e.panels),"visible"in e&&n(3,p=e.visible),"style"in e&&n(2,h=e.style),"$$scope"in e&&n(10,a=e.$$scope)},e.$$.update=()=>{968&e.$$.dirty&&n(4,r=d.map((e=>{const t=e===c;t&&n(9,f[e]=!0,f);const r=p?-1!==p.indexOf(e):t;return{id:e,panelId:`panel-${l}-${e}`,labelledBy:`tab-${l}-${e}`,isActive:t,hidden:!t,visible:r,shouldDraw:t||f[e]}}))),16&e.$$.dirty&&n(5,i=r.length>1)},[s,u,h,p,r,i,l,c,d,f,a,o,function(t){QA.call(this,e,t)},function(t){QA.call(this,e,t)}]}class qD extends OO{constructor(e){super(),AO(this,e,HD,VD,XM,{class:0,name:6,selected:7,panelClass:1,panels:8,visible:3,style:2})}}var GD=e=>{const t=Object.getOwnPropertyDescriptors(e.prototype);return Object.keys(t).filter((e=>!!t[e].get))};function KD(e){let t,n,r,i;const o=[e[5],{locale:e[1]}];function a(t){e[22](t)}var s=e[10];function l(e){let t={};for(let n=0;n<o.length;n+=1)t=qM(t,o[n]);return void 0!==e[3]&&(t.name=e[3]),{props:t}}return s&&(t=jA(s,l(e)),eO.push((()=>IO(t,"name",a))),e[23](t),t.$on("measure",e[11])),{c(){t&&PO(t.$$.fragment),r=EA()},m(e,n){t&&RO(t,e,n),wA(e,r,n),i=!0},p(e,i){const c=34&i[0]?EO(o,[32&i[0]&&TO(e[5]),2&i[0]&&{locale:e[1]}]):{};if(!n&&8&i[0]&&(n=!0,c.name=e[3],lO((()=>n=!1))),s!==(s=e[10])){if(t){yO();const e=t;xO(e.$$.fragment,1,0,(()=>{MO(e,1)})),vO()}s?(t=jA(s,l(e)),eO.push((()=>IO(t,"name",a))),e[23](t),t.$on("measure",e[11]),PO(t.$$.fragment),bO(t.$$.fragment,1),RO(t,r.parentNode,r)):t=null}else s&&t.$set(c)},i(e){i||(t&&bO(t.$$.fragment,e),i=!0)},o(e){t&&xO(t.$$.fragment,e),i=!1},d(n){e[23](null),n&&$A(r),t&&MO(t,n)}}}function YD(e){let t,n,r,i=e[6]&&KD(e);return{c(){t=SA("div"),i&&i.c(),RA(t,"data-util",e[3]),RA(t,"class",n=CD(["PinturaUtilPanel",e[2]])),NA(t,"opacity",e[7])},m(n,o){wA(n,t,o),i&&i.m(t,null),e[24](t),r=!0},p(e,o){e[6]?i?(i.p(e,o),64&o[0]&&bO(i,1)):(i=KD(e),i.c(),bO(i,1),i.m(t,null)):i&&(yO(),xO(i,1,1,(()=>{i=null})),vO()),(!r||8&o[0])&&RA(t,"data-util",e[3]),(!r||4&o[0]&&n!==(n=CD(["PinturaUtilPanel",e[2]])))&&RA(t,"class",n),128&o[0]&&NA(t,"opacity",e[7])},i(e){r||(bO(i),r=!0)},o(e){xO(i),r=!1},d(n){n&&$A(t),i&&i.d(),e[24](null)}}}function ZD(e,t,n){let r,i,o,a,s;const l=YA();let{isActive:c=!0}=t,{stores:u}=t,{view:d}=t,{props:p}=t,{component:h}=t,{locale:f}=t,{class:m}=t;const g=XA("isAnimated");let y;nA(e,g,(e=>n(21,s=e)));const v=XN(0),b=FO(v,(e=>nL(e,0,1)));nA(e,b,(e=>n(20,a=e)));let x=!c;const w=DO(c),$={isActive:FO(w,(async(e,t)=>{if(!e)return t(e);await aO(),t(e)}),!1),isActiveFraction:FO(b,(e=>e)),isVisible:FO(b,(e=>e>0))},S=d,_=GD(S),C=Object.keys(p||{}).reduce(((e,t)=>_.includes(t)?(e[t]=p[t],e):e),{}),k=Object.keys($).reduce(((e,t)=>_.includes(t)?(e[t]=$[t],e):e),{});let E,T;const I=e=>{n(17,y={...e.detail}),R&&c&&l("measure",{...y})};ZA("measurable",hD);const P=HA().$$.context;let R=!1;return qA((()=>{if(n(19,R=!0),o)return;n(0,h=new S({target:T,props:{...i,locale:f},context:P})),n(3,E=h.name);const e=h.$on("measure",I);return()=>{e(),h.$destroy()}})),e.$$set=e=>{"isActive"in e&&n(12,c=e.isActive),"stores"in e&&n(13,u=e.stores),"view"in e&&n(14,d=e.view),"props"in e&&n(15,p=e.props),"component"in e&&n(0,h=e.component),"locale"in e&&n(1,f=e.locale),"class"in e&&n(2,m=e.class)},e.$$.update=()=>{135169&e.$$.dirty[0]&&y&&c&&h&&l("measure",y),2101248&e.$$.dirty[0]&&v.set(c?1:0,{hard:!1===s}),1310720&e.$$.dirty[0]&&(a<=0&&!x?n(18,x=!0):a>0&&x&&n(18,x=!1)),786432&e.$$.dirty[0]&&R&&l(x?"hide":"show"),1048576&e.$$.dirty[0]&&l("fade",a),1048576&e.$$.dirty[0]&&n(7,r=a),4096&e.$$.dirty[0]&&w.set(c),8192&e.$$.dirty[0]&&n(5,i={...C,...k,stores:u})},n(6,o=!_.includes("external")),[h,f,m,E,T,i,o,r,g,b,S,I,c,u,d,p,v,y,x,R,a,s,function(e){E=e,n(3,E)},function(e){eO[e?"unshift":"push"]((()=>{h=e,n(0,h)}))},function(e){eO[e?"unshift":"push"]((()=>{T=e,n(4,T)}))}]}class XD extends OO{constructor(e){super(),AO(this,e,ZD,YD,XM,{isActive:12,stores:13,view:14,props:15,component:0,locale:1,class:2,opacity:16},null,[-1,-1])}get opacity(){return this.$$.ctx[16]}}function QD(e){let t,n,r,i,o,a;const s=e[5].default,l=rA(s,e,e[4],null);return{c(){t=_A("svg"),l&&l.c(),RA(t,"class",e[3]),RA(t,"width",e[0]),RA(t,"height",e[1]),RA(t,"viewBox",n="0 0 "+e[0]+"\n    "+e[1]),RA(t,"xmlns","http://www.w3.org/2000/svg"),RA(t,"aria-hidden","true"),RA(t,"focusable","false"),RA(t,"stroke-linecap","round"),RA(t,"stroke-linejoin","round")},m(n,s){wA(n,t,s),l&&l.m(t,null),i=!0,o||(a=dA(r=OD.call(null,t,e[2])),o=!0)},p(e,o){let[a]=o;l&&l.p&&(!i||16&a)&&aA(l,s,e,e[4],i?oA(s,e[4],a,null):sA(e[4]),null),(!i||8&a)&&RA(t,"class",e[3]),(!i||1&a)&&RA(t,"width",e[0]),(!i||2&a)&&RA(t,"height",e[1]),(!i||3&a&&n!==(n="0 0 "+e[0]+"\n    "+e[1]))&&RA(t,"viewBox",n),r&&ZM(r.update)&&4&a&&r.update.call(null,e[2])},i(e){i||(bO(l,e),i=!0)},o(e){xO(l,e),i=!1},d(e){e&&$A(t),l&&l.d(e),o=!1,a()}}}function JD(e,t,n){let{$$slots:r={},$$scope:i}=t,{width:o=24}=t,{height:a=24}=t,{style:s}=t,{class:l}=t;return e.$$set=e=>{"width"in e&&n(0,o=e.width),"height"in e&&n(1,a=e.height),"style"in e&&n(2,s=e.style),"class"in e&&n(3,l=e.class),"$$scope"in e&&n(4,i=e.$$scope)},[o,a,s,l,i,r]}class eF extends OO{constructor(e){super(),AO(this,e,JD,QD,XM,{width:0,height:1,style:2,class:3})}}var tF=(e,t)=>t===e.target||t.contains(e.target),nF=(e,t,n)=>{const r=hE(t)?t:e;return n?`${r} (${i=n,i.map((e=>"CMD"===e?hP()?"\u2318":"Ctrl":e)).join("+")})`:r;var i};const{document:rF}=SO;function iF(e){let t,n,r,i;return{c(){t=kA(),n=SA("button"),RA(n,"class","PinturaImageButton"),RA(n,"type","button"),RA(n,"title",e[1]),n.disabled=e[2]},m(o,a){wA(o,t,a),wA(o,n,a),n.innerHTML=e[0],e[11](n),r||(i=[TA(rF.body,"load",e[5],!0),TA(rF.body,"error",e[6],!0),TA(n,"pointerdown",e[4])],r=!0)},p(e,t){let[r]=t;1&r&&(n.innerHTML=e[0]),2&r&&RA(n,"title",e[1]),4&r&&(n.disabled=e[2])},i:VM,o:VM,d(o){o&&$A(t),o&&$A(n),e[11](null),r=!1,YM(i)}}}function oF(e,t,n){let r,{html:i}=t,{title:o}=t,{onclick:a}=t,{disabled:s=!1}=t,{ongrab:l=eE}=t,{ondrag:c=eE}=t,{ondrop:u=eE}=t;const d=e=>IT(p,hT(e.pageX,e.pageY))<256;let p;const h=e=>{document.documentElement.removeEventListener("pointermove",f),document.documentElement.removeEventListener("pointerup",h);const t=hT(e.pageX,e.pageY);if(IT(p,t)<32)return a(e);d(e)||u(e)},f=e=>{d(e)||c(e)},m=e=>r&&r.contains(e)&&"IMG"===e.nodeName;return e.$$set=e=>{"html"in e&&n(0,i=e.html),"title"in e&&n(1,o=e.title),"onclick"in e&&n(7,a=e.onclick),"disabled"in e&&n(2,s=e.disabled),"ongrab"in e&&n(8,l=e.ongrab),"ondrag"in e&&n(9,c=e.ondrag),"ondrop"in e&&n(10,u=e.ondrop)},e.$$.update=()=>{8&e.$$.dirty&&r&&r.querySelector("img")&&n(3,r.dataset.loader=!0,r)},[i,o,s,r,e=>{p=hT(e.pageX,e.pageY),l(e),document.documentElement.addEventListener("pointermove",f),document.documentElement.addEventListener("pointerup",h)},e=>{let{target:t}=e;m(t)&&n(3,r.dataset.load=!0,r)},e=>{let{target:t}=e;m(t)&&n(3,r.dataset.error=!0,r)},a,l,c,u,function(e){eO[e?"unshift":"push"]((()=>{r=e,n(3,r)}))}]}class aF extends OO{constructor(e){super(),AO(this,e,oF,iF,XM,{html:0,title:1,onclick:7,disabled:2,ongrab:8,ondrag:9,ondrop:10})}}function sF(e,t,n){const r=e.slice();return r[13]=t[n],r}function lF(e,t){let n,r,i,o,a,s,l;function c(){return t[9](t[13])}function u(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t[10](t[13],...n)}function d(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t[11](t[13],...n)}function p(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t[12](t[13],...n)}return r=new aF({props:{onclick:c,ongrab:u,ondrag:d,ondrop:p,disabled:t[1]||t[13].disabled,title:t[13].title,html:t[13].thumb}}),{key:e,first:null,c(){n=SA("li"),PO(r.$$.fragment),i=kA(),NA(n,"opacity",t[6]),this.first=n},m(e,c){wA(e,n,c),RO(r,n,null),vA(n,i),a=!0,s||(l=dA(o=t[8].call(null,n,t[13])),s=!0)},p(e,i){t=e;const a={};5&i&&(a.onclick=c),9&i&&(a.ongrab=u),17&i&&(a.ondrag=d),33&i&&(a.ondrop=p),3&i&&(a.disabled=t[1]||t[13].disabled),1&i&&(a.title=t[13].title),1&i&&(a.html=t[13].thumb),r.$set(a),o&&ZM(o.update)&&1&i&&o.update.call(null,t[13]),64&i&&NA(n,"opacity",t[6])},i(e){a||(bO(r.$$.fragment,e),a=!0)},o(e){xO(r.$$.fragment,e),a=!1},d(e){e&&$A(n),MO(r),s=!1,l()}}}function cF(e){let t,n,r=[],i=new Map,o=e[0];const a=e=>e[13].id;for(let s=0;s<o.length;s+=1){let t=sF(e,o,s),n=a(t);i.set(n,r[s]=lF(n,t))}return{c(){t=SA("ul");for(let e=0;e<r.length;e+=1)r[e].c();RA(t,"class","PinturaImageButtonList")},m(e,i){wA(e,t,i);for(let n=0;n<r.length;n+=1)r[n].m(t,null);n=!0},p(e,n){let[s]=n;127&s&&(o=e[0],yO(),r=kO(r,s,a,1,e,o,i,t,CO,lF,null,sF),vO())},i(e){if(!n){for(let e=0;e<o.length;e+=1)bO(r[e]);n=!0}},o(e){for(let t=0;t<r.length;t+=1)xO(r[t]);n=!1},d(e){e&&$A(t);for(let t=0;t<r.length;t+=1)r[t].d()}}}function uF(e,t,n){let r,{items:i}=t,{disabled:o}=t,{onclickitem:a}=t,{ongrabitem:s}=t,{ondragitem:l}=t,{ondropitem:c}=t;const u=XN(0,{stiffness:.25,damping:.9});return nA(e,u,(e=>n(6,r=e))),qA((()=>u.set(1))),e.$$set=e=>{"items"in e&&n(0,i=e.items),"disabled"in e&&n(1,o=e.disabled),"onclickitem"in e&&n(2,a=e.onclickitem),"ongrabitem"in e&&n(3,s=e.ongrabitem),"ondragitem"in e&&n(4,l=e.ondragitem),"ondropitem"in e&&n(5,c=e.ondropitem)},[i,o,a,s,l,c,r,u,(e,t)=>t.mount&&t.mount(e.firstChild,t),e=>a(e.id),(e,t)=>s&&s(e.id,t),(e,t)=>l&&l(e.id,t),(e,t)=>c&&c(e.id,t)]}class dF extends OO{constructor(e){super(),AO(this,e,uF,cF,XM,{items:0,disabled:1,onclickitem:2,ongrabitem:3,ondragitem:4,ondropitem:5})}}var pF=()=>cE()&&window.devicePixelRatio||1;let hF=null;var fF=e=>(null===hF&&(hF=1===pF()?Math.round:e=>e),hF(e)),mF=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e){if(t.preventScroll&&XI()){const t=document.body.scrollTop;return e.focus(),void(document.body.scrollTop=t)}e.focus(t)}},gF=e=>/date|email|number|search|text|url/.test(e.type),yF=e=>(e=>/textarea/i.test(e.nodeName))(e)||gF(e)||e.isContentEditable;const vF=e=>({}),bF=e=>({}),xF=e=>({}),wF=e=>({});function $F(e){let t,n;const r=[e[7]];let i={$$slots:{default:[_F]},$$scope:{ctx:e}};for(let o=0;o<r.length;o+=1)i=qM(i,r[o]);return t=new Qz({props:i}),e[53](t),{c(){PO(t.$$.fragment)},m(e,r){RO(t,e,r),n=!0},p(e,n){const i=128&n[0]?EO(r,[TO(e[7])]):{};67108864&n[1]&&(i.$$scope={dirty:n,ctx:e}),t.$set(i)},i(e){n||(bO(t.$$.fragment,e),n=!0)},o(e){xO(t.$$.fragment,e),n=!1},d(n){e[53](null),MO(t,n)}}}function SF(e){let t,n;const r=[e[7]];let i={};for(let o=0;o<r.length;o+=1)i=qM(i,r[o]);return t=new Qz({props:i}),e[52](t),{c(){PO(t.$$.fragment)},m(e,r){RO(t,e,r),n=!0},p(e,n){const i=128&n[0]?EO(r,[TO(e[7])]):{};t.$set(i)},i(e){n||(bO(t.$$.fragment,e),n=!0)},o(e){xO(t.$$.fragment,e),n=!1},d(n){e[52](null),MO(t,n)}}}function _F(e){let t;const n=e[51].label,r=rA(n,e,e[57],wF);return{c(){r&&r.c()},m(e,n){r&&r.m(e,n),t=!0},p(e,i){r&&r.p&&(!t||67108864&i[1])&&aA(r,n,e,e[57],t?oA(n,e[57],i,xF):sA(e[57]),wF)},i(e){t||(bO(r,e),t=!0)},o(e){xO(r,e),t=!1},d(e){r&&r.d(e)}}}function CF(e){let t,n,r,i,o,a,s;const l=e[51].details,c=rA(l,e,e[57],bF);return{c(){t=SA("div"),c&&c.c(),n=kA(),r=SA("span"),RA(r,"class","PinturaPanelTip"),RA(r,"data-top",e[10]),NA(r,"opacity",e[14]),NA(r,"transform",e[13]),NA(r,"top",e[12]),NA(r,"left",e[11]),RA(t,"class",i=CD(["PinturaPanel","pintura-editor-panel",e[2]])),RA(t,"tabindex","-1"),NA(t,"opacity",e[18]),NA(t,"pointer-events",e[17]),NA(t,"transform",e[16]),NA(t,"--panel-max-height",e[15])},m(i,l){wA(i,t,l),c&&c.m(t,null),vA(t,n),vA(t,r),e[54](t),o=!0,a||(s=[TA(t,"close",e[55]),TA(t,"keydown",e[25]),TA(t,"measure",e[56]),dA(hD.call(null,t))],a=!0)},p(e,n){c&&c.p&&(!o||67108864&n[1])&&aA(c,l,e,e[57],o?oA(l,e[57],n,vF):sA(e[57]),bF),(!o||1024&n[0])&&RA(r,"data-top",e[10]),16384&n[0]&&NA(r,"opacity",e[14]),8192&n[0]&&NA(r,"transform",e[13]),4096&n[0]&&NA(r,"top",e[12]),2048&n[0]&&NA(r,"left",e[11]),(!o||4&n[0]&&i!==(i=CD(["PinturaPanel","pintura-editor-panel",e[2]])))&&RA(t,"class",i),262144&n[0]&&NA(t,"opacity",e[18]),131072&n[0]&&NA(t,"pointer-events",e[17]),65536&n[0]&&NA(t,"transform",e[16]),32768&n[0]&&NA(t,"--panel-max-height",e[15])},i(e){o||(bO(c,e),o=!0)},o(e){xO(c,e),o=!1},d(n){n&&$A(t),c&&c.d(n),e[54](null),a=!1,YM(s)}}}function kF(e){let t,n,r,i,o,a,s,l,c;const u=[SF,$F],d=[];function p(e,t){return e[1]?0:1}n=p(e),r=d[n]=u[n](e);let h=e[6]&&CF(e);return{c(){t=kA(),r.c(),i=kA(),h&&h.c(),o=kA(),a=EA()},m(r,u){wA(r,t,u),d[n].m(r,u),wA(r,i,u),h&&h.m(r,u),wA(r,o,u),wA(r,a,u),s=!0,l||(c=[TA(document.body,"pointerdown",(function(){ZM(e[9])&&e[9].apply(this,arguments)})),TA(document.body,"pointerup",(function(){ZM(e[8])&&e[8].apply(this,arguments)}))],l=!0)},p(t,a){let s=n;n=p(e=t),n===s?d[n].p(e,a):(yO(),xO(d[s],1,1,(()=>{d[s]=null})),vO(),r=d[n],r?r.p(e,a):(r=d[n]=u[n](e),r.c()),bO(r,1),r.m(i.parentNode,i)),e[6]?h?(h.p(e,a),64&a[0]&&bO(h,1)):(h=CF(e),h.c(),bO(h,1),h.m(o.parentNode,o)):h&&(yO(),xO(h,1,1,(()=>{h=null})),vO())},i(e){s||(bO(r),bO(h),bO(!1),s=!0)},o(e){xO(r),xO(h),xO(!1),s=!1},d(e){e&&$A(t),d[n].d(e),e&&$A(i),h&&h.d(e),e&&$A(o),e&&$A(a),l=!1,YM(c)}}}function EF(e,t,n){let r,i,o,a,s,l,c,u,d,p,h,f,m,g,y,v,b,x,w,$,S,_,C,k,E,{$$slots:T={},$$scope:I}=t,{buttonClass:P}=t,{buttonLabel:R}=t,{buttonLabelClass:M}=t,{buttonHideLabel:A}=t,{buttonIcon:O}=t,{buttonTitle:L}=t,{buttonOnClick:N}=t,{panelClass:D}=t,{isActive:F=!1}=t,{onshow:j=e=>{let{panel:t}=e;return mF(t,{preventScroll:!0})}}=t,{onhide:z=eE}=t;const B=XA("isAnimated");nA(e,B,(e=>n(50,E=e)));const U=XA("rootPortal");nA(e,U,(e=>n(45,$=e)));const W=XA("rootRect");let V,H,q;nA(e,W,(e=>n(47,_=e)));const G=()=>n(34,q=r&&r.getBoundingClientRect());let K=pT(),Y=XN(0);nA(e,Y,(e=>n(48,C=e)));let Z=pT();const X=DO({x:0,y:0});nA(e,X,(e=>n(46,S=e)));const Q=XN(-5,{stiffness:.1,damping:.35,precision:.001});nA(e,Q,(e=>n(49,k=e)));let J=!0;const ee=e=>tF(e,$)||H.isEventTarget(e);let te,ne,re=!1;const ie=e=>{yF(e.target)||(TE(N)&&N(),F||G(),n(39,ne=e),n(0,F=!F))},oe=e=>{/down/i.test(e.key)&&(n(0,F=!0),n(39,ne=e))};return KA((()=>{if(!$)return;if(!te)return;const e=te;aO().then((()=>{e.parentNode&&e.remove()}))})),e.$$set=e=>{"buttonClass"in e&&n(26,P=e.buttonClass),"buttonLabel"in e&&n(1,R=e.buttonLabel),"buttonLabelClass"in e&&n(27,M=e.buttonLabelClass),"buttonHideLabel"in e&&n(28,A=e.buttonHideLabel),"buttonIcon"in e&&n(29,O=e.buttonIcon),"buttonTitle"in e&&n(30,L=e.buttonTitle),"buttonOnClick"in e&&n(31,N=e.buttonOnClick),"panelClass"in e&&n(2,D=e.panelClass),"isActive"in e&&n(0,F=e.isActive),"onshow"in e&&n(32,j=e.onshow),"onhide"in e&&n(33,z=e.onhide),"$$scope"in e&&n(57,I=e.$$scope)},e.$$.update=()=>{if(16&e.$$.dirty[0]&&(r=H&&H.getElement()),1&e.$$.dirty[0]|128&e.$$.dirty[1]&&n(8,x=F?e=>{re&&(n(38,re=!1),ee(e)||n(0,F=!1))}:void 0),1&e.$$.dirty[0]|524288&e.$$.dirty[1]&&Y.set(F?1:0,{hard:!1===E}),1&e.$$.dirty[0]|524288&e.$$.dirty[1]&&Q.set(F?0:-5,{hard:!1===E}),262144&e.$$.dirty[1]&&n(43,i=1-k/-5),1&e.$$.dirty[0]|65536&e.$$.dirty[1]&&_&&F&&G(),9&e.$$.dirty[0]|65544&e.$$.dirty[1]&&_&&V&&q&&F){n(37,J=!0);let e=q.x-_.x+.5*q.width-.5*V.width,t=q.y-_.y+q.height;const r=12,i=12,o=_.width-12,a=_.height-12,s=e,l=t,c=s+V.width,u=l+V.height;s<r&&(n(36,Z.x=s-r,Z),e=r),c>o&&(n(36,Z.x=c-o,Z),e=o-V.width),u>a?(n(35,K.y=-1,K),i<t-V.height-q.height?(n(36,Z.y=0,Z),t-=V.height+q.height):(n(36,Z.y=t-(u-a),Z),t-=u-a-12,n(37,J=!1))):n(35,K.y=1,K),uA(X,S=$T(hT(e,t),fF),S)}131072&e.$$.dirty[1]&&n(6,o=C>0),294928&e.$$.dirty[1]&&n(44,a=`translateX(${Math.round(S.x)+12*K.x}px) translateY(${Math.round(S.y)+12*K.y+K.y*k}px)`),131072&e.$$.dirty[1]&&n(18,s=C),131072&e.$$.dirty[1]&&n(17,l=C<1?"none":"all"),8192&e.$$.dirty[1]&&n(16,c=a),65536&e.$$.dirty[1]&&n(15,u=_.height-24+"px"),4096&e.$$.dirty[1]&&n(41,d=.5+.5*i),4096&e.$$.dirty[1]&&n(42,p=i),8&e.$$.dirty[0]|32768&e.$$.dirty[1]&&n(40,h=V&&S),2624&e.$$.dirty[1]&&n(14,f=h&&J?p:0),1536&e.$$.dirty[1]&&n(13,m=h?`scaleX(${d})rotate(45deg)`:"none"),8&e.$$.dirty[0]|560&e.$$.dirty[1]&&n(12,g=h?(K.y<0?Z.y+V.height:0)+"px":"0"),8&e.$$.dirty[0]|544&e.$$.dirty[1]&&n(11,y=h?Z.x+.5*V.width+"px":"0"),16&e.$$.dirty[1]&&n(10,v=K.y>=0),1&e.$$.dirty[0]&&n(9,b=F?e=>{ee(e)||n(38,re=!0)}:void 0),96&e.$$.dirty[0]|16384&e.$$.dirty[1]&&o&&$&&te&&te.parentNode!==$&&$.append(te),1&e.$$.dirty[0]&&(F||n(39,ne=void 0)),97&e.$$.dirty[0]|258&e.$$.dirty[1]&&F&&o&&te&&j({e:ne,panel:te}),65&e.$$.dirty[0]|4&e.$$.dirty[1]&&o&&!F&&z(),2080374786&e.$$.dirty[0]&&n(7,w={label:R,icon:O,class:CD(["PinturaPanelButton",P]),onkeydown:oe,onclick:ie,hideLabel:A,labelClass:M,title:L})},[F,R,D,V,H,te,o,w,x,b,v,y,g,m,f,u,c,l,s,B,U,W,Y,X,Q,e=>{/esc/i.test(e.key)&&(n(0,F=!1),r.focus())},P,M,A,O,L,N,j,z,q,K,Z,J,re,ne,h,d,p,i,a,$,S,_,C,k,E,T,function(e){eO[e?"unshift":"push"]((()=>{H=e,n(4,H)}))},function(e){eO[e?"unshift":"push"]((()=>{H=e,n(4,H)}))},function(e){eO[e?"unshift":"push"]((()=>{te=e,n(5,te)}))},e=>{e.stopPropagation(),n(0,F=!1)},e=>n(3,V=NT(e.detail)),I]}class TF extends OO{constructor(e){super(),AO(this,e,EF,kF,XM,{buttonClass:26,buttonLabel:1,buttonLabelClass:27,buttonHideLabel:28,buttonIcon:29,buttonTitle:30,buttonOnClick:31,panelClass:2,isActive:0,onshow:32,onhide:33},null,[-1,-1,-1])}}var IF={Up:38,Down:40,Left:37,Right:39};function PF(e){let t,n,r,i,o,a,s,l;const c=e[15].default,u=rA(c,e,e[14],null);return{c(){t=SA("li"),n=SA("input"),r=kA(),i=SA("label"),u&&u.c(),RA(n,"type","radio"),RA(n,"class","implicit"),RA(n,"id",e[7]),RA(n,"name",e[0]),n.value=e[3],n.disabled=e[6],n.hidden=e[5],n.checked=e[4],RA(i,"for",e[7]),RA(i,"title",e[2]),RA(t,"class",o=CD(["PinturaRadioGroupOption",e[1]])),RA(t,"data-hidden",e[5]),RA(t,"data-disabled",e[6]),RA(t,"data-selected",e[4])},m(o,c){wA(o,t,c),vA(t,n),vA(t,r),vA(t,i),u&&u.m(i,null),a=!0,s||(l=[TA(n,"change",PA(e[16])),TA(n,"keydown",e[9]),TA(n,"click",e[10])],s=!0)},p(e,r){let[s]=r;(!a||128&s)&&RA(n,"id",e[7]),(!a||1&s)&&RA(n,"name",e[0]),(!a||8&s)&&(n.value=e[3]),(!a||64&s)&&(n.disabled=e[6]),(!a||32&s)&&(n.hidden=e[5]),(!a||16&s)&&(n.checked=e[4]),u&&u.p&&(!a||16384&s)&&aA(u,c,e,e[14],a?oA(c,e[14],s,null):sA(e[14]),null),(!a||128&s)&&RA(i,"for",e[7]),(!a||4&s)&&RA(i,"title",e[2]),(!a||2&s&&o!==(o=CD(["PinturaRadioGroupOption",e[1]])))&&RA(t,"class",o),(!a||32&s)&&RA(t,"data-hidden",e[5]),(!a||64&s)&&RA(t,"data-disabled",e[6]),(!a||16&s)&&RA(t,"data-selected",e[4])},i(e){a||(bO(u,e),a=!0)},o(e){xO(u,e),a=!1},d(e){e&&$A(t),u&&u.d(e),s=!1,YM(l)}}}function RF(e,t,n){let r,i,{$$slots:o={},$$scope:a}=t,{name:s}=t,{class:l}=t,{label:c}=t,{id:u}=t,{value:d}=t,{checked:p}=t,{onkeydown:h}=t,{onclick:f}=t,{hidden:m=!1}=t,{disabled:g=!1}=t;const y=Object.values(IF),v=XA("keysPressed");return nA(e,v,(e=>n(17,i=e))),e.$$set=e=>{"name"in e&&n(0,s=e.name),"class"in e&&n(1,l=e.class),"label"in e&&n(2,c=e.label),"id"in e&&n(11,u=e.id),"value"in e&&n(3,d=e.value),"checked"in e&&n(4,p=e.checked),"onkeydown"in e&&n(12,h=e.onkeydown),"onclick"in e&&n(13,f=e.onclick),"hidden"in e&&n(5,m=e.hidden),"disabled"in e&&n(6,g=e.disabled),"$$scope"in e&&n(14,a=e.$$scope)},e.$$.update=()=>{2049&e.$$.dirty&&n(7,r=`${s}-${u}`)},[s,l,c,d,p,m,g,r,v,e=>{h(e)},e=>{i.some((e=>y.includes(e)))||f(e)},u,h,f,a,o,function(t){QA.call(this,e,t)}]}class MF extends OO{constructor(e){super(),AO(this,e,RF,PF,XM,{name:0,class:1,label:2,id:11,value:3,checked:4,onkeydown:12,onclick:13,hidden:5,disabled:6})}}var AF=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).reduce(((e,t)=>(OP(t)?OP(t[1]):t.options)?e.concat(OP(t)?t[1]:t.options):(e.push(t),e)),[])};const OF=(e,t,n)=>{let r;return OP(e)?r={id:t,value:e[0],label:e[1],...e[2]||{}}:(r=e,r.id=null!=r.id?r.id:t),n?n(r):r};var LF=(e,t,n)=>TE(e)?e(t,n):e;const NF=(e,t)=>e.map((e=>{let[n,r,i]=e;if(OP(r))return[LF(n,t),NF(r,t)];{const e=[n,LF(r,t)];if(i){let n={...i};i.icon&&(n.icon=LF(i.icon,t)),e.push(n)}return e}}));var DF=(e,t)=>NF(e,t),FF=(e,t)=>Array.isArray(e)&&Array.isArray(t)?sL(e,t):e===t;function jF(e,t,n){const r=e.slice();return r[27]=t[n],r}const zF=e=>({option:1024&e[0]}),BF=e=>({option:e[27]});function UF(e,t,n){const r=e.slice();return r[27]=t[n],r}const WF=e=>({option:1024&e[0]}),VF=e=>({option:e[27]}),HF=e=>({option:1024&e[0]}),qF=e=>({option:e[27]});function GF(e){let t,n,r,i,o,a=[],s=new Map,l=e[1]&&KF(e),c=e[10];const u=e=>e[27].id;for(let d=0;d<c.length;d+=1){let t=jF(e,c,d),n=u(t);s.set(n,a[d]=aj(n,t))}return{c(){t=SA("fieldset"),l&&l.c(),n=kA(),r=SA("ul");for(let e=0;e<a.length;e+=1)a[e].c();RA(r,"class","PinturaRadioGroupOptions"),RA(t,"class",i=CD(["PinturaRadioGroup",e[3]])),RA(t,"data-layout",e[5]),RA(t,"title",e[7])},m(e,i){wA(e,t,i),l&&l.m(t,null),vA(t,n),vA(t,r);for(let t=0;t<a.length;t+=1)a[t].m(r,null);o=!0},p(e,d){e[1]?l?l.p(e,d):(l=KF(e),l.c(),l.m(t,n)):l&&(l.d(1),l=null),8419153&d[0]&&(c=e[10],yO(),a=kO(a,d,u,1,e,c,s,r,CO,aj,null,jF),vO()),(!o||8&d[0]&&i!==(i=CD(["PinturaRadioGroup",e[3]])))&&RA(t,"class",i),(!o||32&d[0])&&RA(t,"data-layout",e[5]),(!o||128&d[0])&&RA(t,"title",e[7])},i(e){if(!o){for(let e=0;e<c.length;e+=1)bO(a[e]);o=!0}},o(e){for(let t=0;t<a.length;t+=1)xO(a[t]);o=!1},d(e){e&&$A(t),l&&l.d();for(let t=0;t<a.length;t+=1)a[t].d()}}}function KF(e){let t,n,r;return{c(){t=SA("legend"),n=CA(e[1]),RA(t,"class",r=e[2]&&"implicit")},m(e,r){wA(e,t,r),vA(t,n)},p(e,i){2&i[0]&&OA(n,e[1]),4&i[0]&&r!==(r=e[2]&&"implicit")&&RA(t,"class",r)},d(e){e&&$A(t)}}}function YF(e){let t,n;return t=new MF({props:{name:e[4],label:e[27].label,id:e[27].id,value:e[27].value,disabled:e[27].disabled,hidden:e[27].hidden,class:e[8],checked:e[12](e[27])===e[0],onkeydown:e[13](e[27]),onclick:e[14](e[27]),$$slots:{default:[ej]},$$scope:{ctx:e}}}),{c(){PO(t.$$.fragment)},m(e,r){RO(t,e,r),n=!0},p(e,n){const r={};16&n[0]&&(r.name=e[4]),1024&n[0]&&(r.label=e[27].label),1024&n[0]&&(r.id=e[27].id),1024&n[0]&&(r.value=e[27].value),1024&n[0]&&(r.disabled=e[27].disabled),1024&n[0]&&(r.hidden=e[27].hidden),256&n[0]&&(r.class=e[8]),1025&n[0]&&(r.checked=e[12](e[27])===e[0]),1024&n[0]&&(r.onkeydown=e[13](e[27])),1024&n[0]&&(r.onclick=e[14](e[27])),8389696&n[0]&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(bO(t.$$.fragment,e),n=!0)},o(e){xO(t.$$.fragment,e),n=!1},d(e){MO(t,e)}}}function ZF(e){let t,n,r,i,o,a,s=[],l=new Map;const c=e[22].group,u=rA(c,e,e[23],qF),d=u||function(e){let t,n,r=e[27].label+"";return{c(){t=SA("span"),n=CA(r),RA(t,"class","PinturaRadioGroupOptionGroupLabel")},m(e,r){wA(e,t,r),vA(t,n)},p(e,t){1024&t[0]&&r!==(r=e[27].label+"")&&OA(n,r)},d(e){e&&$A(t)}}}(e);let p=e[27].options;const h=e=>e[27].id;for(let f=0;f<p.length;f+=1){let t=UF(e,p,f),n=h(t);l.set(n,s[f]=oj(n,t))}return{c(){t=SA("li"),d&&d.c(),n=kA(),r=SA("ul");for(let e=0;e<s.length;e+=1)s[e].c();i=kA(),RA(r,"class","PinturaRadioGroupOptions"),RA(t,"class",o=CD(["PinturaRadioGroupOptionGroup",e[9]]))},m(e,o){wA(e,t,o),d&&d.m(t,null),vA(t,n),vA(t,r);for(let t=0;t<s.length;t+=1)s[t].m(r,null);vA(t,i),a=!0},p(e,n){u?u.p&&(!a||8389632&n[0])&&aA(u,c,e,e[23],a?oA(c,e[23],n,HF):sA(e[23]),qF):d&&d.p&&(!a||1024&n[0])&&d.p(e,a?n:[-1,-1]),8418641&n[0]&&(p=e[27].options,yO(),s=kO(s,n,h,1,e,p,l,r,CO,oj,null,UF),vO()),(!a||512&n[0]&&o!==(o=CD(["PinturaRadioGroupOptionGroup",e[9]])))&&RA(t,"class",o)},i(e){if(!a){bO(d,e);for(let e=0;e<p.length;e+=1)bO(s[e]);a=!0}},o(e){xO(d,e);for(let t=0;t<s.length;t+=1)xO(s[t]);a=!1},d(e){e&&$A(t),d&&d.d(e);for(let t=0;t<s.length;t+=1)s[t].d()}}}function XF(e){let t,n;return t=new eF({props:{$$slots:{default:[QF]},$$scope:{ctx:e}}}),{c(){PO(t.$$.fragment)},m(e,r){RO(t,e,r),n=!0},p(e,n){const r={};8389632&n[0]&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(bO(t.$$.fragment,e),n=!0)},o(e){xO(t.$$.fragment,e),n=!1},d(e){MO(t,e)}}}function QF(e){let t,n=e[27].icon+"";return{c(){t=_A("g")},m(e,r){wA(e,t,r),t.innerHTML=n},p(e,r){1024&r[0]&&n!==(n=e[27].icon+"")&&(t.innerHTML=n)},d(e){e&&$A(t)}}}function JF(e){let t,n,r=e[27].label+"";return{c(){t=SA("span"),n=CA(r),RA(t,"class",e[6])},m(e,r){wA(e,t,r),vA(t,n)},p(e,i){1024&i[0]&&r!==(r=e[27].label+"")&&OA(n,r),64&i[0]&&RA(t,"class",e[6])},d(e){e&&$A(t)}}}function ej(e){let t;const n=e[22].option,r=rA(n,e,e[23],BF),i=r||function(e){let t,n,r,i=e[27].icon&&XF(e),o=!e[27].hideLabel&&JF(e);return{c(){i&&i.c(),t=kA(),o&&o.c(),n=kA()},m(e,a){i&&i.m(e,a),wA(e,t,a),o&&o.m(e,a),wA(e,n,a),r=!0},p(e,r){e[27].icon?i?(i.p(e,r),1024&r[0]&&bO(i,1)):(i=XF(e),i.c(),bO(i,1),i.m(t.parentNode,t)):i&&(yO(),xO(i,1,1,(()=>{i=null})),vO()),e[27].hideLabel?o&&(o.d(1),o=null):o?o.p(e,r):(o=JF(e),o.c(),o.m(n.parentNode,n))},i(e){r||(bO(i),r=!0)},o(e){xO(i),r=!1},d(e){i&&i.d(e),e&&$A(t),o&&o.d(e),e&&$A(n)}}}(e);return{c(){i&&i.c()},m(e,n){i&&i.m(e,n),t=!0},p(e,o){r?r.p&&(!t||8389632&o[0])&&aA(r,n,e,e[23],t?oA(n,e[23],o,zF):sA(e[23]),BF):i&&i.p&&(!t||1088&o[0])&&i.p(e,t?o:[-1,-1])},i(e){t||(bO(i,e),t=!0)},o(e){xO(i,e),t=!1},d(e){i&&i.d(e)}}}function tj(e){let t,n;return t=new eF({props:{$$slots:{default:[nj]},$$scope:{ctx:e}}}),{c(){PO(t.$$.fragment)},m(e,r){RO(t,e,r),n=!0},p(e,n){const r={};8389632&n[0]&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(bO(t.$$.fragment,e),n=!0)},o(e){xO(t.$$.fragment,e),n=!1},d(e){MO(t,e)}}}function nj(e){let t,n=e[27].icon+"";return{c(){t=_A("g")},m(e,r){wA(e,t,r),t.innerHTML=n},p(e,r){1024&r[0]&&n!==(n=e[27].icon+"")&&(t.innerHTML=n)},d(e){e&&$A(t)}}}function rj(e){let t,n,r=e[27].label+"";return{c(){t=SA("span"),n=CA(r),RA(t,"class",e[6])},m(e,r){wA(e,t,r),vA(t,n)},p(e,i){1024&i[0]&&r!==(r=e[27].label+"")&&OA(n,r),64&i[0]&&RA(t,"class",e[6])},d(e){e&&$A(t)}}}function ij(e){let t;const n=e[22].option,r=rA(n,e,e[23],VF),i=r||function(e){let t,n,r,i=e[27].icon&&tj(e),o=!e[27].hideLabel&&rj(e);return{c(){i&&i.c(),t=kA(),o&&o.c(),n=kA()},m(e,a){i&&i.m(e,a),wA(e,t,a),o&&o.m(e,a),wA(e,n,a),r=!0},p(e,r){e[27].icon?i?(i.p(e,r),1024&r[0]&&bO(i,1)):(i=tj(e),i.c(),bO(i,1),i.m(t.parentNode,t)):i&&(yO(),xO(i,1,1,(()=>{i=null})),vO()),e[27].hideLabel?o&&(o.d(1),o=null):o?o.p(e,r):(o=rj(e),o.c(),o.m(n.parentNode,n))},i(e){r||(bO(i),r=!0)},o(e){xO(i),r=!1},d(e){i&&i.d(e),e&&$A(t),o&&o.d(e),e&&$A(n)}}}(e);return{c(){i&&i.c()},m(e,n){i&&i.m(e,n),t=!0},p(e,o){r?r.p&&(!t||8389632&o[0])&&aA(r,n,e,e[23],t?oA(n,e[23],o,WF):sA(e[23]),VF):i&&i.p&&(!t||1088&o[0])&&i.p(e,t?o:[-1,-1])},i(e){t||(bO(i,e),t=!0)},o(e){xO(i,e),t=!1},d(e){i&&i.d(e)}}}function oj(e,t){let n,r,i;return r=new MF({props:{name:t[4],label:t[27].label,id:t[27].id,value:t[27].value,disabled:t[27].disabled,hidden:t[27].hidden,class:t[8],checked:t[12](t[27])===t[0],onkeydown:t[13](t[27]),onclick:t[14](t[27]),$$slots:{default:[ij]},$$scope:{ctx:t}}}),{key:e,first:null,c(){n=EA(),PO(r.$$.fragment),this.first=n},m(e,t){wA(e,n,t),RO(r,e,t),i=!0},p(e,n){t=e;const i={};16&n[0]&&(i.name=t[4]),1024&n[0]&&(i.label=t[27].label),1024&n[0]&&(i.id=t[27].id),1024&n[0]&&(i.value=t[27].value),1024&n[0]&&(i.disabled=t[27].disabled),1024&n[0]&&(i.hidden=t[27].hidden),256&n[0]&&(i.class=t[8]),1025&n[0]&&(i.checked=t[12](t[27])===t[0]),1024&n[0]&&(i.onkeydown=t[13](t[27])),1024&n[0]&&(i.onclick=t[14](t[27])),8389696&n[0]&&(i.$$scope={dirty:n,ctx:t}),r.$set(i)},i(e){i||(bO(r.$$.fragment,e),i=!0)},o(e){xO(r.$$.fragment,e),i=!1},d(e){e&&$A(n),MO(r,e)}}}function aj(e,t){let n,r,i,o,a;const s=[ZF,YF],l=[];function c(e,t){return e[27].options?0:1}return r=c(t),i=l[r]=s[r](t),{key:e,first:null,c(){n=EA(),i.c(),o=EA(),this.first=n},m(e,t){wA(e,n,t),l[r].m(e,t),wA(e,o,t),a=!0},p(e,n){let a=r;r=c(t=e),r===a?l[r].p(t,n):(yO(),xO(l[a],1,1,(()=>{l[a]=null})),vO(),i=l[r],i?i.p(t,n):(i=l[r]=s[r](t),i.c()),bO(i,1),i.m(o.parentNode,o))},i(e){a||(bO(i),a=!0)},o(e){xO(i),a=!1},d(e){e&&$A(n),l[r].d(e),e&&$A(o)}}}function sj(e){let t,n,r,i=e[11].length&&GF(e);return{c(){i&&i.c(),t=kA(),n=EA()},m(e,o){i&&i.m(e,o),wA(e,t,o),wA(e,n,o),r=!0},p(e,n){e[11].length?i?(i.p(e,n),2048&n[0]&&bO(i,1)):(i=GF(e),i.c(),bO(i,1),i.m(t.parentNode,t)):i&&(yO(),xO(i,1,1,(()=>{i=null})),vO())},i(e){r||(bO(i),bO(!1),r=!0)},o(e){xO(i),xO(!1),r=!1},d(e){i&&i.d(e),e&&$A(t),e&&$A(n)}}}function lj(e,t,n){let r,i,o,{$$slots:a={},$$scope:s}=t;const l=YA();let{label:c}=t,{hideLabel:u=!0}=t,{class:d}=t,{name:p="radio-group-"+ME()}=t,{selectedIndex:h=-1}=t,{options:f=[]}=t,{onchange:m}=t,{layout:g}=t,{optionMapper:y}=t,{optionFilter:v}=t,{value:b}=t,{optionLabelClass:x}=t,{title:w}=t,{locale:$}=t,{optionClass:S}=t,{optionGroupClass:_}=t;const C=e=>o.findIndex((t=>t.id===e.id)),k=(e,t)=>{n(0,h=C(e));const r={index:h,...e};(function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e&&e(...n)})(m,r,t),l("change",r)};return e.$$set=e=>{"label"in e&&n(1,c=e.label),"hideLabel"in e&&n(2,u=e.hideLabel),"class"in e&&n(3,d=e.class),"name"in e&&n(4,p=e.name),"selectedIndex"in e&&n(0,h=e.selectedIndex),"options"in e&&n(15,f=e.options),"onchange"in e&&n(16,m=e.onchange),"layout"in e&&n(5,g=e.layout),"optionMapper"in e&&n(17,y=e.optionMapper),"optionFilter"in e&&n(18,v=e.optionFilter),"value"in e&&n(19,b=e.value),"optionLabelClass"in e&&n(6,x=e.optionLabelClass),"title"in e&&n(7,w=e.title),"locale"in e&&n(20,$=e.locale),"optionClass"in e&&n(8,S=e.optionClass),"optionGroupClass"in e&&n(9,_=e.optionGroupClass),"$$scope"in e&&n(23,s=e.$$scope)},e.$$.update=()=>{1343488&e.$$.dirty[0]&&n(11,r=DF(v?f.filter(v):f,$)),133120&e.$$.dirty[0]&&n(10,i=function(){let e=arguments.length>1?arguments[1]:void 0,t=0;return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map((n=>(t++,OP(n)?OP(n[1])?{id:t,label:n[0],options:n[1].map((n=>OF(n,++t,e)))}:OF(n,t,e):n.options?{id:n.id||t,label:n.label,options:n.options.map((n=>OF(n,++t,e)))}:OF(n,t,e))))}(r,y)),1024&e.$$.dirty[0]&&n(21,o=AF(i)),2654209&e.$$.dirty[0]&&h<0&&(n(0,h=o.findIndex((e=>FF(e.value,b)))),h<0&&n(0,h=(e=>e.findIndex((e=>void 0===e[0])))(f)))},[h,c,u,d,p,g,x,w,S,_,i,r,C,e=>t=>{var n;n=t.key,/enter| /i.test(n)&&k(e,t)},e=>t=>{k(e,t)},f,m,y,v,b,$,o,a,s]}class cj extends OO{constructor(e){super(),AO(this,e,lj,sj,XM,{label:1,hideLabel:2,class:3,name:4,selectedIndex:0,options:15,onchange:16,layout:5,optionMapper:17,optionFilter:18,value:19,optionLabelClass:6,title:7,locale:20,optionClass:8,optionGroupClass:9},null,[-1,-1])}}function uj(e){let t,n,r,i,o,a,s,l,c,u;return{c(){t=SA("div"),n=SA("button"),r=CA("\u25b2"),o=kA(),a=SA("button"),s=CA("\u25bc"),RA(n,"type","button"),RA(n,"tabindex","-1"),RA(n,"aria-label",i="increase "+e[7]),RA(a,"type","button"),RA(a,"tabindex","-1"),RA(a,"aria-label",l="decrease "+e[7]),RA(t,"class","PinturaInputSpinners")},m(i,l){wA(i,t,l),vA(t,n),vA(n,r),vA(t,o),vA(t,a),vA(a,s),c||(u=[TA(n,"click",e[18]),TA(a,"click",e[19])],c=!0)},p(e,t){128&t[0]&&i!==(i="increase "+e[7])&&RA(n,"aria-label",i),128&t[0]&&l!==(l="decrease "+e[7])&&RA(a,"aria-label",l)},d(e){e&&$A(t),c=!1,YM(u)}}}function dj(e){let t,n,r,i,o,a,s=e[14]&&e[9]&&uj(e);return{c(){t=SA("div"),n=SA("input"),i=kA(),s&&s.c(),RA(n,"class","PinturaInputField"),RA(n,"title",e[7]),RA(n,"type",e[1]),RA(n,"min",e[4]),RA(n,"max",e[5]),RA(n,"step",e[6]),RA(n,"inputmode",e[3]),n.value=r=e[12]?e[15]:e[0],RA(n,"placeholder",e[8]),RA(n,"maxlength",e[13]),n.disabled=e[2],RA(n,"spellcheck","false"),RA(n,"autocorrect","off"),RA(n,"autocapitalize","off"),NA(n,"min-width",e[11]?e[11]+"em":void 0),RA(t,"class","PinturaInput")},m(r,l){wA(r,t,l),vA(t,n),e[30](n),vA(t,i),s&&s.m(t,null),o||(a=[TA(n,"input",e[17]),TA(n,"blur",(function(){ZM(e[12]&&e[16])&&(e[12]&&e[16]).apply(this,arguments)})),TA(n,"keydown",e[20]),TA(n,"keyup",e[21])],o=!0)},p(i,o){e=i,128&o[0]&&RA(n,"title",e[7]),2&o[0]&&RA(n,"type",e[1]),16&o[0]&&RA(n,"min",e[4]),32&o[0]&&RA(n,"max",e[5]),64&o[0]&&RA(n,"step",e[6]),8&o[0]&&RA(n,"inputmode",e[3]),36865&o[0]&&r!==(r=e[12]?e[15]:e[0])&&n.value!==r&&(n.value=r),256&o[0]&&RA(n,"placeholder",e[8]),8192&o[0]&&RA(n,"maxlength",e[13]),4&o[0]&&(n.disabled=e[2]),2048&o[0]&&NA(n,"min-width",e[11]?e[11]+"em":void 0),e[14]&&e[9]?s?s.p(e,o):(s=uj(e),s.c(),s.m(t,null)):s&&(s.d(1),s=null)},i:VM,o:VM,d(n){n&&$A(t),e[30](null),s&&s.d(),o=!1,YM(a)}}}function pj(e,t,n){let r,i,o,a,s,l,c,u,d,{value:p}=t,{type:h="text"}=t,{disabled:f=!1}=t,{inputmode:m}=t,{min:g}=t,{max:y}=t,{step:v}=t,{onchange:b=eE}=t,{onkeydown:x=eE}=t,{onkeyup:w=eE}=t,{title:$}=t,{stepMultiplier:S=10}=t,{placeholder:_}=t,{enableSpinButtons:C=!0}=t,{enableStopPropagation:k=!1}=t;const E=()=>{let e=u.value;return"number"===h&&(e="numeric"===m?parseInt(e,10):parseFloat(e),!RP(e)||Number.isNaN(e)?e=g||0:i&&(e=nL(e,g,y))),e};let T=p;const I=()=>{const e=nL(E()+(d?v*S:v),g,y);e!==p&&(n(27,T=e),n(0,p=e),b(p))},P=()=>{const e=nL(E()-(d?v*S:v),g,y);e!==p&&(n(27,T=e),n(0,p=e),b(p))};return e.$$set=e=>{"value"in e&&n(0,p=e.value),"type"in e&&n(1,h=e.type),"disabled"in e&&n(2,f=e.disabled),"inputmode"in e&&n(3,m=e.inputmode),"min"in e&&n(4,g=e.min),"max"in e&&n(5,y=e.max),"step"in e&&n(6,v=e.step),"onchange"in e&&n(22,b=e.onchange),"onkeydown"in e&&n(23,x=e.onkeydown),"onkeyup"in e&&n(24,w=e.onkeyup),"title"in e&&n(7,$=e.title),"stepMultiplier"in e&&n(25,S=e.stepMultiplier),"placeholder"in e&&n(8,_=e.placeholder),"enableSpinButtons"in e&&n(9,C=e.enableSpinButtons),"enableStopPropagation"in e&&n(26,k=e.enableStopPropagation)},e.$$.update=()=>{2&e.$$.dirty[0]&&n(29,r="number"===h),48&e.$$.dirty[0]&&n(12,i=RP(g)&&RP(y)),64&e.$$.dirty[0]&&n(28,o=RP(v)),805310464&e.$$.dirty[0]&&n(14,a=r&&i&&o),134218753&e.$$.dirty[0]&&n(15,s=u===document.activeElement?T:p),32&e.$$.dirty[0]&&n(11,l=y?(y+"").length:void 0),2056&e.$$.dirty[0]&&n(13,c="numeric"===m&&l?l:void 0)},[p,h,f,m,g,y,v,$,_,C,u,l,i,c,a,s,()=>{n(27,T=E()),b(p)},()=>{n(27,T=u.value),b(E())},I,P,e=>{if(x(e),!a)return;d=e.shiftKey;const{key:t}=e;k&&e.stopPropagation(),/up|down/i.test(t)&&(/up/i.test(t)&&I(),/down/i.test(t)&&P(),e.preventDefault(),e.stopPropagation())},e=>{if(w(e),!a)return;const{key:t}=e;/up|down/i.test(t)&&(e.preventDefault(),e.stopPropagation())},b,x,w,S,k,T,o,r,function(e){eO[e?"unshift":"push"]((()=>{u=e,n(10,u)}))}]}class hj extends OO{constructor(e){super(),AO(this,e,pj,dj,XM,{value:0,type:1,disabled:2,inputmode:3,min:4,max:5,step:6,onchange:22,onkeydown:23,onkeyup:24,title:7,stepMultiplier:25,placeholder:8,enableSpinButtons:9,enableStopPropagation:26},null,[-1,-1])}}const fj=e=>({}),mj=e=>({});function gj(e){let t,n,r,i,o=(e[2]||e[21])+"",a=e[6]&&vj(e);return{c(){a&&a.c(),t=kA(),n=SA("span"),RA(n,"class",r=CD(["PinturaButtonLabel",e[3],e[5]&&"implicit"]))},m(e,r){a&&a.m(e,r),wA(e,t,r),wA(e,n,r),n.innerHTML=o,i=!0},p(e,s){e[6]?a?(a.p(e,s),64&s[0]&&bO(a,1)):(a=vj(e),a.c(),bO(a,1),a.m(t.parentNode,t)):a&&(yO(),xO(a,1,1,(()=>{a=null})),vO()),(!i||2097156&s[0])&&o!==(o=(e[2]||e[21])+"")&&(n.innerHTML=o),(!i||40&s[0]&&r!==(r=CD(["PinturaButtonLabel",e[3],e[5]&&"implicit"])))&&RA(n,"class",r)},i(e){i||(bO(a),i=!0)},o(e){xO(a),i=!1},d(e){a&&a.d(e),e&&$A(t),e&&$A(n)}}}function yj(e){let t,n;return t=new hj({props:{value:e[10],onchange:e[17],enableStopPropagation:!0,type:"number",inputmode:"numeric",min:e[8].reduce(Ij,1/0),max:e[8].reduce(Pj,-1/0),enableSpinButtons:!1}}),{c(){PO(t.$$.fragment)},m(e,r){RO(t,e,r),n=!0},p(e,n){const r={};1024&n[0]&&(r.value=e[10]),131072&n[0]&&(r.onchange=e[17]),256&n[0]&&(r.min=e[8].reduce(Ij,1/0)),256&n[0]&&(r.max=e[8].reduce(Pj,-1/0)),t.$set(r)},i(e){n||(bO(t.$$.fragment,e),n=!0)},o(e){xO(t.$$.fragment,e),n=!1},d(e){MO(t,e)}}}function vj(e){let t,n;return t=new eF({props:{class:"PinturaButtonIcon",$$slots:{default:[bj]},$$scope:{ctx:e}}}),{c(){PO(t.$$.fragment)},m(e,r){RO(t,e,r),n=!0},p(e,n){const r={};1073741888&n[0]&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(bO(t.$$.fragment,e),n=!0)},o(e){xO(t.$$.fragment,e),n=!1},d(e){MO(t,e)}}}function bj(e){let t;return{c(){t=_A("g")},m(n,r){wA(n,t,r),t.innerHTML=e[6]},p(e,n){64&n[0]&&(t.innerHTML=e[6])},d(e){e&&$A(t)}}}function xj(e){let t,n,r,i,o;const a=[yj,gj],s=[];function l(e,t){return e[18]?0:1}return n=l(e),r=s[n]=a[n](e),{c(){t=SA("span"),r.c(),RA(t,"slot","label"),RA(t,"class",i=CD(["PinturaButtonInner",e[18]&&"PinturaComboBox",e[4]]))},m(e,r){wA(e,t,r),s[n].m(t,null),o=!0},p(e,c){let u=n;n=l(e),n===u?s[n].p(e,c):(yO(),xO(s[u],1,1,(()=>{s[u]=null})),vO(),r=s[n],r?r.p(e,c):(r=s[n]=a[n](e),r.c()),bO(r,1),r.m(t,null)),(!o||262160&c[0]&&i!==(i=CD(["PinturaButtonInner",e[18]&&"PinturaComboBox",e[4]])))&&RA(t,"class",i)},i(e){o||(bO(r),o=!0)},o(e){xO(r),o=!1},d(e){e&&$A(t),s[n].d()}}}function wj(e){let t,n,r=e[32].label+"";return{c(){t=SA("span"),n=CA(r),RA(t,"slot","group")},m(e,r){wA(e,t,r),vA(t,n)},p(e,t){2&t[1]&&r!==(r=e[32].label+"")&&OA(n,r)},d(e){e&&$A(t)}}}function $j(e){let t,n;return t=new eF({props:{style:TE(e[14])?e[14](e[32].value):e[14],$$slots:{default:[Sj]},$$scope:{ctx:e}}}),{c(){PO(t.$$.fragment)},m(e,r){RO(t,e,r),n=!0},p(e,n){const r={};16384&n[0]|2&n[1]&&(r.style=TE(e[14])?e[14](e[32].value):e[14]),1073741824&n[0]|2&n[1]&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(bO(t.$$.fragment,e),n=!0)},o(e){xO(t.$$.fragment,e),n=!1},d(e){MO(t,e)}}}function Sj(e){let t,n=e[32].icon+"";return{c(){t=_A("g")},m(e,r){wA(e,t,r),t.innerHTML=n},p(e,r){2&r[1]&&n!==(n=e[32].icon+"")&&(t.innerHTML=n)},d(e){e&&$A(t)}}}function _j(e){let t,n,r,i,o,a,s,l=e[32].label+"",c=e[32].sublabel&&Cj(e);return{c(){t=SA("span"),n=new FA(!1),r=kA(),c&&c.c(),n.a=r,RA(t,"class",i=CD(["PinturaDropdownOptionLabel",e[11]]))},m(i,u){wA(i,t,u),n.m(l,t),vA(t,r),c&&c.m(t,null),a||(s=dA(o=OD.call(null,t,TE(e[15])?e[15](e[32].value):e[15])),a=!0)},p(e,r){2&r[1]&&l!==(l=e[32].label+"")&&n.p(l),e[32].sublabel?c?c.p(e,r):(c=Cj(e),c.c(),c.m(t,null)):c&&(c.d(1),c=null),2048&r[0]&&i!==(i=CD(["PinturaDropdownOptionLabel",e[11]]))&&RA(t,"class",i),o&&ZM(o.update)&&32768&r[0]|2&r[1]&&o.update.call(null,TE(e[15])?e[15](e[32].value):e[15])},d(e){e&&$A(t),c&&c.d(),a=!1,s()}}}function Cj(e){let t,n=e[32].sublabel+"";return{c(){t=SA("span"),RA(t,"class","PinturaDropdownOptionSublabel")},m(e,r){wA(e,t,r),t.innerHTML=n},p(e,r){2&r[1]&&n!==(n=e[32].sublabel+"")&&(t.innerHTML=n)},d(e){e&&$A(t)}}}function kj(e){let t,n,r,i=e[32].icon&&$j(e),o=!e[32].hideLabel&&_j(e);return{c(){t=SA("span"),i&&i.c(),n=kA(),o&&o.c(),RA(t,"slot","option")},m(e,a){wA(e,t,a),i&&i.m(t,null),vA(t,n),o&&o.m(t,null),r=!0},p(e,r){e[32].icon?i?(i.p(e,r),2&r[1]&&bO(i,1)):(i=$j(e),i.c(),bO(i,1),i.m(t,n)):i&&(yO(),xO(i,1,1,(()=>{i=null})),vO()),e[32].hideLabel?o&&(o.d(1),o=null):o?o.p(e,r):(o=_j(e),o.c(),o.m(t,null))},i(e){r||(bO(i),r=!0)},o(e){xO(i),r=!1},d(e){e&&$A(t),i&&i.d(),o&&o.d()}}}function Ej(e){let t,n,r,i,o,a;const s=e[28].controls,l=rA(s,e,e[30],mj);return r=new cj({props:{class:"PinturaOptionsList PinturaScrollableContent",name:e[7],value:e[10],selectedIndex:e[9],optionFilter:e[12],optionMapper:e[13],optionLabelClass:CD(["PinturaDropdownOptionLabel",e[11]]),optionGroupClass:"PinturaListOptionGroup",optionClass:"PinturaListOption",options:e[19],onchange:e[22],$$slots:{option:[kj,e=>{let{option:t}=e;return{32:t}},e=>{let{option:t}=e;return[0,t?2:0]}],group:[wj,e=>{let{option:t}=e;return{32:t}},e=>{let{option:t}=e;return[0,t?2:0]}]},$$scope:{ctx:e}}}),{c(){t=SA("div"),l&&l.c(),n=kA(),PO(r.$$.fragment),RA(t,"slot","details"),RA(t,"class","PinturaOptionsListWrapper")},m(s,c){wA(s,t,c),l&&l.m(t,null),vA(t,n),RO(r,t,null),i=!0,o||(a=TA(t,"keydown",e[24]),o=!0)},p(e,t){l&&l.p&&(!i||1073741824&t[0])&&aA(l,s,e,e[30],i?oA(s,e[30],t,fj):sA(e[30]),mj);const n={};128&t[0]&&(n.name=e[7]),1024&t[0]&&(n.value=e[10]),512&t[0]&&(n.selectedIndex=e[9]),4096&t[0]&&(n.optionFilter=e[12]),8192&t[0]&&(n.optionMapper=e[13]),2048&t[0]&&(n.optionLabelClass=CD(["PinturaDropdownOptionLabel",e[11]])),524288&t[0]&&(n.options=e[19]),1073793024&t[0]|2&t[1]&&(n.$$scope={dirty:t,ctx:e}),r.$set(n)},i(e){i||(bO(l,e),bO(r.$$.fragment,e),i=!0)},o(e){xO(l,e),xO(r.$$.fragment,e),i=!1},d(e){e&&$A(t),l&&l.d(e),MO(r),o=!1,a()}}}function Tj(e){let t,n,r;function i(t){e[29](t)}let o={onshow:e[23],buttonTitle:nF(e[2],e[1]),buttonClass:CD(["PinturaDropdownButton",e[0],e[5]&&"PinturaDropdownIconOnly"]),buttonOnClick:e[16],$$slots:{details:[Ej],label:[xj]},$$scope:{ctx:e}};return void 0!==e[20]&&(o.isActive=e[20]),t=new TF({props:o}),eO.push((()=>IO(t,"isActive",i))),{c(){PO(t.$$.fragment)},m(e,n){RO(t,e,n),r=!0},p(e,r){const i={};6&r[0]&&(i.buttonTitle=nF(e[2],e[1])),33&r[0]&&(i.buttonClass=CD(["PinturaDropdownButton",e[0],e[5]&&"PinturaDropdownIconOnly"])),65536&r[0]&&(i.buttonOnClick=e[16]),1076822012&r[0]&&(i.$$scope={dirty:r,ctx:e}),!n&&1048576&r[0]&&(n=!0,i.isActive=e[20],lO((()=>n=!1))),t.$set(i)},i(e){r||(bO(t.$$.fragment,e),r=!0)},o(e){xO(t.$$.fragment,e),r=!1},d(e){MO(t,e)}}}const Ij=(e,t)=>{let[n]=t;return n<e?n:e},Pj=(e,t)=>{let[n]=t;return n>e?n:e};function Rj(e,t,n){let r,i,o,{$$slots:a={},$$scope:s}=t,{class:l}=t,{title:c}=t,{label:u}=t,{labelClass:d}=t,{innerClass:p}=t,{hideLabel:h=!1}=t,{icon:f}=t,{name:m}=t,{options:g=[]}=t,{selectedIndex:y=-1}=t,{value:v}=t,{optionLabelClass:b}=t,{optionFilter:x}=t,{optionMapper:w}=t,{optionIconStyle:$}=t,{optionLabelStyle:S}=t,{locale:_}=t,{onclick:C}=t,{onchange:k=eE}=t,{onload:E=eE}=t,{ondestroy:T=eE}=t,{enableInput:I=!1}=t;return qA((()=>E({options:g}))),KA((()=>T({options:g}))),e.$$set=e=>{"class"in e&&n(0,l=e.class),"title"in e&&n(1,c=e.title),"label"in e&&n(2,u=e.label),"labelClass"in e&&n(3,d=e.labelClass),"innerClass"in e&&n(4,p=e.innerClass),"hideLabel"in e&&n(5,h=e.hideLabel),"icon"in e&&n(6,f=e.icon),"name"in e&&n(7,m=e.name),"options"in e&&n(8,g=e.options),"selectedIndex"in e&&n(9,y=e.selectedIndex),"value"in e&&n(10,v=e.value),"optionLabelClass"in e&&n(11,b=e.optionLabelClass),"optionFilter"in e&&n(12,x=e.optionFilter),"optionMapper"in e&&n(13,w=e.optionMapper),"optionIconStyle"in e&&n(14,$=e.optionIconStyle),"optionLabelStyle"in e&&n(15,S=e.optionLabelStyle),"locale"in e&&n(25,_=e.locale),"onclick"in e&&n(16,C=e.onclick),"onchange"in e&&n(17,k=e.onchange),"onload"in e&&n(26,E=e.onload),"ondestroy"in e&&n(27,T=e.ondestroy),"enableInput"in e&&n(18,I=e.enableInput),"$$scope"in e&&n(30,s=e.$$scope)},e.$$.update=()=>{33554688&e.$$.dirty[0]&&n(19,r=_?DF(g,_):g),525312&e.$$.dirty[0]&&n(21,i=r.reduce(((e,t)=>{if(e)return e;const n=Array.isArray(t)?t:[t,t],[r,i]=n;return FF(r,v)?i:void 0}),void 0)||(e=>{const t=e.find((e=>void 0===e[0]));if(t)return t[1]})(r)||v)},[l,c,u,d,p,h,f,m,g,y,v,b,x,w,$,S,C,k,I,r,o,i,e=>{n(21,i=e.value),k(e),n(20,o=!1)},e=>{let{e:t,panel:n}=e;if(t&&t.key&&/up|down/i.test(t.key))return mF(n.querySelector("input:not([disabled])"));mF(n.querySelector("fieldset"))},e=>{/tab/i.test(e.key)&&e.preventDefault()},_,E,T,a,function(e){o=e,n(20,o)},s]}class Mj extends OO{constructor(e){super(),AO(this,e,Rj,Tj,XM,{class:0,title:1,label:2,labelClass:3,innerClass:4,hideLabel:5,icon:6,name:7,options:8,selectedIndex:9,value:10,optionLabelClass:11,optionFilter:12,optionMapper:13,optionIconStyle:14,optionLabelStyle:15,locale:25,onclick:16,onchange:17,onload:26,ondestroy:27,enableInput:18},null,[-1,-1])}}function Aj(e){let t;return{c(){t=SA("div"),RA(t,"slot","details")},m(n,r){wA(n,t,r),e[14](t)},p:VM,d(n){n&&$A(t),e[14](null)}}}function Oj(e){let t,n,r;function i(t){e[15](t)}let o={buttonLabel:e[0],buttonClass:e[1],buttonIcon:e[2],buttonHideLabel:e[3],buttonTitle:e[4],buttonLabelClass:e[5],onshow:e[6],onhide:e[7],$$slots:{details:[Aj]},$$scope:{ctx:e}};return void 0!==e[9]&&(o.isActive=e[9]),t=new TF({props:o}),eO.push((()=>IO(t,"isActive",i))),{c(){PO(t.$$.fragment)},m(e,n){RO(t,e,n),r=!0},p(e,r){let[i]=r;const o={};1&i&&(o.buttonLabel=e[0]),2&i&&(o.buttonClass=e[1]),4&i&&(o.buttonIcon=e[2]),8&i&&(o.buttonHideLabel=e[3]),16&i&&(o.buttonTitle=e[4]),32&i&&(o.buttonLabelClass=e[5]),64&i&&(o.onshow=e[6]),128&i&&(o.onhide=e[7]),65792&i&&(o.$$scope={dirty:i,ctx:e}),!n&&512&i&&(n=!0,o.isActive=e[9],lO((()=>n=!1))),t.$set(o)},i(e){r||(bO(t.$$.fragment,e),r=!0)},o(e){xO(t.$$.fragment,e),r=!1},d(e){MO(t,e)}}}function Lj(e,t,n){let r,{buttonLabel:i}=t,{buttonClass:o}=t,{buttonIcon:a}=t,{buttonHideLabel:s}=t,{buttonTitle:l}=t,{buttonLabelClass:c}=t,{root:u}=t,{ondestroy:d=eE}=t,{onshow:p=eE}=t,{onhide:h=eE}=t,f=!1;return KA(d),e.$$set=e=>{"buttonLabel"in e&&n(0,i=e.buttonLabel),"buttonClass"in e&&n(1,o=e.buttonClass),"buttonIcon"in e&&n(2,a=e.buttonIcon),"buttonHideLabel"in e&&n(3,s=e.buttonHideLabel),"buttonTitle"in e&&n(4,l=e.buttonTitle),"buttonLabelClass"in e&&n(5,c=e.buttonLabelClass),"root"in e&&n(10,u=e.root),"ondestroy"in e&&n(11,d=e.ondestroy),"onshow"in e&&n(6,p=e.onshow),"onhide"in e&&n(7,h=e.onhide)},e.$$.update=()=>{1280&e.$$.dirty&&r&&u&&r.firstChild!==u&&(r.hasChildNodes()?r.replaceChild(u,r.firstChild):r.append(u))},[i,o,a,s,l,c,p,h,r,f,u,d,()=>n(9,f=!1),()=>n(9,f=!0),function(e){eO[e?"unshift":"push"]((()=>{r=e,n(8,r)}))},function(e){f=e,n(9,f)}]}class Nj extends OO{constructor(e){super(),AO(this,e,Lj,Oj,XM,{buttonLabel:0,buttonClass:1,buttonIcon:2,buttonHideLabel:3,buttonTitle:4,buttonLabelClass:5,root:10,ondestroy:11,onshow:6,onhide:7,hide:12,show:13})}get hide(){return this.$$.ctx[12]}get show(){return this.$$.ctx[13]}}var Dj=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{direction:n,shiftMultiplier:r=10,bubbles:i=!1,preventDefault:o=!1,stopKeydownPropagation:a=!0}=t,s="horizontal"===n,l="vertical"===n,c=t=>{const{key:n}=t,c=t.shiftKey,u=/up|down/i.test(n),d=/left|right/i.test(n);if(!d&&!u)return;if(s&&u)return;if(l&&d)return;const p=c?r:1;a&&t.stopPropagation(),o&&t.preventDefault(),e.dispatchEvent(new CustomEvent("nudge",{bubbles:i,detail:hT((/left/i.test(n)?-1:/right/i.test(n)?1:0)*p,(/up/i.test(n)?-1:/down/i.test(n)?1:0)*p)}))};return e.addEventListener("keydown",c),{destroy(){e.removeEventListener("keydown",c)}}},Fj=(e,t,n)=>(e-t)/(n-t);const jj=e=>({}),zj=e=>({});function Bj(e){let t,n,r;return{c(){t=SA("label"),n=CA(e[0]),RA(t,"for",e[17]),RA(t,"class",r=e[1]?"implicit":void 0)},m(e,r){wA(e,t,r),vA(t,n)},p(e,i){1&i[0]&&OA(n,e[0]),131072&i[0]&&RA(t,"for",e[17]),2&i[0]&&r!==(r=e[1]?"implicit":void 0)&&RA(t,"class",r)},d(e){e&&$A(t)}}}function Uj(e){let t,n,r,i,o,a,s,l;return n=new eF({props:{$$slots:{default:[Wj]},$$scope:{ctx:e}}}),o=new eF({props:{$$slots:{default:[Vj]},$$scope:{ctx:e}}}),{c(){t=SA("button"),PO(n.$$.fragment),r=kA(),i=SA("button"),PO(o.$$.fragment),RA(t,"type","button"),RA(t,"aria-label","Increase"),RA(i,"type","button"),RA(i,"aria-label","Decrease")},m(c,u){wA(c,t,u),RO(n,t,null),wA(c,r,u),wA(c,i,u),RO(o,i,null),a=!0,s||(l=[TA(t,"pointerdown",e[20](1)),TA(i,"pointerdown",e[20](-1))],s=!0)},p(e,t){const r={};256&t[1]&&(r.$$scope={dirty:t,ctx:e}),n.$set(r);const i={};256&t[1]&&(i.$$scope={dirty:t,ctx:e}),o.$set(i)},i(e){a||(bO(n.$$.fragment,e),bO(o.$$.fragment,e),a=!0)},o(e){xO(n.$$.fragment,e),xO(o.$$.fragment,e),a=!1},d(e){e&&$A(t),MO(n),e&&$A(r),e&&$A(i),MO(o),s=!1,YM(l)}}}function Wj(e){let t;return{c(){t=_A("path"),RA(t,"d","M8 12 h8 M12 8 v8")},m(e,n){wA(e,t,n)},p:VM,d(e){e&&$A(t)}}}function Vj(e){let t;return{c(){t=_A("path"),RA(t,"d","M9 12 h6")},m(e,n){wA(e,t,n)},p:VM,d(e){e&&$A(t)}}}function Hj(e){let t,n,r,i,o,a,s,l,c,u,d,p,h,f,m,g,y=e[0]&&Bj(e);const v=e[37].default,b=rA(v,e,e[39],null),x=e[37].knob,w=rA(x,e,e[39],zj);let $=e[8]&&Uj(e);return{c(){t=SA("div"),n=SA("div"),y&&y.c(),r=kA(),i=SA("input"),o=kA(),a=SA("div"),b&&b.c(),l=kA(),c=SA("div"),u=SA("div"),w&&w.c(),p=kA(),$&&$.c(),RA(i,"type","range"),RA(i,"id",e[17]),RA(i,"min",e[2]),RA(i,"max",e[3]),RA(i,"step",e[4]),i.value=e[13],NA(i,"pointer-events",e[9]?"none":void 0),RA(a,"class",s=CD(["PinturaSliderTrack",e[5]])),RA(u,"class",d=CD(["PinturaSliderKnob",e[6]])),RA(c,"class","PinturaSliderKnobController"),NA(c,"transform",e[16]),RA(n,"class","PinturaSliderControl"),NA(n,"--slider-position",Math.round(e[14])),RA(t,"class",h=CD(["PinturaSlider",e[11]])),RA(t,"data-direction",e[7])},m(s,d){wA(s,t,d),vA(t,n),y&&y.m(n,null),vA(n,r),vA(n,i),e[38](i),vA(n,o),vA(n,a),b&&b.m(a,null),vA(n,l),vA(n,c),vA(c,u),w&&w.m(u,null),vA(t,p),$&&$.m(t,null),f=!0,m||(g=[TA(i,"input",e[18]),TA(i,"nudge",e[19]),dA(Dj.call(null,i)),TA(n,"pointerdown",(function(){ZM(e[10]&&e[12])&&(e[10]&&e[12]).apply(this,arguments)}))],m=!0)},p(o,l){(e=o)[0]?y?y.p(e,l):(y=Bj(e),y.c(),y.m(n,r)):y&&(y.d(1),y=null),(!f||131072&l[0])&&RA(i,"id",e[17]),(!f||4&l[0])&&RA(i,"min",e[2]),(!f||8&l[0])&&RA(i,"max",e[3]),(!f||16&l[0])&&RA(i,"step",e[4]),(!f||8192&l[0])&&(i.value=e[13]),512&l[0]&&NA(i,"pointer-events",e[9]?"none":void 0),b&&b.p&&(!f||256&l[1])&&aA(b,v,e,e[39],f?oA(v,e[39],l,null):sA(e[39]),null),(!f||32&l[0]&&s!==(s=CD(["PinturaSliderTrack",e[5]])))&&RA(a,"class",s),w&&w.p&&(!f||256&l[1])&&aA(w,x,e,e[39],f?oA(x,e[39],l,jj):sA(e[39]),zj),(!f||64&l[0]&&d!==(d=CD(["PinturaSliderKnob",e[6]])))&&RA(u,"class",d),65536&l[0]&&NA(c,"transform",e[16]),16384&l[0]&&NA(n,"--slider-position",Math.round(e[14])),e[8]?$?($.p(e,l),256&l[0]&&bO($,1)):($=Uj(e),$.c(),bO($,1),$.m(t,null)):$&&(yO(),xO($,1,1,(()=>{$=null})),vO()),(!f||2048&l[0]&&h!==(h=CD(["PinturaSlider",e[11]])))&&RA(t,"class",h),(!f||128&l[0])&&RA(t,"data-direction",e[7])},i(e){f||(bO(b,e),bO(w,e),bO($),f=!0)},o(e){xO(b,e),xO(w,e),xO($),f=!1},d(n){n&&$A(t),y&&y.d(),e[38](null),b&&b.d(n),w&&w.d(n),$&&$.d(),m=!1,YM(g)}}}function qj(e,t,n){let r,i,o,a,s,l,c,u,d,p,h,f,m,g,y,v,{$$slots:b={},$$scope:x}=t,{id:w}=t,{label:$}=t,{hideLabel:S=!1}=t,{min:_=0}=t,{max:C=100}=t,{step:k=1}=t,{value:E=0}=t,{valueMin:T}=t,{valueMax:I}=t,{trackClass:P}=t,{knobClass:R}=t,{ongrab:M=eE}=t,{onchange:A=eE}=t,{onrelease:O=eE}=t,{onexceed:L=eE}=t,{direction:N="x"}=t,{getValue:D=KE}=t,{setValue:F=KE}=t,{enableSpinButtons:j=!0}=t,{enableForceUseKnob:z=!1}=t,{enableStopPropagation:B=!0}=t,{enablePointerdownListener:U=!0}=t,{maxInteractionDistance:W=6}=t,{class:V}=t;const H=e=>F(((e,t)=>(t=1/t,Math.round(e*t)/t))(nL(e,_,C),k),E),q=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{grabbed:i=!1,released:a=!1}=r,s=H(_+e/t*o),l=T||_,c=I||C;n(21,E=hE(s)?s:nL(s,l,c)),v!==s&&(v=s,!hE(s)&&(s<l||s>c)&&L(E,s),E!==y&&(y=E,i&&M(E),A(E),a&&O(E)))};let G,K;const Y=e=>{const t=e[d]-g;q(m+t,f)},Z=e=>{K=setTimeout((()=>{f=void 0}),50),document.documentElement.removeEventListener("pointermove",Y),document.documentElement.removeEventListener("pointerup",Z),A(E),O(E)},X=()=>{n(21,E=H(i+J*k)),A(E)};let Q,J=1,ee=!1;const te=e=>{clearTimeout(Q),ee||X(),O(E),document.removeEventListener("pointerup",te)};return e.$$set=e=>{"id"in e&&n(22,w=e.id),"label"in e&&n(0,$=e.label),"hideLabel"in e&&n(1,S=e.hideLabel),"min"in e&&n(2,_=e.min),"max"in e&&n(3,C=e.max),"step"in e&&n(4,k=e.step),"value"in e&&n(21,E=e.value),"valueMin"in e&&n(23,T=e.valueMin),"valueMax"in e&&n(24,I=e.valueMax),"trackClass"in e&&n(5,P=e.trackClass),"knobClass"in e&&n(6,R=e.knobClass),"ongrab"in e&&n(25,M=e.ongrab),"onchange"in e&&n(26,A=e.onchange),"onrelease"in e&&n(27,O=e.onrelease),"onexceed"in e&&n(28,L=e.onexceed),"direction"in e&&n(7,N=e.direction),"getValue"in e&&n(29,D=e.getValue),"setValue"in e&&n(30,F=e.setValue),"enableSpinButtons"in e&&n(8,j=e.enableSpinButtons),"enableForceUseKnob"in e&&n(9,z=e.enableForceUseKnob),"enableStopPropagation"in e&&n(31,B=e.enableStopPropagation),"enablePointerdownListener"in e&&n(10,U=e.enablePointerdownListener),"maxInteractionDistance"in e&&n(32,W=e.maxInteractionDistance),"class"in e&&n(11,V=e.class),"$$scope"in e&&n(39,x=e.$$scope)},e.$$.update=()=>{4194305&e.$$.dirty[0]&&n(17,r=w||($?"PinturaSlider_"+ME():void 0)),538968064&e.$$.dirty[0]&&n(13,i=void 0!==E?D(E):0),12&e.$$.dirty[0]&&(o=C-_),8204&e.$$.dirty[0]&&n(34,a=Fj(i,_,C)),8&e.$$.dirty[1]&&n(14,s=100*a),128&e.$$.dirty[0]&&n(35,l=N.toUpperCase()),128&e.$$.dirty[0]&&n(36,c="x"===N?"Width":"Height"),32&e.$$.dirty[1]&&(u="offset"+c),16&e.$$.dirty[1]&&(d="page"+l),16384&e.$$.dirty[0]|16&e.$$.dirty[1]&&n(16,p=`translate${l}(${s}%)`)},[$,S,_,C,k,P,R,N,j,z,U,V,e=>{clearTimeout(K);let t=!1;B&&e.stopPropagation(),clearTimeout(G);const n=h.getBoundingClientRect();if(f=h[u],g=e[d],m=g-n[N],z){if(Math.abs(m-a*f)>W)return;t=!0,e.stopPropagation()}return document.activeElement!==h&&h.focus(),q(m,f,{grabbed:!0}),document.documentElement.addEventListener("pointermove",Y),document.documentElement.addEventListener("pointerup",Z),t},i,s,h,p,r,e=>{f||(n(21,E=F(parseFloat(e.target.value))),E!==y&&(y=E,A(E)))},e=>{const t=h[u];q(i/o*t+e.detail[N],t),clearTimeout(G),G=setTimeout((()=>{O(E)}),250)},e=>t=>{clearTimeout(G),J=e,ee=!1,Q=setInterval((()=>{ee=!0,X()}),100),document.addEventListener("pointercancel",te),document.addEventListener("pointerup",te)},E,w,T,I,M,A,O,L,D,F,B,W,e=>{const t=h.getBoundingClientRect(),n=e[d]-t[N],r=h[u];return Math.abs(n-a*r)},a,l,c,b,function(e){eO[e?"unshift":"push"]((()=>{h=e,n(15,h)}))},x]}class Gj extends OO{constructor(e){super(),AO(this,e,qj,Hj,XM,{id:22,label:0,hideLabel:1,min:2,max:3,step:4,value:21,valueMin:23,valueMax:24,trackClass:5,knobClass:6,ongrab:25,onchange:26,onrelease:27,onexceed:28,direction:7,getValue:29,setValue:30,enableSpinButtons:8,enableForceUseKnob:9,enableStopPropagation:31,enablePointerdownListener:10,maxInteractionDistance:32,class:11,eventDistanceToKnob:33,handlePointerDown:12},null,[-1,-1])}get eventDistanceToKnob(){return this.$$.ctx[33]}get handlePointerDown(){return this.$$.ctx[12]}}function Kj(e){let t,n;return t=new eF({props:{class:"PinturaButtonIcon",$$slots:{default:[Yj]},$$scope:{ctx:e}}}),{c(){PO(t.$$.fragment)},m(e,r){RO(t,e,r),n=!0},p(e,n){const r={};1048580&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(bO(t.$$.fragment,e),n=!0)},o(e){xO(t.$$.fragment,e),n=!1},d(e){MO(t,e)}}}function Yj(e){let t;return{c(){t=_A("g")},m(n,r){wA(n,t,r),t.innerHTML=e[2]},p(e,n){4&n&&(t.innerHTML=e[2])},d(e){e&&$A(t)}}}function Zj(e){let t,n,r=LF(e[8],e[6])+"";return{c(){t=SA("span"),n=CA(r),RA(t,"class","PinturaButtonLabelPrefix")},m(e,r){wA(e,t,r),vA(t,n)},p(e,t){320&t&&r!==(r=LF(e[8],e[6])+"")&&OA(n,r)},d(e){e&&$A(t)}}}function Xj(e){let t,n,r,i,o,a,s,l,c,u=e[2]&&Kj(e),d=e[8]&&Zj(e);return{c(){t=SA("span"),u&&u.c(),n=kA(),d&&d.c(),r=kA(),i=SA("span"),o=CA(e[9]),RA(i,"class",a=CD(["PinturaButtonLabel",e[3],e[5]&&"implicit"])),RA(t,"slot","label"),RA(t,"title",s=LF(e[1],e[6])),RA(t,"class",l=CD(["PinturaButtonInner",e[4]]))},m(e,a){wA(e,t,a),u&&u.m(t,null),vA(t,n),d&&d.m(t,null),vA(t,r),vA(t,i),vA(i,o),c=!0},p(e,p){e[2]?u?(u.p(e,p),4&p&&bO(u,1)):(u=Kj(e),u.c(),bO(u,1),u.m(t,n)):u&&(yO(),xO(u,1,1,(()=>{u=null})),vO()),e[8]?d?d.p(e,p):(d=Zj(e),d.c(),d.m(t,r)):d&&(d.d(1),d=null),(!c||512&p)&&OA(o,e[9]),(!c||40&p&&a!==(a=CD(["PinturaButtonLabel",e[3],e[5]&&"implicit"])))&&RA(i,"class",a),(!c||66&p&&s!==(s=LF(e[1],e[6])))&&RA(t,"title",s),(!c||16&p&&l!==(l=CD(["PinturaButtonInner",e[4]])))&&RA(t,"class",l)},i(e){c||(bO(u),c=!0)},o(e){xO(u),c=!1},d(e){e&&$A(t),u&&u.d(),d&&d.d()}}}function Qj(e){let t,n,r,i,o;const a=[{label:LF(e[1],e[6])},{hideLabel:!0},e[12],{value:e[7]},{onchange:e[11]}];let s={};for(let l=0;l<a.length;l+=1)s=qM(s,a[l]);return n=new Gj({props:s}),{c(){t=SA("div"),PO(n.$$.fragment),RA(t,"slot","details")},m(a,s){wA(a,t,s),RO(n,t,null),r=!0,i||(o=TA(t,"keydown",e[10]),i=!0)},p(e,t){const r=6338&t?EO(a,[66&t&&{label:LF(e[1],e[6])},a[1],4096&t&&TO(e[12]),128&t&&{value:e[7]},2048&t&&{onchange:e[11]}]):{};n.$set(r)},i(e){r||(bO(n.$$.fragment,e),r=!0)},o(e){xO(n.$$.fragment,e),r=!1},d(e){e&&$A(t),MO(n),i=!1,o()}}}function Jj(e){let t,n;return t=new TF({props:{panelClass:"PinturaSliderPanel",buttonClass:CD(["PinturaSliderButton",e[0],e[5]&&"PinturaSliderIconOnly"]),$$slots:{details:[Qj],label:[Xj]},$$scope:{ctx:e}}}),{c(){PO(t.$$.fragment)},m(e,r){RO(t,e,r),n=!0},p(e,n){let[r]=n;const i={};33&r&&(i.buttonClass=CD(["PinturaSliderButton",e[0],e[5]&&"PinturaSliderIconOnly"])),1053694&r&&(i.$$scope={dirty:r,ctx:e}),t.$set(i)},i(e){n||(bO(t.$$.fragment,e),n=!0)},o(e){xO(t.$$.fragment,e),n=!1},d(e){MO(t,e)}}}function ez(e,t,n){const r=["class","title","label","icon","labelClass","innerClass","hideLabel","locale","value","onchange","labelPrefix"];let i=cA(t,r),{class:o}=t,{title:a}=t,{label:s=Math.round}=t,{icon:l}=t,{labelClass:c}=t,{innerClass:u}=t,{hideLabel:d=!1}=t,{locale:p}=t,{value:h}=t,{onchange:f=eE}=t,{labelPrefix:m}=t;const{min:g,max:y,getValue:v=KE}=i;let b;const x=e=>n(9,b=(e=>TE(s)?s(v(e),g,y,e):s)(e));return e.$$set=e=>{t=qM(qM({},t),lA(e)),n(12,i=cA(t,r)),"class"in e&&n(0,o=e.class),"title"in e&&n(1,a=e.title),"label"in e&&n(13,s=e.label),"icon"in e&&n(2,l=e.icon),"labelClass"in e&&n(3,c=e.labelClass),"innerClass"in e&&n(4,u=e.innerClass),"hideLabel"in e&&n(5,d=e.hideLabel),"locale"in e&&n(6,p=e.locale),"value"in e&&n(7,h=e.value),"onchange"in e&&n(14,f=e.onchange),"labelPrefix"in e&&n(8,m=e.labelPrefix)},e.$$.update=()=>{8320&e.$$.dirty&&x(h)},[o,a,l,c,u,d,p,h,m,b,e=>{/tab/i.test(e.key)&&e.preventDefault()},e=>{x(e),f(e)},i,s,f]}class tz extends OO{constructor(e){super(),AO(this,e,ez,Jj,XM,{class:0,title:1,label:13,icon:2,labelClass:3,innerClass:4,hideLabel:5,locale:6,value:7,onchange:14,labelPrefix:8})}}function nz(e){let t,n,r,i,o,a,s,l;return{c(){t=SA("span"),n=_A("svg"),r=_A("g"),i=_A("circle"),o=_A("circle"),a=kA(),s=SA("span"),l=CA(e[3]),RA(i,"class","PinturaProgressIndicatorBar"),RA(i,"r","8.5"),RA(i,"cx","10"),RA(i,"cy","10"),RA(i,"stroke-linecap","round"),RA(i,"opacity",".25"),RA(o,"class","PinturaProgressIndicatorFill"),RA(o,"r","8.5"),RA(o,"stroke-dasharray",e[2]),RA(o,"cx","10"),RA(o,"cy","10"),RA(o,"transform","rotate(-90) translate(-20)"),RA(r,"fill","none"),RA(r,"stroke","currentColor"),RA(r,"stroke-width","2.5"),RA(r,"stroke-linecap","round"),RA(r,"opacity",e[1]),RA(n,"width","20"),RA(n,"height","20"),RA(n,"viewBox","0 0 20 20"),RA(n,"xmlns","http://www.w3.org/2000/svg"),RA(n,"aria-hidden","true"),RA(n,"focusable","false"),RA(s,"class","implicit"),RA(t,"class","PinturaProgressIndicator"),RA(t,"data-status",e[0]),NA(t,"opacity",e[4])},m(e,c){wA(e,t,c),vA(t,n),vA(n,r),vA(r,i),vA(r,o),vA(t,a),vA(t,s),vA(s,l)},p(e,n){let[i]=n;4&i&&RA(o,"stroke-dasharray",e[2]),2&i&&RA(r,"opacity",e[1]),8&i&&OA(l,e[3]),1&i&&RA(t,"data-status",e[0]),16&i&&NA(t,"opacity",e[4])},i:VM,o:VM,d(e){e&&$A(t)}}}function rz(e,t,n){let r,i,o,a,s,l,c,u;const d=YA();let{progress:p}=t,{min:h=0}=t,{max:f=100}=t,{labelBusy:m="Busy"}=t,{opacity:g}=t;const y=XA("isAnimated");nA(e,y,(e=>n(14,s=e)));const v=XN(g,{precision:.01});nA(e,v,(e=>n(4,u=e)));const b=XN(0,{precision:.01}),x=XN(0,{precision:.01});nA(e,x,(e=>n(15,l=e)));const w=FO([b],(e=>nL(e,h,f)));nA(e,w,(e=>n(16,c=e)));const $=w.subscribe((e=>{1===p&&Math.round(e)>=100&&d("complete")}));return qA((()=>{x.set(1,{hard:!s})})),KA((()=>{$()})),e.$$set=e=>{"progress"in e&&n(9,p=e.progress),"min"in e&&n(10,h=e.min),"max"in e&&n(11,f=e.max),"labelBusy"in e&&n(12,m=e.labelBusy),"opacity"in e&&n(13,g=e.opacity)},e.$$.update=()=>{24576&e.$$.dirty&&RP(g)&&v.set(g,{hard:!s}),16896&e.$$.dirty&&p&&p!==1/0&&b.set(100*p,{hard:!s}),70144&e.$$.dirty&&n(3,r=p===1/0?m:Math.round(c)+"%"),66048&e.$$.dirty&&n(2,i=p===1/0?"26.5 53":c/100*53+" 53"),32768&e.$$.dirty&&n(1,o=l),512&e.$$.dirty&&n(0,a=p===1/0?"busy":"loading")},[a,o,i,r,u,y,v,x,w,p,h,f,m,g,s,l,c]}class iz extends OO{constructor(e){super(),AO(this,e,rz,nz,XM,{progress:9,min:10,max:11,labelBusy:12,opacity:13})}}function oz(e){let t,n,r=LF(e[0],e[1])+"";return{c(){t=SA("span"),n=CA(r),RA(t,"class",e[3])},m(e,r){wA(e,t,r),vA(t,n)},p(e,i){3&i&&r!==(r=LF(e[0],e[1])+"")&&OA(n,r),8&i&&RA(t,"class",e[3])},d(e){e&&$A(t)}}}function az(e){let t,n,r,i,o=e[0]&&oz(e);return r=new Hz({props:{items:e[2]}}),{c(){t=SA("li"),o&&o.c(),n=kA(),PO(r.$$.fragment),RA(t,"class","PinturaShapeStyle")},m(e,a){wA(e,t,a),o&&o.m(t,null),vA(t,n),RO(r,t,null),i=!0},p(e,i){let[a]=i;e[0]?o?o.p(e,a):(o=oz(e),o.c(),o.m(t,n)):o&&(o.d(1),o=null);const s={};4&a&&(s.items=e[2]),r.$set(s)},i(e){i||(bO(r.$$.fragment,e),i=!0)},o(e){xO(r.$$.fragment,e),i=!1},d(e){e&&$A(t),o&&o.d(),MO(r)}}}function sz(e,t,n){let r,{title:i}=t,{locale:o}=t,{items:a}=t,{hideTitle:s=!1}=t;return e.$$set=e=>{"title"in e&&n(0,i=e.title),"locale"in e&&n(1,o=e.locale),"items"in e&&n(2,a=e.items),"hideTitle"in e&&n(4,s=e.hideTitle)},e.$$.update=()=>{16&e.$$.dirty&&n(3,r="PinturaShapeStyleLabel"+(s?" implicit":""))},[i,o,a,r,s]}class lz extends OO{constructor(e){super(),AO(this,e,sz,az,XM,{title:0,locale:1,items:2,hideTitle:4})}}var cz=(e,t,n)=>{let r,i,o;const a=Math.floor(6*e),s=6*e-a,l=n*(1-t),c=n*(1-s*t),u=n*(1-(1-s)*t);switch(a%6){case 0:r=n,i=u,o=l;break;case 1:r=c,i=n,o=l;break;case 2:r=l,i=n,o=u;break;case 3:r=l,i=c,o=n;break;case 4:r=u,i=l,o=n;break;case 5:r=n,i=l,o=c}return[r,i,o]};function uz(e){let t,n;return{c(){t=SA("div"),n=SA("span"),RA(t,"class","PinturaColorPreview"),RA(t,"title",e[0]),NA(t,"--color",e[1])},m(e,r){wA(e,t,r),vA(t,n)},p(e,n){let[r]=n;1&r&&RA(t,"title",e[0]),2&r&&NA(t,"--color",e[1])},i:VM,o:VM,d(e){e&&$A(t)}}}function dz(e,t,n){let r,{color:i}=t,{title:o}=t;return e.$$set=e=>{"color"in e&&n(2,i=e.color),"title"in e&&n(0,o=e.title)},e.$$.update=()=>{4&e.$$.dirty&&n(1,r=i?UP(i):"transparent")},[o,r,i]}class pz extends OO{constructor(e){super(),AO(this,e,dz,uz,XM,{color:2,title:0})}}var hz=e=>(e=e.trim(),/^rgba/.test(e)?e.substring(5).split(",").map(parseFloat).map(((e,t)=>e/(3===t?1:255))):/^rgb/.test(e)?e.substring(4).split(",").map(parseFloat).map((e=>e/255)):/^#/.test(e)?(e=>{const[,t,n,r,i]=e.split("");e=e.length>=4&&e.length<=5?`#${t}${t}${n}${n}${r}${r}${i?`${i}${i}`:""}`:e;const[o,a,s,l,c]=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})?$/i.exec(e)||[];if(o)return[a,s,l,c].filter((e=>void 0!==e)).map((e=>parseInt(e,16)/255))})(e):/[0-9]{1,3}\s?,\s?[0-9]{1,3}\s?,\s?[0-9]{1,3}/.test(e)?e.split(",").map((e=>parseInt(e,10))).map((e=>e/255)):void 0);let fz=null;function mz(e){let t,n;return{c(){t=SA("span"),n=CA(e[0])},m(e,r){wA(e,t,r),vA(t,n)},p(e,t){1&t[0]&&OA(n,e[0])},d(e){e&&$A(t)}}}function gz(e){let t,n,r,i;n=new pz({props:{color:e[4],title:LF(e[8],e[10])}});let o=!e[9]&&mz(e);return{c(){t=SA("span"),PO(n.$$.fragment),r=kA(),o&&o.c(),RA(t,"slot","label"),RA(t,"class","PinturaButtonLabel")},m(e,a){wA(e,t,a),RO(n,t,null),vA(t,r),o&&o.m(t,null),i=!0},p(e,r){const i={};16&r[0]&&(i.color=e[4]),1280&r[0]&&(i.title=LF(e[8],e[10])),n.$set(i),e[9]?o&&(o.d(1),o=null):o?o.p(e,r):(o=mz(e),o.c(),o.m(t,null))},i(e){i||(bO(n.$$.fragment,e),i=!0)},o(e){xO(n.$$.fragment,e),i=!1},d(e){e&&$A(t),MO(n),o&&o.d()}}}function yz(e){let t,n,r,i,o,a,s,l,c,u,d,p;s=new Gj({props:{label:"Hue",hideLabel:!0,class:"PinturaHuePicker",onchange:e[27],value:e[16],min:0,max:1,step:.01}});let h=e[11]&&vz(e),f=(e[14]||e[15])&&bz(e);return{c(){t=SA("div"),n=SA("div"),r=SA("div"),i=SA("div"),o=kA(),a=SA("div"),PO(s.$$.fragment),l=kA(),h&&h.c(),c=kA(),f&&f.c(),RA(i,"role","button"),RA(i,"aria-label","Saturation slider"),RA(i,"class","PinturaPickerKnob"),RA(i,"tabindex","0"),NA(i,"background-color",e[20]),RA(r,"class","PinturaPickerKnobController"),NA(r,"transform",`translate(${e[25]}%,${e[24]}%)`),RA(n,"class","PinturaSaturationPicker"),NA(n,"background-color",e[21]),NA(a,"--knob-background",e[21]),RA(t,"class","PinturaPicker")},m(m,g){wA(m,t,g),vA(t,n),vA(n,r),vA(r,i),e[41](n),vA(t,o),vA(t,a),RO(s,a,null),vA(t,l),h&&h.m(t,null),vA(t,c),f&&f.m(t,null),u=!0,d||(p=[TA(i,"nudge",e[30]),dA(Dj.call(null,i,{preventDefault:!0})),TA(n,"pointerdown",e[29])],d=!0)},p(e,o){1048576&o[0]&&NA(i,"background-color",e[20]),50331648&o[0]&&NA(r,"transform",`translate(${e[25]}%,${e[24]}%)`),2097152&o[0]&&NA(n,"background-color",e[21]);const l={};65536&o[0]&&(l.value=e[16]),s.$set(l),2097152&o[0]&&NA(a,"--knob-background",e[21]),e[11]?h?(h.p(e,o),2048&o[0]&&bO(h,1)):(h=vz(e),h.c(),bO(h,1),h.m(t,c)):h&&(yO(),xO(h,1,1,(()=>{h=null})),vO()),e[14]||e[15]?f?(f.p(e,o),49152&o[0]&&bO(f,1)):(f=bz(e),f.c(),bO(f,1),f.m(t,null)):f&&(yO(),xO(f,1,1,(()=>{f=null})),vO())},i(e){u||(bO(s.$$.fragment,e),bO(h),bO(f),u=!0)},o(e){xO(s.$$.fragment,e),xO(h),xO(f),u=!1},d(n){n&&$A(t),e[41](null),MO(s),h&&h.d(),f&&f.d(),d=!1,YM(p)}}}function vz(e){let t,n,r;return n=new Gj({props:{label:"Opacity",hideLabel:!0,class:"PinturaOpacityPicker",onchange:e[28],value:e[17],min:0,max:1,step:.01}}),{c(){t=SA("div"),PO(n.$$.fragment),NA(t,"--knob-background",e[18]),NA(t,"--track-background",`linear-gradient(to right,${e[19]},${e[20]})`)},m(e,i){wA(e,t,i),RO(n,t,null),r=!0},p(e,r){const i={};131072&r[0]&&(i.value=e[17]),n.$set(i),262144&r[0]&&NA(t,"--knob-background",e[18]),1572864&r[0]&&NA(t,"--track-background",`linear-gradient(to right,${e[19]},${e[20]})`)},i(e){r||(bO(n.$$.fragment,e),r=!0)},o(e){xO(n.$$.fragment,e),r=!1},d(e){e&&$A(t),MO(n)}}}function bz(e){let t,n,r,i,o,a,s,l=e[15]&&xz(e);return{c(){t=SA("div"),n=SA("input"),i=kA(),l&&l.c(),RA(n,"class","PinturaColorPickerInput"),RA(n,"type","text"),n.disabled=r=!e[14],n.value=e[23],RA(t,"class","PinturColorPickerInputGroup")},m(r,c){wA(r,t,c),vA(t,n),vA(t,i),l&&l.m(t,null),o=!0,a||(s=[TA(n,"keydown",e[32]),TA(n,"input",e[31])],a=!0)},p(e,i){(!o||16384&i[0]&&r!==(r=!e[14]))&&(n.disabled=r),(!o||8388608&i[0]&&n.value!==e[23])&&(n.value=e[23]),e[15]?l?(l.p(e,i),32768&i[0]&&bO(l,1)):(l=xz(e),l.c(),bO(l,1),l.m(t,null)):l&&(yO(),xO(l,1,1,(()=>{l=null})),vO())},i(e){o||(bO(l),o=!0)},o(e){xO(l),o=!1},d(e){e&&$A(t),l&&l.d(),a=!1,YM(s)}}}function xz(e){let t,n;return t=new Qz({props:{icon:'<path stroke="currentColor" stroke-linecap="square" d="m13 14-7 7a2.704 2.704 0 0 1-3 0 2.704 2.704 0 0 1 0-3l7-7"/><path fill="currentColor" d="M9.475 9.475 14.5 14.5c.263.263.69.265.955.005l.783-.767a4.209 4.209 0 0 0 1.262-3.006V10l4-4c.5-.5.375-2.125-.5-3s-2.5-1-3-.5l-4 4h-.732a4.329 4.329 0 0 0-3.03 1.238l-.758.742a.7.7 0 0 0-.005.995Z"/>',hideLabel:!0,label:"Pick a color",class:"PinturaEyeDropper",onclick:e[33]}}),{c(){PO(t.$$.fragment)},m(e,r){RO(t,e,r),n=!0},p:VM,i(e){n||(bO(t.$$.fragment,e),n=!0)},o(e){xO(t.$$.fragment,e),n=!1},d(e){MO(t,e)}}}function wz(e){let t,n;return t=new cj({props:{label:LF(e[10].labelColorPalette,e[10]),class:CD(["PinturaColorPresets",e[9]?"PinturaColorPresetsGrid":"PinturaColorPresetsList"]),hideLabel:!1,name:e[1],value:e[4],optionGroupClass:"PinturaListOptionGroup",optionClass:"PinturaListOption",options:e[2].map(e[42]),selectedIndex:e[3],optionMapper:e[7],optionLabelClass:e[6],onchange:e[43],$$slots:{option:[_z,e=>{let{option:t}=e;return{59:t}},e=>{let{option:t}=e;return[0,t?268435456:0]}],group:[$z,e=>{let{option:t}=e;return{59:t}},e=>{let{option:t}=e;return[0,t?268435456:0]}]},$$scope:{ctx:e}}}),{c(){PO(t.$$.fragment)},m(e,r){RO(t,e,r),n=!0},p(e,n){const r={};1024&n[0]&&(r.label=LF(e[10].labelColorPalette,e[10])),512&n[0]&&(r.class=CD(["PinturaColorPresets",e[9]?"PinturaColorPresetsGrid":"PinturaColorPresetsList"])),2&n[0]&&(r.name=e[1]),16&n[0]&&(r.value=e[4]),1028&n[0]&&(r.options=e[2].map(e[42])),8&n[0]&&(r.selectedIndex=e[3]),128&n[0]&&(r.optionMapper=e[7]),64&n[0]&&(r.optionLabelClass=e[6]),512&n[0]|805306368&n[1]&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(bO(t.$$.fragment,e),n=!0)},o(e){xO(t.$$.fragment,e),n=!1},d(e){MO(t,e)}}}function $z(e){let t,n,r=e[59].label+"";return{c(){t=SA("span"),n=CA(r),RA(t,"slot","group")},m(e,r){wA(e,t,r),vA(t,n)},p(e,t){268435456&t[1]&&r!==(r=e[59].label+"")&&OA(n,r)},d(e){e&&$A(t)}}}function Sz(e){let t,n,r=e[59].label+"";return{c(){t=SA("span"),n=CA(r),RA(t,"class","PinturaButtonLabel")},m(e,r){wA(e,t,r),vA(t,n)},p(e,t){268435456&t[1]&&r!==(r=e[59].label+"")&&OA(n,r)},d(e){e&&$A(t)}}}function _z(e){let t,n,r,i;n=new pz({props:{title:e[59].label,color:e[59].value}});let o=!e[9]&&Sz(e);return{c(){t=SA("span"),PO(n.$$.fragment),r=kA(),o&&o.c(),RA(t,"slot","option")},m(e,a){wA(e,t,a),RO(n,t,null),vA(t,r),o&&o.m(t,null),i=!0},p(e,r){const i={};268435456&r[1]&&(i.title=e[59].label),268435456&r[1]&&(i.color=e[59].value),n.$set(i),e[9]?o&&(o.d(1),o=null):o?o.p(e,r):(o=Sz(e),o.c(),o.m(t,null))},i(e){i||(bO(n.$$.fragment,e),i=!0)},o(e){xO(n.$$.fragment,e),i=!1},d(e){e&&$A(t),MO(n),o&&o.d()}}}function Cz(e){let t,n,r,i=e[13]&&yz(e),o=e[12]&&wz(e);return{c(){t=SA("div"),i&&i.c(),n=kA(),o&&o.c(),RA(t,"slot","details"),RA(t,"class","PinturaColorPickerPanel")},m(e,a){wA(e,t,a),i&&i.m(t,null),vA(t,n),o&&o.m(t,null),r=!0},p(e,r){e[13]?i?(i.p(e,r),8192&r[0]&&bO(i,1)):(i=yz(e),i.c(),bO(i,1),i.m(t,n)):i&&(yO(),xO(i,1,1,(()=>{i=null})),vO()),e[12]?o?(o.p(e,r),4096&r[0]&&bO(o,1)):(o=wz(e),o.c(),bO(o,1),o.m(t,null)):o&&(yO(),xO(o,1,1,(()=>{o=null})),vO())},i(e){r||(bO(i),bO(o),r=!0)},o(e){xO(i),xO(o),r=!1},d(e){e&&$A(t),i&&i.d(),o&&o.d()}}}function kz(e){let t,n;return t=new TF({props:{buttonClass:CD(["PinturaColorPickerButton",e[5]]),$$slots:{details:[Cz],label:[gz]},$$scope:{ctx:e}}}),{c(){PO(t.$$.fragment)},m(e,r){RO(t,e,r),n=!0},p(e,n){const r={};32&n[0]&&(r.buttonClass=CD(["PinturaColorPickerButton",e[5]])),67108831&n[0]|536870912&n[1]&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(bO(t.$$.fragment,e),n=!0)},o(e){xO(t.$$.fragment,e),n=!1},d(e){MO(t,e)}}}function Ez(e,t,n){let r,i,o,a,s,l,c,u,d,p,h,f,m,{label:g}=t,{name:y}=t,{options:v=[]}=t,{selectedIndex:b=-1}=t,{value:x}=t,{buttonClass:w}=t,{optionLabelClass:$}=t,{optionMapper:S}=t,{onchange:_}=t,{title:C}=t,{hidePresetLabel:k=!0}=t,{locale:E}=t,{enableOpacity:T=!0}=t,{enablePresets:I=!0}=t,{enablePicker:P=!0}=t,{enableInput:R=!1}=t,{enableEyeDropper:M=!1}=t,A="transparent",O="transparent";const L=(e,t)=>{if(p=[e[0],e[1],e[2]],t){let t=((e,t,n)=>{let r=Math.max(e,t,n),i=r-Math.min(e,t,n),o=i&&(r==e?(t-n)/i:r==t?2+(n-e)/i:4+(e-t)/i);return[60*(o<0?o+6:o)/360,r&&i/r,r]})(...p),r=t[0],i=t[1],o=t[2];RP(B)&&(r=B),RP(j)&&(i=j),RP(z)&&(o=z),n(16,l=r),n(36,c=i),n(37,u=o),n(17,d=RP(e[3])?e[3]:1)}n(18,h=UP(e)),n(19,f=UP([...p,0])),n(20,A=UP([...p,1])),n(21,O=UP(cz(l,1,1)))},N=()=>{const e=[...cz(l,c,u),d];L(e),_(e)},D=e=>{const t=3===e.length?[...e,1]:e;F(),L(t,!0),_(t)},F=()=>{j=void 0,z=void 0,B=void 0};let j,z,B;const U=(e,t)=>{const r=nL(e.x/t.width,0,1);var i,o;o=1-nL(e.y/t.height,0,1),n(36,c=i=r),n(37,u=o),j=i,z=o,N()};let W,V,H,q;const G=e=>{const t=_T(fT(e),q);U(ST(mT(H),t),V)},K=e=>{V=void 0,document.documentElement.removeEventListener("pointermove",G),document.documentElement.removeEventListener("pointerup",K)};let Y;return e.$$set=e=>{"label"in e&&n(0,g=e.label),"name"in e&&n(1,y=e.name),"options"in e&&n(2,v=e.options),"selectedIndex"in e&&n(3,b=e.selectedIndex),"value"in e&&n(4,x=e.value),"buttonClass"in e&&n(5,w=e.buttonClass),"optionLabelClass"in e&&n(6,$=e.optionLabelClass),"optionMapper"in e&&n(7,S=e.optionMapper),"onchange"in e&&n(34,_=e.onchange),"title"in e&&n(8,C=e.title),"hidePresetLabel"in e&&n(9,k=e.hidePresetLabel),"locale"in e&&n(10,E=e.locale),"enableOpacity"in e&&n(11,T=e.enableOpacity),"enablePresets"in e&&n(12,I=e.enablePresets),"enablePicker"in e&&n(13,P=e.enablePicker),"enableInput"in e&&n(14,R=e.enableInput),"enableEyeDropper"in e&&n(35,M=e.enableEyeDropper)},e.$$.update=()=>{16&e.$$.dirty[1]&&n(15,r=M&&(null===fz&&(fz=cE()&&"EyeDropper"in window),fz)),16&e.$$.dirty[0]|128&e.$$.dirty[1]&&(!x||m&&sL(x,m)||(n(38,m=[...x]),L(x,!0))),32&e.$$.dirty[1]&&n(25,i=100*c),64&e.$$.dirty[1]&&n(24,o=100-100*u),256&e.$$.dirty[1]&&n(40,a=!!Y&&Y.length>=4&&Y.length<=5),51216&e.$$.dirty[0]|512&e.$$.dirty[1]&&n(23,s=(R||r)&&x?((e,t,n)=>{let r=e.map((e=>Math.round(255*e).toString(16).toLowerCase().padStart(2,"0")));return(!t&&r.length>3||"ff"===r[3])&&r.pop(),n&&(r=r.map((e=>e.substring(0,1)))),"#"+r.join("")})(x,T,a):void 0)},[g,y,v,b,x,w,$,S,C,k,E,T,I,P,R,r,l,d,h,f,A,O,W,s,o,i,D,e=>{n(16,l=e),B=e,N()},e=>{n(17,d=e),N()},e=>{e.stopPropagation(),V=zT(W.offsetWidth,W.offsetHeight),H=(e=>hT(e.offsetX,e.offsetY))(e),q=fT(e),U(H,V),document.documentElement.addEventListener("pointermove",G),document.documentElement.addEventListener("pointerup",K)},e=>{V=zT(W.offsetWidth,W.offsetHeight);const t=i/100*V.width,n=o/100*V.height;U({x:t+e.detail.x,y:n+e.detail.y},V)},e=>{const{value:t}=e.target,r=t.length;if(!t.startsWith("#")||r<4||6===r||8===r||r>9)return;if(!T&&r>7)return;const i=hz(t);i&&(n(39,Y=t),F(),L(i),_(i))},e=>{e.stopPropagation()},e=>{(new EyeDropper).open().then((e=>{let{sRGBHex:t}=e;const r=hz(t);r&&(r[3]=1,n(39,Y=x),F(),L(r),_(r))})).catch((e=>{}))},_,M,c,u,m,Y,a,function(e){eO[e?"unshift":"push"]((()=>{W=e,n(22,W)}))},e=>{let[t,n]=e;return[t,TE(n)?n(E):n]},e=>D(e.value)]}class Tz extends OO{constructor(e){super(),AO(this,e,Ez,kz,XM,{label:0,name:1,options:2,selectedIndex:3,value:4,buttonClass:5,optionLabelClass:6,optionMapper:7,onchange:34,title:8,hidePresetLabel:9,locale:10,enableOpacity:11,enablePresets:12,enablePicker:13,enableInput:14,enableEyeDropper:35},null,[-1,-1])}}function Iz(e){let t,n,r;return n=new Hz({props:{items:e[0]}}),{c(){t=SA("div"),PO(n.$$.fragment),RA(t,"class","PinturaShorthandControl PinturaShapeStyle")},m(e,i){wA(e,t,i),RO(n,t,null),r=!0},p(e,t){let[r]=t;const i={};1&r&&(i.items=e[0]),n.$set(i)},i(e){r||(bO(n.$$.fragment,e),r=!0)},o(e){xO(n.$$.fragment,e),r=!1},d(e){e&&$A(t),MO(n)}}}function Pz(e,t,n){let r,i,{value:o}=t,{onchange:a}=t,{controls:s=[]}=t;return e.$$set=e=>{n(6,t=qM(qM({},t),lA(e))),"value"in e&&n(1,o=e.value),"onchange"in e&&n(2,a=e.onchange),"controls"in e&&n(3,s=e.controls)},e.$$.update=()=>{n(4,r=(e=>{const{controls:t,...n}=e;return n})(t)),30&e.$$.dirty&&n(0,i=s.map(((e,t)=>{const[n,i,s]=e;return[n,i,{...r,...s,value:o[t],onchange:e=>{const n=[...o];n[t]=e,a(n)}}]})))},t=lA(t),[i,o,a,s,r]}class Rz extends OO{constructor(e){super(),AO(this,e,Pz,Iz,XM,{value:1,onchange:2,controls:3})}}function Mz(e){let t,n;return t=new Mj({props:{label:e[4],options:e[1],title:e[2],selectedIndex:e[5],onchange:e[10]}}),{c(){PO(t.$$.fragment)},m(e,r){RO(t,e,r),n=!0},p(e,n){let[r]=n;const i={};16&r&&(i.label=e[4]),2&r&&(i.options=e[1]),4&r&&(i.title=e[2]),32&r&&(i.selectedIndex=e[5]),9&r&&(i.onchange=e[10]),t.$set(i)},i(e){n||(bO(t.$$.fragment,e),n=!0)},o(e){xO(t.$$.fragment,e),n=!1},d(e){MO(t,e)}}}function Az(e,t,n){let r,i,o,a,{options:s}=t,{title:l}=t,{onchange:c}=t,{selectedIndex:u=-1}=t,{value:d}=t,{label:p}=t;return e.$$set=e=>{"options"in e&&n(1,s=e.options),"title"in e&&n(2,l=e.title),"onchange"in e&&n(3,c=e.onchange),"selectedIndex"in e&&n(0,u=e.selectedIndex),"value"in e&&n(6,d=e.value),"label"in e&&n(7,p=e.label)},e.$$.update=()=>{67&e.$$.dirty&&n(9,r=((e,t,n)=>{if(e)return t>-1?e[t]:void 0!==n?e.find((e=>e[0]===n)):e[0]})(s,u,d)),514&e.$$.dirty&&n(5,i=s&&s.findIndex((e=>e===r))),512&e.$$.dirty&&n(8,o=r&&r[1]),384&e.$$.dirty&&n(4,a=p||o)},[u,s,l,c,a,i,d,p,o,r,e=>{n(0,u=e.index),c&&c(e)}]}class Oz extends OO{constructor(e){super(),AO(this,e,Az,Mz,XM,{options:1,title:2,onchange:3,selectedIndex:0,value:6,label:7})}}function Lz(e,t,n){const r=e.slice();return r[9]=t[n][0],r[0]=t[n][1],r[10]=t[n][2],r[2]=t[n][3],r}function Nz(e){let t,n,r;const i=[e[10]];var o=e[3][e[9]]||e[9];function a(e){let t={};for(let n=0;n<i.length;n+=1)t=qM(t,i[n]);return{props:t}}return o&&(t=jA(o,a())),{c(){t&&PO(t.$$.fragment),n=EA()},m(e,i){t&&RO(t,e,i),wA(e,n,i),r=!0},p(e,r){const s=4&r?EO(i,[TO(e[10])]):{};if(o!==(o=e[3][e[9]]||e[9])){if(t){yO();const e=t;xO(e.$$.fragment,1,0,(()=>{MO(e,1)})),vO()}o?(t=jA(o,a()),PO(t.$$.fragment),bO(t.$$.fragment,1),RO(t,n.parentNode,n)):t=null}else o&&t.$set(s)},i(e){r||(t&&bO(t.$$.fragment,e),r=!0)},o(e){t&&xO(t.$$.fragment,e),r=!1},d(e){e&&$A(n),t&&MO(t,e)}}}function Dz(e){let t,n=e[9],r=e[9]&&Bz(e);return{c(){r&&r.c(),t=EA()},m(e,n){r&&r.m(e,n),wA(e,t,n)},p(e,i){e[9]?n?XM(n,e[9])?(r.d(1),r=Bz(e),r.c(),r.m(t.parentNode,t)):r.p(e,i):(r=Bz(e),r.c(),r.m(t.parentNode,t)):n&&(r.d(1),r=null),n=e[9]},i:VM,o(e){xO(r)},d(e){e&&$A(t),r&&r.d(e)}}}function Fz(e){let t,n,r=e[10].innerHTML+"";return{c(){t=new FA(!1),n=EA(),t.a=n},m(e,i){t.m(r,e,i),wA(e,n,i)},p(e,n){4&n&&r!==(r=e[10].innerHTML+"")&&t.p(r)},i:VM,o:VM,d(e){e&&$A(n),e&&t.d()}}}function jz(e){let t,n=e[10].textContent+"";return{c(){t=CA(n)},m(e,n){wA(e,t,n)},p(e,r){4&r&&n!==(n=e[10].textContent+"")&&OA(t,n)},i:VM,o:VM,d(e){e&&$A(t)}}}function zz(e){let t,n;return t=new Hz({props:{items:e[2],discardEmptyItems:!0}}),{c(){PO(t.$$.fragment)},m(e,r){RO(t,e,r),n=!0},p(e,n){const r={};4&n&&(r.items=e[2]),t.$set(r)},i(e){n||(bO(t.$$.fragment,e),n=!0)},o(e){xO(t.$$.fragment,e),n=!1},d(e){MO(t,e)}}}function Bz(e){let t,n,r,i,o;const a=[zz,jz,Fz],s=[];function l(e,t){return e[2]&&e[2].length?0:e[10].textContent?1:e[10].innerHTML?2:-1}~(n=l(e))&&(r=s[n]=a[n](e));let c=[e[4](e[10])],u={};for(let d=0;d<c.length;d+=1)u=qM(u,c[d]);return{c(){t=SA(e[9]),r&&r.c(),i=kA(),/-/.test(e[9])?AA(t,u):MA(t,u)},m(e,r){wA(e,t,r),~n&&s[n].m(t,null),vA(t,i),o=!0},p(e,o){let d=n;n=l(e),n===d?~n&&s[n].p(e,o):(r&&(yO(),xO(s[d],1,1,(()=>{s[d]=null})),vO()),~n?(r=s[n],r?r.p(e,o):(r=s[n]=a[n](e),r.c()),bO(r,1),r.m(t,i)):r=null),u=EO(c,[4&o&&e[4](e[10])]),/-/.test(e[9])?AA(t,u):MA(t,u)},i(e){o||(bO(r),o=!0)},o(e){xO(r),o=!1},d(e){e&&$A(t),~n&&s[n].d()}}}function Uz(e,t){let n,r,i,o,a,s;const l=[Dz,Nz],c=[];function u(e,t){return 4&t&&(r=null),null==r&&(r=!e[5](e[9])),r?0:1}return i=u(t,-1),o=c[i]=l[i](t),{key:e,first:null,c(){n=EA(),o.c(),a=EA(),this.first=n},m(e,t){wA(e,n,t),c[i].m(e,t),wA(e,a,t),s=!0},p(e,n){let r=i;i=u(t=e,n),i===r?c[i].p(t,n):(yO(),xO(c[r],1,1,(()=>{c[r]=null})),vO(),o=c[i],o?o.p(t,n):(o=c[i]=l[i](t),o.c()),bO(o,1),o.m(a.parentNode,a))},i(e){s||(bO(o),s=!0)},o(e){xO(o),s=!1},d(e){e&&$A(n),c[i].d(e),e&&$A(a)}}}function Wz(e){let t,n,r=[],i=new Map,o=e[2];const a=e=>e[0]+e[1];for(let s=0;s<o.length;s+=1){let t=Lz(e,o,s),n=a(t);i.set(n,r[s]=Uz(n,t))}return{c(){for(let e=0;e<r.length;e+=1)r[e].c();t=EA()},m(e,i){for(let t=0;t<r.length;t+=1)r[t].m(e,i);wA(e,t,i),n=!0},p(e,n){let[s]=n;62&s&&(o=e[2],yO(),r=kO(r,s,a,1,e,o,i,t.parentNode,CO,Uz,t,Lz),vO())},i(e){if(!n){for(let e=0;e<o.length;e+=1)bO(r[e]);n=!0}},o(e){for(let t=0;t<r.length;t+=1)xO(r[t]);n=!1},d(e){for(let t=0;t<r.length;t+=1)r[t].d(e);e&&$A(t)}}}function Vz(e,t,n){let r,i,{items:o}=t,{discardEmptyItems:a=!0}=t,{key:s=""}=t;const l={Button:Qz,ImageButton:aF,ImageButtonList:dF,Dropdown:Mj,Select:Oz,RadioGroup:cj,Input:hj,Panel:Nj,ProgressIndicator:iz,ShapeStyle:lz,ToggleSlider:tz,ColorPicker:Tz,ShorthandControl:Rz},c=e=>!hE(e)||!!l[e],u=e=>{if(!e)return!1;const[t,,n,r=[]]=e;return!!c(t)||r.some(u)||n.textContent||n.innerHTML};return e.$$set=e=>{"items"in e&&n(6,o=e.items),"discardEmptyItems"in e&&n(7,a=e.discardEmptyItems),"key"in e&&n(0,s=e.key)},e.$$.update=()=>{1&e.$$.dirty&&n(1,r=s),192&e.$$.dirty&&n(2,i=(o&&a?o.filter(u):o)||[])},[s,r,i,l,function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{textContent:t,innerHTML:n,...r}=e;return r},c,o,a]}class Hz extends OO{constructor(e){super(),AO(this,e,Vz,Wz,XM,{items:6,discardEmptyItems:7,key:0})}get items(){return this.$$.ctx[6]}set items(e){this.$$set({items:e}),pO()}get discardEmptyItems(){return this.$$.ctx[7]}set discardEmptyItems(e){this.$$set({discardEmptyItems:e}),pO()}get key(){return this.$$.ctx[0]}set key(e){this.$$set({key:e}),pO()}}function qz(e){let t,n;return t=new eF({props:{class:"PinturaButtonIcon",$$slots:{default:[Gz]},$$scope:{ctx:e}}}),{c(){PO(t.$$.fragment)},m(e,r){RO(t,e,r),n=!0},p(e,n){const r={};536870920&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(bO(t.$$.fragment,e),n=!0)},o(e){xO(t.$$.fragment,e),n=!1},d(e){MO(t,e)}}}function Gz(e){let t;return{c(){t=_A("g")},m(n,r){wA(n,t,r),t.innerHTML=e[3]},p(e,n){8&n&&(t.innerHTML=e[3])},d(e){e&&$A(t)}}}function Kz(e){let t;return{c(){t=SA("span"),RA(t,"class",e[11])},m(n,r){wA(n,t,r),t.innerHTML=e[0]},p(e,n){1&n&&(t.innerHTML=e[0]),2048&n&&RA(t,"class",e[11])},i:VM,o:VM,d(e){e&&$A(t)}}}function Yz(e){let t,n,r;return n=new Hz({props:{items:e[0]}}),{c(){t=SA("span"),PO(n.$$.fragment),RA(t,"class",e[11])},m(e,i){wA(e,t,i),RO(n,t,null),r=!0},p(e,i){const o={};1&i&&(o.items=e[0]),n.$set(o),(!r||2048&i)&&RA(t,"class",e[11])},i(e){r||(bO(n.$$.fragment,e),r=!0)},o(e){xO(n.$$.fragment,e),r=!1},d(e){e&&$A(t),MO(n)}}}function Zz(e){let t,n,r,i,o,a;const s=e[27].default,l=rA(s,e,e[29],null),c=l||function(e){let t,n,r,i,o,a,s=e[3]&&qz(e);const l=[Yz,Kz],c=[];function u(e,t){return 1&t&&(r=null),null==r&&(r=!!OP(e[0])),r?0:1}return i=u(e,-1),o=c[i]=l[i](e),{c(){t=SA("span"),s&&s.c(),n=kA(),o.c(),RA(t,"class",e[13])},m(e,r){wA(e,t,r),s&&s.m(t,null),vA(t,n),c[i].m(t,null),a=!0},p(e,r){e[3]?s?(s.p(e,r),8&r&&bO(s,1)):(s=qz(e),s.c(),bO(s,1),s.m(t,n)):s&&(yO(),xO(s,1,1,(()=>{s=null})),vO());let d=i;i=u(e,r),i===d?c[i].p(e,r):(yO(),xO(c[d],1,1,(()=>{c[d]=null})),vO(),o=c[i],o?o.p(e,r):(o=c[i]=l[i](e),o.c()),bO(o,1),o.m(t,null)),(!a||8192&r)&&RA(t,"class",e[13])},i(e){a||(bO(s),bO(o),a=!0)},o(e){xO(s),xO(o),a=!1},d(e){e&&$A(t),s&&s.d(),c[i].d()}}}(e);return{c(){t=SA("button"),c&&c.c(),RA(t,"type",e[6]),t.disabled=e[5],RA(t,"class",e[12]),RA(t,"title",n=nF(e[0],e[1],e[2]))},m(n,s){wA(n,t,s),c&&c.m(t,null),e[28](t),i=!0,o||(a=[TA(t,"keydown",(function(){ZM(e[8])&&e[8].apply(this,arguments)})),TA(t,"click",(function(){ZM(e[7])&&e[7].apply(this,arguments)})),TA(t,"pointerdown",(function(){ZM(e[14])&&e[14].apply(this,arguments)})),dA(r=OD.call(null,t,e[4])),dA(e[9].call(null,t))],o=!0)},p(o,a){let[u]=a;e=o,l?l.p&&(!i||536870912&u)&&aA(l,s,e,e[29],i?oA(s,e[29],u,null):sA(e[29]),null):c&&c.p&&(!i||10249&u)&&c.p(e,i?u:-1),(!i||64&u)&&RA(t,"type",e[6]),(!i||32&u)&&(t.disabled=e[5]),(!i||4096&u)&&RA(t,"class",e[12]),(!i||7&u&&n!==(n=nF(e[0],e[1],e[2])))&&RA(t,"title",n),r&&ZM(r.update)&&16&u&&r.update.call(null,e[4])},i(e){i||(bO(c,e),i=!0)},o(e){xO(c,e),i=!1},d(n){n&&$A(t),c&&c.d(n),e[28](null),o=!1,YM(a)}}}function Xz(e,t,n){let r,i,o,a,s,l,{$$slots:c={},$$scope:u}=t,{class:d}=t,{label:p}=t,{title:h}=t,{shortcut:f}=t,{labelClass:m}=t,{innerClass:g}=t,{hideLabel:y=!1}=t,{icon:v}=t,{style:b}=t,{disabled:x}=t,{type:w="button"}=t,{onclick:$}=t,{onkeydown:S}=t,{onhold:_}=t,{action:C=()=>{}}=t,{holdThreshold:k=500}=t,{holdSpeedUpFactor:E=.5}=t,{holdSpeedMin:T=20}=t;const I=e=>{n(25,l=setTimeout((()=>{_(),I(Math.max(e*E,T))}),e))};let P;return e.$$set=e=>{"class"in e&&n(15,d=e.class),"label"in e&&n(0,p=e.label),"title"in e&&n(1,h=e.title),"shortcut"in e&&n(2,f=e.shortcut),"labelClass"in e&&n(16,m=e.labelClass),"innerClass"in e&&n(17,g=e.innerClass),"hideLabel"in e&&n(18,y=e.hideLabel),"icon"in e&&n(3,v=e.icon),"style"in e&&n(4,b=e.style),"disabled"in e&&n(5,x=e.disabled),"type"in e&&n(6,w=e.type),"onclick"in e&&n(7,$=e.onclick),"onkeydown"in e&&n(8,S=e.onkeydown),"onhold"in e&&n(19,_=e.onhold),"action"in e&&n(9,C=e.action),"holdThreshold"in e&&n(20,k=e.holdThreshold),"holdSpeedUpFactor"in e&&n(21,E=e.holdSpeedUpFactor),"holdSpeedMin"in e&&n(22,T=e.holdSpeedMin),"$$scope"in e&&n(29,u=e.$$scope)},e.$$.update=()=>{101187584&e.$$.dirty&&n(26,i=_?()=>{l&&(clearTimeout(l),n(25,l=void 0),document.documentElement.removeEventListener("pointerup",i))}:eE),68681728&e.$$.dirty&&n(14,r=_?()=>{document.documentElement.addEventListener("pointerup",i),I(k)}:eE),131072&e.$$.dirty&&n(13,o=CD(["PinturaButtonInner",g])),294912&e.$$.dirty&&n(12,a=CD(["PinturaButton",y&&"PinturaButtonIconOnly",d])),327680&e.$$.dirty&&n(11,s=CD([y?"implicit":"PinturaButtonLabel",m]))},[p,h,f,v,b,x,w,$,S,C,P,s,a,o,r,d,m,g,y,_,k,E,T,e=>tF(e,P),()=>P,l,i,c,function(e){eO[e?"unshift":"push"]((()=>{P=e,n(10,P)}))},u]}class Qz extends OO{constructor(e){super(),AO(this,e,Xz,Zz,XM,{class:15,label:0,title:1,shortcut:2,labelClass:16,innerClass:17,hideLabel:18,icon:3,style:4,disabled:5,type:6,onclick:7,onkeydown:8,onhold:19,action:9,holdThreshold:20,holdSpeedUpFactor:21,holdSpeedMin:22,isEventTarget:23,getElement:24})}get isEventTarget(){return this.$$.ctx[23]}get getElement(){return this.$$.ctx[24]}}var Jz=(e,t)=>{const n=e.findIndex(t);if(n>=0)return e.splice(n,1)};const eB=80;var tB=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{inertia:n=!1,inertiaDurationMultiplier:r=eB,shouldStartInteraction:i=()=>!0,pinch:o=!1,multiTouch:a,getEventPosition:s=e=>hT(e.clientX,e.clientY),observeKeys:l=!1}=t;function c(t,n){e.dispatchEvent(new CustomEvent(t,{detail:n}))}function u(){$&&$(),$=void 0}const d=[],p=e=>0===e.timeStamp?Date.now():e.timeStamp,h=()=>{const e=mT(d[0].position);if(d[1]){const t=.5*(d[1].position.x-e.x),n=.5*(d[1].position.y-e.y);e.x+=t,e.y+=n}return e},f=e=>{e.origin.x=e.position.x,e.origin.y=e.position.y,e.translation.x=0,e.translation.y=0},m=e=>{const t=(e=>d.findIndex((t=>t.event.pointerId===e.pointerId)))(e);if(!(t<0))return d[t]},g=()=>1===d.length,y=()=>2===d.length,v=e=>{const t=RT(e.map((e=>e.position)));return{center:t,distance:((e,t)=>e.reduce(((e,n)=>e+PT(t,n.position)),0)/e.length)(e,t),velocity:RT(e.map((e=>e.velocity))),translation:RT(e.map((e=>e.translation)))}};let b,x,w,$,S,_,C,k,E,T=0;e.addEventListener("pointerdown",A);const I=["Meta","Control","Alt","Shift"];function P(e){if(!I.includes(e.key))return;const{metaKey:t,ctrlKey:n,altKey:r,shiftKey:i}=e;M({metaKey:t,ctrlKey:n,altKey:r,shiftKey:i})}let R=Date.now();const M=e=>{const t=mT(d[0].translation);let n=C;o&&y()&&(n*=PT(d[0].position,d[1].position)/S,ST(t,d[1].translation)),ST(t,_);const r=Date.now();r-R<16||(R=r,c("interactionupdate",{position:h(),translation:t,scalar:o?n:void 0,isMultiTouching:y(),...e}))};function A(t){if(!y()&&!(e=>RP(e.button)&&0!==e.button)(t)&&i(t,e))if(u(),(e=>{const t=p(e),n={timeStamp:t,timeStampInitial:t,position:s(e),origin:s(e),velocity:pT(),velocityHistory:[],velocityAverage:pT(),translation:pT(),interactionState:void 0,event:e};d.push(n),n.interactionState=v(d)})(t),l&&(window.addEventListener("keydown",P),window.addEventListener("keyup",P)),g())document.documentElement.addEventListener("pointermove",O),document.documentElement.addEventListener("pointerup",L),document.documentElement.addEventListener("pointercancel",L),document.addEventListener("visibilitychange",D),k=!1,C=1,_=pT(),S=void 0,c("interactionstart",{origin:mT(m(t).origin)});else if(o)k=!0,S=PT(d[0].position,d[1].position),_.x+=d[0].translation.x,_.y+=d[0].translation.y,f(d[0]);else if(!1===a)return d.length=0,j(),c("interactioncancel")}function O(e){e.preventDefault(),(e=>{const t=m(e);if(!t)return;const n=p(e),r=s(e),i=Math.max(1,n-t.timeStamp);t.velocity.x=(r.x-t.position.x)/i,t.velocity.y=(r.y-t.position.y)/i,t.velocityHistory.push(mT(t.velocity)),t.velocityHistory=t.velocityHistory.slice(-3),t.velocityAverage=t.velocityHistory.reduce(((e,t,n,r)=>(e.x+=t.x/r.length,e.y+=t.y/r.length,e)),pT()),t.translation.x=r.x-t.origin.x,t.translation.y=r.y-t.origin.y,t.timeStamp=n,t.position.x=r.x,t.position.y=r.y,t.event=e})(e);const{metaKey:t=!1,ctrlKey:n=!1,altKey:r=!1,shiftKey:i=!1}=l?e:{};M({metaKey:t,ctrlKey:n,altKey:r,shiftKey:i})}function L(e){if(!m(e))return;const t=h(),i=(e=>{const t=Jz(d,(t=>t.event.pointerId===e.pointerId));if(t)return t[0]})(e);if(o&&g()){const e=PT(d[0].position,i.position);C*=e/S,_.x+=d[0].translation.x+i.translation.x,_.y+=d[0].translation.y+i.translation.y,f(d[0])}let a=!1,s=!1;if(!k&&i){const e=performance.now(),t=e-i.timeStampInitial,n=IT(i.translation);a=n<64&&t<300,s=!!(E&&a&&e-T<700&&IT(E,i.position)<128),a&&(E=mT(i.position),T=e)}if(d.length>0)return;j();const l=mT(i.translation),u=mT(i.velocityAverage);let p=!1;c("interactionrelease",{isTap:a,isDoubleTap:s,position:t,translation:l,scalar:C,preventInertia:()=>p=!0});const y=PT(u);if(p||!n||y<.25)return F(l,{isTap:a,isDoubleTap:s});x=mT(t),w=mT(l),b=YN(mT(l),{easing:qN,duration:y*r}),b.set({x:l.x+50*u.x,y:l.y+50*u.y}).then((()=>{$&&F(tA(b),{isTap:a,isDoubleTap:s})})),$=b.subscribe(N)}function N(e){e&&c("interactionupdate",{position:hT(x.x+(e.x-w.x),x.y+(e.y-w.y)),translation:e,scalar:o?C:void 0})}function D(e){if("visible"===document.visibilityState||!d.length)return;const t=v(d);u(),c("interactionend",{...t}),d.length=0,j()}function F(e,t){u(),c("interactionend",{...t,translation:e,scalar:o?C:void 0})}function j(){l&&window.removeEventListener("keydown",P),l&&window.removeEventListener("keyup",P),document.documentElement.removeEventListener("pointermove",O),document.documentElement.removeEventListener("pointerup",L),document.documentElement.removeEventListener("pointercancel",L),document.removeEventListener("visibilitychange",D)}return{destroy(){u(),e.removeEventListener("pointerdown",A)}}};function nB(e,t){return t?t*Math.sign(e)*Math.log10(1+Math.abs(e)/t):e}const rB=(e,t,n)=>{if(!t||!n)return{...e};const r=e.x+nB(t.x-e.x,n),i=e.x+e.width+nB(t.x+t.width-(e.x+e.width),n),o=e.y+nB(t.y-e.y,n);return{x:r,y:o,width:i-r,height:e.y+e.height+nB(t.y+t.height-(e.y+e.height),n)-o}};var iB=(e,t)=>{if(e)return/em/.test(e)?16*parseInt(e,10):/px/.test(e)?parseInt(e,10):void 0},oB=(e,t)=>{let n=e.detail||0;const{deltaX:r,deltaY:i,wheelDelta:o,wheelDeltaX:a,wheelDeltaY:s}=e,{fixScrollDirection:l=!1}=t||{};return RP(a)&&Math.abs(a)>Math.abs(s)?n=a/-120:RP(r)&&Math.abs(r)>Math.abs(i)?n=r/20:(o||s)&&(n=(o||s)/-120),n||(n=i/20),(NE()||XI())&&(n*=2),l&&hP()&&(n*=-1),n};function aB(e){let t,n,r,i,o,a,s;const l=e[38].default,c=rA(l,e,e[37],null);return{c(){t=SA("div"),n=SA("div"),c&&c.c(),NA(n,"transform",e[6]),RA(t,"class",r=CD(["PinturaScrollable",e[0]])),RA(t,"data-direction",e[1]),RA(t,"data-state",e[7]),NA(t,"--scrollable-feather-start-opacity",e[4]),NA(t,"--scrollable-feather-end-opacity",e[5])},m(r,l){wA(r,t,l),vA(t,n),c&&c.m(n,null),e[40](t),o=!0,a||(s=[TA(n,"interactionstart",e[10]),TA(n,"interactionupdate",e[12]),TA(n,"interactionend",e[13]),TA(n,"interactionrelease",e[11]),dA(tB.call(null,n,{inertia:!0})),TA(n,"measure",e[39]),dA(hD.call(null,n)),TA(t,"wheel",e[15],{passive:!1}),TA(t,"scroll",e[17]),TA(t,"focusin",e[41]),TA(t,"nudge",e[18]),TA(t,"measure",e[14]),dA(hD.call(null,t,{observePosition:!0})),dA(i=Dj.call(null,t,{direction:"x"===e[1]?"horizontal":"vertical",stopKeydownPropagation:!1}))],a=!0)},p(e,a){c&&c.p&&(!o||64&a[1])&&aA(c,l,e,e[37],o?oA(l,e[37],a,null):sA(e[37]),null),64&a[0]&&NA(n,"transform",e[6]),(!o||1&a[0]&&r!==(r=CD(["PinturaScrollable",e[0]])))&&RA(t,"class",r),(!o||2&a[0])&&RA(t,"data-direction",e[1]),(!o||128&a[0])&&RA(t,"data-state",e[7]),i&&ZM(i.update)&&2&a[0]&&i.update.call(null,{direction:"x"===e[1]?"horizontal":"vertical",stopKeydownPropagation:!1}),16&a[0]&&NA(t,"--scrollable-feather-start-opacity",e[4]),32&a[0]&&NA(t,"--scrollable-feather-end-opacity",e[5])},i(e){o||(bO(c,e),o=!0)},o(e){xO(c,e),o=!1},d(n){n&&$A(t),c&&c.d(n),e[40](null),a=!1,YM(s)}}}function sB(e,t,n){let r,i,o,a,s,l,c,u,d,{$$slots:p={},$$scope:h}=t;const f=YA();let m,g,y,v,b="idle",x=XN(0);nA(e,x,(e=>n(36,u=e)));let{class:w}=t,{scrollBlockInteractionDist:$=5}=t,{scrollStep:S=10}=t,{scrollFocusMargin:_=64}=t,{scrollDirection:C="x"}=t,{scrollAutoCancel:k=!1}=t,{elasticity:E=0}=t,{onscroll:T=eE}=t,{maskFeatherSize:I}=t,{maskFeatherStartOpacity:P}=t,{maskFeatherEndOpacity:R}=t,{scroll:M}=t;const A=XA("fixScrollDirection");let O;nA(e,A,(e=>n(48,d=e)));let L,N,D=!0;const F=x.subscribe((e=>{const t=pT();t[C]=e,T(t)})),j=e=>Math.max(Math.min(0,e),y[r]-g[r]);let z,B,U;const W=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{elastic:r=!1,animate:i=!1,preventScrollState:o=!1}=t;Math.abs(e-m)>$&&"idle"===b&&!v&&!o&&n(29,b="scrolling");const a=j(e),s=r&&E&&!v?a+nB(e-a,E):a;let l=!0;i?l=!1:D||(l=!v),D=!1,x.set(s,{hard:l}).then((e=>{v&&(D=!0)}))},V=e=>{if(!s)return;if(!v)return;let t=e.target;e.target.classList.contains("implicit")&&(t=t.parentNode);const n=t["x"===C?"offsetLeft":"offsetTop"],i=n+t["x"===C?"offsetWidth":"offsetHeight"],o=tA(x),a=_+I;o+n<a?W(-n+a):o+i>y[r]-a&&W(y[r]-i-a,{animate:!0})};return KA((()=>{F()})),e.$$set=e=>{"class"in e&&n(0,w=e.class),"scrollBlockInteractionDist"in e&&n(22,$=e.scrollBlockInteractionDist),"scrollStep"in e&&n(23,S=e.scrollStep),"scrollFocusMargin"in e&&n(24,_=e.scrollFocusMargin),"scrollDirection"in e&&n(1,C=e.scrollDirection),"scrollAutoCancel"in e&&n(25,k=e.scrollAutoCancel),"elasticity"in e&&n(26,E=e.elasticity),"onscroll"in e&&n(27,T=e.onscroll),"maskFeatherSize"in e&&n(21,I=e.maskFeatherSize),"maskFeatherStartOpacity"in e&&n(19,P=e.maskFeatherStartOpacity),"maskFeatherEndOpacity"in e&&n(20,R=e.maskFeatherEndOpacity),"scroll"in e&&n(28,M=e.scroll),"$$scope"in e&&n(37,h=e.$$scope)},e.$$.update=()=>{if(2&e.$$.dirty[0]&&n(33,r="x"===C?"width":"height"),2&e.$$.dirty[0]&&n(31,i=C.toUpperCase()),8&e.$$.dirty[0]&&n(35,o=O&&getComputedStyle(O)),8&e.$$.dirty[0]|16&e.$$.dirty[1]&&n(34,a=o&&iB(o.getPropertyValue("--scrollable-feather-size"))),1075314692&e.$$.dirty[0]|44&e.$$.dirty[1]&&null!=u&&y&&null!=a&&g){const e=-1*u/a,t=-(y[r]-g[r]-u)/a;n(19,P=nL(1-e,0,1)),n(20,R=nL(1-t,0,1)),n(21,I=a),n(4,L=P),n(5,N=R)}268435464&e.$$.dirty[0]&&O&&void 0!==M&&(RP(M)?W(M):W(M.scrollOffset,M)),1073741828&e.$$.dirty[0]|4&e.$$.dirty[1]&&n(32,s=y&&g?g[r]>y[r]:void 0),536870912&e.$$.dirty[0]|2&e.$$.dirty[1]&&n(7,l=CD([b,s?"overflows":void 0])),35&e.$$.dirty[1]&&n(6,c=s?`translate${i}(${u}px)`:"none")},[w,C,g,O,L,N,c,l,x,A,()=>{s&&(B=!1,z=!0,U=hT(0,0),v=!1,n(29,b="idle"),m=tA(x))},e=>{let{detail:t}=e;s&&(v=!0,n(29,b="idle"))},e=>{let{detail:t}=e;s&&(B||z&&(z=!1,IT(t.translation)<.1)||(!k||"x"!==C||(e=>{const t=$T(hT(e.x-U.x,e.y-U.y),Math.abs);U=mT(e);const n=IT(t),r=t.x-t.y;return!(n>1&&r<-.5)})(t.translation)?W(m+t.translation[C],{elastic:!0}):B=!0))},e=>{let{detail:t}=e;if(!s)return;if(B)return;const n=m+t.translation[C],r=j(n);D=!1,x.set(r).then((e=>{v&&(D=!0)}))},e=>{let{detail:t}=e;n(30,y=t),f("measure",{x:t.x,y:t.y,width:t.width,height:t.height})},e=>{if(!s)return;e.preventDefault(),e.stopPropagation();const t=e.shiftKey,n=oB(e,{fixScrollDirection:d})*(t?-1:1),r=tA(x);W(r+n*S,{animate:!0})},V,()=>{n(3,O["x"===C?"scrollLeft":"scrollTop"]=0,O)},e=>{let{detail:t}=e;if(O.querySelector("[data-focus-visible]"))return;const n=-2*t[C],r=tA(x);W(r+n*S,{animate:!0,preventScrollState:!0})},P,R,I,$,S,_,k,E,T,M,b,y,i,s,r,a,o,u,h,p,e=>n(2,g=e.detail),function(e){eO[e?"unshift":"push"]((()=>{O=e,n(3,O)}))},e=>{setTimeout((()=>V(e)),32)}]}class lB extends OO{constructor(e){super(),AO(this,e,sB,aB,XM,{class:0,scrollBlockInteractionDist:22,scrollStep:23,scrollFocusMargin:24,scrollDirection:1,scrollAutoCancel:25,elasticity:26,onscroll:27,maskFeatherSize:21,maskFeatherStartOpacity:19,maskFeatherEndOpacity:20,scroll:28},null,[-1,-1])}}function cB(e){let t,n,r,i,o;return{c(){t=SA("span"),RA(t,"class","PinturaStatusMessage")},m(n,a){wA(n,t,a),t.innerHTML=e[0],r=!0,i||(o=[TA(t,"measure",(function(){ZM(e[1])&&e[1].apply(this,arguments)})),dA(hD.call(null,t))],i=!0)},p(n,i){let[o]=i;e=n,(!r||1&o)&&(t.innerHTML=e[0])},i(i){r||(sO((()=>{n||(n=$O(t,e[4],{duration:e[2]},!0)),n.run(1)})),r=!0)},o(i){n||(n=$O(t,e[4],{duration:e[2]},!1)),n.run(0),r=!1},d(e){e&&$A(t),e&&n&&n.end(),i=!1,YM(o)}}}function uB(e,t,n){let r,i,{text:o}=t,{onmeasure:a=eE}=t;const s=XA("isAnimated");return nA(e,s,(e=>n(5,i=e))),e.$$set=e=>{"text"in e&&n(0,o=e.text),"onmeasure"in e&&n(1,a=e.onmeasure)},e.$$.update=()=>{32&e.$$.dirty&&n(2,r=i?500:0)},[o,a,r,s,function(e,t){let{duration:n}=t;return{duration:n,tick:t=>{e.style.opacity=t}}},i]}class dB extends OO{constructor(e){super(),AO(this,e,uB,cB,XM,{text:0,onmeasure:1})}}function pB(e){let t,n,r;const i=e[5].default,o=rA(i,e,e[4],null);return{c(){t=SA("span"),o&&o.c(),RA(t,"class",n="PinturaStatusAside "+e[1]),NA(t,"transform",e[2]),NA(t,"opacity",e[0])},m(e,n){wA(e,t,n),o&&o.m(t,null),r=!0},p(e,a){let[s]=a;o&&o.p&&(!r||16&s)&&aA(o,i,e,e[4],r?oA(i,e[4],s,null):sA(e[4]),null),(!r||2&s&&n!==(n="PinturaStatusAside "+e[1]))&&RA(t,"class",n),4&s&&NA(t,"transform",e[2]),1&s&&NA(t,"opacity",e[0])},i(e){r||(bO(o,e),r=!0)},o(e){xO(o,e),r=!1},d(e){e&&$A(t),o&&o.d(e)}}}function hB(e,t,n){let r,{$$slots:i={},$$scope:o}=t,{offset:a=0}=t,{opacity:s=0}=t,{class:l}=t;return e.$$set=e=>{"offset"in e&&n(3,a=e.offset),"opacity"in e&&n(0,s=e.opacity),"class"in e&&n(1,l=e.class),"$$scope"in e&&n(4,o=e.$$scope)},e.$$.update=()=>{8&e.$$.dirty&&n(2,r=`translateX(${a}px)`)},[s,l,r,a,o,i]}class fB extends OO{constructor(e){super(),AO(this,e,hB,pB,XM,{offset:3,opacity:0,class:1})}}let mB=null;function gB(e){let t,n;const r=[{onclick:e[1]},e[3]];let i={};for(let o=0;o<r.length;o+=1)i=qM(i,r[o]);return t=new Qz({props:i}),{c(){PO(t.$$.fragment)},m(e,r){RO(t,e,r),n=!0},p(e,n){const i=10&n[0]?EO(r,[2&n[0]&&{onclick:e[1]},8&n[0]&&TO(e[3])]):{};t.$set(i)},i(e){n||(bO(t.$$.fragment,e),n=!0)},o(e){xO(t.$$.fragment,e),n=!1},d(e){MO(t,e)}}}function yB(e){let t,n;const r=[{onclick:e[0]},{class:"PinturaInputFormButtonConfirm"},e[2]];let i={};for(let o=0;o<r.length;o+=1)i=qM(i,r[o]);return t=new Qz({props:i}),{c(){PO(t.$$.fragment)},m(e,r){RO(t,e,r),n=!0},p(e,n){const i=5&n[0]?EO(r,[1&n[0]&&{onclick:e[0]},r[1],4&n[0]&&TO(e[2])]):{};t.$set(i)},i(e){n||(bO(t.$$.fragment,e),n=!0)},o(e){xO(t.$$.fragment,e),n=!1},d(e){MO(t,e)}}}function vB(e){let t,n,r,i,o,a,s,l,c=e[3]&&gB(e);const u=e[29].default,d=rA(u,e,e[28],null);let p=e[2]&&yB(e);return{c(){t=SA("div"),n=SA("div"),c&&c.c(),r=kA(),i=SA("div"),d&&d.c(),o=kA(),p&&p.c(),RA(i,"class","PinturaInputFormFields"),RA(n,"class","PinturaInputFormInner"),RA(t,"class","PinturaInputForm"),RA(t,"data-layout",e[4]),NA(t,"opacity",e[6]),NA(t,"left",e[7]),NA(t,"top",e[8]),NA(t,"right",e[9]),NA(t,"bottom",e[10])},m(u,h){wA(u,t,h),vA(t,n),c&&c.m(n,null),vA(n,r),vA(n,i),d&&d.m(i,null),vA(n,o),p&&p.m(n,null),e[30](t),a=!0,s||(l=[TA(i,"keydown",e[14]),TA(t,"focusin",e[11]),TA(t,"focusout",e[12]),TA(t,"measure",e[13]),dA(hD.call(null,t))],s=!0)},p(e,i){e[3]?c?(c.p(e,i),8&i[0]&&bO(c,1)):(c=gB(e),c.c(),bO(c,1),c.m(n,r)):c&&(yO(),xO(c,1,1,(()=>{c=null})),vO()),d&&d.p&&(!a||268435456&i[0])&&aA(d,u,e,e[28],a?oA(u,e[28],i,null):sA(e[28]),null),e[2]?p?(p.p(e,i),4&i[0]&&bO(p,1)):(p=yB(e),p.c(),bO(p,1),p.m(n,null)):p&&(yO(),xO(p,1,1,(()=>{p=null})),vO()),(!a||16&i[0])&&RA(t,"data-layout",e[4]),64&i[0]&&NA(t,"opacity",e[6]),128&i[0]&&NA(t,"left",e[7]),256&i[0]&&NA(t,"top",e[8]),512&i[0]&&NA(t,"right",e[9]),1024&i[0]&&NA(t,"bottom",e[10])},i(e){a||(bO(c),bO(d,e),bO(p),a=!0)},o(e){xO(c),xO(d,e),xO(p),a=!1},d(n){n&&$A(t),c&&c.d(),d&&d.d(n),p&&p.d(),e[30](null),s=!1,YM(l)}}}function bB(e,t,n){let r,i,o,a,s,l,c,u,d,p,h,{$$slots:f={},$$scope:m}=t,{onconfirm:g}=t,{oncancel:y}=t,{autoFocus:v=!0}=t,{autoPositionCursor:b=!0}=t,{buttonConfirm:x}=t,{buttonCancel:w}=t,{layout:$="stack"}=t,{parentRect:S}=t,{align:_}=t,{justify:C}=t,{parentMargin:k=16}=t,{panelOffset:E=pT()}=t,{willHandleKeydown:T=()=>!0}=t,I=!1,P={top:void 0,bottom:void 0},R=0;const M=()=>{const e=s.querySelector("input, textarea");e.focus(),R>=1||e.select()},A=()=>{I=!0,L||!mP()&&!wE()||n(24,P={top:"1em",bottom:"auto"}),mP()&&(e=>{let t;e.addEventListener("touchstart",(e=>t=e.touches[0].screenY)),e.addEventListener("touchmove",(e=>{const n=e.touches[0].screenY,r=e.target;/textarea/i.test(r.nodeName)?(n>t?0==r.scrollTop&&e.preventDefault():n<t?r.scrollTop+r.offsetHeight==r.scrollHeight&&e.preventDefault():e.preventDefault(),t=n):e.preventDefault()}))})(s),n(6,R=1)};let O;const L=(e=>{if(null===mB&&(mB=cE()&&"visualViewport"in window),!mB)return!1;const t=visualViewport.height,n=()=>{e(visualViewport.height<t?"visible":"hidden")};return visualViewport.addEventListener("resize",n),()=>visualViewport.removeEventListener("resize",n)})((e=>{a?"hidden"!==e||I?(clearTimeout(c),c=void 0,n(24,P={top:visualViewport.height-l.height-E.y+"px"}),"visible"===e?(n(5,s.dataset.stick=!0,s),M(),A()):(I=!1,n(6,R=0))):M():n(24,P={top:"4.5em",bottom:"auto"})}));return qA((()=>{v&&M()})),KA((()=>{L&&L()})),e.$$set=e=>{"onconfirm"in e&&n(0,g=e.onconfirm),"oncancel"in e&&n(1,y=e.oncancel),"autoFocus"in e&&n(15,v=e.autoFocus),"autoPositionCursor"in e&&n(16,b=e.autoPositionCursor),"buttonConfirm"in e&&n(2,x=e.buttonConfirm),"buttonCancel"in e&&n(3,w=e.buttonCancel),"layout"in e&&n(4,$=e.layout),"parentRect"in e&&n(17,S=e.parentRect),"align"in e&&n(18,_=e.align),"justify"in e&&n(19,C=e.justify),"parentMargin"in e&&n(20,k=e.parentMargin),"panelOffset"in e&&n(21,E=e.panelOffset),"willHandleKeydown"in e&&n(22,T=e.willHandleKeydown),"$$scope"in e&&n(28,m=e.$$scope)},e.$$.update=()=>{8519680&e.$$.dirty[0]&&n(27,r=S&&l),144572416&e.$$.dirty[0]&&n(26,i=r?((e,t,n,r,i)=>{let o,a;return o="center"===r?e.x+.5*e.width-.5*t.width:"right"===r?e.x+e.width-t.width-i:e.x+i,a="center"===n?e.y+.5*e.height-.5*t.height:"bottom"===n?e.y+e.height-t.height-i:e.y+i,{top:a+"px",right:"auto",bottom:"auto",left:o+"px"}})(S,l,_,C,k):void 0),201326592&e.$$.dirty[0]&&n(7,u=r?i.left:void 0),218103808&e.$$.dirty[0]&&n(8,d=r?i.top:P.top),201326592&e.$$.dirty[0]&&n(9,p=r?i.right:void 0),218103808&e.$$.dirty[0]&&n(10,h=r?i.bottom:P.bottom),32&e.$$.dirty[0]&&n(25,o=s&&getComputedStyle(s)),33554432&e.$$.dirty[0]&&(a=o&&"1"===o.getPropertyValue("--editor-modal"))},[g,y,x,w,$,s,R,u,d,p,h,e=>{var t;((e=>/textarea/i.test(e))(e.target)||gF(e.target))&&(O=Date.now(),b&&((t=e.target).selectionStart=t.selectionEnd=t.value.length),clearTimeout(c),c=setTimeout(A,200))},e=>{Date.now()-O>50||(e.stopPropagation(),M())},e=>{let{detail:t}=e;n(23,l={width:t.width,height:t.height})},e=>{if(T(e))return"Enter"===e.key?g():"Escape"===e.key?y():void 0},v,b,S,_,C,k,E,T,l,P,o,i,r,m,f,function(e){eO[e?"unshift":"push"]((()=>{s=e,n(5,s)}))}]}class xB extends OO{constructor(e){super(),AO(this,e,bB,vB,XM,{onconfirm:0,oncancel:1,autoFocus:15,autoPositionCursor:16,buttonConfirm:2,buttonCancel:3,layout:4,parentRect:17,align:18,justify:19,parentMargin:20,panelOffset:21,willHandleKeydown:22},null,[-1,-1])}}var wB=(e,t)=>{e.fastSeek&&e.fastSeek(t),e.currentTime=t},$B=e=>e.touches&&e.touches.length&&"stylus"===e.touches[0].touchType;const SB=["aspectRatio","isRotatedSideways","flip","cropSize"],_B=dL.map((e=>{let[t]=e;return t})).filter((e=>!SB.includes(e)));var CB=(e,t)=>new CustomEvent("ping",{detail:{type:e,data:t},cancelable:!0,bubbles:!0}),kB=(e,t)=>(t?dN(e,t):e).replace(/([a-z])([A-Z])/g,"$1-$2").replace(/\s+/g,"-").toLowerCase(),EB=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:KE;const{subscribe:n,set:r}=DO(void 0);return{subscribe:n,destroy:((e,t)=>{const n=matchMedia(e);return n.addListener(t),t(n),{get matches(){return n.matches},destroy:()=>n.removeListener(t)}})(e,(e=>{let{matches:n}=e;return r(t(n))})).destroy}},TB=(e,t)=>new Promise(((n,r)=>{(async()=>{const{imageOrienter:i,canvasMemoryLimit:o}=t||{};TL(e)&&n(await EL(e));const a=await i.read(e),s=e=>FE(e,{canvasMemoryLimit:o}).then((e=>i.apply(e,a))).then(n).catch(r);if(RE(e)||!PE()||XI()||mP())return s(e);let l;try{l=await OE(((e,t)=>createImageBitmap(e,{colorSpaceConversion:"default"}).then((e=>t(null,e))).catch(t)),[e])}catch(e){}l&&l.width?await dE()?ON()&&a>1?n(await(async e=>pE(await SE(e)))(l)):n(l):n(i.apply(l,a)):s(e)})()})),IB=(e,t)=>new Promise((async n=>{if(e.width<t.width&&e.height<t.height)return n(e);const r=Math.min(t.width/e.width,t.height/e.height),i=r*e.width,o=r*e.height,a=mE("canvas",{width:i,height:o}),s=a.getContext("2d",{willReadFrequently:!0}),l=vE(e)?await SE(e):e;s.drawImage(l,0,0,i,o),n(pE(a))}));let PB=null;var RB=()=>{if(null===PB){let e=mE("canvas");PB=!!CN(e),yE(e),e=void 0}return PB};const MB=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],AB={precision:1e-4},OB={precision:.01*AB.precision};var LB=e=>e[0]<.25&&e[1]<.25&&e[2]<.25,NB=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise((t=>{const{accept:n="image/*"}=e,r=mE("input",{style:"position:absolute;visibility:hidden;width:0;height:0;",type:"file",accept:n}),i=()=>{const[e]=r.files;r.parentNode&&r.remove(),r.removeEventListener("change",i),t(e)};r.addEventListener("change",i),mP()&&document.body.append(r),r.click()}))},DB=e=>{try{return e()}catch(e){console.error(e)}},FB=e=>{let[t,n]=e;return t+.5*(n-t)},jB=e=>Math.round(100*e),zB=e=>hT(e.clientX,e.clientY),BB=(e,t,n)=>{const r=zB(e);return _T(_T(r,t),n)};function UB(e,t,n){let r,i,o,a,s,l,c,u,d,p,h,f,m,g,y,v,b,x,w,$,S,{root:_}=t,{locale:C}=t,{stores:k}=t,{allowPan:E=!0}=t,{allowZoom:T=!0}=t,{enablePan:I=!0}=t,{enableZoom:P=!0}=t,{enableZoomControls:R=P}=t,{enableZoomInput:M=!0}=t,{enablePanInput:A=!0}=t,{enablePanLimit:O=!0}=t,{panLimitGutterScalar:L=0}=t,{zoomOptions:N=[.25,.5,1,1.25,1.5,2,3,4,6,8,16]}=t,{zoomAdjustStep:D=.25}=t,{zoomAdjustFactor:F=.1}=t,{zoomAdjustWheelFactor:j=1}=t,{elasticity:z=5}=t,{imageSelectionRectCentered:B}=t,{imageSelectionRectScalar:U}=t,{zoomLevel:W=null}=t,{zoomControls:V}=t,{zoomMultiTouching:H=!1}=t;const{isAnimated:q,isInteracting:G,rootRect:K,stageRect:Y,stageScalar:Z,imageSelectionPan:X,imageSelectionZoom:Q,imageSelectionStageFitScalar:J,imageSelectionRect:ee,imageSelectionStoredState:te,imagePreviewUpscale:ne}=k;nA(e,q,(e=>n(71,$=e))),nA(e,G,(e=>n(70,x=e))),nA(e,K,(e=>n(67,y=e))),nA(e,Y,(e=>n(66,g=e))),nA(e,Z,(e=>n(46,w=e))),nA(e,X,(e=>n(65,h=e))),nA(e,Q,(e=>n(43,p=e))),nA(e,J,(e=>n(44,f=e))),nA(e,ee,(e=>n(68,v=e))),nA(e,te,(e=>n(72,S=e))),nA(e,ne,(e=>n(45,m=e)));const re=XA("fixScrollDirection");nA(e,re,(e=>n(69,b=e)));let ie,oe,ae,se,le=!1;const ce=e=>{const t=_.querySelector(".PinturaMain > .PinturaUtilMain")||_.querySelector('div[data-inert="false"] .PinturaUtilMain');return!!t&&!!t.contains(e.target)&&!yF(e.target)},ue=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{pan:t=h,zoom:n=p}=e;uA(te,S={translation:t,zoom:n},S)},de=()=>h&&0===h.x&&0===h.y,pe=()=>{uA(Q,p=void 0,p),de()||uA(X,h=pT(),h),fe.set(void 0,{hard:!0})},he=()=>{pe(),ue()},fe=XN(void 0,{precision:.01});fe.subscribe((e=>{if(void 0===e)return uA(Q,p=void 0,p),void(de()||uA(X,h=pT(),h));const t=p;e<=1?de()||uA(X,h=pT(),h):e<=t&&uA(X,h=kT(h,.8),h),uA(Q,p=e,p)}));const me=e=>{fe.update((t=>{const n=e(t||f);return ue({zoom:n}),n}))},ge=e=>{e?fe.set(e,{hard:!1===$}):(e=void 0,fe.set(void 0,{hard:!0})),uA(Q,p=e,p),ue({zoom:e})};let ye;function ve(){const e=Date.now();!RP(ye)||e-ye>500?ye=e:(ye=void 0,ge(o?1===u?f:1:u===f?1:f))}const be=(e,t)=>{const n=U*t,r={...B},i=1-nL(L,0,1);cI(r,n<i?n:i);const o={...B};cI(o,n),lI(o,e);const a={...o};return o.x>r.x&&(a.x=r.x),o.y>r.y&&(a.y=r.y),o.x+o.width<r.x+r.width&&(a.x=r.x+r.width-o.width),o.y+o.height<r.y+r.height&&(a.y=r.y+r.height-o.height),_T(sI(a),sI(r))},xe=e=>{let{translation:t,zoom:n=1,elastify:r=!0}=e;if(!ie)return;let i=t;const o=hT(ie.x+i.x,ie.y+i.y);if(!O)return o;const a=be(o,n);return r?((e,t,n)=>t&&n?hT(e.x+nB(t.x-e.x,n),e.y+nB(t.y-e.y,n)):{...e})(a,o,z):a};let we,$e;const Se=()=>{$e=void 0,uA(G,x=!0,x),n(34,le=A),we=!1,ae=!1,ie={...h},oe=m?p||f:o?p||1:p||f},_e=e=>{const{scalar:t,translation:i,isMultiTouching:o}=e.detail;if(!ie||!o&&!A)return;o&&kT(i,.5),(A||o)&&(we=!0),H||n(13,H=o);const a=r?nL(oe*t,s,l):1,c=xe({translation:i,zoom:a,elastify:!0}),u=vT(c);se=vT(h),ae=u<se,r&&Q.set(a),X.set(c),$e=H&&{translation:e.detail.translation,scalar:t}},Ce=e=>{uA(G,x=!1,x),n(34,le=!1),n(13,H=!1),ae&&se<50&&(ie=void 0,oe=void 0,X.set(pT()))},ke=e=>{uA(G,x=!1,x),n(34,le=!1),n(13,H=!1),Promise.resolve().then((()=>{if(we&&ie){const t=$e||e.detail,n=r?nL(oe*t.scalar,s,l):1,i=xe({elastify:!1,translation:t.translation,zoom:n});X.set(i)}ie=void 0,oe=void 0,A&&e.detail.isDoubleTap&&he(),ue()}))};let Ee,Te=Date.now(),Ie=0,Pe=!1,Re=!1;const Me=e=>{if(!ce(e))return;if(e.preventDefault(),e.stopPropagation(),Re)return;clearTimeout(Ee);const t=oB(e,{fixScrollDirection:b}),n=Date.now(),r=n-Te;Te=n;const i=Math.abs(t/r)>.2;Ie=i?Ie+1:0;const o=1+-1*t*j/(i?50:100),a=BB(e,y,g);Ae(a,o,{isZoomingFast:i})},Ae=(e,t,n)=>{let{isZoomingFast:r}=n;const i=m?p||f:o?p||1:p||f,a=i*t,c=pT(),u=h,d=m?f:o?1:f,g=Math.abs(a-d),y=a<i,b=i>d&&y||i<d&&a>i,x=Ie>=5;if(r||(Pe=!1),Ie>0&&!Pe&&(Pe=b),x&&Pe)return he(),Re=!0,void setTimeout((()=>{Re=!1}),100);if(x)return;!r&&b&&g<=.05&&(Ee=setTimeout((()=>{he()}),250)),uA(Q,p=nL(a,s,l),p);const w=QT(v);cI(w,i),lI(w,u);const $=sI(w),S=QT(w);cI(S,p-i+1,e);const _=sI(S),C=CT(_T(_,$),i);((e,t,n)=>{e.x=t,e.y=n})(c,u.x+C.x,u.y+C.y),uA(X,h=y&&r?kT(mT(h),.85):be(c,i),h),ue()},Oe=e=>(e?"add":"remove")+"EventListener";let Le,Ne,De,Fe;const je=e=>{e.preventDefault(),Ne={...h},Fe=QT(v),De=BB(e,y,g),Le=m?p||f:o?p||1:p||f},ze=e=>{e.preventDefault(),uA(Q,p=nL(e.scale*Le,s,l),p);const t=QT(Fe);cI(t,Le),lI(t,Ne);const n=sI(t),r=QT(t);cI(r,p-Le+1,De);const i=sI(r),o=CT(_T(i,n),Le),a={x:Ne.x+o.x,y:Ne.y+o.y};uA(X,h=be(a,p),h)},Be=e=>{e.preventDefault()},Ue=e=>{_[Oe(e)]("wheel",Me),mP()||(_[Oe(e)]("gesturestart",je),_[Oe(e)]("gesturechange",ze),_[Oe(e)]("gestureend",Be))},We=e=>{const t=Oe(e);_[t]("interactionstart",Se),_[t]("interactionupdate",_e),_[t]("interactionrelease",Ce),_[t]("interactionend",ke)};let Ve;return qA((()=>{Ve=tB(_,{drag:!0,pinch:!0,inertia:!0,inertiaDurationMultiplier:10,shouldStartInteraction:ce})})),KA((()=>{Ue(!1),We(!1),Ve.destroy(),Ve=void 0})),e.$$set=e=>{"root"in e&&n(14,_=e.root),"locale"in e&&n(15,C=e.locale),"stores"in e&&n(16,k=e.stores),"allowPan"in e&&n(17,E=e.allowPan),"allowZoom"in e&&n(18,T=e.allowZoom),"enablePan"in e&&n(19,I=e.enablePan),"enableZoom"in e&&n(20,P=e.enableZoom),"enableZoomControls"in e&&n(21,R=e.enableZoomControls),"enableZoomInput"in e&&n(22,M=e.enableZoomInput),"enablePanInput"in e&&n(23,A=e.enablePanInput),"enablePanLimit"in e&&n(24,O=e.enablePanLimit),"panLimitGutterScalar"in e&&n(25,L=e.panLimitGutterScalar),"zoomOptions"in e&&n(26,N=e.zoomOptions),"zoomAdjustStep"in e&&n(27,D=e.zoomAdjustStep),"zoomAdjustFactor"in e&&n(28,F=e.zoomAdjustFactor),"zoomAdjustWheelFactor"in e&&n(29,j=e.zoomAdjustWheelFactor),"elasticity"in e&&n(30,z=e.elasticity),"imageSelectionRectCentered"in e&&n(31,B=e.imageSelectionRectCentered),"imageSelectionRectScalar"in e&&n(32,U=e.imageSelectionRectScalar),"zoomLevel"in e&&n(33,W=e.zoomLevel),"zoomControls"in e&&n(12,V=e.zoomControls),"zoomMultiTouching"in e&&n(13,H=e.zoomMultiTouching)},e.$$.update=()=>{var t,g;5505024&e.$$.dirty[0]&&n(36,r=T&&P&&M),655360&e.$$.dirty[0]&&n(35,i=E&&I),393216&e.$$.dirty[0]&&(E||T?(uA(Q,p=P?S.zoom:void 0,p),uA(X,h=I?mT(S.translation):de()?h:pT(),h),fe.set(p)):pe()),32768&e.$$.dirty[1]&&(o=w>=1),67141632&e.$$.dirty[0]|57344&e.$$.dirty[1]&&n(40,a=[(m||w<1)&&[f,jB(f)+"%",{sublabel:C.labelZoomFit}],...N.map((e=>[e,jB(e)+"%"]))].filter(Boolean).map((e=>(1===e[0]&&(e[2]={sublabel:C.labelZoomActual}),e))).sort(((e,t)=>{const n=e[0]||f,r=t[0]||f;return n<r?-1:r<n?1:0}))),8704&e.$$.dirty[1]&&n(38,s=Math.min(a.reduce(((e,t)=>{let[n]=t;return n<e?n:e}),Number.MAX_SAFE_INTEGER),f)),512&e.$$.dirty[1]&&n(37,l=a.reduce(((e,t)=>{let[n]=t;return n>e?n:e}),Number.MIN_SAFE_INTEGER)),4&e.$$.dirty[1]&&null!==W&&ge(W),61440&e.$$.dirty[1]&&n(42,u=p||(m||w<1?f:1)),2560&e.$$.dirty[1]&&n(39,(t=a.map((e=>{let[t]=e;return t})),g=u,c=t.findIndex((e=>e===g)))),2048&e.$$.dirty[1]&&n(41,d=jB(u)+"%"),405045248&e.$$.dirty[0]|6080&e.$$.dirty[1]&&n(12,V=(T||T)&&R?[["Button","zoom-out",{hideLabel:!0,label:C.labelZoomOut,icon:C.iconZoomOut,disabled:p===s,onclick:()=>me((e=>Math.max(s,e-D))),onhold:()=>me((e=>Math.max(s,e*(1-F))))}],["Dropdown","zoom-level",{label:d,title:C.labelZoom,labelClass:"PinturaFixedWidthCharacters",options:a,selectedIndex:c,onchange:e=>ge(e.value),onclick:ve}],["Button","zoom-in",{hideLabel:!0,label:C.labelZoomIn,icon:C.iconZoomIn,disabled:p===l,onclick:()=>me((e=>Math.min(l,e+D))),onhold:()=>me((e=>Math.min(l,e*(1+F))))}]]:[]),16384&e.$$.dirty[0]|32&e.$$.dirty[1]&&_&&Ue(r),16384&e.$$.dirty[0]|16&e.$$.dirty[1]&&_&&We(i),8404992&e.$$.dirty[0]|24&e.$$.dirty[1]&&_&&_.style.setProperty("--cursor",i&&A?le?"grabbing":"grab":"")},[q,G,K,Y,Z,X,Q,J,ee,te,ne,re,V,H,_,C,k,E,T,I,P,R,M,A,O,L,N,D,F,j,z,B,U,W,le,i,r,l,s,c,a,d,u,p,f,m,w]}class WB extends OO{constructor(e){super(),AO(this,e,UB,null,XM,{root:14,locale:15,stores:16,allowPan:17,allowZoom:18,enablePan:19,enableZoom:20,enableZoomControls:21,enableZoomInput:22,enablePanInput:23,enablePanLimit:24,panLimitGutterScalar:25,zoomOptions:26,zoomAdjustStep:27,zoomAdjustFactor:28,zoomAdjustWheelFactor:29,elasticity:30,imageSelectionRectCentered:31,imageSelectionRectScalar:32,zoomLevel:33,zoomControls:12,zoomMultiTouching:13},null,[-1,-1,-1,-1])}}const{window:VB}=SO;function HB(e){let t,n,r,i=e[41]&&qB(e),o=e[38]&&tU(e);return{c(){i&&i.c(),t=kA(),o&&o.c(),n=EA()},m(e,a){i&&i.m(e,a),wA(e,t,a),o&&o.m(e,a),wA(e,n,a),r=!0},p(e,r){e[41]?i?(i.p(e,r),1024&r[1]&&bO(i,1)):(i=qB(e),i.c(),bO(i,1),i.m(t.parentNode,t)):i&&(yO(),xO(i,1,1,(()=>{i=null})),vO()),e[38]?o?(o.p(e,r),128&r[1]&&bO(o,1)):(o=tU(e),o.c(),bO(o,1),o.m(n.parentNode,n)):o&&(yO(),xO(o,1,1,(()=>{o=null})),vO())},i(e){r||(bO(i),bO(o),r=!0)},o(e){xO(i),xO(o),r=!1},d(e){i&&i.d(e),e&&$A(t),o&&o.d(e),e&&$A(n)}}}function qB(e){let t,n,r,i,o;const a=[KB,GB],s=[];function l(e,t){return e[39]?0:e[35]?1:-1}return~(r=l(e))&&(i=s[r]=a[r](e)),{c(){t=SA("div"),n=SA("p"),i&&i.c(),NA(n,"transform",e[72]),RA(t,"class","PinturaStatus"),NA(t,"opacity",e[54])},m(e,i){wA(e,t,i),vA(t,n),~r&&s[r].m(n,null),o=!0},p(e,o){let c=r;r=l(e),r===c?~r&&s[r].p(e,o):(i&&(yO(),xO(s[c],1,1,(()=>{s[c]=null})),vO()),~r?(i=s[r],i?i.p(e,o):(i=s[r]=a[r](e),i.c()),bO(i,1),i.m(n,null)):i=null),1024&o[2]&&NA(n,"transform",e[72]),8388608&o[1]&&NA(t,"opacity",e[54])},i(e){o||(bO(i),o=!0)},o(e){xO(i),o=!1},d(e){e&&$A(t),~r&&s[r].d()}}}function GB(e){let t,n,r,i;t=new dB({props:{text:e[35].text||"",onmeasure:e[221]}});let o=e[35].aside&&YB(e);return{c(){PO(t.$$.fragment),n=kA(),o&&o.c(),r=EA()},m(e,a){RO(t,e,a),wA(e,n,a),o&&o.m(e,a),wA(e,r,a),i=!0},p(e,n){const i={};16&n[1]&&(i.text=e[35].text||""),t.$set(i),e[35].aside?o?(o.p(e,n),16&n[1]&&bO(o,1)):(o=YB(e),o.c(),bO(o,1),o.m(r.parentNode,r)):o&&(yO(),xO(o,1,1,(()=>{o=null})),vO())},i(e){i||(bO(t.$$.fragment,e),bO(o),i=!0)},o(e){xO(t.$$.fragment,e),xO(o),i=!1},d(e){MO(t,e),e&&$A(n),o&&o.d(e),e&&$A(r)}}}function KB(e){let t,n,r,i;return t=new dB({props:{text:e[39],onmeasure:e[221]}}),r=new fB({props:{class:"PinturaStatusIcon",offset:e[82],opacity:e[83],$$slots:{default:[eU]},$$scope:{ctx:e}}}),{c(){PO(t.$$.fragment),n=kA(),PO(r.$$.fragment)},m(e,o){RO(t,e,o),wA(e,n,o),RO(r,e,o),i=!0},p(e,n){const i={};256&n[1]&&(i.text=e[39]),t.$set(i);const o={};1048576&n[2]&&(o.offset=e[82]),2097152&n[2]&&(o.opacity=e[83]),8&n[0]|268435456&n[19]&&(o.$$scope={dirty:n,ctx:e}),r.$set(o)},i(e){i||(bO(t.$$.fragment,e),bO(r.$$.fragment,e),i=!0)},o(e){xO(t.$$.fragment,e),xO(r.$$.fragment,e),i=!1},d(e){MO(t,e),e&&$A(n),MO(r,e)}}}function YB(e){let t,n;return t=new fB({props:{class:"PinturaStatusButton",offset:e[82],opacity:e[83],$$slots:{default:[QB]},$$scope:{ctx:e}}}),{c(){PO(t.$$.fragment)},m(e,r){RO(t,e,r),n=!0},p(e,n){const r={};1048576&n[2]&&(r.offset=e[82]),2097152&n[2]&&(r.opacity=e[83]),16&n[1]|268435456&n[19]&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(bO(t.$$.fragment,e),n=!0)},o(e){xO(t.$$.fragment,e),n=!1},d(e){MO(t,e)}}}function ZB(e){let t,n;return t=new iz({props:{progress:e[35].progressIndicator.progress}}),{c(){PO(t.$$.fragment)},m(e,r){RO(t,e,r),n=!0},p(e,n){const r={};16&n[1]&&(r.progress=e[35].progressIndicator.progress),t.$set(r)},i(e){n||(bO(t.$$.fragment,e),n=!0)},o(e){xO(t.$$.fragment,e),n=!1},d(e){MO(t,e)}}}function XB(e){let t,n;const r=[e[35].closeButton,{hideLabel:!0}];let i={};for(let o=0;o<r.length;o+=1)i=qM(i,r[o]);return t=new Qz({props:i}),{c(){PO(t.$$.fragment)},m(e,r){RO(t,e,r),n=!0},p(e,n){const i=16&n[1]?EO(r,[TO(e[35].closeButton),r[1]]):{};t.$set(i)},i(e){n||(bO(t.$$.fragment,e),n=!0)},o(e){xO(t.$$.fragment,e),n=!1},d(e){MO(t,e)}}}function QB(e){let t,n,r,i=e[35].progressIndicator.visible&&ZB(e),o=e[35].closeButton&&e[35].text&&XB(e);return{c(){i&&i.c(),t=kA(),o&&o.c(),n=EA()},m(e,a){i&&i.m(e,a),wA(e,t,a),o&&o.m(e,a),wA(e,n,a),r=!0},p(e,r){e[35].progressIndicator.visible?i?(i.p(e,r),16&r[1]&&bO(i,1)):(i=ZB(e),i.c(),bO(i,1),i.m(t.parentNode,t)):i&&(yO(),xO(i,1,1,(()=>{i=null})),vO()),e[35].closeButton&&e[35].text?o?(o.p(e,r),16&r[1]&&bO(o,1)):(o=XB(e),o.c(),bO(o,1),o.m(n.parentNode,n)):o&&(yO(),xO(o,1,1,(()=>{o=null})),vO())},i(e){r||(bO(i),bO(o),r=!0)},o(e){xO(i),xO(o),r=!1},d(e){i&&i.d(e),e&&$A(t),o&&o.d(e),e&&$A(n)}}}function JB(e){let t,n=e[3].iconSupportError+"";return{c(){t=_A("g")},m(e,r){wA(e,t,r),t.innerHTML=n},p(e,r){8&r[0]&&n!==(n=e[3].iconSupportError+"")&&(t.innerHTML=n)},d(e){e&&$A(t)}}}function eU(e){let t,n;return t=new eF({props:{$$slots:{default:[JB]},$$scope:{ctx:e}}}),{c(){PO(t.$$.fragment)},m(e,r){RO(t,e,r),n=!0},p(e,n){const r={};8&n[0]|268435456&n[19]&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(bO(t.$$.fragment,e),n=!0)},o(e){xO(t.$$.fragment,e),n=!1},d(e){MO(t,e)}}}function tU(e){let t,n,r,i,o,a,s,l,c,u,d,p,h,f,m=e[10]&&nU(e),g=e[46]&&e[45]&&rU(e);const y=[uU,cU],v=[];function b(e,t){return e[46]?0:1}function x(t){e[444](t)}function w(t){e[445](t)}function $(t){e[446](t)}r=b(e),i=v[r]=y[r](e),a=new _D({props:{isAnimated:e[53],isTransparent:e[20],pixelRatio:e[57],textPixelRatio:e[6],backgroundColor:e[56],maskRect:e[58],maskOpacity:e[73]?e[73].maskOpacity:1,maskMarkupOpacity:e[7],maskFrameOpacity:e[5],clipAnnotationsToImage:e[85],images:e[55],interfaceImages:e[86],loadImageData:e[28],enableGrid:e[11],gridSize:e[87],gridColors:[e[88],e[89]],gridOpacity:e[90],selectionColor:e[91],csp:e[92]||{},willRequest:e[81]||e[93],willRender:e[441],didRender:e[442]}});let S={root:e[2],locale:e[3],stores:e[202],allowPan:e[95],enablePan:e[17],enablePanLimit:e[21],panLimitGutterScalar:e[22],enablePanInput:e[96],allowZoom:e[97],enableZoom:e[18],enableZoomInput:void 0!==e[19]?e[19]:e[98],enableZoomControls:e[99],zoomOptions:e[13]||e[23],zoomAdjustStep:e[14]||e[24],zoomAdjustFactor:e[15]||e[25],zoomAdjustWheelFactor:e[16]||e[26],imageSelectionRectCentered:e[100],imageSelectionRectScalar:e[101],elasticity:gU*e[8]};return void 0!==e[0]&&(S.zoomLevel=e[0]),void 0!==e[33]&&(S.zoomControls=e[33]),void 0!==e[34]&&(S.zoomMultiTouching=e[34]),u=new WB({props:S}),eO.push((()=>IO(u,"zoomLevel",x))),eO.push((()=>IO(u,"zoomControls",w))),eO.push((()=>IO(u,"zoomMultiTouching",$))),{c(){m&&m.c(),t=kA(),g&&g.c(),n=kA(),i.c(),o=kA(),PO(a.$$.fragment),s=kA(),l=SA("div"),c=kA(),PO(u.$$.fragment),RA(l,"class","PinturaRootPortal")},m(i,d){m&&m.m(i,d),wA(i,t,d),g&&g.m(i,d),wA(i,n,d),v[r].m(i,d),wA(i,o,d),RO(a,i,d),wA(i,s,d),wA(i,l,d),e[443](l),wA(i,c,d),RO(u,i,d),f=!0},p(e,s){e[10]?m?(m.p(e,s),1024&s[0]&&bO(m,1)):(m=nU(e),m.c(),bO(m,1),m.m(t.parentNode,t)):m&&(yO(),xO(m,1,1,(()=>{m=null})),vO()),e[46]&&e[45]?g?(g.p(e,s),49152&s[1]&&bO(g,1)):(g=rU(e),g.c(),bO(g,1),g.m(n.parentNode,n)):g&&(yO(),xO(g,1,1,(()=>{g=null})),vO());let l=r;r=b(e),r===l?v[r].p(e,s):(yO(),xO(v[l],1,1,(()=>{v[l]=null})),vO(),i=v[r],i?i.p(e,s):(i=v[r]=y[r](e),i.c()),bO(i,1),i.m(o.parentNode,o));const c={};4194304&s[1]&&(c.isAnimated=e[53]),1048576&s[0]&&(c.isTransparent=e[20]),67108864&s[1]&&(c.pixelRatio=e[57]),64&s[0]&&(c.textPixelRatio=e[6]),33554432&s[1]&&(c.backgroundColor=e[56]),134217728&s[1]&&(c.maskRect=e[58]),2048&s[2]&&(c.maskOpacity=e[73]?e[73].maskOpacity:1),128&s[0]&&(c.maskMarkupOpacity=e[7]),32&s[0]&&(c.maskFrameOpacity=e[5]),8388608&s[2]&&(c.clipAnnotationsToImage=e[85]),16777216&s[1]&&(c.images=e[55]),16777216&s[2]&&(c.interfaceImages=e[86]),268435456&s[0]&&(c.loadImageData=e[28]),2048&s[0]&&(c.enableGrid=e[11]),33554432&s[2]&&(c.gridSize=e[87]),201326592&s[2]&&(c.gridColors=[e[88],e[89]]),268435456&s[2]&&(c.gridOpacity=e[90]),536870912&s[2]&&(c.selectionColor=e[91]),1073741824&s[2]&&(c.csp=e[92]||{}),524288&s[2]|1&s[3]&&(c.willRequest=e[81]||e[93]),512&s[0]|270991424&s[1]|2&s[3]&&(c.willRender=e[441]),62&s[2]&&(c.didRender=e[442]),a.$set(c);const f={};4&s[0]&&(f.root=e[2]),8&s[0]&&(f.locale=e[3]),4&s[3]&&(f.allowPan=e[95]),131072&s[0]&&(f.enablePan=e[17]),2097152&s[0]&&(f.enablePanLimit=e[21]),4194304&s[0]&&(f.panLimitGutterScalar=e[22]),8&s[3]&&(f.enablePanInput=e[96]),16&s[3]&&(f.allowZoom=e[97]),262144&s[0]&&(f.enableZoom=e[18]),524288&s[0]|32&s[3]&&(f.enableZoomInput=void 0!==e[19]?e[19]:e[98]),64&s[3]&&(f.enableZoomControls=e[99]),8396800&s[0]&&(f.zoomOptions=e[13]||e[23]),16793600&s[0]&&(f.zoomAdjustStep=e[14]||e[24]),33587200&s[0]&&(f.zoomAdjustFactor=e[15]||e[25]),67174400&s[0]&&(f.zoomAdjustWheelFactor=e[16]||e[26]),128&s[3]&&(f.imageSelectionRectCentered=e[100]),256&s[3]&&(f.imageSelectionRectScalar=e[101]),256&s[0]&&(f.elasticity=gU*e[8]),!d&&1&s[0]&&(d=!0,f.zoomLevel=e[0],lO((()=>d=!1))),!p&&4&s[1]&&(p=!0,f.zoomControls=e[33],lO((()=>p=!1))),!h&&8&s[1]&&(h=!0,f.zoomMultiTouching=e[34],lO((()=>h=!1))),u.$set(f)},i(e){f||(bO(m),bO(g),bO(i),bO(a.$$.fragment,e),bO(u.$$.fragment,e),f=!0)},o(e){xO(m),xO(g),xO(i),xO(a.$$.fragment,e),xO(u.$$.fragment,e),f=!1},d(i){m&&m.d(i),i&&$A(t),g&&g.d(i),i&&$A(n),v[r].d(i),i&&$A(o),MO(a,i),i&&$A(s),i&&$A(l),e[443](null),i&&$A(c),MO(u,i)}}}function nU(e){let t,n,r,i,o;return n=new Hz({props:{items:e[69]}}),{c(){t=SA("div"),PO(n.$$.fragment),RA(t,"class","PinturaNav PinturaNavTools")},m(a,s){wA(a,t,s),RO(n,t,null),r=!0,i||(o=[TA(t,"measure",e[430]),dA(hD.call(null,t))],i=!0)},p(e,t){const r={};128&t[2]&&(r.items=e[69]),n.$set(r)},i(e){r||(bO(n.$$.fragment,e),r=!0)},o(e){xO(n.$$.fragment,e),r=!1},d(e){e&&$A(t),MO(n),i=!1,YM(o)}}}function rU(e){let t,n,r;return n=new lB({props:{elasticity:e[8]*yU,scrollDirection:e[76]?"y":"x",$$slots:{default:[lU]},$$scope:{ctx:e}}}),{c(){t=SA("div"),PO(n.$$.fragment),RA(t,"class","PinturaNav PinturaNavMain")},m(e,i){wA(e,t,i),RO(n,t,null),r=!0},p(e,t){const r={};256&t[0]&&(r.elasticity=e[8]*yU),16384&t[2]&&(r.scrollDirection=e[76]?"y":"x"),12288&t[1]|135168&t[2]|268435456&t[19]&&(r.$$scope={dirty:t,ctx:e}),n.$set(r)},i(e){r||(bO(n.$$.fragment,e),r=!0)},o(e){xO(n.$$.fragment,e),r=!1},d(e){e&&$A(t),MO(n)}}}function iU(e){let t,n;const r=[e[79],{tabs:e[44]}];let i={$$slots:{default:[sU,e=>{let{tab:t}=e;return{616:t}},e=>{let{tab:t}=e;return[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,t?134217728:0]}]},$$scope:{ctx:e}};for(let o=0;o<r.length;o+=1)i=qM(i,r[o]);return t=new AD({props:i}),t.$on("select",e[431]),{c(){PO(t.$$.fragment)},m(e,r){RO(t,e,r),n=!0},p(e,n){const i=8192&n[1]|131072&n[2]?EO(r,[131072&n[2]&&TO(e[79]),8192&n[1]&&{tabs:e[44]}]):{};402653184&n[19]&&(i.$$scope={dirty:n,ctx:e}),t.$set(i)},i(e){n||(bO(t.$$.fragment,e),n=!0)},o(e){xO(t.$$.fragment,e),n=!1},d(e){MO(t,e)}}}function oU(e){let t,n;return t=new Hz({props:{items:e[44]}}),{c(){PO(t.$$.fragment)},m(e,r){RO(t,e,r),n=!0},p(e,n){const r={};8192&n[1]&&(r.items=e[44]),t.$set(r)},i(e){n||(bO(t.$$.fragment,e),n=!0)},o(e){xO(t.$$.fragment,e),n=!1},d(e){MO(t,e)}}}function aU(e){let t,n=e[616].icon+"";return{c(){t=_A("g")},m(e,r){wA(e,t,r),t.innerHTML=n},p(e,r){134217728&r[19]&&n!==(n=e[616].icon+"")&&(t.innerHTML=n)},d(e){e&&$A(t)}}}function sU(e){let t,n,r,i,o,a=e[616].label+"";return t=new eF({props:{$$slots:{default:[aU]},$$scope:{ctx:e}}}),{c(){PO(t.$$.fragment),n=kA(),r=SA("span"),i=CA(a)},m(e,a){RO(t,e,a),wA(e,n,a),wA(e,r,a),vA(r,i),o=!0},p(e,n){const r={};402653184&n[19]&&(r.$$scope={dirty:n,ctx:e}),t.$set(r),(!o||134217728&n[19])&&a!==(a=e[616].label+"")&&OA(i,a)},i(e){o||(bO(t.$$.fragment,e),o=!0)},o(e){xO(t.$$.fragment,e),o=!1},d(e){MO(t,e),e&&$A(n),e&&$A(r)}}}function lU(e){let t,n,r,i;const o=[oU,iU],a=[];function s(e,t){return e[74]?0:1}return t=s(e),n=a[t]=o[t](e),{c(){n.c(),r=EA()},m(e,n){a[t].m(e,n),wA(e,r,n),i=!0},p(e,i){let l=t;t=s(e),t===l?a[t].p(e,i):(yO(),xO(a[l],1,1,(()=>{a[l]=null})),vO(),n=a[t],n?n.p(e,i):(n=a[t]=o[t](e),n.c()),bO(n,1),n.m(r.parentNode,r))},i(e){i||(bO(n),i=!0)},o(e){xO(n),i=!1},d(e){a[t].d(e),e&&$A(r)}}}function cU(e){let t,n,r;function i(t){e[437](t)}let o={locale:e[3],class:"PinturaMain",view:e[207](e[43]),props:e[206](e[43],e[27]),stores:e[202]};return void 0!==e[1][e[43]]&&(o.component=e[1][e[43]]),t=new XD({props:o}),eO.push((()=>IO(t,"component",i))),t.$on("measure",e[233]),t.$on("show",e[438]),t.$on("hide",e[439]),t.$on("fade",e[440]),{c(){PO(t.$$.fragment)},m(e,n){RO(t,e,n),r=!0},p(e,r){const i={};8&r[0]&&(i.locale=e[3]),4096&r[1]&&(i.view=e[207](e[43])),134217728&r[0]|4096&r[1]&&(i.props=e[206](e[43],e[27])),!n&&2&r[0]|4096&r[1]&&(n=!0,i.component=e[1][e[43]],lO((()=>n=!1))),t.$set(i)},i(e){r||(bO(t.$$.fragment,e),r=!0)},o(e){xO(t.$$.fragment,e),r=!1},d(e){MO(t,e)}}}function uU(e){let t,n;const r=[{class:"PinturaMain"},{visible:e[62]},e[79],{panels:e[78]}];let i={$$slots:{default:[dU,e=>{let{panel:t,panelIsActive:n}=e;return{614:t,615:n}},e=>{let{panel:t,panelIsActive:n}=e;return[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(t?33554432:0)|(n?67108864:0)]}]},$$scope:{ctx:e}};for(let o=0;o<r.length;o+=1)i=qM(i,r[o]);return t=new qD({props:i}),t.$on("measure",e[436]),{c(){PO(t.$$.fragment)},m(e,r){RO(t,e,r),n=!0},p(e,n){const i=196609&n[2]?EO(r,[r[0],1&n[2]&&{visible:e[62]},131072&n[2]&&TO(e[79]),65536&n[2]&&{panels:e[78]}]):{};134217738&n[0]|369098752&n[19]&&(i.$$scope={dirty:n,ctx:e}),t.$set(i)},i(e){n||(bO(t.$$.fragment,e),n=!0)},o(e){xO(t.$$.fragment,e),n=!1},d(e){MO(t,e)}}}function dU(e){let t,n,r;function i(t){e[432](t,e[614])}let o={locale:e[3],view:e[207](e[614]),props:e[206](e[614],e[27]),isActive:e[615],stores:e[202]};return void 0!==e[1][e[614]]&&(o.component=e[1][e[614]]),t=new XD({props:o}),eO.push((()=>IO(t,"component",i))),t.$on("measure",e[233]),t.$on("show",(function(){return e[433](e[614])})),t.$on("hide",(function(){return e[434](e[614])})),t.$on("fade",(function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e[435](e[614],...n)})),{c(){PO(t.$$.fragment)},m(e,n){RO(t,e,n),r=!0},p(r,i){e=r;const o={};8&i[0]&&(o.locale=e[3]),33554432&i[19]&&(o.view=e[207](e[614])),134217728&i[0]|33554432&i[19]&&(o.props=e[206](e[614],e[27])),67108864&i[19]&&(o.isActive=e[615]),!n&&2&i[0]|33554432&i[19]&&(n=!0,o.component=e[1][e[614]],lO((()=>n=!1))),t.$set(o)},i(e){r||(bO(t.$$.fragment,e),r=!0)},o(e){xO(t.$$.fragment,e),r=!1},d(e){MO(t,e)}}}function pU(e){let t;return{c(){t=SA("span"),RA(t,"class","PinturaEditorOverlay"),NA(t,"opacity",e[102])},m(e,n){wA(e,t,n)},p(e,n){512&n[3]&&NA(t,"opacity",e[102])},d(e){e&&$A(t)}}}function hU(e){let t,n;const r=[{layout:"row"},{parentRect:e[50]},e[60]];let i={$$slots:{default:[fU]},$$scope:{ctx:e}};for(let o=0;o<r.length;o+=1)i=qM(i,r[o]);return t=new xB({props:i}),{c(){PO(t.$$.fragment)},m(e,r){RO(t,e,r),n=!0},p(e,n){const i=537395200&n[1]?EO(r,[r[0],524288&n[1]&&{parentRect:e[50]},536870912&n[1]&&TO(e[60])]):{};1610612736&n[1]|268435456&n[19]&&(i.$$scope={dirty:n,ctx:e}),t.$set(i)},i(e){n||(bO(t.$$.fragment,e),n=!0)},o(e){xO(t.$$.fragment,e),n=!1},d(e){MO(t,e)}}}function fU(e){let t,n,r;return{c(){t=SA("input"),t.value=n=e[60].text,RA(t,"placeholder",r=e[60].placeholder),RA(t,"type","text"),RA(t,"spellcheck","false"),RA(t,"autocorrect","off"),RA(t,"autocapitalize","off")},m(n,r){wA(n,t,r),e[447](t)},p(e,i){536870912&i[1]&&n!==(n=e[60].text)&&t.value!==n&&(t.value=n),536870912&i[1]&&r!==(r=e[60].placeholder)&&RA(t,"placeholder",r)},d(n){n&&$A(t),e[447](null)}}}function mU(e){let t,n,r,i,o,a;sO(e[429]);let s=e[40]&&HB(e),l=e[102]>0&&pU(e),c=e[60]&&hU(e);return{c(){t=SA("div"),s&&s.c(),n=kA(),l&&l.c(),r=kA(),c&&c.c(),RA(t,"id",e[4]),RA(t,"class",e[77]),RA(t,"data-env",e[75]),RA(t,"dir",e[12])},m(u,d){wA(u,t,d),s&&s.m(t,null),vA(t,n),l&&l.m(t,null),vA(t,r),c&&c.m(t,null),e[448](t),i=!0,o||(a=[TA(VB,"keydown",e[224]),TA(VB,"keyup",e[225]),TA(VB,"blur",e[226]),TA(VB,"paste",e[230]),TA(VB,"resize",e[429]),TA(t,"ping",(function(){ZM(e[68])&&e[68].apply(this,arguments)})),TA(t,"contextmenu",e[227]),TA(t,"touchstart",e[222],{passive:!1}),TA(t,"touchmove",(function(){ZM(e[71])&&e[71].apply(this,arguments)})),TA(t,"pointermove",(function(){ZM(e[70])&&e[70].apply(this,arguments)})),TA(t,"transitionend",e[212]),TA(t,"dropfiles",e[228]),TA(t,"measure",e[449]),TA(t,"click",(function(){ZM(e[42]?e[229]:eE)&&(e[42]?e[229]:eE).apply(this,arguments)})),dA(hD.call(null,t,{observeViewRect:!0,isMeasureRoot:!0})),dA(fD.call(null,t)),dA(yD.call(null,t))],o=!0)},p(o,a){(e=o)[40]?s?(s.p(e,a),512&a[1]&&bO(s,1)):(s=HB(e),s.c(),bO(s,1),s.m(t,n)):s&&(yO(),xO(s,1,1,(()=>{s=null})),vO()),e[102]>0?l?l.p(e,a):(l=pU(e),l.c(),l.m(t,r)):l&&(l.d(1),l=null),e[60]?c?(c.p(e,a),536870912&a[1]&&bO(c,1)):(c=hU(e),c.c(),bO(c,1),c.m(t,null)):c&&(yO(),xO(c,1,1,(()=>{c=null})),vO()),(!i||16&a[0])&&RA(t,"id",e[4]),(!i||32768&a[2])&&RA(t,"class",e[77]),(!i||8192&a[2])&&RA(t,"data-env",e[75]),(!i||4096&a[0])&&RA(t,"dir",e[12])},i(e){i||(bO(s),bO(c),i=!0)},o(e){xO(s),xO(c),i=!1},d(n){n&&$A(t),s&&s.d(),l&&l.d(),c&&c.d(),e[448](null),o=!1,YM(a)}}}const gU=1,yU=10;function vU(e,t,n){let r,i,o,a,s,l,c,u,d,p,h,f,m,g,y,v,b,x,w,$,S,_,C,k,E,T,I,P,R,M,A,O,L,N,D,F,j,z,B,U,W,V,H,q,G,K,Y,Z,X,Q,J,ee,te,ne,re,ie,oe,ae,se,le,ce,ue,de,pe,he,fe,me,ge,ye,ve,be,xe,we,$e,Se,_e,Ce,ke,Ee,Te,Ie,Pe,Re,Me,Ae,Oe,Le,Ne,De,Fe,je,ze,Be,Ue,We,Ve,He,qe,Ge,Ke,Ye,Ze,Xe,Qe,Je,et,tt,nt,rt,it,ot,at,st,lt,ct,ut,dt,pt,ht,ft,mt,gt,yt,vt,bt,xt,wt,$t,St,_t,Ct,kt,Et,Tt,It,Pt,Rt,Mt,At,Ot,Lt,Nt,Dt,Ft,jt,zt,Bt,Ut,Wt,Vt,Ht,qt,Gt,Kt,Yt,Zt,Xt,Qt,Jt,en,tn,nn,rn,on,an,sn,ln,cn,un,dn,pn,hn,fn,mn,gn,yn,vn,bn,xn,wn,$n,Sn,_n,Cn,kn,En,Tn,In,Pn,Rn,Mn,An,On,Ln,Nn,Dn,Fn,jn,zn,Bn,Un,Wn,Vn,Hn,qn,Gn,Kn,Yn,Zn,Xn,Qn,Jn,er,tr,nr,rr=VM,ir=VM;nA(e,QN,(e=>n(417,yn=e))),e.$$.on_destroy.push((()=>rr())),e.$$.on_destroy.push((()=>ir()));const or=GP(),ar=YA();let{class:sr}=t,{layout:lr}=t,{stores:cr}=t,{locale:ur}=t,{id:dr}=t,{util:pr}=t,{utils:hr}=t,{animations:fr="auto"}=t,{disabled:mr=!1}=t,{previewUpscale:gr=!1}=t,{previewPad:yr=!1}=t,{previewMaskOpacity:vr=.95}=t,{previewImageDataMaxSize:br}=t,{previewImageTextPixelRatio:xr}=t,{markupMaskOpacity:wr=1}=t,{zoomMaskOpacity:$r=.85}=t,{elasticityMultiplier:Sr=10}=t,{willRevert:_r=()=>Promise.resolve(!0)}=t,{willProcessImage:Cr=()=>Promise.resolve(!0)}=t,{willRenderCanvas:kr=KE}=t,{willRenderToolbar:Er=KE}=t,{willRenderUtilTabs:Tr=KE}=t,{willSetHistoryInitialState:Ir=KE}=t,{enableButtonExport:Pr=!0}=t,{enableButtonRevert:Rr=!0}=t,{enableNavigateHistory:Mr=!0}=t,{enableToolbar:Ar=!0}=t,{enableUtils:Or=!0}=t,{enableButtonClose:Lr=!1}=t,{enableDropImage:Nr=!1}=t,{enablePasteImage:Dr=!1}=t,{enableBrowseImage:Fr=!1}=t,{enableTransparencyGrid:jr=!1}=t,{layoutDirectionPreference:zr="auto"}=t,{layoutHorizontalUtilsPreference:Br="left"}=t,{layoutVerticalUtilsPreference:Ur="bottom"}=t,{layoutVerticalToolbarPreference:Wr="top"}=t,{layoutVerticalControlGroupsPreference:Vr="bottom"}=t,{layoutVerticalControlTabsPreference:Hr="bottom"}=t,{status:qr}=t,{formatStatusImageLoading:Gr=function(e,t){const{state:n}=e;if(!n||!n.task)return t.statusImageLoadNone;if(n.error){if("IMAGE_TOO_SMALL"===n.error.code)return t.statusImageLoadMinSize;if("VIDEO_TOO_SHORT"===n.error.code){const e=Array.isArray(t.unitSeconds)?1===n.error.metadata.minDuration?t.unitSeconds[0]:t.unitSeconds[1]:t.unitSeconds;return dN(t.statusImageLoadMinDuration,{seconds:e},"{","}")}return t.statusImageLoadError}return"blob-to-bitmap"===n.task?t.statusImageLoadPrepare:t.statusImageLoadBusy}}=t,{formatStatusImageProcessing:Kr=function(e,t){const{state:n}=e;if(n&&n.task)return"store"===n.task?n.error?t.statusImageUploadError:t.statusImageUploadBusy:n.error?t.statusImageProcessError:t.statusImageProcessBusy}}=t,{formatStatusSupportError:Yr=function(e,t){const{features:n}=e;return{features:n.join(", ")}}}=t,{textDirection:Zr}=t,{markupEditorZoomLevel:Xr=null}=t,{markupEditorZoomLevels:Qr}=t,{markupEditorZoomAdjustStep:Jr}=t,{markupEditorZoomAdjustFactor:ei}=t,{markupEditorZoomAdjustWheelFactor:ti}=t,{markupEditorInteractionMode:ni=!1}=t,{muteAudio:ri=!0}=t,{willSetMediaInitialTimeOffset:ii=(e,t)=>e*FB(t[0])}=t,{enablePan:oi=!0}=t,{enableZoom:ai=!0}=t,{enableZoomControls:si=!0}=t,{enableZoomInput:li}=t,{enablePanInput:ci}=t,{enableCanvasAlpha:ui=!1}=t,{enablePanLimit:di}=t,{panLimitGutterScalar:pi}=t,{pan:hi=null}=t,{zoomPresetOptions:fi=[.25,.5,1,1.25,1.5,2,3,4,6,8,16]}=t,{zoomAdjustStep:mi=.25}=t,{zoomAdjustFactor:gi=.1}=t,{zoomAdjustWheelFactor:yi=1}=t,{zoomLevel:vi=null}=t,{fixScrollDirection:bi=!1}=t;const xi=DO(bi);ZA("fixScrollDirection",xi);const wi=cE()&&"visualViewport"in window,$i=DO("hidden");function Si(e){const{height:t,scale:n}=e.target,r=t*n/window.screen.height<.75?"visible":"hidden";$i.set(r)}let _i,Ci;ZA("softKeyboardState",$i),wi&&window.visualViewport.addEventListener("resize",Si);let{imagePreviewSrc:ki}=t,{imageOrienter:Ei={read:()=>1,apply:e=>e}}=t,{pluginComponents:Ti}=t,{pluginOptions:Ii={}}=t;const Pi=or.sub,Ri={};let{root:Mi}=t;const Ai=()=>{Xe.setAttribute("data-redraw","true"),to.set({})},Oi=DO(!0);nA(e,Oi,(e=>n(483,gt=e)));const Li=DO(void 0);nA(e,Li,(e=>n(427,On=e)));const Ni=DO(0);nA(e,Ni,(e=>n(424,Rn=e)));const Di=DO(!1),Fi=e=>{Di.set("play"===e.type),or.pub(e.type)};let ji,zi,Bi,Ui,Wi=!1;const Vi=()=>{if(!o||!qi())return;Ui=d,uA(Li,On=void 0,On);const e=Xe;Wi=!1;const t=1/24,n=Qi();(Math.abs(c*n-Rn*n)<=t||n-n*Rn<=t)&&uA(Ni,Rn=l,Rn),eo(Rn*Qi()),e.play().catch((()=>{}));let r=Ji();const i=()=>{if(qi())return;Bi=requestAnimationFrame(i);let e=Ji();e-r<=0&&(e=r+.01),r=e,uA(Ni,Rn=e/Qi(),Rn),Ui>=0&&Rn>=c&&(uA(Ni,Rn=c,Rn),Hi()),d>-1&&(Wi=!0),Wi&&-1===d&&p>0&&(uA(Ni,Rn=s[p][0],Rn),eo(Rn*Qi())),uA(mo,En=Rn*Qi(),En),Ai()};i()},Hi=()=>{o&&!qi()&&(uA(Li,On=void 0,On),Ui=void 0,Xe.pause(),cancelAnimationFrame(Bi),Ai())},qi=()=>Xe&&Xe.paused,Gi=()=>{if(o)return qi()?Vi():Hi()},Ki=()=>{o&&(Xe.muted=!0)},Yi=()=>{o&&(Xe.muted=!1)},Zi=()=>{o&&uA(Xi,An=!An,An)},Xi=DO(ri);nA(e,Xi,(e=>n(426,An=e)));const Qi=()=>{if(o)return Xe.duration},Ji=()=>{if(o)return Xe.currentTime},eo=e=>{o&&(wB(Xe,e),uA(Ni,Rn=e/Mn,Rn))},to=DO({});nA(e,to,(e=>n(52,bt=e))),ZA("redrawTrigger",to);const no=DO(Sr);nA(e,no,(e=>n(500,In=e))),ZA("elasticityMultiplier",no);let ro=[];const io=XN();nA(e,io,(e=>n(102,nr=e)));const oo=AN()||1024,ao=zT(oo,oo),so=wL(),lo=e=>Promise.resolve(Tn&&Tn(e,{resourceType:"image"})).then((t=>{if(!1===t)return;const{headers:n,credentials:r}=t||{};return fetch(e,{headers:n,credentials:r}).then((e=>{if(200!==e.status)throw`${e.status} (${e.statusText})`;return e.blob()})).then((e=>TB(e,{imageOrienter:Ei,canvasMemoryLimit:so}))).then((e=>IB(e,m)))}));let{imageSourceToImageData:co=e=>hE(e)?lo(e):UI(e)?new Promise((t=>t(pE(e)))):cP(e)||WI(e)?TB(e,{imageOrienter:Ei,canvasMemoryLimit:so}).then((e=>IB(e,m))):void 0}=t;const uo=(()=>{let e,t;const n=_B.reduce(((e,n)=>(e[n]=function(e,t,n){let r=[];return{set:t,update:n,publish:e=>{r.forEach((t=>t(e)))},subscribe:t=>(r.push(t),e(t),()=>{r=r.filter((e=>e!==t))})}}((e=>{if(!t)return e();t.stores[n].subscribe(e)()}),(e=>{t&&t.stores[n].set(e)}),(e=>{t&&t.stores[n].update(e)})),e)),{});return{update:r=>{if(t=r,e&&(e.forEach((e=>e())),e=void 0),!r)return n.file.publish(void 0),void n.loadState.publish(void 0);e=_B.map((e=>r.stores[e].subscribe((t=>{n[e].publish(t)}))))},stores:n,destroy:()=>{e&&e.forEach((e=>e()))}}})(),{file:po,size:ho,duration:fo,currentTime:mo,trim:go,volume:yo,minDuration:vo,maxDuration:bo,loadState:xo,processState:wo,cropAspectRatio:$o,cropLimitToImage:So,crop:_o,cropMinSize:Co,cropMaxSize:ko,cropRange:Eo,cropOrigin:To,cropRectAspectRatio:Io,rotation:Po,rotationRange:Ro,targetSize:Mo,flipX:Ao,flipY:Oo,backgroundColor:Lo,backgroundImage:No,backgroundFilterMode:Do,colorMatrix:Fo,convolutionMatrix:jo,gamma:zo,vignette:Bo,noise:Uo,decoration:Wo,annotation:Vo,manipulation:Ho,redaction:qo,frame:Go,selection:Ko,state:Yo}=uo.stores;nA(e,po,(e=>n(401,jt=e))),nA(e,ho,(e=>n(375,et=e))),nA(e,fo,(e=>n(425,Mn=e))),nA(e,mo,(e=>n(499,En=e))),nA(e,go,(e=>n(422,kn=e))),nA(e,yo,(e=>n(423,Pn=e))),nA(e,bo,(e=>n(428,Ln=e))),nA(e,xo,(e=>n(393,It=e))),nA(e,wo,(e=>n(392,Tt=e))),nA(e,$o,(e=>n(496,bn=e))),nA(e,So,(e=>n(85,jn=e))),nA(e,_o,(e=>n(412,rn=e))),nA(e,Po,(e=>n(378,rt=e))),nA(e,Ao,(e=>n(377,nt=e))),nA(e,Oo,(e=>n(376,tt=e))),nA(e,Lo,(e=>n(383,ht=e))),nA(e,Wo,(e=>n(48,Je=e))),nA(e,Vo,(e=>n(49,it=e))),nA(e,Ho,(e=>n(380,ut=e))),nA(e,qo,(e=>n(381,dt=e))),nA(e,Go,(e=>n(47,Qe=e))),nA(e,Ko,(e=>n(59,Sn=e))),nA(e,Yo,(e=>n(485,Ut=e))),ZA("components",{DynamicComponentTree:Hz}),ZA("previewcontrols",{play:Vi,pause:Hi,togglePlayPause:Gi,mute:Ki,unmute:Yi,toggleMute:Zi,setCurrentTime:eo,getCurrentTime:Ji,getDuration:Qi,frameOffset:Ni,framePeekOffset:Li,isPlaying:Di,isMuted:Xi});const Zo=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return new Promise(((r,i)=>{if(TL(e))return void CL(e).then((e=>{const t=RP(En)?En:ii(e.duration,kn||[[0,1]]);kL(e,t).then(r)}));let o,a=!1;t.cancel=()=>a=!0;const s=Date.now();co(e).then((e=>{const t=Date.now()-s;clearTimeout(o),o=setTimeout((()=>{a||r(e)}),Math.max(0,n-t))})).catch(i)}))},{images:Xo,shapePreprocessor:Qo,imageScrambler:Jo,imageRedactionRendering:ea,willRequest:ta,willRequestResource:na,csp:ra}=cr;let ia;nA(e,Xo,(e=>n(421,Cn=e))),nA(e,Qo,(e=>n(420,_n=e))),nA(e,Jo,(e=>n(384,ft=e))),nA(e,ea,(e=>n(382,pt=e))),nA(e,ta,(e=>n(81,Tn=e))),nA(e,na,(e=>n(93,Gn=e))),nA(e,ra,(e=>n(92,qn=e)));const oa=FO(No,((e,t)=>{if(!e)return t(void 0);ia&&(ia.cancel(),ia=void 0),ia={cancel:eE},Zo(e,ia).then(t).catch((e=>{}))})),aa=Yo.subscribe((e=>or.pub("update",e))),sa=DO();ZA("ui",DO({})),ZA("selection",Ko);const la=DO(!0);nA(e,la,(e=>n(95,Yn=e)));const ca=DO(!0);nA(e,ca,(e=>n(97,Xn=e)));const ua=DO(!0);nA(e,ua,(e=>n(419,$n=e)));const da=DO(!0);nA(e,da,(e=>n(497,xn=e)));const pa=DO(!0);nA(e,pa,(e=>n(98,Qn=e)));const ha=DO();nA(e,ha,(e=>n(99,Jn=e)));const fa=DO();nA(e,fa,(e=>n(498,wn=e)));const ma=FO([fa,da],(()=>void 0!==wn?wn:xn));nA(e,ma,(e=>n(96,Zn=e)));const ga=DO([0,0,0]);nA(e,ga,(e=>n(56,Gt=e)));const ya=DO([1,1,1]);nA(e,ya,(e=>n(481,ct=e)));const va=XN([1,1,1]);nA(e,va,(e=>n(480,lt=e)));const ba=DO();nA(e,ba,(e=>n(91,Hn=e)));const xa=DO(),wa=DO();nA(e,wa,(e=>n(51,yt=e)));const $a=DO();nA(e,$a,(e=>n(373,Ye=e)));const Sa=DO(JT());nA(e,Sa,(e=>n(80,Wt=e)));const _a=DO(0);nA(e,_a,(e=>n(418,vn=e)));const Ca=DO(JT());nA(e,Ca,(e=>n(84,Fn=e)));const ka=DO();nA(e,ka,(e=>n(478,Ze=e)));const Ea=EB("(pointer: fine)",(e=>e?"pointer-fine":"pointer-coarse"));nA(e,Ea,(e=>n(399,Dt=e)));const Ta=EB("(hover: hover)",(e=>e?"pointer-hover":"pointer-no-hover"));nA(e,Ta,(e=>n(398,Nt=e)));const Ia=DO(!1),Pa=DO(!1);nA(e,Pa,(e=>n(379,st=e)));const Ra=NO(void 0,(e=>{const t=XN(0),n=[Pa.subscribe((e=>{t.set(e?1:0,{hard:!wt})})),t.subscribe(e)];return()=>n.forEach((e=>e()))}));nA(e,Ra,(e=>n(479,at=e)));const Ma=DO();nA(e,Ma,(e=>n(484,At=e)));const Aa=DO();let Oa;nA(e,Aa,(e=>n(53,wt=e))),ZA("isAnimated",Aa);const La=DO(gr);nA(e,La,(e=>n(402,zt=e)));const Na=DO(!1);nA(e,Na,(e=>n(490,sn=e))),ZA("imageIsStatic",Na);const Da=DO();nA(e,Da,(e=>n(491,ln=e)));const Fa=DO();nA(e,Fa,(e=>n(488,on=e)));const ja=NO(void 0,(e=>{const t=DO(void 0),n=[_o.subscribe((()=>{if(!rn)return;if(sn)return t.set(QT(rn));const e=rB(rn,on,5*Sr);t.set(e)})),t.subscribe(e)];return()=>n.forEach((e=>e()))})),za=DO();nA(e,za,(e=>n(487,nn=e)));const Ba=DO();nA(e,Ba,(e=>n(489,an=e)));const Ua=DO(void 0);nA(e,Ua,(e=>n(494,fn=e)));const Wa=DO(pT());nA(e,Wa,(e=>n(495,mn=e)));const Va=(e,t)=>{if(!t||!e)return{top:0,right:0,bottom:0,left:0};const n=vM(t,e,g),r=yM(n,e);return{top:Math.abs(r.top),right:Math.abs(r.right),bottom:Math.abs(r.bottom),left:Math.abs(r.left)}},Ha=DO({}),qa=FO([ka,Sa,Ca,Ha],((e,t)=>{let[n,r,i,o]=e;if(!n)return t(void 0);let a=0;1!==M.length||h||"bottom"===Wr||(a=i.y+i.height),t(aI(n.x+r.x,n.y+r.y+a,n.width,n.height))}));let Ga={left:0,right:0,top:0,bottom:0};const Ka=DO(!1),Ya=FO([Ka,Go,qa,Pa],((e,t)=>{let[n,r,i,o]=e;if(!i)return t({left:0,right:0,top:0,bottom:0});if(!n)return;const a=Math.min(i.width,i.height),s=Va({width:a,height:a},r);cT(Ga.top,4)===cT(s.top,4)&&cT(Ga.bottom,4)===cT(s.bottom,4)&&cT(Ga.right,4)===cT(s.right,4)&&cT(Ga.left,4)===cT(s.left,4)||(Ga=s,t(s))}));nA(e,Ya,(e=>n(410,Jt=e)));const Za=FO([Ka,Ya],((e,t)=>{let[n,r]=e;if(!n)return t(!1);t(Object.values(r).some((e=>e>0)))}));nA(e,Za,(e=>n(411,en=e)));const Xa=FO([Ka,ka,Za,Ya],((e,t)=>{let[n,r,i,o]=e;if(r)return n&&i?void t(aI(r.x+o.left,r.y+o.top,r.width-o.left-o.right,r.height-o.top-o.bottom)):t({...r})})),Qa=FO([qa,Za,Ya],((e,t)=>{let[n,r,i]=e;return n?r?void t(aI(n.x+i.left,n.y+i.top,n.width-i.left-i.right,n.height-i.top-i.bottom)):t(n):t(void 0)}));nA(e,Qa,(e=>n(50,ot=e)));const Ja=FO([Na,ho,Po],((e,t)=>{let[n,r,i]=e;if(!n||!r)return t(void 0);const o=eI(r);t(yI(o,i))})),es=FO([Ja],((e,t)=>{let[n]=e;if(!n)return t(void 0);const r=rI(n);t(kI(r))}));nA(e,es,(e=>n(414,dn=e)));const ts=FO([Qa,_o,es,La],((e,t)=>{let[n,r,i,o]=e;if(!n||!r||ln||on)return;const{width:a,height:s}=i||r,l=Math.min(n.width/a,n.height/s);t(o?l:Math.min(1,l))}));nA(e,ts,(e=>n(413,un=e))),ZA("imageStaticVisualCorners",FO([Na,ho,Po,Qa,ka,ts],((e,t)=>{let[n,r,i,o,a,s]=e;if(!(n&&o&&a&&r))return t(void 0);const l=eI(r),c=kI(cI(l,s)),u=vI(o,c);c.x=u.x,c.y=u.y,t(yI(c,i))})));const ns=DO(void 0);nA(e,ns,(e=>n(416,gn=e)));const rs=FO([_o,Qa],(e=>{let[t,n]=e;if(n&&t)return Math.min(n.width/t.width,n.height/t.height)})),is=FO([_o,za],(e=>{let[t,n]=e;return t&&n?Math.min(t.width/n.width,t.height/n.height):1}));nA(e,is,(e=>n(101,tr=e)));const os=FO([ns,is],(e=>{let[t,n]=e;return t&&n?n*t:1}));nA(e,os,(e=>n(493,pn=e)));const as=DO(pT());nA(e,as,(e=>n(415,hn=e)));const ss=DO({scalar:pn,translation:hn}),ls=()=>{ss.set({scalar:void 0,translation:pT()})},cs=NO(void 0,(e=>{const t=XN(void 0,{precision:1e-4}),n=1===pF()?e=>_I(e,Math.round):KE,r=()=>{if(!nn)return;const e=st||!At;if(sn){const n=QT(nn);return lI(n,mn),lI(n,ot),t.set(n,{hard:e})}const r=rB(nn,fn,gU*Sr);r.width<0&&(r.width=0,r.x=nn.x),r.height<0&&(r.height=0,r.y=nn.y),lI(r,ot),lI(r,hn),cI(r,pn),!e&&n(r),t.set(r,{hard:e})},i=[Qa.subscribe(r),za.subscribe(r),os.subscribe(r),as.subscribe(r),Go.subscribe(r),t.subscribe(e)];return()=>i.forEach((e=>e()))}));nA(e,cs,(e=>n(58,Qt=e)));const us=DO(1);nA(e,us,(e=>n(486,tn=e)));const ds=()=>{if(!rn||!ot)return;let e=pI(QT(rn),un||1);const t=vI(ot,pI(QT(dn),un));lI(e,t);const n=Ze.width/e.width,r=Ze.height/e.height,i=Math.min(1,n,r);us.set(i),cI(e,i),((e,t)=>{const[n,r,i,o]=$I(e);n<t.y&&(e.y=Math.max(t.y,e.y)),r>t.width&&(e.x=t.width-e.width),i>t.height&&(e.y=t.height-e.height),o<t.x&&(e.x=Math.max(t.x,e.x))})(e,{...Ze,x:0,y:0}),za.set(e)},ps=FO([Qa,ts,_o,ho],((e,t)=>{let[n,r,i,o]=e;n&&(i||o)&&t(hs(n,r||1,i||o))}));nA(e,ps,(e=>n(100,er=e)));const hs=(e,t,n)=>n.width<=e.width&&n.height<=e.height?vI(e,pI(QT(n),t)):wI(e,fI(n));let fs,ms;const gs=e=>{if(h&&fs&&hI(fs,e)&&ms===un)return;if(sn)return ds();fs=e,ms=un;const t=hs(e,un,rn||et);za.set(t)};let ys=!1;const vs=ts.subscribe((e=>{!ys&&void 0!==e&&rn&&(gs(ot),ys=!0)})),bs=Qa.subscribe((e=>{e&&void 0!==un&&rn&&gs(e)})),xs=Na.subscribe((e=>{!e&&ot&&gs(ot)}));let ws;const $s=Ba.subscribe((e=>{if(!e)return ws=void 0,void uA(Da,ln=void 0,ln);ws=cn;const t=QT(rn);Da.set(t)})),Ss=za.subscribe((e=>{if(!e||!an)return;const t=(n=QT(e),r=an,n.x-=r.x,n.y-=r.y,n.width-=r.width,n.height-=r.height,n);var n,r;((e,t)=>{e.x/=t,e.y/=t,e.width/=t,e.height/=t})(t,ws);const i=((e,t)=>(e.x+=t.x,e.y+=t.y,e.width+=t.width,e.height+=t.height,e))(QT(ln),t);_o.set(i)})),_s=_o.subscribe((e=>{if(!e||!nn)return;if(sn)return void(an||ds());if(st||an||on)return;const t=fI(nn),n=fI(e);if(cT(t,6)===cT(n,6))return;const{width:r,height:i}=rn,o=Math.min(ot.width/r,ot.height/i),a=zT(e.width*o,e.height*o),s=.5*(nn.width-a.width),l=.5*(nn.height-a.height),c=aI(Math.max(0,Math.min(ot.width-a.width,nn.x+s)),Math.max(0,Math.min(ot.height-a.height,nn.y+l)),a.width,a.height);za.set(c)})),Cs=FO([ts,_o,za,Na],((e,t)=>{let[n,r,i,o]=e;if(!n||!r||!i)return;if(o)return t(tn);const a=i.width/r.width,s=i.height/r.height;t(Math.max(a,s)/n)})),ks=FO([ts,Cs],((e,t)=>{let[n,r]=e;r&&t(n*r)}));nA(e,ks,(e=>n(492,cn=e)));let Es={left:0,right:0,top:0,bottom:0};const Ts=FO([Go,za],((e,t)=>{let[n,r]=e;if(!r)return t(Es);const i=Va(r,n);cT(Es.top,4)===cT(i.top,4)&&cT(Es.bottom,4)===cT(i.bottom,4)&&cT(Es.right,4)===cT(i.right,4)&&cT(Es.left,4)===cT(i.left,4)||(Es=i,t(i))})),Is=FO([Ts],((e,t)=>{let[n]=e;t(Object.values(n).some((e=>e>0)))})),Ps=XN(.075,{stiffness:.03,damping:.4,precision:.001}),Rs=FO([va,ga,Ps,cs,os,Go,Is,Ts,Za],((e,t)=>{let[n,r,i,o,a,s,l,c,u]=e;if(!o||h)return t([]);let{x:d,y:p,width:f,height:m}=o;d+=.5,p+=.5,f-=.5,m-=.5;const g=[];if(s){if(l){let{left:e,right:t,top:n,bottom:i}=c;e*=a,t*=a,n*=a,i*=a;const o=LB(r)?[1,1,1,.125]:[0,0,0,.075];g.push({x:d-e-.5,y:p-n-.5,width:f+e+t+1,height:m+n+i+1,strokeWidth:1,strokeColor:o,opacity:u?1:.5})}const e=LB(n);s&&s.frameColor&&LB(s.frameColor)||e||(g.push({x:d-1,y:p-1,width:f+2,height:m+2,strokeWidth:2,strokeColor:[0,0,0,.1],opacity:i}),g.push({x:d+1,y:p+1,width:f-2,height:m-2,strokeWidth:2,strokeColor:[0,0,0,.1],opacity:i}))}t([...g,{x:d,y:p,width:f,height:m,strokeWidth:1,strokeColor:n,opacity:i}])})),Ms=DO([]);nA(e,Ms,(e=>n(404,Vt=e)));const As=FO([Rs,Ms],((e,t)=>{let[n,r]=e;t([...n,...r])}));nA(e,As,(e=>n(94,Kn=e)));const Os=XN(0,{precision:.001});nA(e,Os,(e=>n(406,qt=e)));const Ls=XN();nA(e,Ls,(e=>n(409,Zt=e)));const Ns=XN();nA(e,Ns,(e=>n(408,Yt=e)));const Ds=XN();nA(e,Ds,(e=>n(407,Kt=e)));const Fs=XN();nA(e,Fs,(e=>n(405,Ht=e)));const js=DO(!1);nA(e,js,(e=>n(391,Et=e)));const zs=DO();let Bs;nA(e,zs,(e=>n(394,Pt=e)));const Us=FO([js,zs],((e,t)=>{let[r,i]=e;if(!r||!i)return void t(void 0);if(Bs&&(Bs.cancel(),n(295,Bs=void 0)),$M(i))return t($E(i));const o=ul.length?0:wt?250:0;n(295,Bs={cancel:eE}),Zo(i,Bs,o).then(t).catch((e=>{uA(xo,It.error=e,It)})).finally((()=>{n(295,Bs=void 0)}))}));rr(),rr=eA(Us,(e=>n(374,Xe=e)));let{imagePreviewCurrent:Ws}=t;const Vs=DO({});nA(e,Vs,(e=>n(396,Ot=e)));const Hs=DO([]);nA(e,Hs,(e=>n(86,zn=e)));const qs=FO([Qa,$a,ho,ja,za,ks,Po,Ao,Oo,os,as,Ia],((e,t)=>{let[n,r,i,o,a,s,l,c,u,d,p,h]=e;if(!n||!a)return;const f=sN(n,r,i,o,a,d,p,s,l,c,u);!h&&T(f),t(f)}));nA(e,qs,(e=>n(397,Lt=e)));const Gs=FO([Fo,jo,zo,Bo,Uo],((e,t)=>{let[n,r,i,o,a]=e;const s=n&&Object.keys(n).map((e=>n[e])).filter(Boolean);t({gamma:i||void 0,vignette:o||void 0,noise:a||void 0,convolutionMatrix:r||void 0,colorMatrix:s&&s.length&&UM(s)})}));let Ks,Ys;const Zs=(()=>{if(!mP())return!1;const e=navigator.userAgent.match(/OS (\d+)_(\d+)_?(\d+)?/i)||[],[,t,n]=e.map((e=>parseInt(e,10)||0));return t>13||13===t&&n>=4})(),Xs=DO({});nA(e,Xs,(e=>n(385,vt=e))),ZA("env",Xs);const Qs=pF(),Js=NO(Qs,(e=>{const t=()=>e(pF()),n=matchMedia(`(resolution: ${Qs}dppx)`);return n.addListener(t),()=>n.removeListener(t)}));nA(e,Js,(e=>n(57,Xt=e)));const el=((e,t,n)=>{const{sub:r,pub:i}=GP(),{willUndo:o=()=>!0}=n||{},a=[],s=DO(0),l=[],c=()=>l.forEach((e=>e({index:tA(s),length:a.length}))),u={get index(){return tA(s)},set index(e){e=Number.isInteger(e)?e:0,e=nL(e,0,a.length-1),s.set(e),t(a[u.index]),c()},get state(){return a[a.length-1]},length:()=>a.length,undo(){if(!1===o())return;const e=u.index--;return i("undo",e),e},redo(){const e=u.index++;return i("redo",u.index),e},revert(){a.length=1,u.index=0,i("revert")},write(n){n&&t({...e(),...n});const r=e(),o=a[a.length-1];JSON.stringify(r)!==JSON.stringify(o)&&(a.length=u.index+1,a.push(r),s.set(a.length-1),c(),i("writehistory"))},set(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a.length=0,u.index=0;const t=Array.isArray(e)?e:[e];a.push(...t),u.index=a.length-1},get:()=>[...a],subscribe:e=>(l.push(e),e({index:u.index,length:a.length}),()=>l.splice(l.indexOf(e),1)),on:r};return u})((()=>Ut),(e=>{uA(Yo,Ut=e,Ut),Sa.set(Wt)}),{willUndo:()=>!al()||(ol(),!1)});ir(),ir=eA(el,(e=>n(403,Bt=e)));const tl=()=>{const e={x:0,y:0,...et},t=_I(wI(e,Ut.cropAspectRatio),Math.round),n=Ir({...Ut,rotation:0,crop:t},Ut),r=[n];JSON.stringify(n)!==JSON.stringify(Ut)&&r.push({...Ut}),el.set(r)},nl=xo.subscribe((e=>{e&&e.complete&&tl()})),rl=()=>_r().then((e=>e&&el.revert())),il=[Vo,Wo,qo,Ho],ol=()=>{il.forEach((e=>{e.update((e=>e.length&&PR(e[e.length-1])?e.slice(0,-1):e))}))},al=()=>R.filter((e=>e.length)).some((e=>PR(e[e.length-1]))),sl=DO(!1);nA(e,sl,(e=>n(386,xt=e)));const ll=()=>{uA(sl,xt=!0,xt),Cr().then((e=>{if(!e)return void uA(sl,xt=!1,xt);let t;t=Dl.subscribe((e=>{1===e&&(t&&t(),ar("processImage"))}))}))},cl=wo.subscribe((e=>{if(!e)return void uA(sl,xt=!1,xt);uA(sl,xt=!0,xt);const{complete:t,abort:n}=e;(t||n)&&uA(sl,xt=!1,xt)})),ul=(()=>{const e=[],t=[],n=[],r=()=>{t.forEach((e=>e(n)))},i=t=>{t.unsub=t.subscribe((i=>((t,i)=>{const o=e.indexOf(t);o<0||(n[o]=i,r())})(t,i))),r()};return{get length(){return e.length},clear:()=>{e.forEach((e=>e.unsub())),e.length=0,n.length=0},unshift:t=>{e.unshift(t),i(t)},get:t=>e[t],push:t=>{e.push(t),i(t)},remove:t=>{t.unsub();const r=e.indexOf(t);e.splice(r,1),n.splice(r,1)},forEach:t=>e.forEach(t),filter:t=>e.filter(t),subscribe:e=>(t.push(e),e(n),()=>{t.splice(t.indexOf(e),1)})}})();nA(e,ul,(e=>n(55,Rt=e)));const dl=FO([ul],((e,t)=>{let[n]=e;if(!n.length)return t();const{origin:r,translation:i,rotation:o,scale:a}=n[0];t({origin:r,translation:i,rotation:o,scale:a})})),pl=DO();nA(e,pl,(e=>n(400,Ft=e)));let hl,fl=[];const ml=DO(),gl=DO(),yl=FO([ns,gl,ts,rs],(e=>{let[t,n,r,i]=e;return t||(n||r<1?i:1)})),vl={...cr,imageFile:po,imageSize:ho,mediaDuration:fo,mediaMinDuration:vo,mediaMaxDuration:bo,mediaTrim:go,imageBackgroundColor:Lo,imageBackgroundImage:No,imageBackgroundFilterMode:Do,imageCropAspectRatio:$o,imageCropMinSize:Co,imageCropMaxSize:ko,imageCropLimitToImage:So,imageCropRect:_o,imageCropRectOrigin:To,imageCropRectSnapshot:Da,imageCropRectAspectRatio:Io,imageCropRange:Eo,imageRotation:Po,imageRotationRange:Ro,imageFlipX:Ao,imageFlipY:Oo,imageOutputSize:Mo,imageColorMatrix:Fo,imageConvolutionMatrix:jo,imageGamma:zo,imageVignette:Bo,imageNoise:Uo,imageManipulation:Ho,imageDecoration:Wo,imageAnnotation:Vo,imageRedaction:qo,imageFrame:Go,imagePreview:Us,imagePreviewSource:zs,imageTransforms:qs,imagePreviewModifiers:Vs,history:el,animation:Ma,pixelRatio:Js,elasticityMultiplier:Sr,scrollElasticity:yU,rangeInputElasticity:5,redrawTrigger:to,pointerAccuracy:Ea,pointerHoverable:Ta,env:Xs,rootRect:$a,stageRect:Qa,stageRectBase:qa,stageRecenter:Ha,stageScalar:ts,stagePadding:Ya,stagePadded:Za,presentationScalar:ks,imagePreviewUpscale:gl,utilRect:ka,utilRectPadded:Xa,allowPlayPause:Oi,allowPan:la,allowZoom:ca,allowZoomControls:ua,enableZoomInput:pa,enablePanInput:da,enablePanInputStatus:ma,imageSelectionMultiTouching:ml,rootBackgroundColor:ga,rootForegroundColor:ya,rootLineColor:va,rootColorSecondary:xa,imageOutlineOpacity:Ps,utilTools:pl,imageSelectionPan:as,imageSelectionZoom:ns,imageSelectionZoomCurrent:yl,imageSelectionStageFitScalar:rs,imageSelectionStoredState:ss,imageOverlayMarkup:Ms,interfaceImages:Hs,isInteracting:Pa,isTransformingImage:Ia,isInteractingFraction:Ra,imageCropRectIntent:Fa,imageCropRectPresentation:ja,imageSelectionRect:za,imageSelectionRectIntent:Ua,imageSelectionRectPresentation:cs,imageSelectionRectSnapshot:Ba,imageScalar:Cs,imageTransformsInterpolated:dl,imageEffects:Gs};delete vl.image;const bl="util-"+ME();let xl=[];const wl=e=>A.find((t=>{let[n]=t;return e===n}));let $l=[];const Sl=e=>{n(62,$l=$l.concat(e))},_l=e=>{n(62,$l=$l.filter((t=>t!==e)))},Cl=(e,t)=>{n(304,D[e]=t,D)};let kl=mP();const El=(e,t,n)=>{let r=ce.getPropertyValue(e);r=n?n(r):/^[0-9]+$/.test(r)?parseFloat(r):void 0,t.set(r,{hard:!wt})},Tl=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=(e=>{const t=ce.getPropertyValue(e);return hz(t)})(e);r&&0!==r[3]&&(n||(r.length=3),t.set(r,{hard:!wt}))},Il=DO();nA(e,Il,(e=>n(87,Bn=e)));const Pl=DO();nA(e,Pl,(e=>n(88,Un=e)));const Rl=DO();nA(e,Rl,(e=>n(89,Wn=e)));const Ml=XN(0,{damping:.9});nA(e,Ml,(e=>n(90,Vn=e)));const Al=()=>{Tl("color",ya),Tl(ui?"--color-background":"background-color",ga),Tl("outline-color",va),Tl("--color-primary",ba),Tl("--color-secondary",xa),Tl("--grid-color-even",Pl,!0),Tl("--grid-color-odd",Rl,!0),El("--grid-size",Il),El("--editor-inset-top",_a,(e=>parseInt(e,10)))},Ol=FO([qs,Gs,Lo,oa,Do],(e=>{let[t,n,r,i,o]=e;return t&&{...t,...n,backgroundColor:r,backgroundImage:i,backgroundFilterMode:o||"none"}}));nA(e,Ol,(e=>n(395,Mt=e)));const Ll=e=>{ul.forEach(((t,n)=>{const r=0===n?1:0;t.set({...e,opacity:r,resize:1},At)}))};let Nl;const Dl=YN(void 0,{duration:500});let Fl;nA(e,Dl,(e=>n(54,Ct=e)));const jl=DO(!1);let zl;nA(e,jl,(e=>n(390,kt=e)));const Bl=XN(void 0,{stiffness:.1,damping:.7,precision:.25});nA(e,Bl,(e=>n(82,Nn=e)));const Ul=XN(0,{stiffness:.1,precision:.05});nA(e,Ul,(e=>n(83,Dn=e)));const Wl=XN(0,{stiffness:.02,damping:.5,precision:.25});nA(e,Wl,(e=>n(388,St=e)));const Vl=XN(void 0,{stiffness:.02,damping:.5,precision:.25});nA(e,Vl,(e=>n(389,_t=e)));const Hl=XN(void 0,{stiffness:.02,damping:.5,precision:.25});let ql;nA(e,Hl,(e=>n(387,$t=e)));const Gl=()=>{ar("abortLoadImage")},Kl=()=>{ar("abortProcessImage"),uA(sl,xt=!1,xt)},Yl=e=>{e.target&&"true"===e.target.dataset.touchScroll||$B(e)||e.preventDefault()},Zl=Zs?e=>{const t=e.touches?e.touches[0]:e;t.pageX>20&&t.pageX<window.innerWidth-20||Yl(e)}:eE,Xl=DO([]);nA(e,Xl,(e=>n(482,mt=e))),ZA("keysPressed",Xl);const Ql=e=>{!e||zP(e)&&!(e=>/^image/.test(e.type)&&!/svg/.test(e.type))(e)||!zP(e)&&!/^http/.test(e)||ar("loadImage",e)},Jl=e=>{e&&Ql(e)};let ec,tc,nc,rc=[];const ic=DO();ZA("rootPortal",ic),ZA("rootRect",$a);const oc=()=>({foregroundColor:[...ct],lineColor:[...lt],utilVisibility:{...D},isInteracting:st,isInteractingFraction:at,rootRect:QT(Ye),stageRect:QT(ot),manipulationShapesDirty:Sc,annotationShapesDirty:bc,decorationShapesDirty:wc,frameShapesDirty:$c}),ac=(e,t,n)=>pM(e,zT(Math.round(t.width/n),Math.round(t.height/n))),sc=(e,t,n)=>{var r;return e._translate=hT((r=t).x,r.y),e._scale=n,e},lc=e=>{const t=[];return e.forEach((e=>t.push(cc(e)))),t.filter(Boolean)},cc=e=>_R(e)?(e.points=[hT(e.x1,e.y1),hT(e.x2,e.y2)],e):(!(e=>bR(e)&&!e.text.length)(e)||e.backgroundColor&&0!==e.backgroundColor[3]||(xR(e)&&(e.width=5,e.height=e.lineHeight),e.strokeWidth=1,e.strokeColor=[1,1,1,.5],e.backgroundColor=[0,0,0,.1]),e);let uc,dc=[],pc=[],hc=[],fc=[],mc=[],gc={};const yc=(e,t,n,r,i,o,a)=>{const{manipulationShapesDirty:s,annotationShapesDirty:l,decorationShapesDirty:c,frameShapesDirty:u,selectionRect:d,scale:p}=e,h=uc!==p,f=h||!hI(gc,d);f&&(uc=p,gc=d),s&&(hc=t.filter(ER).map(pR).map((e=>pM(e,et)))),(l||n!==it)&&(dc=n.filter(ER).map(pR).sort(((e,t)=>e.alwaysOnTop?1:t.alwaysOnTop?-1:0)).map((e=>pM(e,et)))),(h||xc||l||n!==it)&&(pc=lc(dc.map((e=>g(e,{flipX:nt,flipY:tt,rotation:rt,scale:p,context:eI(et)}))).flat())),(c||r!==Je||f)&&(fc=lc(r.filter(ER).map(pR).sort(((e,t)=>e.alwaysOnTop?1:t.alwaysOnTop?-1:0)).map((e=>ac(e,d,p))).map((e=>g(e,{context:d}))).flat().map((e=>sc(e,d,p))))),(u||o!==Qe||f)&&(mc=o?lc([o].map(pR).map((e=>ac(e,d,p))).map(g).flat().map((e=>sc(e,d,p)))):[]);let m=lc(i.filter(ER));return"undefined"!=typeof window&&(e=>{if(e&&e._gp4y96c)return;const[t]=[[85,110,108,105,99,101,110,115,101,100,32,80,105,110,116,117,114,97,32,105,110,115,116,97,110,99,101]].map((e=>e.map((e=>String.fromCharCode(e))).join("")));m=[...m,{x:d.x+.5*d.width-82,y:d.y+d.height-16-12,width:164,height:16,text:t,fontWeight:900,fontSize:12,color:[1,1,1,.25]}]})(window),{manipulationShapesDirty:s,manipulationShapes:hc,annotationShapesDirty:l,annotationShapes:pc,decorationShapesDirty:c,decorationShapes:fc,frameShapesDirty:u,frameShapes:mc,interfaceShapes:m,selectionShapes:a.map(pR).map((e=>pM(e,et)))}};let vc,bc=!0,xc=!0,wc=!0,$c=!0,Sc=!0;return KA((()=>{Hi(),Xe&&hE(Xe.src)&&/^blob:/.test(Xe.src)&&URL.revokeObjectURL(Xe.src),aa(),bs(),vs(),xs(),$s(),Ss(),_s(),nl(),cl(),Ea.destroy(),Ta.destroy(),uo.destroy(),ul.clear(),dc.length=0,pc.length=0,hc.length=0,fc.length=0,mc.length=0,ec&&yE(ec),wi&&window.visualViewport.removeEventListener("resize",Si);try{n(235,Ws=void 0),n(296,Nl=void 0)}catch(e){}})),e.$$set=e=>{"class"in e&&n(236,sr=e.class),"layout"in e&&n(237,lr=e.layout),"stores"in e&&n(238,cr=e.stores),"locale"in e&&n(3,ur=e.locale),"id"in e&&n(4,dr=e.id),"util"in e&&n(239,pr=e.util),"utils"in e&&n(240,hr=e.utils),"animations"in e&&n(241,fr=e.animations),"disabled"in e&&n(242,mr=e.disabled),"previewUpscale"in e&&n(243,gr=e.previewUpscale),"previewPad"in e&&n(244,yr=e.previewPad),"previewMaskOpacity"in e&&n(5,vr=e.previewMaskOpacity),"previewImageDataMaxSize"in e&&n(245,br=e.previewImageDataMaxSize),"previewImageTextPixelRatio"in e&&n(6,xr=e.previewImageTextPixelRatio),"markupMaskOpacity"in e&&n(7,wr=e.markupMaskOpacity),"zoomMaskOpacity"in e&&n(246,$r=e.zoomMaskOpacity),"elasticityMultiplier"in e&&n(8,Sr=e.elasticityMultiplier),"willRevert"in e&&n(247,_r=e.willRevert),"willProcessImage"in e&&n(248,Cr=e.willProcessImage),"willRenderCanvas"in e&&n(9,kr=e.willRenderCanvas),"willRenderToolbar"in e&&n(249,Er=e.willRenderToolbar),"willRenderUtilTabs"in e&&n(250,Tr=e.willRenderUtilTabs),"willSetHistoryInitialState"in e&&n(251,Ir=e.willSetHistoryInitialState),"enableButtonExport"in e&&n(252,Pr=e.enableButtonExport),"enableButtonRevert"in e&&n(253,Rr=e.enableButtonRevert),"enableNavigateHistory"in e&&n(254,Mr=e.enableNavigateHistory),"enableToolbar"in e&&n(10,Ar=e.enableToolbar),"enableUtils"in e&&n(255,Or=e.enableUtils),"enableButtonClose"in e&&n(256,Lr=e.enableButtonClose),"enableDropImage"in e&&n(257,Nr=e.enableDropImage),"enablePasteImage"in e&&n(258,Dr=e.enablePasteImage),"enableBrowseImage"in e&&n(259,Fr=e.enableBrowseImage),"enableTransparencyGrid"in e&&n(11,jr=e.enableTransparencyGrid),"layoutDirectionPreference"in e&&n(260,zr=e.layoutDirectionPreference),"layoutHorizontalUtilsPreference"in e&&n(261,Br=e.layoutHorizontalUtilsPreference),"layoutVerticalUtilsPreference"in e&&n(262,Ur=e.layoutVerticalUtilsPreference),"layoutVerticalToolbarPreference"in e&&n(263,Wr=e.layoutVerticalToolbarPreference),"layoutVerticalControlGroupsPreference"in e&&n(264,Vr=e.layoutVerticalControlGroupsPreference),"layoutVerticalControlTabsPreference"in e&&n(265,Hr=e.layoutVerticalControlTabsPreference),"status"in e&&n(234,qr=e.status),"formatStatusImageLoading"in e&&n(266,Gr=e.formatStatusImageLoading),"formatStatusImageProcessing"in e&&n(267,Kr=e.formatStatusImageProcessing),"formatStatusSupportError"in e&&n(268,Yr=e.formatStatusSupportError),"textDirection"in e&&n(12,Zr=e.textDirection),"markupEditorZoomLevel"in e&&n(269,Xr=e.markupEditorZoomLevel),"markupEditorZoomLevels"in e&&n(13,Qr=e.markupEditorZoomLevels),"markupEditorZoomAdjustStep"in e&&n(14,Jr=e.markupEditorZoomAdjustStep),"markupEditorZoomAdjustFactor"in e&&n(15,ei=e.markupEditorZoomAdjustFactor),"markupEditorZoomAdjustWheelFactor"in e&&n(16,ti=e.markupEditorZoomAdjustWheelFactor),"markupEditorInteractionMode"in e&&n(270,ni=e.markupEditorInteractionMode),"muteAudio"in e&&n(271,ri=e.muteAudio),"willSetMediaInitialTimeOffset"in e&&n(272,ii=e.willSetMediaInitialTimeOffset),"enablePan"in e&&n(17,oi=e.enablePan),"enableZoom"in e&&n(18,ai=e.enableZoom),"enableZoomControls"in e&&n(273,si=e.enableZoomControls),"enableZoomInput"in e&&n(19,li=e.enableZoomInput),"enablePanInput"in e&&n(274,ci=e.enablePanInput),"enableCanvasAlpha"in e&&n(20,ui=e.enableCanvasAlpha),"enablePanLimit"in e&&n(21,di=e.enablePanLimit),"panLimitGutterScalar"in e&&n(22,pi=e.panLimitGutterScalar),"pan"in e&&n(275,hi=e.pan),"zoomPresetOptions"in e&&n(23,fi=e.zoomPresetOptions),"zoomAdjustStep"in e&&n(24,mi=e.zoomAdjustStep),"zoomAdjustFactor"in e&&n(25,gi=e.zoomAdjustFactor),"zoomAdjustWheelFactor"in e&&n(26,yi=e.zoomAdjustWheelFactor),"zoomLevel"in e&&n(0,vi=e.zoomLevel),"fixScrollDirection"in e&&n(276,bi=e.fixScrollDirection),"imagePreviewSrc"in e&&n(279,ki=e.imagePreviewSrc),"imageOrienter"in e&&n(280,Ei=e.imageOrienter),"pluginComponents"in e&&n(281,Ti=e.pluginComponents),"pluginOptions"in e&&n(27,Ii=e.pluginOptions),"root"in e&&n(2,Mi=e.root),"imageSourceToImageData"in e&&n(28,co=e.imageSourceToImageData),"imagePreviewCurrent"in e&&n(235,Ws=e.imagePreviewCurrent)},e.$$.update=()=>{if(268435456&e.$$.dirty[8]&&xi.set(bi),8&e.$$.dirty[0]&&n(302,r=!!ur),1&e.$$.dirty[0]|2097152&e.$$.dirty[8]&&n(0,vi=null===vi?Xr:vi),2&e.$$.dirty[0]|4&e.$$.dirty[9]){let e=!1;Ti.forEach((t=>{let[r]=t;Ri[r]||(n(1,Ri[r]={},Ri),e=!0)})),e&&n(293,ro=[...Ti])}var t,T,qe,Ze;if(8388608&e.$$.dirty[7]|8404992&e.$$.dirty[9]&&n(354,M=r&&ro.length?hr||ro.map((e=>{let[t]=e;return t})):[]),134217728&e.$$.dirty[0]|16384&e.$$.dirty[9]|8192&e.$$.dirty[11]|536870912&e.$$.dirty[12]&&n(355,A=((e,t,n,r)=>{const i=t.filter((t=>{let[n]=t;return e.includes(n)})).filter((e=>{let[t,{isSupported:i}]=e;return i({...r,...n[t]})})).map((e=>{let[t,n]=e;return[t,n.Component]}));return sL(i,xl,((e,t)=>e[0]===t[0]&&e[1]===t[1]))?xl:(xl=i,i)})(M,ro,Ii,{src:jt})),16384&e.$$.dirty[11]&&n(308,O=A.length),8&e.$$.dirty[0]|536870912&e.$$.dirty[9]|8192&e.$$.dirty[11]&&n(353,L=O&&M.map((e=>{const t=wl(e);if(t)return{id:e,view:t[1],tabIcon:ur[e+"Icon"],tabLabel:ur[e+"Label"]}})).filter(Boolean)||[]),4096&e.$$.dirty[11]&&n(372,i=!!L.find((e=>"trim"===e.id))),5&e.$$.dirty[12]|4194304&e.$$.dirty[13]&&n(307,o=!!(Mn&&Xe&&i)),4194304&e.$$.dirty[7]|536870912&e.$$.dirty[9]&&n(43,N=O&&pr&&"string"==typeof pr&&wl(pr)?pr:O>0?A[0][0]:void 0),4096&e.$$.dirty[1]|268435456&e.$$.dirty[9]&&o&&N&&Hi(),268435456&e.$$.dirty[9]|4&e.$$.dirty[12]&&(o?(Xe.addEventListener("play",Fi),Xe.addEventListener("pause",Fi)):Xe&&"video"===Xe.nodeName&&(Xe.removeEventListener("play",Fi),Xe.removeEventListener("pause",Fi))),268435456&e.$$.dirty[9]&&o&&Ni.set(Ji()/Qi()),18874368&e.$$.dirty[13]&&(e=>{if(!qi())return;const t=Date.now();if(zi&&t-zi<16)return;zi=t;const n=Mn*e;if(n.toFixed(1)===ji)return;ji=n.toFixed(1);const r=Xe,i=()=>{r.removeEventListener("seeked",i),Ai()};r.addEventListener("seeked",i),wB(r,n)})(On||Rn),2097152&e.$$.dirty[13]&&n(370,a=Rn&&cT(Rn,6)),38273024&e.$$.dirty[13]&&n(368,s=kn||[[0,Math.min(Mn,Ln)/Mn]]),134217728&e.$$.dirty[11]&&(l=s[0][0]),134217728&e.$$.dirty[11]&&(c=s[s.length-1][1]),134217728&e.$$.dirty[11]&&n(371,u=s.map((e=>{let[t,n]=e;return[cT(t,6),cT(n,6)]}))),1610612736&e.$$.dirty[11]&&n(369,d=u.findIndex((e=>{let[t,n]=e;return a>=t&&a<=n}))),1879048192&e.$$.dirty[11]&&(p=-1===d&&u.findIndex(((e,t,n)=>{const r=n[t-1];return r?a<=e[0]&&a>=r[1]:a<=e[0]}))),8388608&e.$$.dirty[8]&&Xi.set(ri),4&e.$$.dirty[12]|8388608&e.$$.dirty[13]&&(Xe&&An?Ki():Yi()),268435456&e.$$.dirty[9]|2097152&e.$$.dirty[13]&&o&&mo.set(Qi()*Rn),4&e.$$.dirty[12]|1048576&e.$$.dirty[13]&&Xe&&(e=>{o&&(Xe.volume=Math.min(1,e))})(Pn),256&e.$$.dirty[0]&&uA(no,In=Sr,In),1048576&e.$$.dirty[7]&&n(364,h="overlay"===lr),128&e.$$.dirty[8]|8388608&e.$$.dirty[11]&&n(45,f=Or&&!h),134217730&e.$$.dirty[0]&&Ii&&Object.entries(Ii).forEach((e=>{let[t,r]=e;Object.entries(r).forEach((e=>{let[r,i]=e;Ri[t]&&n(1,Ri[t][r]=i,Ri)}))})),16384&e.$$.dirty[13]&&n(365,b=!yn),16777216&e.$$.dirty[7]|50331648&e.$$.dirty[11]&&uA(Aa,wt="always"===fr?y:"never"!==fr&&y&&b,wt),4194304&e.$$.dirty[1]|33554432&e.$$.dirty[7]&&io.set(mr?1:0,{hard:!wt}),268435456&e.$$.dirty[7]&&(m=br?(t=br,T=ao,zT(Math.min(t.width,T.width),Math.min(t.height,T.height))):ao),262144&e.$$.dirty[13]&&uo.update(Cn[0]),131072&e.$$.dirty[13]&&(g=_n?(e,t)=>_n(e,{flipX:void 0,flipY:void 0,rotation:void 0,...t,isPreview:!0}):KE),268435456&e.$$.dirty[1]&&Array.isArray(Sn)&&ar("selectionchange",[...Sn]),33554432&e.$$.dirty[8]|65536&e.$$.dirty[13]&&ha.set($n&&si),71303168&e.$$.dirty[8]&&fa.set("pan"===ni||ci),1048576&e.$$.dirty[1]&&yt&&$a.set(aI(yt.x,yt.y,yt.width,yt.height)),8388608&e.$$.dirty[11]|2097154&e.$$.dirty[12]&&Ye&&h&&It&&It.complete&&(()=>{const e=bn,t=fI(Ye);e&&e===t||($o.set(fI(Ye)),tl())})(),8192&e.$$.dirty[11]&&n(46,B=M.length>1),32768&e.$$.dirty[1]&&(B||Sa.set(JT())),1024&e.$$.dirty[0]|32768&e.$$.dirty[13]&&(Ar||Ca.set(aI(0,vn,0,0))),33554432&e.$$.dirty[11]|128&e.$$.dirty[12]&&n(367,v=!st&&y),1048576&e.$$.dirty[1]&&n(309,Be=yt&&yt.width>0&&yt.height>0),8&e.$$.dirty[0]|1610612736&e.$$.dirty[9]&&n(40,Ue=Be&&ur&&!!O),512&e.$$.dirty[1]&&setTimeout((()=>n(294,Oa=Ue)),1),16777216&e.$$.dirty[7]|32768&e.$$.dirty[9]|83886080&e.$$.dirty[11]&&uA(Ma,At="always"===fr?v:"never"!==fr&&v&&Oa&&b,At),67108864&e.$$.dirty[7]|8388608&e.$$.dirty[11]&&La.set(gr||h),134217728&e.$$.dirty[7]&&Ka.set(yr),134217728&e.$$.dirty[8]&&hi&&as.set(hi),4&e.$$.dirty[0]|9216&e.$$.dirty[13]&&Mi&&(Mi.dispatchEvent(CB("markupzoom",gn)),Mi.dispatchEvent(CB("zoom",RP(gn)?gn:un))),4&e.$$.dirty[0]|4096&e.$$.dirty[13]&&Mi&&(Mi.dispatchEvent(CB("markuppan",hn)),Mi.dispatchEvent(CB("pan",hn))),512&e.$$.dirty[13]&&rn&&ls(),2048&e.$$.dirty[13]&&dn&&ds(),4198400&e.$$.dirty[1]&&N&&Ps.set(.075,{hard:!wt}),536870912&e.$$.dirty[7]&&n(362,x=$r),384&e.$$.dirty[13]&&n(363,w=en?-Math.max(...Object.values(Jt)):0),138936320&e.$$.dirty[1]|6291456&e.$$.dirty[11]&&Qt){let e=Qt.x-ot.x,t=ot.x+ot.width-(Qt.x+Qt.width),n=Qt.y-ot.y,r=ot.y+ot.height-(Qt.y+Qt.height),i=Math.min(e,n,t,r);Os.set(i>w?0:Math.min(x,Math.abs(i/64)),{hard:!wt})}if(67108864&e.$$.dirty[1]&&n(361,$=.55/Xt),4718592&e.$$.dirty[1]|1048576&e.$$.dirty[11]&&ot&&Ls.set({x:0,y:ot.y,width:ot.x<64?0:ot.x,height:ot.height+$},{hard:!wt}),4718592&e.$$.dirty[1]|1048576&e.$$.dirty[11]|2&e.$$.dirty[12]&&ot&&Ns.set({x:0,y:0,width:Ye.width,height:ot.y+$},{hard:!wt}),4718592&e.$$.dirty[1]|1048576&e.$$.dirty[11]|2&e.$$.dirty[12]&&ot){let e=ot.x+ot.width,t=Ye.width-(ot.x+ot.width);t<64&&(e+=t,t=0),Ds.set({x:e,y:ot.y,width:t,height:ot.height+$},{hard:!wt})}if(4718592&e.$$.dirty[1]|2&e.$$.dirty[12]&&ot&&Fs.set({x:0,y:ot.y+ot.height,width:Ye.width,height:Ye.height-(ot.y+ot.height)},{hard:!wt}),33554432&e.$$.dirty[1]|72&e.$$.dirty[13]&&n(357,S=Zt&&{id:"stage-overlay",backgroundColor:Gt,opacity:qt,...Zt}),33554432&e.$$.dirty[1]|40&e.$$.dirty[13]&&n(360,_=Yt&&{id:"stage-overlay",backgroundColor:Gt,opacity:qt,...Yt}),33554432&e.$$.dirty[1]|24&e.$$.dirty[13]&&n(359,C=Kt&&{id:"stage-overlay",backgroundColor:Gt,opacity:qt,...Kt}),33554432&e.$$.dirty[1]|12&e.$$.dirty[13]&&n(358,k=Ht&&{id:"stage-overlay",backgroundColor:Gt,opacity:qt,...Ht}),983040&e.$$.dirty[11]&&n(356,E=[_,C,k,S].filter(Boolean)),32768&e.$$.dirty[11]|2&e.$$.dirty[13]&&E&&Vt&&Ms.update((e=>[...e.filter((e=>"stage-overlay"!==e.id)),...E])),1&e.$$.dirty[9]|536870912&e.$$.dirty[12]&&zs.set(ki||jt||void 0),4&e.$$.dirty[0]|262144&e.$$.dirty[7]|4&e.$$.dirty[12]&&(n(235,Ws=Xe),Xe&&Mi.dispatchEvent(CB("loadpreview",Ws))),4194304&e.$$.dirty[12]&&Pt&&(as.set(pT()),ns.set(void 0),ls(),Hs.set([])),1&e.$$.dirty[13]&&n(313,I=Bt.index>0),1&e.$$.dirty[13]&&n(312,P=Bt.index<Bt.length-1),393216&e.$$.dirty[1]|768&e.$$.dirty[12]&&(R=[it,Je,dt,ut]),8&e.$$.dirty[1]&&ml.set(hl),1073741824&e.$$.dirty[12]&&gl.set(zt),4096&e.$$.dirty[1]&&sa.set(N),33554432&e.$$.dirty[9]|4096&e.$$.dirty[11]&&n(304,D=L.reduce(((e,t)=>(e[t.id]=D&&D[t.id]||0,e)),{})),4096&e.$$.dirty[1]&&n(79,F={name:bl,selected:N}),4096&e.$$.dirty[11]&&n(335,j=L.map((e=>({id:e.id,icon:e.tabIcon,label:e.tabLabel})))),4096&e.$$.dirty[11]&&n(78,z=L.map((e=>e.id))),524288&e.$$.dirty[7]&&n(77,U=CD(["PinturaRoot","PinturaRootComponent",sr])),2&e.$$.dirty[12]&&n(349,W=Ye&&(Ye.width>1e3?"wide":Ye.width<600?"narrow":void 0)),2&e.$$.dirty[12]&&n(336,V=Ye&&(Ye.width<=320||Ye.height<=460)),2&e.$$.dirty[12]&&n(348,H=Ye&&(Ye.height>1e3?"tall":Ye.height<600?"short":void 0)),4&e.$$.dirty[0]&&n(315,q=Mi&&Mi.parentNode&&Mi.parentNode.classList.contains("PinturaModal")),1&e.$$.dirty[1]|32&e.$$.dirty[10]|2&e.$$.dirty[12]&&n(341,G=q&&Ye&&Ks>Ye.width),2&e.$$.dirty[1]|32&e.$$.dirty[10]|2&e.$$.dirty[12]&&n(340,K=q&&Ye&&Ys>Ye.height),1073741824&e.$$.dirty[10]|1&e.$$.dirty[11]&&n(342,Y=G&&K),1048576&e.$$.dirty[0]&&n(339,Z=ui),256&e.$$.dirty[11]&&n(310,X="narrow"===W),4096&e.$$.dirty[8]|2&e.$$.dirty[12]&&n(350,(qe=Ye,Ze=zr,Q=Ye?"auto"===Ze?qe.width>qe.height?"landscape":"portrait":"horizontal"===Ze?qe.width<500?"portrait":"landscape":"vertical"===Ze?qe.height<400?"landscape":"portrait":void 0:"landscape")),512&e.$$.dirty[11]&&n(76,J="landscape"===Q),1&e.$$.dirty[10]|128&e.$$.dirty[11]&&n(338,ee=X||"short"===H),1&e.$$.dirty[1]|2&e.$$.dirty[12]&&n(337,te=kl&&Ye&&Ks===Ye.width&&!Zs),4&e.$$.dirty[1]|268435456&e.$$.dirty[12]&&n(311,ne=[...Ft||[],...fl].filter(Boolean)),8192&e.$$.dirty[8]&&n(347,re="has-navigation-preference-"+Br),16384&e.$$.dirty[8]&&n(346,ie="has-navigation-preference-"+Ur),32768&e.$$.dirty[8]&&n(343,oe="has-toolbar-preference-"+Wr),65536&e.$$.dirty[8]&&n(345,ae="has-controlgroups-preference-"+Vr),131072&e.$$.dirty[8]&&n(344,se="has-controltabs-preference-"+Hr),2&e.$$.dirty[12]&&n(352,le=void 0!==Ye&&Ye.width>0&&Ye.height>0),4&e.$$.dirty[0]|2048&e.$$.dirty[11]&&n(351,ce=le&&Mi&&getComputedStyle(Mi)),1024&e.$$.dirty[11]&&ce&&Al(),1024&e.$$.dirty[0]|4243456&e.$$.dirty[1]|34603008&e.$$.dirty[7]|2080374816&e.$$.dirty[10]|1023&e.$$.dirty[11]|201334784&e.$$.dirty[12]&&Xs.set({...vt,layoutMode:lr,orientation:Q,horizontalSpace:W,verticalSpace:H,navigationHorizontalPreference:re,navigationVerticalPreference:ie,controlGroupsVerticalPreference:ae,controlTabsVerticalpreference:se,toolbarVerticalPreference:oe,isModal:q,isDisabled:mr,isCentered:Y,isCenteredHorizontally:G,isCenteredVertically:K,isAnimated:wt,isTransparent:Z,pointerAccuracy:Dt,pointerHoverable:Nt,isCompact:ee,hasSwipeNavigation:te,hasLimitedSpace:V,hasToolbar:Ar,hasNavigation:B&&f,isIOS:kl,browserVersion:ON()?"chrome-"+(navigator.userAgent.match(/Chrome\/([0-9]+)/)||[])[1]:void 0}),8192&e.$$.dirty[12]&&n(75,ue=Object.entries(vt).map((e=>{let[t,n]=e;return/^is|has/.test(t)?n?kB(t):void 0:n})).filter(Boolean).join(" ")),4096&e.$$.dirty[1]&&N&&pl.set([]),4096&e.$$.dirty[1]|4&e.$$.dirty[8]|33554432&e.$$.dirty[10]|8192&e.$$.dirty[12]&&n(44,de=Tr(j.map((e=>({...e,selected:N===e.id}))),{...vt},(()=>to.set({})))),8192&e.$$.dirty[1]&&n(74,pe=!!de.find((e=>Array.isArray(e)))),50331648&e.$$.dirty[12]&&n(73,he=Lt&&Object.entries(Ot).filter((e=>{let[,t]=e;return null!=t})).reduce(((e,t)=>{let[,n]=t;return{...e,...n}}),{})),2097152&e.$$.dirty[12]&&n(332,ye=It&&"any-to-file"===It.task),4194304&e.$$.dirty[10]&&ye&&ul&&ul.clear(),8388608&e.$$.dirty[12]&&n(334,fe=!!Mt&&!!Mt.translation),131072&e.$$.dirty[9]|16777216&e.$$.dirty[10]|4&e.$$.dirty[12]&&fe&&Xe&&Xe!==Nl&&(n(296,Nl=Xe),(()=>{const e=ul.length?void 0:{resize:1.05},t=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{resize:r=1,opacity:i=0}=n,o={opacity:[XN(i,{...AB,stiffness:.1}),KE],resize:[XN(r,{...AB,stiffness:.1}),KE],translation:[XN(void 0,AB),KE],rotation:[XN(void 0,OB),KE],origin:[XN(void 0,AB),KE],scale:[XN(void 0,OB),KE],gamma:[XN(void 0,OB),e=>e||1],vignette:[XN(void 0,OB),e=>e||0],colorMatrix:[XN([...MB],AB),e=>e||[...MB]],convolutionMatrix:[DO(void 0),e=>e&&e.clarity||void 0],backgroundColor:[XN(void 0,AB),(e,t,n)=>{if(Array.isArray(e)){if(Array.isArray(t)){const r=[...e];0===t[3]?(r[3]=0,n(r)):0===r[3]&&((e=[...t])[3]=0)}return e}}],backgroundImage:[DO(void 0),KE],backgroundFilterMode:[DO(void 0),KE]},a=Object.entries(o).map((e=>{let[t,n]=e;return[t,n[0]]})),s=a.map((e=>{let[,t]=e;return t})),l=Object.entries(o).reduce(((e,t)=>{let[n,r]=t;const[i,o]=r;return e[n]=(e,t)=>i.set(o(e,c[n],(e=>{i.set(e,{hard:!0})})),t),e}),{});let c;const u=FO(s,(n=>(c=n.reduce(((e,t,n)=>(e[a[n][0]]=t,e)),{}),c.data=e,c.size=t,c.scale*=n[1],c)));return u.get=()=>c,u.set=(e,t)=>{const n={hard:!t};Object.entries(e).forEach((e=>{let[t,r]=e;l[t]&&l[t](r,n)}))},u}(Xe,et,e);ul.unshift(t),Ll(Mt)})()),16777216&e.$$.dirty[10]|8388608&e.$$.dirty[12]&&fe&&Ll(Mt),16777216&e.$$.dirty[1]&&Rt&&Rt.length>1){let e=[];ul.forEach(((t,n)=>{0!==n&&t.get().opacity<=0&&e.push(t)})),e.forEach((e=>ul.remove(e)))}if(8&e.$$.dirty[0]|8388608&e.$$.dirty[10]&&n(39,ge=ur&&me.length&&function(e,t){if(TE(t.labelSupportError))return t.labelSupportError(e);const n=Yr({features:e},t);return dN(t.labelSupportError,n,"{","}")}(me,ur)),2097152&e.$$.dirty[12]&&n(324,ve=It&&!!It.error),2097152&e.$$.dirty[12]&&n(42,be=!It||!It.complete&&void 0===It.task),2097152&e.$$.dirty[12]&&n(325,xe=It&&(It.taskLengthComputable?It.taskProgress:1/0)),4194304&e.$$.dirty[10]&&ye&&uA(js,Et=!1,Et),4194304&e.$$.dirty[1]|262144&e.$$.dirty[9]|2097152&e.$$.dirty[12]&&It&&It.complete){const e=wt?250:0;clearTimeout(Fl),n(297,Fl=setTimeout((()=>{uA(js,Et=!0,Et)}),e))}if(2048&e.$$.dirty[1]|16384&e.$$.dirty[10]|2621440&e.$$.dirty[12]&&n(329,we=It&&!ve&&!be&&!Et),65536&e.$$.dirty[9]|4194308&e.$$.dirty[12]&&n(328,$e=!(!Pt||Xe&&!Bs)),4194304&e.$$.dirty[1]|524288&e.$$.dirty[12]&&(Et?setTimeout((()=>Ml.set(1,{hard:!wt})),wt?500:0):Ml.set(0,{hard:!wt})),1064960&e.$$.dirty[12]&&n(323,Se=!!(xt||Tt&&void 0!==Tt.progress&&!Tt.complete)),8192&e.$$.dirty[10]&&Se&&Hi(),2048&e.$$.dirty[1]|2097152&e.$$.dirty[12]&&n(326,_e=It&&!(It.error||be)),8&e.$$.dirty[0]|2097152&e.$$.dirty[12]&&n(327,Ce=ur&&function(e,t){const n=e?!e.complete||e.error?e:{task:"blob-to-bitmap",progress:1/0}:void 0;let r=TE(t.statusLabelLoadImage)?t.statusLabelLoadImage(n):Gr({state:n},t);return e&&e.error&&e.error.metadata&&(r=dN(r,e.error.metadata,"{","}")),r}(It,ur)),8&e.$$.dirty[0]|1048576&e.$$.dirty[12]&&n(322,ke=Tt&&ur&&function(e,t){return TE(t.statusLabelProcessImage)?t.statusLabelProcessImage(e):Kr({state:e},t)}(Tt,ur)),1048576&e.$$.dirty[12]&&n(320,Ee=Tt&&(Tt.taskLengthComputable?Tt.taskProgress:1/0)),1048576&e.$$.dirty[12]&&n(321,Te=Tt&&!Tt.error),1048576&e.$$.dirty[12]&&n(319,Ie=!(!Tt||!Tt.error)),8&e.$$.dirty[0]|2048&e.$$.dirty[1]|131072&e.$$.dirty[7]|1048064&e.$$.dirty[10])if(qr){let e,t,r,i,o;hE(qr)&&(e=qr),RP(qr)?t=qr:Array.isArray(qr)&&([e,t,o]=qr,!1===t&&(i=!0),RP(t)&&(r=!0)),n(35,zl=(e||t)&&{text:e,aside:i||r,progressIndicator:{visible:r,progress:t},closeButton:i&&{label:ur.statusLabelButtonClose,icon:ur.statusIconButtonClose,onclick:o||(()=>n(234,qr=void 0))}})}else n(35,zl=ur&&be||ve||we||$e?{text:Ce,aside:ve||_e,progressIndicator:{visible:_e,progress:xe},closeButton:ve&&{label:ur.statusLabelButtonClose,icon:ur.statusIconButtonClose,onclick:Gl}}:ur&&Se&&ke?{text:ke,aside:Ie||Te,progressIndicator:{visible:Te,progress:Ee},closeButton:Ie&&{label:ur.statusLabelButtonClose,icon:ur.statusIconButtonClose,onclick:Kl}}:void 0);if(131072&e.$$.dirty[7]&&n(331,Pe=void 0!==qr),4194304&e.$$.dirty[1]|32&e.$$.dirty[10]|1048576&e.$$.dirty[12]&&q&&Tt&&Tt.complete&&(jl.set(!0),setTimeout((()=>jl.set(!1)),wt?100:0)),4&e.$$.dirty[0]|4096&e.$$.dirty[1]|524288&e.$$.dirty[12]&&Et&&Mi&&Mi.dispatchEvent(CB("selectutil",N)),2304&e.$$.dirty[1]|2908160&e.$$.dirty[10]|262144&e.$$.dirty[12]&&n(330,Re=kt||ge||be||ve||we||$e||Se||Pe),1048576&e.$$.dirty[10]&&uA(Dl,Ct=Re?1:0,Ct),4194304&e.$$.dirty[1]|1048576&e.$$.dirty[10]&&Dl.set(Re?1:0,{duration:wt?500:1}),8388608&e.$$.dirty[1]&&n(41,Me=Ct>0),16&e.$$.dirty[1]&&n(318,Ae=!(!zl||!zl.aside)),4195344&e.$$.dirty[1]|524288&e.$$.dirty[9]|256&e.$$.dirty[10]|131072&e.$$.dirty[12]&&Me&&zl){clearTimeout(ql);const e={hard:!1===wt};if(Ae){const t=!!zl.error||!wt;Ul.set(1,e),Bl.set(_t,{hard:t}),n(298,ql=setTimeout((()=>{Wl.set(16,e)}),1))}else Ul.set(0,e),n(298,ql=setTimeout((()=>{Wl.set(0,e)}),1))}if(1024&e.$$.dirty[1]&&(Me||(Hl.set(void 0,{hard:!0}),Bl.set(void 0,{hard:!0}),Wl.set(0,{hard:!0}))),65536&e.$$.dirty[12]&&n(317,Oe=.5*St),128&e.$$.dirty[10]|32768&e.$$.dirty[12]&&n(72,Le=`translateX(${$t-Oe}px)`),256&e.$$.dirty[1]|12&e.$$.dirty[12]&&n(38,Ge=Xe&&et&&!ge),128&e.$$.dirty[1]|96&e.$$.dirty[10]&&n(314,De=Ne&&(Ge||q)?Yl:eE),16&e.$$.dirty[10]&&n(71,Fe=De),16&e.$$.dirty[10]&&n(70,je=De),8&e.$$.dirty[0]|2097152&e.$$.dirty[1]|370&e.$$.dirty[8]|15&e.$$.dirty[10]|8192&e.$$.dirty[12]&&n(69,ze=ur&&bt&&DB((()=>Er([["div","alpha",{class:"PinturaNavGroup"},[["div","alpha-set",{class:"PinturaNavSet"},[Lr&&["Button","close",{label:ur.labelClose,icon:ur.iconButtonClose,onclick:()=>ar("close"),hideLabel:!0}],Rr&&["Button","revert",{label:ur.labelButtonRevert,icon:ur.iconButtonRevert,disabled:!I,onclick:rl,hideLabel:!0}]]]]],["div","beta",{class:"PinturaNavGroup PinturaNavGroupFloat"},[Mr&&["div","history",{class:"PinturaNavSet"},[["Button","undo",{label:ur.labelButtonUndo,icon:ur.iconButtonUndo,disabled:!I,onclick:el.undo,hideLabel:!0}],["Button","redo",{label:ur.labelButtonRedo,icon:ur.iconButtonRedo,disabled:!P,onclick:el.redo,hideLabel:!0}]]],ne.length&&["div","plugin-tools",{class:"PinturaNavSet"},ne.filter(Boolean).map((e=>{let[t,n,r]=e;return[t,n,{...r}]}))]]],["div","gamma",{class:"PinturaNavGroup"},[Pr&&["Button","export",{label:ur.labelButtonExport,icon:X&&ur.iconButtonExport,class:"PinturaButtonExport",onclick:ll,hideLabel:X}]]]],{...vt},(()=>to.set({})))))),512&e.$$.dirty[12]&&n(306,We=dt&&!!dt.length),134217728&e.$$.dirty[9]|520&e.$$.dirty[12]&&n(305,Ve=We&&WM(et,dt)),201326592&e.$$.dirty[9]|6148&e.$$.dirty[12]&&We&&((e,t,r,i)=>{if(!t||!e||tc===t)return;tc=t;const o={dataSizeScalar:r};i&&i[3]>0&&(o.backgroundColor=[...i]),t(e,o).then((e=>{ec&&yE(ec),e.setAttribute("data-retain",!0),n(299,ec=e)}))})(Xe,ft,Ve,ht),1048576&e.$$.dirty[9]|1544&e.$$.dirty[12]&&dt&&ec&&et){const{width:e,height:t}=et,r=XI()?"pixelated":"auto"===pt?"auto":"pixelated";n(300,rc=dt.map((n=>{const i=aI(n.x,n.y,n.width,n.height),o=yI(QT(i),n.rotation).map((n=>hT(n.x/e,n.y/t)));return{...n,id:"redaction",flipX:!1,flipY:!1,cornerRadius:0,strokeWidth:0,strokeColor:void 0,backgroundColor:[0,0,0,0],backgroundImage:ec,backgroundImageRendering:r,backgroundCorners:o}})))}2097152&e.$$.dirty[9]|256&e.$$.dirty[12]&&n(37,He=[...rc,...ut||[]]),32&e.$$.dirty[1]&&nc&&ic.set(nc),4&e.$$.dirty[0]|128&e.$$.dirty[1]&&Ge&&Mi&&Mi.dispatchEvent(CB("ready")),262144&e.$$.dirty[1]&&n(63,bc=!0),120&e.$$.dirty[12]&&n(64,xc=!0),131072&e.$$.dirty[1]&&n(65,wc=!0),65536&e.$$.dirty[1]&&n(66,$c=!0),64&e.$$.dirty[1]&&n(67,Sc=!0),2&e.$$.dirty[12]&&n(303,Ke=!!Ye&&Ye.height>0),29360128&e.$$.dirty[9]&&!r&&Ke&&(clearTimeout(vc),n(301,vc=setTimeout((()=>{r||hL("locale")}),32)))},n(366,y=!bD()),T=1===pF()?e=>{e&&($T(e.origin,Math.round),$T(e.translation,Math.round))}:KE,n(333,me=[!RB()&&"WebGL"].filter(Boolean)),n(316,Ne=mP()||wE()&&NE()),n(68,qe=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return n=>{"ping"===n.type&&(t&&n.stopPropagation(),e(n.detail.type,n.detail.data))}}(or.pub)),[vi,Ri,Mi,ur,dr,vr,xr,wr,Sr,kr,Ar,jr,Zr,Qr,Jr,ei,ti,oi,ai,li,ui,di,pi,fi,mi,gi,yi,Ii,co,Us,el,Ks,Ys,fl,hl,zl,nc,He,Ge,ge,Ue,Me,be,N,de,f,B,Qe,Je,it,ot,yt,bt,wt,Ct,Rt,Gt,Xt,Qt,Sn,_i,Ci,$l,bc,xc,wc,$c,Sc,qe,ze,je,Fe,Le,he,pe,ue,J,U,z,F,Wt,Tn,Nn,Dn,Fn,jn,zn,Bn,Un,Wn,Vn,Hn,qn,Gn,Kn,Yn,Zn,Xn,Qn,Jn,er,tr,nr,Oi,Li,Ni,Xi,to,no,io,po,ho,fo,mo,go,yo,bo,xo,wo,$o,So,_o,Po,Ao,Oo,Lo,Wo,Vo,Ho,qo,Go,Ko,Yo,Xo,Qo,Jo,ea,ta,na,ra,la,ca,ua,da,pa,ha,fa,ma,ga,ya,va,ba,wa,$a,Sa,_a,Ca,ka,Ea,Ta,Pa,Ra,Ma,Aa,La,Na,Da,Fa,za,Ba,Ua,Wa,Ya,Za,Qa,es,ts,ns,is,os,as,cs,us,ps,ks,Ms,As,Os,Ls,Ns,Ds,Fs,js,zs,Vs,Hs,qs,Xs,Js,sl,ul,pl,vl,Sl,_l,Cl,(e,t)=>t[e],e=>L.find((t=>t.id===e)).view,Il,Pl,Rl,Ml,e=>{let{target:t,propertyName:n}=e;t===Mi&&/background|outline/.test(n)&&ce&&Al()},Ol,Dl,jl,Bl,Ul,Wl,Vl,Hl,e=>{const t=!(!zl||!zl.closeButton)||!wt;Vl.set(e.detail.width,{hard:t}),Hl.set(Math.round(.5*-e.detail.width),{hard:t})},Zl,Xl,e=>{const{keyCode:t,metaKey:n,ctrlKey:r,shiftKey:i}=e;if(9===t&&mr)return void e.preventDefault();if(e.target&&32===t&&Mi.contains(e.target)&&!yF(e.target)&&(gt&&o&&Gi(),e.preventDefault()),90===t&&(n||r))return void(i&&n?el.redo():el.undo());if(89===t&&r)return void el.redo();if(229===t)return;if(e.target&&(8===t||46===t)&&!Mi.contains(e.target)&&yF(e.target))return;const a=new Set([...mt,t]);Xl.set(Array.from(a))},e=>{let{key:t,keyCode:n}=e;if("Meta"===t)return Xl.set([]);Xl.set(mt.filter((e=>e!==n)))},()=>{Xl.set([])},e=>{yF(e.target)||e.preventDefault()},e=>{Nr&&Ql(e.detail.resources[0])},()=>{Fr&&NB().then(Jl)},e=>{if(!Dr)return;const t=nL((window.innerWidth-Math.abs(Ye.x))/Ye.width,0,1),n=nL((window.innerHeight-Math.abs(Ye.y))/Ye.height,0,1);t<.75&&n<.75||Ql((e.clipboardData||window.clipboardData).files[0])},oc,yc,e=>{Ze&&hI(e.detail,Ze)||uA(ka,Ze=e.detail,Ze)},qr,Ws,sr,lr,cr,pr,hr,fr,mr,gr,yr,br,$r,_r,Cr,Er,Tr,Ir,Pr,Rr,Mr,Or,Lr,Nr,Dr,Fr,zr,Br,Ur,Wr,Vr,Hr,Gr,Kr,Yr,Xr,ni,ri,ii,si,ci,hi,bi,()=>n(60,_i=void 0),(e,t,r)=>{const{text:i="",placeholder:o="",autoClose:a=!0,align:s="top",justify:l="center",buttonConfirm:c,buttonCancel:u}=r;n(60,_i={align:s,justify:l,text:i,placeholder:o,buttonConfirm:c,buttonCancel:u,onconfirm:()=>{e(Ci.value),a&&n(60,_i=void 0)},oncancel:()=>{t(void 0),n(60,_i=void 0)}})},ki,Ei,Ti,Pi,Vi,Hi,qi,Gi,Ki,Yi,Zi,Qi,Ji,eo,ro,Oa,Bs,Nl,Fl,ql,ec,rc,vc,r,Ke,D,Ve,We,o,O,Be,X,ne,P,I,De,q,Ne,Oe,Ae,Ie,Ee,Te,ke,Se,ve,xe,_e,Ce,$e,we,Re,Pe,ye,me,fe,j,V,te,ee,Z,K,G,Y,oe,se,ae,ie,re,H,W,Q,ce,le,L,M,A,E,S,k,C,_,$,x,w,h,b,y,v,s,d,a,u,i,Ye,Xe,et,tt,nt,rt,st,ut,dt,pt,ht,ft,vt,xt,$t,St,_t,kt,Et,Tt,It,Pt,Mt,Ot,Lt,Nt,Dt,Ft,jt,zt,Bt,Vt,Ht,qt,Kt,Yt,Zt,Jt,en,rn,un,dn,hn,gn,yn,vn,$n,_n,Cn,kn,Pn,Rn,Mn,An,On,Ln,function(){n(31,Ks=VB.innerWidth),n(32,Ys=VB.innerHeight)},e=>uA(Ca,Fn=e.detail,Fn),e=>{let{detail:t}=e;return n(43,N=t)},function(t,r){e.$$.not_equal(Ri[r],t)&&(Ri[r]=t,n(1,Ri),n(281,Ti),n(27,Ii))},e=>Sl(e),e=>_l(e),(e,t)=>{let{detail:n}=t;return Cl(e,n)},e=>uA(Sa,Wt=e.detail,Wt),function(t){e.$$.not_equal(Ri[N],t)&&(Ri[N]=t,n(1,Ri),n(281,Ti),n(27,Ii))},()=>Sl(N),()=>_l(N),e=>{let{detail:t}=e;return Cl(N,t)},e=>{const t={...e,...oc()},{annotationShapes:n,decorationShapes:r,interfaceShapes:i,frameShapes:o,selectionShapes:a}=kr({annotationShapes:it,decorationShapes:Je,interfaceShapes:Kn,frameShapes:Qe,selectionShapes:Sn},t);return yc(t,He,n,r,i,o,a)},()=>{n(63,bc=!1),n(64,xc=!1),n(65,wc=!1),n(66,$c=!1),n(67,Sc=!1)},function(e){eO[e?"unshift":"push"]((()=>{nc=e,n(36,nc)}))},function(e){vi=e,n(0,vi),n(269,Xr)},function(e){fl=e,n(33,fl)},function(e){hl=e,n(34,hl)},function(e){eO[e?"unshift":"push"]((()=>{Ci=e,n(61,Ci)}))},function(e){eO[e?"unshift":"push"]((()=>{Mi=e,n(2,Mi)}))},e=>uA(wa,yt=e.detail,yt)]}class bU extends OO{constructor(e){super(),AO(this,e,vU,mU,XM,{class:236,layout:237,stores:238,locale:3,id:4,util:239,utils:240,animations:241,disabled:242,previewUpscale:243,previewPad:244,previewMaskOpacity:5,previewImageDataMaxSize:245,previewImageTextPixelRatio:6,markupMaskOpacity:7,zoomMaskOpacity:246,elasticityMultiplier:8,willRevert:247,willProcessImage:248,willRenderCanvas:9,willRenderToolbar:249,willRenderUtilTabs:250,willSetHistoryInitialState:251,enableButtonExport:252,enableButtonRevert:253,enableNavigateHistory:254,enableToolbar:10,enableUtils:255,enableButtonClose:256,enableDropImage:257,enablePasteImage:258,enableBrowseImage:259,enableTransparencyGrid:11,layoutDirectionPreference:260,layoutHorizontalUtilsPreference:261,layoutVerticalUtilsPreference:262,layoutVerticalToolbarPreference:263,layoutVerticalControlGroupsPreference:264,layoutVerticalControlTabsPreference:265,status:234,formatStatusImageLoading:266,formatStatusImageProcessing:267,formatStatusSupportError:268,textDirection:12,markupEditorZoomLevel:269,markupEditorZoomLevels:13,markupEditorZoomAdjustStep:14,markupEditorZoomAdjustFactor:15,markupEditorZoomAdjustWheelFactor:16,markupEditorInteractionMode:270,muteAudio:271,willSetMediaInitialTimeOffset:272,enablePan:17,enableZoom:18,enableZoomControls:273,enableZoomInput:19,enablePanInput:274,enableCanvasAlpha:20,enablePanLimit:21,panLimitGutterScalar:22,pan:275,zoomPresetOptions:23,zoomAdjustStep:24,zoomAdjustFactor:25,zoomAdjustWheelFactor:26,zoomLevel:0,fixScrollDirection:276,hideTextInput:277,showTextInput:278,imagePreviewSrc:279,imageOrienter:280,pluginComponents:281,pluginOptions:27,sub:282,pluginInterface:1,root:2,play:283,pause:284,isPaused:285,togglePlayPause:286,mute:287,unmute:288,toggleMute:289,getDuration:290,getCurrentTime:291,setCurrentTime:292,imageSourceToImageData:28,imagePreview:29,imagePreviewCurrent:235,history:30},null,[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1])}get class(){return this.$$.ctx[236]}set class(e){this.$$set({class:e}),pO()}get layout(){return this.$$.ctx[237]}set layout(e){this.$$set({layout:e}),pO()}get stores(){return this.$$.ctx[238]}set stores(e){this.$$set({stores:e}),pO()}get locale(){return this.$$.ctx[3]}set locale(e){this.$$set({locale:e}),pO()}get id(){return this.$$.ctx[4]}set id(e){this.$$set({id:e}),pO()}get util(){return this.$$.ctx[239]}set util(e){this.$$set({util:e}),pO()}get utils(){return this.$$.ctx[240]}set utils(e){this.$$set({utils:e}),pO()}get animations(){return this.$$.ctx[241]}set animations(e){this.$$set({animations:e}),pO()}get disabled(){return this.$$.ctx[242]}set disabled(e){this.$$set({disabled:e}),pO()}get previewUpscale(){return this.$$.ctx[243]}set previewUpscale(e){this.$$set({previewUpscale:e}),pO()}get previewPad(){return this.$$.ctx[244]}set previewPad(e){this.$$set({previewPad:e}),pO()}get previewMaskOpacity(){return this.$$.ctx[5]}set previewMaskOpacity(e){this.$$set({previewMaskOpacity:e}),pO()}get previewImageDataMaxSize(){return this.$$.ctx[245]}set previewImageDataMaxSize(e){this.$$set({previewImageDataMaxSize:e}),pO()}get previewImageTextPixelRatio(){return this.$$.ctx[6]}set previewImageTextPixelRatio(e){this.$$set({previewImageTextPixelRatio:e}),pO()}get markupMaskOpacity(){return this.$$.ctx[7]}set markupMaskOpacity(e){this.$$set({markupMaskOpacity:e}),pO()}get zoomMaskOpacity(){return this.$$.ctx[246]}set zoomMaskOpacity(e){this.$$set({zoomMaskOpacity:e}),pO()}get elasticityMultiplier(){return this.$$.ctx[8]}set elasticityMultiplier(e){this.$$set({elasticityMultiplier:e}),pO()}get willRevert(){return this.$$.ctx[247]}set willRevert(e){this.$$set({willRevert:e}),pO()}get willProcessImage(){return this.$$.ctx[248]}set willProcessImage(e){this.$$set({willProcessImage:e}),pO()}get willRenderCanvas(){return this.$$.ctx[9]}set willRenderCanvas(e){this.$$set({willRenderCanvas:e}),pO()}get willRenderToolbar(){return this.$$.ctx[249]}set willRenderToolbar(e){this.$$set({willRenderToolbar:e}),pO()}get willRenderUtilTabs(){return this.$$.ctx[250]}set willRenderUtilTabs(e){this.$$set({willRenderUtilTabs:e}),pO()}get willSetHistoryInitialState(){return this.$$.ctx[251]}set willSetHistoryInitialState(e){this.$$set({willSetHistoryInitialState:e}),pO()}get enableButtonExport(){return this.$$.ctx[252]}set enableButtonExport(e){this.$$set({enableButtonExport:e}),pO()}get enableButtonRevert(){return this.$$.ctx[253]}set enableButtonRevert(e){this.$$set({enableButtonRevert:e}),pO()}get enableNavigateHistory(){return this.$$.ctx[254]}set enableNavigateHistory(e){this.$$set({enableNavigateHistory:e}),pO()}get enableToolbar(){return this.$$.ctx[10]}set enableToolbar(e){this.$$set({enableToolbar:e}),pO()}get enableUtils(){return this.$$.ctx[255]}set enableUtils(e){this.$$set({enableUtils:e}),pO()}get enableButtonClose(){return this.$$.ctx[256]}set enableButtonClose(e){this.$$set({enableButtonClose:e}),pO()}get enableDropImage(){return this.$$.ctx[257]}set enableDropImage(e){this.$$set({enableDropImage:e}),pO()}get enablePasteImage(){return this.$$.ctx[258]}set enablePasteImage(e){this.$$set({enablePasteImage:e}),pO()}get enableBrowseImage(){return this.$$.ctx[259]}set enableBrowseImage(e){this.$$set({enableBrowseImage:e}),pO()}get enableTransparencyGrid(){return this.$$.ctx[11]}set enableTransparencyGrid(e){this.$$set({enableTransparencyGrid:e}),pO()}get layoutDirectionPreference(){return this.$$.ctx[260]}set layoutDirectionPreference(e){this.$$set({layoutDirectionPreference:e}),pO()}get layoutHorizontalUtilsPreference(){return this.$$.ctx[261]}set layoutHorizontalUtilsPreference(e){this.$$set({layoutHorizontalUtilsPreference:e}),pO()}get layoutVerticalUtilsPreference(){return this.$$.ctx[262]}set layoutVerticalUtilsPreference(e){this.$$set({layoutVerticalUtilsPreference:e}),pO()}get layoutVerticalToolbarPreference(){return this.$$.ctx[263]}set layoutVerticalToolbarPreference(e){this.$$set({layoutVerticalToolbarPreference:e}),pO()}get layoutVerticalControlGroupsPreference(){return this.$$.ctx[264]}set layoutVerticalControlGroupsPreference(e){this.$$set({layoutVerticalControlGroupsPreference:e}),pO()}get layoutVerticalControlTabsPreference(){return this.$$.ctx[265]}set layoutVerticalControlTabsPreference(e){this.$$set({layoutVerticalControlTabsPreference:e}),pO()}get status(){return this.$$.ctx[234]}set status(e){this.$$set({status:e}),pO()}get formatStatusImageLoading(){return this.$$.ctx[266]}set formatStatusImageLoading(e){this.$$set({formatStatusImageLoading:e}),pO()}get formatStatusImageProcessing(){return this.$$.ctx[267]}set formatStatusImageProcessing(e){this.$$set({formatStatusImageProcessing:e}),pO()}get formatStatusSupportError(){return this.$$.ctx[268]}set formatStatusSupportError(e){this.$$set({formatStatusSupportError:e}),pO()}get textDirection(){return this.$$.ctx[12]}set textDirection(e){this.$$set({textDirection:e}),pO()}get markupEditorZoomLevel(){return this.$$.ctx[269]}set markupEditorZoomLevel(e){this.$$set({markupEditorZoomLevel:e}),pO()}get markupEditorZoomLevels(){return this.$$.ctx[13]}set markupEditorZoomLevels(e){this.$$set({markupEditorZoomLevels:e}),pO()}get markupEditorZoomAdjustStep(){return this.$$.ctx[14]}set markupEditorZoomAdjustStep(e){this.$$set({markupEditorZoomAdjustStep:e}),pO()}get markupEditorZoomAdjustFactor(){return this.$$.ctx[15]}set markupEditorZoomAdjustFactor(e){this.$$set({markupEditorZoomAdjustFactor:e}),pO()}get markupEditorZoomAdjustWheelFactor(){return this.$$.ctx[16]}set markupEditorZoomAdjustWheelFactor(e){this.$$set({markupEditorZoomAdjustWheelFactor:e}),pO()}get markupEditorInteractionMode(){return this.$$.ctx[270]}set markupEditorInteractionMode(e){this.$$set({markupEditorInteractionMode:e}),pO()}get muteAudio(){return this.$$.ctx[271]}set muteAudio(e){this.$$set({muteAudio:e}),pO()}get willSetMediaInitialTimeOffset(){return this.$$.ctx[272]}set willSetMediaInitialTimeOffset(e){this.$$set({willSetMediaInitialTimeOffset:e}),pO()}get enablePan(){return this.$$.ctx[17]}set enablePan(e){this.$$set({enablePan:e}),pO()}get enableZoom(){return this.$$.ctx[18]}set enableZoom(e){this.$$set({enableZoom:e}),pO()}get enableZoomControls(){return this.$$.ctx[273]}set enableZoomControls(e){this.$$set({enableZoomControls:e}),pO()}get enableZoomInput(){return this.$$.ctx[19]}set enableZoomInput(e){this.$$set({enableZoomInput:e}),pO()}get enablePanInput(){return this.$$.ctx[274]}set enablePanInput(e){this.$$set({enablePanInput:e}),pO()}get enableCanvasAlpha(){return this.$$.ctx[20]}set enableCanvasAlpha(e){this.$$set({enableCanvasAlpha:e}),pO()}get enablePanLimit(){return this.$$.ctx[21]}set enablePanLimit(e){this.$$set({enablePanLimit:e}),pO()}get panLimitGutterScalar(){return this.$$.ctx[22]}set panLimitGutterScalar(e){this.$$set({panLimitGutterScalar:e}),pO()}get pan(){return this.$$.ctx[275]}set pan(e){this.$$set({pan:e}),pO()}get zoomPresetOptions(){return this.$$.ctx[23]}set zoomPresetOptions(e){this.$$set({zoomPresetOptions:e}),pO()}get zoomAdjustStep(){return this.$$.ctx[24]}set zoomAdjustStep(e){this.$$set({zoomAdjustStep:e}),pO()}get zoomAdjustFactor(){return this.$$.ctx[25]}set zoomAdjustFactor(e){this.$$set({zoomAdjustFactor:e}),pO()}get zoomAdjustWheelFactor(){return this.$$.ctx[26]}set zoomAdjustWheelFactor(e){this.$$set({zoomAdjustWheelFactor:e}),pO()}get zoomLevel(){return this.$$.ctx[0]}set zoomLevel(e){this.$$set({zoomLevel:e}),pO()}get fixScrollDirection(){return this.$$.ctx[276]}set fixScrollDirection(e){this.$$set({fixScrollDirection:e}),pO()}get hideTextInput(){return this.$$.ctx[277]}get showTextInput(){return this.$$.ctx[278]}get imagePreviewSrc(){return this.$$.ctx[279]}set imagePreviewSrc(e){this.$$set({imagePreviewSrc:e}),pO()}get imageOrienter(){return this.$$.ctx[280]}set imageOrienter(e){this.$$set({imageOrienter:e}),pO()}get pluginComponents(){return this.$$.ctx[281]}set pluginComponents(e){this.$$set({pluginComponents:e}),pO()}get pluginOptions(){return this.$$.ctx[27]}set pluginOptions(e){this.$$set({pluginOptions:e}),pO()}get sub(){return this.$$.ctx[282]}get pluginInterface(){return this.$$.ctx[1]}get root(){return this.$$.ctx[2]}set root(e){this.$$set({root:e}),pO()}get play(){return this.$$.ctx[283]}get pause(){return this.$$.ctx[284]}get isPaused(){return this.$$.ctx[285]}get togglePlayPause(){return this.$$.ctx[286]}get mute(){return this.$$.ctx[287]}get unmute(){return this.$$.ctx[288]}get toggleMute(){return this.$$.ctx[289]}get getDuration(){return this.$$.ctx[290]}get getCurrentTime(){return this.$$.ctx[291]}get setCurrentTime(){return this.$$.ctx[292]}get imageSourceToImageData(){return this.$$.ctx[28]}set imageSourceToImageData(e){this.$$set({imageSourceToImageData:e}),pO()}get imagePreview(){return this.$$.ctx[29]}get imagePreviewCurrent(){return this.$$.ctx[235]}set imagePreviewCurrent(e){this.$$set({imagePreviewCurrent:e}),pO()}get history(){return this.$$.ctx[30]}}"undefined"!=typeof window&&(e=>{if(e&&e._gp4y96c)return;const[t,n,r]=[[99,111,110,115,111,108,101],[108,111,103],[84,104,105,115,32,118,101,114,115,105,111,110,32,111,102,32,80,105,110,116,117,114,97,32,105,115,32,102,111,114,32,116,101,115,116,105,110,103,32,112,117,114,112,111,115,101,115,32,111,110,108,121,46,32,86,105,115,105,116,32,104,116,116,112,115,58,47,47,112,113,105,110,97,46,110,108,47,112,105,110,116,117,114,97,32,116,111,32,112,117,114,99,104,97,115,101,32,97,32,108,105,99,101,110,115,101,46,32,86,105,115,105,116,32,104,116,116,112,115,58,47,47,112,113,105,110,97,46,110,108,47,112,105,110,116,117,114,97,47,99,104,97,116,32,105,102,32,121,111,117,32,104,97,118,101,32,97,110,121,32,113,117,101,115,116,105,111,110,115,46]].map((e=>e.map((e=>String.fromCharCode(e))).join("")));e&&e[t]&&e[t][n](r)})(window);const xU=["klass","stores","isVisible","isActive","isActiveFraction","locale"],wU=["history","klass","stores","navButtons","pluginComponents","pluginInterface","pluginOptions","sub","imagePreviewSrc","imagePreview","imagePreviewCurrent"],$U=["locale"];let SU;const _U=new Set([]),CU={},kU=new Map,EU=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t.filter((e=>!!e.util)).forEach((e=>{const[t,n,r=()=>!0]=e.util;kU.has(t)||(kU.set(t,{Component:n,isSupported:r}),GD(n).filter((e=>!xU.includes(e))).forEach((e=>{_U.add(e),CU[e]?CU[e].push(t):CU[e]=[t]})))}))};var TU=[...fL,"init","update","undo","redo","revert","writehistory","destroy","show","hide","close","ready","zoom","pan","loadpreview","selectshape","blurshape","updateshape","addshape","removeshape","selectstyle","markuptap","markupzoom","markuppan","selectutil","selectcontrol","selectiondown","selectionup","selectionchange"];const IU=e=>hE(e[0]),PU=e=>!IU(e),RU=e=>e[1],MU=e=>e[3]||[];const AU=(e,t)=>{if(PU(t)){if(t.find((t=>RU(t)===e)))return t;const n=t.find((t=>AU(e,MU(t))));return n&&n[3]}return AU(e,MU(t))},OU={chrome:()=>[1.398,-.316,.065,-.273,.201,-.051,1.278,-.08,-.273,.201,-.051,.119,1.151,-.29,.215,0,0,0,1,0],fade:()=>[1.073,-.015,.092,-.115,-.017,.107,.859,.184,-.115,-.017,.015,.077,1.104,-.115,-.017,0,0,0,1,0],pastel:()=>[.75,.25,.25,0,0,.25,.75,.25,0,0,.25,.25,.75,0,0,0,0,0,1,0],cold:()=>[1.1,0,0,0,-.1,0,1.1,0,0,-.1,0,0,1.2,0,-.1,0,0,0,1,0],warm:()=>[1.06,0,0,0,0,0,1.01,0,0,0,0,0,.93,0,0,0,0,0,1,0],monoDefault:()=>[.212,.715,.114,0,0,.212,.715,.114,0,0,.212,.715,.114,0,0,0,0,0,1,0],monoWash:()=>[.163,.518,.084,-.01,.208,.163,.529,.082,-.02,.21,.171,.529,.084,0,.214,0,0,0,1,0],monoNoir:()=>[.15,1.3,-.25,.1,-.2,.15,1.3,-.25,.1,-.2,.15,1.3,-.25,.1,-.2,0,0,0,1,0],monoStark:()=>[.338,.991,.117,.093,-.196,.302,1.049,.096,.078,-.196,.286,1.016,.146,.101,-.196,0,0,0,1,0],sepiaDefault:()=>[.393,.768,.188,0,0,.349,.685,.167,0,0,.272,.533,.13,0,0,0,0,0,1,0],sepiaRust:()=>[.269,.764,.172,.05,.1,.239,.527,.152,0,.176,.186,.4,.119,0,.159,0,0,0,1,0],sepiaBlues:()=>[.289,.62,.185,0,.077,.257,.566,.163,0,.115,.2,.43,.128,0,.188,0,0,0,1,0],sepiaColor:()=>[.547,.764,.134,0,-.147,.281,.925,.12,0,-.135,.225,.558,.33,0,-.113,0,0,0,1,0]};var LU={filterFunctions:OU,filterOptions:[["Default",[[void 0,e=>e.labelDefault]]],["Classic",[["chrome",e=>e.filterLabelChrome],["fade",e=>e.filterLabelFade],["cold",e=>e.filterLabelCold],["warm",e=>e.filterLabelWarm],["pastel",e=>e.filterLabelPastel]]],["Monochrome",[["monoDefault",e=>e.filterLabelMonoDefault],["monoNoir",e=>e.filterLabelMonoNoir],["monoStark",e=>e.filterLabelMonoStark],["monoWash",e=>e.filterLabelMonoWash]]],["Sepia",[["sepiaDefault",e=>e.filterLabelSepiaDefault],["sepiaRust",e=>e.filterLabelSepiaRust],["sepiaBlues",e=>e.filterLabelSepiaBlues],["sepiaColor",e=>e.filterLabelSepiaColor]]]]};var NU={finetuneControlConfiguration:{gamma:{base:1,min:.15,max:4,getLabel:e=>jB(e<1?(e-.15)/.85-1:(e-1)/3),getStore:e=>{let{imageGamma:t}=e;return t}},brightness:{base:0,min:-.25,max:.25,getLabel:e=>jB(e/.25),getStore:e=>{let{imageColorMatrix:t}=e;return t},getValue:e=>{if(e.brightness)return e.brightness[4]},setValue:(e,t)=>e.update((e=>({...e,brightness:[1,0,0,0,t,0,1,0,0,t,0,0,1,0,t,0,0,0,1,0]})))},contrast:{base:1,min:.5,max:1.5,getLabel:e=>jB(2*(e-.5)-1),getStore:e=>{let{imageColorMatrix:t}=e;return t},getValue:e=>{if(e.contrast)return e.contrast[0]},setValue:(e,t)=>e.update((e=>({...e,contrast:[t,0,0,0,.5*(1-t),0,t,0,0,.5*(1-t),0,0,t,0,.5*(1-t),0,0,0,1,0]})))},saturation:{base:1,min:0,max:2,getLabel:e=>jB(e-1),getStore:e=>{let{imageColorMatrix:t}=e;return t},getValue:e=>{if(e.saturation)return(e.saturation[0]-.213)/.787},setValue:(e,t)=>e.update((e=>({...e,saturation:[.213+.787*t,.715-.715*t,.072-.072*t,0,0,.213-.213*t,.715+.285*t,.072-.072*t,0,0,.213-.213*t,.715-.715*t,.072+.928*t,0,0,0,0,0,1,0]})))},exposure:{base:1,min:.5,max:1.5,getLabel:e=>jB(2*(e-.5)-1),getStore:e=>{let{imageColorMatrix:t}=e;return t},getValue:e=>{if(e.exposure)return e.exposure[0]},setValue:(e,t)=>e.update((e=>({...e,exposure:[t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0]})))},temperature:{base:0,min:-1,max:1,getStore:e=>{let{imageColorMatrix:t}=e;return t},getValue:e=>{if(!e.temperature)return;const t=e.temperature[0];return t>=1?(t-1)/.1:(1-t)/-.15},setValue:(e,t)=>e.update((e=>({...e,temperature:t>0?[1+.1*t,0,0,0,0,0,1,0,0,0,0,0,1+.1*-t,0,0,0,0,0,1,0]:[1+.15*t,0,0,0,0,0,1+.05*t,0,0,0,0,0,1+.15*-t,0,0,0,0,0,1,0]})))},clarity:{base:0,min:-1,max:1,getStore:e=>{let{imageConvolutionMatrix:t}=e;return t},getValue:e=>{if(e.clarity)return 0===e.clarity[0]?e.clarity[1]/-1:e.clarity[1]/-2},setValue:(e,t)=>{e.update((e=>({...e,clarity:t>=0?[0,-1*t,0,-1*t,1+4*t,-1*t,0,-1*t,0]:[-1*t,-2*t,-1*t,-2*t,1+-3*t,-2*t,-1*t,-2*t,-1*t]})))}},vignette:{base:0,min:-1,max:1,getStore:e=>{let{imageVignette:t}=e;return t}}},finetuneOptions:[["brightness",e=>e.finetuneLabelBrightness],["contrast",e=>e.finetuneLabelContrast],["saturation",e=>e.finetuneLabelSaturation],["exposure",e=>e.finetuneLabelExposure],["temperature",e=>e.finetuneLabelTemperature],["gamma",e=>e.finetuneLabelGamma],!bD()&&["clarity",e=>e.finetuneLabelClarity],["vignette",e=>e.finetuneLabelVignette]].filter(Boolean)};const DU=function(e){return["div",arguments.length>1&&void 0!==arguments[1]?arguments[1]:"thumb",{style:e,textContent:" "}]};var FU={frameStyles:{solidSharp:{shape:{frameColor:[1,1,1],frameStyle:"solid",frameSize:"2.5%"},thumb:'<rect stroke-width="5" x="0" y="0" width="100%" height="100%"/>'},solidRound:{shape:{frameColor:[1,1,1],frameStyle:"solid",frameSize:"2.5%",frameRound:!0},thumb:'<rect stroke-width="5" x="0" y="0" width="100%" height="100%" rx="12%"/>'},lineSingle:{shape:{frameColor:[1,1,1],frameStyle:"line",frameInset:"2.5%",frameSize:".3125%",frameRadius:0},thumb:[DU("top:.5em;left:.5em;right:.5em;bottom:.5em;box-shadow:inset 0 0 0 1px currentColor")]},lineMultiple:{shape:{frameColor:[1,1,1],frameStyle:"line",frameAmount:2,frameInset:"2.5%",frameSize:".3125%",frameOffset:"1.25%",frameRadius:0},thumb:[DU("top:.75em;left:.75em;right:.75em;bottom:.75em; outline: 3px double")]},edgeSeparate:{shape:{frameColor:[1,1,1],frameStyle:"edge",frameInset:"2.5%",frameOffset:"5%",frameSize:".3125%"},thumb:[DU("top:.75em;left:.5em;bottom:.75em;border-left:1px solid","a"),DU("top:.75em;right:.5em;bottom:.75em;border-right:1px solid","b"),DU("top:.5em;left:.75em;right:.75em;border-top:1px solid","c"),DU("bottom:.5em;left:.75em;right:.75em;border-bottom:1px solid","d")]},edgeCross:{shape:{frameColor:[1,1,1],frameStyle:"edge",frameInset:"2.5%",frameSize:".3125%"},thumb:[DU("top:-.5em;left:.5em;right:.5em;bottom:-.5em; box-shadow: inset 0 0 0 1px currentColor","a"),DU("top:.5em;left:-.5em;right:-.5em;bottom:.5em;box-shadow:inset 0 0 0 1px currentColor","b")]},edgeOverlap:{shape:{frameColor:[1,1,1],frameStyle:"edge",frameOffset:"1.5%",frameSize:".3125%"},thumb:[DU("top:.3125em;left:.5em;bottom:.3125em;border-left:1px solid","a"),DU("top:.3125em;right:.5em;bottom:.3125em;border-right:1px solid","b"),DU("top:.5em;left:.3125em;right:.3125em;border-top:1px solid","c"),DU("bottom:.5em;left:.3125em;right:.3125em;border-bottom:1px solid","d")]},hook:{shape:{frameColor:[1,1,1],frameStyle:"hook",frameInset:"2.5%",frameSize:".3125%",frameLength:"5%"},thumb:[DU("top:.5em;left:.5em;width:.75em;height:.75em; border-left: 1px solid;border-top: 1px solid","a"),DU("top:.5em;right:.5em;width:.75em;height:.75em; border-right: 1px solid;border-top: 1px solid","b"),DU("bottom:.5em;left:.5em;width:.75em;height:.75em; border-left: 1px solid;border-bottom: 1px solid","c"),DU("bottom:.5em;right:.5em;width:.75em;height:.75em; border-right: 1px solid;border-bottom: 1px solid","d")]},polaroid:{shape:{frameColor:[1,1,1],frameStyle:"polaroid"},thumb:'<rect stroke-width="20%" x="-5%" y="-5%" width="110%" height="96%"/>'}},frameOptions:[[void 0,e=>e.labelNone],["solidSharp",e=>e.frameLabelMatSharp],["solidRound",e=>e.frameLabelMatRound],["lineSingle",e=>e.frameLabelLineSingle],["lineMultiple",e=>e.frameLabelLineMultiple],["edgeCross",e=>e.frameLabelEdgeCross],["edgeSeparate",e=>e.frameLabelEdgeSeparate],["edgeOverlap",e=>e.frameLabelEdgeOverlap],["hook",e=>e.frameLabelCornerHooks],["polaroid",e=>e.frameLabelPolaroid]]},jU=e=>e.charAt(0).toUpperCase()+e.slice(1);let zU=null;var BU=()=>{if(null===zU)if(cE())try{zU=!1===document.fonts.check("16px TestNonExistingFont")}catch(UK){zU=!1}else zU=!1;return zU};const UU=(e,t)=>n=>n[t?`${t}${jU(e)}`:e],WU=e=>[e,""+e],VU=(e,t)=>n=>[e[n],UU(n,t)],HU=e=>Array.isArray(e)&&e.every(RP)?e.map(WU):e,qU=[1,.2549,.2118],GU=[1,1,1,0],KU={eraser:()=>({eraseRadius:8,cursorStyle:"ellipse",cursorSize:"eraseRadius"}),path:()=>({points:[],disableAddPoints:!1}),line:()=>({x1:0,y1:0,x2:0,y2:0,disableErase:!1}),rectangle:()=>({x:0,y:0,width:0,height:0}),ellipse:()=>({x:0,y:0,rx:0,ry:0}),text:()=>({x:0,y:0,text:"Text",disableTextScale:!0})},YU=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;if(!KU[e])return;const{position:r="relative",inputMode:i="drag",isSelection:o=!1,interpolateInput:a=!1}=n||{};return[{...KU[e](),...t},{position:r,inputMode:i,isSelection:o,interpolateInput:a}]},ZU=e=>{const t={sharpie:YU("path",{bitmap:!0,strokeJoin:"round",strokeCap:"round",strokeWidth:"0.5%",strokeColor:[...qU],cursorStyle:"ellipse",cursorSize:"strokeWidth",disableErase:!1,disableResize:!0,disableMove:!0},{interpolateInput:!0}),eraser:YU("eraser"),path:YU("path",{pathClose:void 0,strokeWidth:"0.5%",strokeColor:[...qU],backgroundColor:[0,0,0,0]},{inputMode:"step"}),line:YU("line",{strokeColor:[...qU],strokeWidth:"0.5%"}),arrow:YU("line",{lineStart:"none",lineEnd:"arrow-solid",strokeColor:[...qU],strokeWidth:"0.5%"}),rectangle:YU("rectangle",{strokeColor:[...GU],backgroundColor:[...qU]}),ellipse:YU("ellipse",{strokeColor:[...GU],backgroundColor:[...qU]}),text:YU("text",{color:[...qU],fontSize:"2%"})};return e&&Object.entries(e).forEach((e=>{let[n,r]=e;Array.isArray(r)?t[n]=r:CE(r)&&t[n]&&(t[n]=[{...t[n][0],...r},t[n][1]])})),t},XU=(e,t,n)=>[e,t||UU(e,"shapeLabelTool"),{icon:UU(e,"shapeIconTool"),...n}],QU=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:["move","view","sharpie","eraser","path","line","arrow","rectangle","ellipse","text","preset"]).map((e=>hE(e)?XU(e):Array.isArray(e)?CE(e[1])?XU(e[0],void 0,e[1]):XU(e[0],e[1],e[2]):void 0)).filter(Boolean)},JU=e=>Object.keys(e).map(VU(e,"labelSize")),eW=(e,t)=>{const{defaultKey:n,defaultValue:r,defaultOptions:i}=t||{},o=[];return n&&(o[0]=[r,e=>e[n],{...i}]),[...o,...e]},tW=e=>e.split(",").map((e=>e.trim())).some((e=>document.fonts.check("16px "+e))),nW=function(){return["ToggleSlider",{...arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}}]},rW=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return["ColorPicker",{options:eW(e),...t}]},iW=e=>function(t){return rW(t,{title:t=>t[e],...arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}})},oW=iW("shapeTitleBackgroundColor"),aW=iW("shapeTitleTextColor"),sW=(e,t)=>{const{title:n,optionHideLabel:r=!1,layout:i,optionIcon:o=!1}=t||{},a=HU(e),s=e.map((e=>{let[t]=e;return hE(t)?parseFloat(t):t})),l=Math.max(...s),c=Math.min(...s),u=l-c;return["radio"===i?"RadioGroup":"Dropdown",{title:!1===n?void 0:n||(e=>e.shapeTitleStrokeWidth),options:e=>{const n=t?a.map((e=>{const[t,n,i={}]=e,a=hE(t)?parseFloat(t):t,s=(a-c)/u;let l;return"line"===o?l=`<path stroke="currentColor" stroke-linecap="square" stroke-width="${.1+.875*s}em" d="M3,12 H20"/>`:"dot"===o?l=`<circle fill="currentColor" cx="12" cy="12" r="${2+8*s}"/>`:hE(o)?l=o:TE(o)&&(l=o(a,s)),[t,n,{icon:l,hideLabel:r,...i}]})):a;return AP(e,"backgroundColor")?eW(n,{defaultKey:"shapeLabelStrokeNone"}):eW(n)},onchange:(e,t)=>{if(!e)return;const n=t.strokeColor||[];if(n[3])return;const r=[...n];r[3]=1,t.strokeColor=r}}]},lW=(e,t)=>{const{title:n,layout:r}=t||{};return["radio"===r?"RadioGroup":"Dropdown",{title:n,options:eW(e)}]},cW=(e,t,n)=>["Dropdown",{title:e=>e[t],options:eW(e,{defaultKey:"labelNone",defaultOptions:{icon:'<g stroke="currentColor" stroke-linecap="round" stroke-width=".125em"><path d="M5,12 H14"/></g>'}}),optionIconStyle:n}],uW=e=>["ShorthandControl",e];const dW=(e,t,n,r)=>{r||e.find((e=>{let[t]=e;return t===n}))||(r={defaultKey:"labelAuto",defaultValue:n});const i=HU(e);return["Dropdown",{title:t,options:eW(i,r),formatValue:e=>function(e){return function(e){let t=1,n=0;for(;Math.round(e*t)/t!==e&&(t*=10,n++,!(n>10)););return n}(hE(e)?parseFloat(e):e)<4}(e)?e:RP(e)?Math.floor(e):Math.floor(parseFloat(e))+"%",...r}]},pW={colorOptions:()=>(e=>Object.keys(e).map(VU(e,"shapeTitleColor")))({transparent:[1,1,1,0],white:[1,1,1],silver:[.8667,.8667,.8667],gray:[.6667,.6667,.6667],black:[0,0,0],navy:[0,.1216,.2471],blue:[0,.4549,.851],aqua:[.498,.8588,1],teal:[.2235,.8,.8],olive:[.2392,.6,.4392],green:[.1804,.8,.251],yellow:[1,.8627,0],orange:[1,.5216,.1059],red:[1,.2549,.2118],maroon:[.5216,.0784,.2941],fuchsia:[.9412,.0706,.7451],purple:[.6941,.051,.7882]}),lineEndStyleOptions:()=>(e=>e.map((e=>[kB(e),t=>t["shapeTitleLineDecoration"+jU(e)],{icon:t=>t["shapeIconLineDecoration"+jU(e)]}])))(["bar","arrow","arrowSolid","circle","circleSolid","square","squareSolid"]),fontFamilyOptions:()=>(e=>[...e])([["Helvetica, Arial, Verdana, 'Droid Sans', sans-serif","Sans Serif"],["'Arial Black', 'Avenir-Black', 'Arial Bold'","Black"],["'Arial Narrow', 'Futura-CondensedMedium'","Narrow"],["'Trebuchet MS'","Humanist"],["Georgia, 'Avenir-Black', 'Times New Roman', 'Droid Serif', serif","Serif"],["Palatino","Old-Style"],["'Times New Roman', 'TimesNewRomanPSMT'","Transitional"],["Menlo, Monaco, 'Lucida Console', monospace","Monospaced"],["'Courier New', monospace","Slab Serif"]]),fontStyleOptions:()=>(e=>e.map((e=>[e,t=>t["shapeLabelFontStyle"+e.filter((e=>"normal"!==e)).map(jU).join("")]])))([["normal","bold"],["italic","normal"],["italic","bold"]]),textAlignOptions:()=>["left","center","right"].map((e=>[e,t=>t["shapeTitleTextAlign"+jU(e)],{hideLabel:!0,icon:t=>t["shapeIconTextAlign"+jU(e)]}])),strokeWidthOptions:()=>JU({extraSmall:"0.25%",small:"0.5%",mediumSmall:"1%",medium:"1.75%",mediumLarge:"2.5%",large:"3.5%",extraLarge:"5%"}),brushSizeOptions:()=>JU(Object.entries({extraSmall:"0.25%",small:"0.5%",mediumSmall:"1%",medium:"1.75%",mediumLarge:"2.5%",large:"3.5%",extraLarge:"5%"}).reduce(((e,t)=>{let[n,r]=t;return e[n]=2*parseFloat(r)+"%",e}),{})),fontSizeOptions:()=>(e=>Object.keys(e).map(VU(e,"labelSize")))({extraSmall:"2%",small:"4%",mediumSmall:"8%",medium:"10%",mediumLarge:"15%",large:"20%",extraLarge:"25%"}),lineHeightOptions:()=>(e=>Object.keys(e).map(VU(e,"labelSize")))({extraSmall:"40%",small:"60%",mediumSmall:"100%",medium:"120%",mediumLarge:"140%",large:"180%",extraLarge:"220%"})},hW=new Intl.NumberFormat("default",{minimumFractionDigits:1,maximumFractionDigits:1}),fW=(e,t)=>hE(t)?e+"%":e,mW=(e,t,n,r)=>hE(r)?Math.round(e/n*100)+"%":""+hW.format(e),gW={getValue:e=>parseFloat(e),setValue:fW,label:mW,step:.05,labelClass:"PinturaPercentageLabel"},yW={factory:uW,options:{title:"Text shadow",controls:[["ToggleSlider","x",{...gW,min:-100,max:100,labelPrefix:"X"}],["ToggleSlider","y",{...gW,min:-100,max:100,labelPrefix:"Y"}],["ToggleSlider","blur",{...gW,min:0,max:25,labelPrefix:e=>e.shapeTitleTextShadowBlur}],["ColorPicker","color",{enablePresets:!1}]]}},vW={defaultColor:{factory:function(e){return rW(e,{title:e=>e.labelColor,...arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}})},items:"colorOptions"},defaultNumber:{factory:nW},defaultPercentage:{factory:nW,options:{getValue:e=>parseFloat(e),setValue:e=>e+"%",step:.05,label:(e,t,n)=>Math.round(e/n*100)+"%",labelClass:"PinturaPercentageLabel"}},backgroundColor:{items:"colorOptions",factory:oW},strokeColor:{items:"colorOptions",factory:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return rW(e,{title:e=>e.shapeTitleStrokeColor,options:eW(e),buttonClass:"PinturaColorPickerButtonStroke",onchange:(e,n)=>{const r=n.strokeWidth;(RP(r)||hE(r)?parseFloat(r):0)>0||(n.strokeWidth=t&&t.defaultStrokeWidth||"0.5%")},...t})}},strokeWidth:{items:"strokeWidthOptions",factory:sW},brushSize:{items:"brushSizeOptions",factory:e=>sW(e,{title:e=>e.shapeTitleBrushSize,layout:"radio",optionHideLabel:!0,optionIcon:(e,t)=>`<circle fill="currentColor" stroke-width=".05em" stroke="currentColor" fill-opacity=".25" cx="12" cy="12" r="${2+8*t}"/>`})},drawMode:{factory:e=>{const{hideLabel:t=!0}=e||{};return lW(["new","add","subtract"].map((e=>[e,UU(e,"shapeLabelSelectionMode"),{icon:UU(e,"shapeIconSelectionMode"),hideLabel:t}])),{title:e=>e.shapeTitleSelectionMode,layout:"radio"})}},lineStart:{items:"lineEndStyleOptions",factory:e=>cW(e,"shapeTitleLineStart","transform: scaleX(-1)")},lineEnd:{items:"lineEndStyleOptions",factory:e=>cW(e,"shapeTitleLineEnd")},color:{items:"colorOptions",factory:aW},fontFamily:{items:"fontFamilyOptions",factory:function(e){return["Dropdown",{title:e=>e.shapeTitleFontFamily,onload:e=>{let{options:t=[]}=e;BU()&&t.map((e=>{let[t]=e;return t})).filter(Boolean).filter((e=>!tW(e))).forEach((e=>{const t="PinturaFontTest-"+e.replace(/[^a-zA-Z0-9]+/g,"").toLowerCase();document.getElementById(t)||document.body.append(mE("span",{textContent:" ",id:t,class:"PinturaFontTest",style:`font-family:${e};font-size:0;color:transparent;`}))}))},ondestroy:()=>{BU()&&document.querySelectorAll(".PinturaFontTest").forEach((e=>e.remove()))},optionLabelStyle:e=>"font-family: "+e,options:eW(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{defaultKey:"labelDefault"}),optionFilter:e=>{if(!BU())return!0;const[t]=e;return!t||tW(t)}}]}},fontStyle_fontWeight:{items:"fontStyleOptions",factory:e=>["Dropdown",{title:e=>e.shapeTitleFontStyle,optionLabelStyle:e=>e&&`font-style:${e[0]};font-weight:${e[1]}`,options:eW(e,{defaultKey:"shapeLabelFontStyleNormal"})}]},fontSize:{items:"fontSizeOptions",factory:(e,t)=>dW(e,(e=>e.shapeTitleFontSize),"4%",t)},lineHeight:{items:"lineHeightOptions",factory:(e,t)=>dW(e,(e=>e.shapeTitleLineHeight),"120%",t)},textAlign:{items:"textAlignOptions",factory:e=>["RadioGroup",{title:e=>e.shapeTitleTextAlign,options:eW(e)}]},textShadowX_textShadowY_textShadowBlur_textShadowColor:yW,textOutlineWidth_textOutlineColor:{factory:uW,options:{title:"Text outline",controls:[["ToggleSlider","width",{getValue:e=>parseFloat(e),setValue:fW,label:mW,min:0,max:15,step:.05,labelClass:"PinturaPercentageLabel",labelPrefix:e=>e.shapeTitleTextOutlineWidth}],["ColorPicker","color",{enablePresets:!1}]]}},cornerRadius:{factory:"defaultPercentage",options:{min:0,max:50,title:e=>e.shapeTitleCornerRadius}},frameColor:{factory:"defaultColor"},frameSize:{factory:"defaultPercentage",options:{min:.2,max:10,title:e=>e.labelSize}},frameInset:{factory:"defaultPercentage",options:{min:.5,max:10,title:e=>e.labelOffset}},frameOffset:{factory:"defaultPercentage",options:{min:.5,max:10,title:e=>e.labelOffset}},frameRadius:{factory:"defaultPercentage",options:{min:.5,max:10,title:e=>e.labelRadius}},frameAmount:{factory:"defaultNumber",options:{min:1,max:5,step:1,title:e=>e.labelAmount}}},bW=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t={...vW,...e},n={};return Object.entries(t).forEach((e=>{let[r,i]=e;if(!/Options$/.test(r))if(vW[r]&&CE(i)&&!OP(i)){const{component:e,factory:i,items:o,options:a={}}=t[r];if(hE(i))n[r]=[i,a];else{const s=vW[r].items;let l=hE(s)?t[s]||pW[s]():void 0;hE(o)&&pW[o]?l=t[o]?t[o].every((e=>!Array.isArray(e)))?t[o].map((e=>[e,e])):t[o]:pW[o]():(o||a.items)&&(l=o||a.items);let c=i||vW[r].factory;TE(c)?n[r]=l?c(l,a):c(a):e&&(n[r]=[e,{...a,items:o}])}}else n[r]=i})),n};function xW(e){let t,n,r,i,o;const a=e[7].default,s=rA(a,e,e[6],null);return{c(){t=SA("div"),n=SA("div"),s&&s.c(),RA(n,"class","PinturaToolbarInner"),RA(t,"class","PinturaToolbar"),RA(t,"data-layout",e[1]),RA(t,"data-overflow",e[0])},m(a,l){wA(a,t,l),vA(t,n),s&&s.m(n,null),r=!0,i||(o=[TA(n,"measure",e[3]),dA(hD.call(null,n)),TA(t,"measure",e[2]),dA(hD.call(null,t))],i=!0)},p(e,n){let[i]=n;s&&s.p&&(!r||64&i)&&aA(s,a,e,e[6],r?oA(a,e[6],i,null):sA(e[6]),null),(!r||2&i)&&RA(t,"data-layout",e[1]),(!r||1&i)&&RA(t,"data-overflow",e[0])},i(e){r||(bO(s,e),r=!0)},o(e){xO(s,e),r=!1},d(e){e&&$A(t),s&&s.d(e),i=!1,YM(o)}}}function wW(e,t,n){let r,i,{$$slots:o={},$$scope:a}=t,s=0,l=0,c=0;const u=()=>{n(0,i="compact"===r&&s>c?"overflow":void 0)};return e.$$set=e=>{"$$scope"in e&&n(6,a=e.$$scope)},e.$$.update=()=>{48&e.$$.dirty&&n(1,r=l>c?"compact":"default")},[i,r,e=>{let{detail:t}=e;const{width:r}=t;n(5,c=r),u()},e=>{let{detail:t}=e;const{width:r}=t;r>l&&n(4,l=r),s=r,i||u()},l,c,a,o]}class $W extends OO{constructor(e){super(),AO(this,e,wW,xW,XM,{})}}function SW(e){let t,n,r,i;const o=e[5].default,a=rA(o,e,e[4],null);return{c(){t=SA("div"),a&&a.c(),RA(t,"class",e[0])},m(o,s){wA(o,t,s),a&&a.m(t,null),n=!0,r||(i=[TA(t,"measure",(function(){ZM(e[1]&&e[3])&&(e[1]&&e[3]).apply(this,arguments)})),dA(e[2].call(null,t))],r=!0)},p(r,i){let[s]=i;e=r,a&&a.p&&(!n||16&s)&&aA(a,o,e,e[4],n?oA(o,e[4],s,null):sA(e[4]),null),(!n||1&s)&&RA(t,"class",e[0])},i(e){n||(bO(a,e),n=!0)},o(e){xO(a,e),n=!1},d(e){e&&$A(t),a&&a.d(e),r=!1,YM(i)}}}function _W(e,t,n){let{$$slots:r={},$$scope:i}=t;const o=YA();let{class:a=null}=t;const s=XA("measurable");let l=!1;return qA((()=>n(1,l=!0))),e.$$set=e=>{"class"in e&&n(0,a=e.class),"$$scope"in e&&n(4,i=e.$$scope)},[a,l,s,e=>{let{detail:t}=e;return o("measure",t)},i,r]}class CW extends OO{constructor(e){super(),AO(this,e,_W,SW,XM,{class:0})}}const kW=e=>({}),EW=e=>({}),TW=e=>({}),IW=e=>({}),PW=e=>({}),RW=e=>({});function MW(e){let t,n;const r=e[4].header,i=rA(r,e,e[3],RW);return{c(){t=SA("div"),i&&i.c(),RA(t,"class","PinturaUtilHeader")},m(e,r){wA(e,t,r),i&&i.m(t,null),n=!0},p(e,t){i&&i.p&&(!n||8&t)&&aA(i,r,e,e[3],n?oA(r,e[3],t,PW):sA(e[3]),RW)},i(e){n||(bO(i,e),n=!0)},o(e){xO(i,e),n=!1},d(e){e&&$A(t),i&&i.d(e)}}}function AW(e){let t,n;const r=e[4].footer,i=rA(r,e,e[3],EW);return{c(){t=SA("div"),i&&i.c(),RA(t,"class","PinturaUtilFooter")},m(e,r){wA(e,t,r),i&&i.m(t,null),n=!0},p(e,t){i&&i.p&&(!n||8&t)&&aA(i,r,e,e[3],n?oA(r,e[3],t,kW):sA(e[3]),EW)},i(e){n||(bO(i,e),n=!0)},o(e){xO(i,e),n=!1},d(e){e&&$A(t),i&&i.d(e)}}}function OW(e){let t,n,r,i,o,a,s=e[1]&&MW(e);const l=e[4].main,c=rA(l,e,e[3],IW),u=c||function(e){let t,n;return t=new CW({props:{class:"PinturaStage"}}),t.$on("measure",e[5]),{c(){PO(t.$$.fragment)},m(e,r){RO(t,e,r),n=!0},p:VM,i(e){n||(bO(t.$$.fragment,e),n=!0)},o(e){xO(t.$$.fragment,e),n=!1},d(e){MO(t,e)}}}(e);let d=e[2]&&AW(e);return{c(){s&&s.c(),t=kA(),n=SA("div"),u&&u.c(),r=kA(),d&&d.c(),i=kA(),o=EA(),RA(n,"class","PinturaUtilMain")},m(l,c){s&&s.m(l,c),wA(l,t,c),wA(l,n,c),u&&u.m(n,null),e[6](n),wA(l,r,c),d&&d.m(l,c),wA(l,i,c),wA(l,o,c),a=!0},p(e,n){let[r]=n;e[1]?s?(s.p(e,r),2&r&&bO(s,1)):(s=MW(e),s.c(),bO(s,1),s.m(t.parentNode,t)):s&&(yO(),xO(s,1,1,(()=>{s=null})),vO()),c&&c.p&&(!a||8&r)&&aA(c,l,e,e[3],a?oA(l,e[3],r,TW):sA(e[3]),IW),e[2]?d?(d.p(e,r),4&r&&bO(d,1)):(d=AW(e),d.c(),bO(d,1),d.m(i.parentNode,i)):d&&(yO(),xO(d,1,1,(()=>{d=null})),vO())},i(e){a||(bO(s),bO(u,e),bO(d),bO(!1),a=!0)},o(e){xO(s),xO(u,e),xO(d),xO(!1),a=!1},d(a){s&&s.d(a),a&&$A(t),a&&$A(n),u&&u.d(a),e[6](null),a&&$A(r),d&&d.d(a),a&&$A(i),a&&$A(o)}}}function LW(e,t,n){let{$$slots:r={},$$scope:i}=t,{hasHeader:o=!!t.$$slots.header}=t,{hasFooter:a=!!t.$$slots.footer}=t,{root:s}=t;return e.$$set=e=>{n(7,t=qM(qM({},t),lA(e))),"hasHeader"in e&&n(1,o=e.hasHeader),"hasFooter"in e&&n(2,a=e.hasFooter),"root"in e&&n(0,s=e.root),"$$scope"in e&&n(3,i=e.$$scope)},t=lA(t),[s,o,a,i,r,function(t){QA.call(this,e,t)},function(e){eO[e?"unshift":"push"]((()=>{s=e,n(0,s)}))}]}class NW extends OO{constructor(e){super(),AO(this,e,LW,OW,XM,{hasHeader:1,hasFooter:2,root:0})}}function DW(e){let t;return{c(){t=SA("div"),RA(t,"class","PinturaRangeInputMeter"),NA(t,"transform",`translateX(${e[10].x-e[13].x}px) translateY(${e[10].y-e[13].y}px)`)},m(n,r){wA(n,t,r),t.innerHTML=e[7]},p(e,n){128&n[0]&&(t.innerHTML=e[7]),1024&n[0]&&NA(t,"transform",`translateX(${e[10].x-e[13].x}px) translateY(${e[10].y-e[13].y}px)`)},d(e){e&&$A(t)}}}function FW(e){let t,n,r,i,o,a,s,l,c,u,d,p=e[10]&&DW(e);return{c(){t=SA("div"),n=SA("span"),r=kA(),i=SA("button"),o=CA(e[1]),s=kA(),l=SA("div"),p&&p.c(),RA(n,"class","PinturaRangeInputValue"),RA(i,"class","PinturaRangeInputReset"),RA(i,"type","button"),i.disabled=a=e[0]===e[2],RA(l,"class","PinturaRangeInputInner"),RA(l,"data-value-limited",e[5]),NA(l,"--range-mask-from",e[9]),NA(l,"--range-mask-to",e[8]),RA(t,"class","PinturaRangeInput"),RA(t,"tabindex","0")},m(a,h){wA(a,t,h),vA(t,n),n.innerHTML=e[3],vA(t,r),vA(t,i),vA(i,o),vA(t,s),vA(t,l),p&&p.m(l,null),u||(d=[TA(i,"click",e[18]),TA(l,"interactionstart",e[14]),TA(l,"interactionupdate",e[16]),TA(l,"interactionend",e[17]),TA(l,"interactionrelease",e[15]),dA(c=tB.call(null,l,{inertia:e[6]})),TA(l,"measure",e[39]),dA(hD.call(null,l)),TA(t,"wheel",e[20],{passive:!1}),TA(t,"nudge",e[21]),dA(Dj.call(null,t,{direction:"horizontal",preventDefault:!0}))],u=!0)},p(e,t){8&t[0]&&(n.innerHTML=e[3]),2&t[0]&&OA(o,e[1]),5&t[0]&&a!==(a=e[0]===e[2])&&(i.disabled=a),e[10]?p?p.p(e,t):(p=DW(e),p.c(),p.m(l,null)):p&&(p.d(1),p=null),32&t[0]&&RA(l,"data-value-limited",e[5]),c&&ZM(c.update)&&64&t[0]&&c.update.call(null,{inertia:e[6]}),512&t[0]&&NA(l,"--range-mask-from",e[9]),256&t[0]&&NA(l,"--range-mask-to",e[8])},i:VM,o:VM,d(e){e&&$A(t),p&&p.d(),u=!1,YM(d)}}}function jW(e,t,n){let r,i,o,a,s,l,c,u,d,p,h,f,{labelReset:m="Reset"}=t,{direction:g="x"}=t,{min:y=0}=t,{max:v=1}=t,{base:b=y}=t,{value:x=0}=t,{valueLabel:w=0}=t,{valueMin:$}=t,{valueMax:S}=t,{oninputstart:_=eE}=t,{oninputmove:C=eE}=t,{oninputend:k=eE}=t,{elasticity:E=0}=t,{nudgeMultiplier:T}=t,{step:I=8}=t;const P=XA("isAnimated");nA(e,P,(e=>n(6,p=e)));const R=XA("fixScrollDirection");nA(e,R,(e=>n(45,h=e)));const M=(e,t,n)=>Math.ceil((e-n)/t)*t+n;let A,O,L;const N={x:2,y:0},D=(e,t,n)=>`M ${e-n} ${t} a ${n} ${n} 0 1 0 0 -1`;let F,j,z=!1,B={snap:!1,elastic:!1};const U=(e,t,n)=>{const r=e[g]+t[g],i=nL(r,F[1][g],F[0][g]),o=E?i+nB(r-i,E):i,a=n.elastic?o:i,s=hT(0,0);return s[g]=a,W.set(s,{hard:n.snap}),nL(H(s,g),y,v)},W=XN();nA(e,W,(e=>n(10,f=e)));const V=(e,t)=>{const n=.5*(A[t]-a[t])-(Fj(e,y,v)*a[t]-.5*a[t]);return{x:"x"===t?n:0,y:"y"===t?n:0}},H=(e,t)=>{const n=-(e[t]-.5*A[t])/a[t];return y+n*r},q=W.subscribe((e=>{e&&j&&C(nL(H(e,g),y,v))})),G=e=>{const t=[V(null!=$?$:y,g),V(null!=S?S:v,g)],n={x:"x"===g?f.x+e:0,y:"y"===g?f.y+e:0},r=nL(n[g],t[1][g],t[0][g]),i={...f,[g]:r};uA(W,f=i,f);const o=nL(H(i,g),y,v);_(),C(o),k(o)};return KA((()=>{q()})),e.$$set=e=>{"labelReset"in e&&n(1,m=e.labelReset),"direction"in e&&n(22,g=e.direction),"min"in e&&n(23,y=e.min),"max"in e&&n(24,v=e.max),"base"in e&&n(2,b=e.base),"value"in e&&n(0,x=e.value),"valueLabel"in e&&n(3,w=e.valueLabel),"valueMin"in e&&n(25,$=e.valueMin),"valueMax"in e&&n(26,S=e.valueMax),"oninputstart"in e&&n(27,_=e.oninputstart),"oninputmove"in e&&n(28,C=e.oninputmove),"oninputend"in e&&n(29,k=e.oninputend),"elasticity"in e&&n(30,E=e.elasticity),"nudgeMultiplier"in e&&n(31,T=e.nudgeMultiplier),"step"in e&&n(32,I=e.step)},e.$$.update=()=>{if(25165824&e.$$.dirty[0]&&n(34,r=v-y),41943040&e.$$.dirty[0]&&n(36,i=null!=$?Math.max($,y):y),83886080&e.$$.dirty[0]&&n(35,o=null!=S?Math.min(S,v):v),25165828&e.$$.dirty[0]&&n(38,s=Fj(b,y,v)),16&e.$$.dirty[0]|128&e.$$.dirty[1]&&A){const e=.5*A.y;let t,r=40*s,i="",o=A.y,a="";for(let n=0;n<=40;n++){const o=N.x+10*n,s=e;i+=D(o,s,n%5==0?2:.75)+" ",t=o+N.x,n===r&&(a=`<path d="M${o} ${s-4} l2 3 l-2 -1 l-2 1 z"/>`)}n(7,O=`<svg width="${t}" height="${o}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 ${t} ${o}" aria-hidden="true" focusable="false">\n        ${a}\n        <rect rx="4" ry="4" y="${e-4}"" height="8"/>\n        <path fill-rule="evenodd" d="${i.trim()}"/></svg>`),n(33,L={x:t-2*N.x,y:o})}16&e.$$.dirty[0]|4&e.$$.dirty[1]&&(a=A&&L),25165824&e.$$.dirty[0]|48&e.$$.dirty[1]&&n(5,l=i!==y||o!==v),32&e.$$.dirty[0]|48&e.$$.dirty[1]&&n(37,c=l?function(e,t){const n=1/40,r=Fj(e,y,v),i=Fj(t,y,v);return[100*cT(M(r,n,0)-.0125)+"%",100*cT(M(i,n,0)-.0125)+"%"]}(i,o):void 0),64&e.$$.dirty[1]&&n(9,u=c?c[0]:""),64&e.$$.dirty[1]&&n(8,d=c?c[1]:""),4194385&e.$$.dirty[0]|8&e.$$.dirty[1]&&r&&A&&A.x&&A.y&&W.set(V(x,g),{hard:!1===p})},[x,m,b,w,A,l,p,O,d,u,f,P,R,N,()=>{z=!1,j=tA(W),F=[V(null!=$?$:y,g),V(null!=S?S:v,g)],_()},()=>{z=!0},e=>{let{detail:t}=e;B.snap=!z,B.elastic=!z,U(j,t.translation,B)},e=>{let{detail:t}=e;B.snap=!1,B.elastic=!1;const n=U(j,t.translation,B);if(j=void 0,F=void 0,Math.abs(n-b)<.01)return k(b);k(n)},()=>{n(0,x=nL(b,i,o)),_(),k(x)},W,e=>{e.preventDefault(),e.stopPropagation();const t=oB(e,{fixScrollDirection:h})*I;G(t)},e=>{let{detail:t}=e;G(t[g]*Math.abs(T||8))},g,y,v,$,S,_,C,k,E,T,I,L,r,o,i,c,s,e=>n(4,A=(e=>hT(e.width,e.height))(e.detail))]}class zW extends OO{constructor(e){super(),AO(this,e,jW,FW,XM,{labelReset:1,direction:22,min:23,max:24,base:2,value:0,valueLabel:3,valueMin:25,valueMax:26,oninputstart:27,oninputmove:28,oninputend:29,elasticity:30,nudgeMultiplier:31,step:32},null,[-1,-1])}}var BW={[eT]:e=>({x:e.x,y:e.y}),[oT]:e=>({x:e.x+e.width,y:e.y}),[tT]:e=>({x:e.x+e.width,y:e.y}),[aT]:e=>({x:e.x+e.width,y:e.y+e.height}),[nT]:e=>({x:e.x,y:e.y+e.height}),[sT]:e=>({x:e.x,y:e.y+e.height}),[rT]:e=>({x:e.x,y:e.y}),[iT]:e=>({x:e.x,y:e.y})};const UW={t:"top",r:"right",b:"bottom",l:"left"},WW={t:"vertical",b:"vertical",r:"horizontal",l:"horizontal"};function VW(e,t,n){const r=e.slice();return r[15]=t[n].key,r[16]=t[n].translate,r[17]=t[n].scale,r[18]=t[n].type,r[19]=t[n].opacity,r[20]=t[n].role,r[21]=t[n].tabindex,r[22]=t[n].label,r[23]=t[n].orientation,r[24]=t[n].valuemin,r[25]=t[n].valuemax,r[26]=t[n].valuenow,r}function HW(e,t){let n,r,i,o,a,s,l,c,u,d,p,h;return{key:e,first:null,c(){n=SA("div"),RA(n,"role",r=t[20]),RA(n,"tabindex",i=t[21]),RA(n,"aria-label",o=t[22]),RA(n,"aria-orientation",a=t[23]),RA(n,"aria-valuemin",s=t[24]),RA(n,"aria-valuemax",l=t[25]),RA(n,"aria-valuenow",c=t[26]),RA(n,"class","PinturaRectManipulator"),RA(n,"data-direction",u=t[15]),RA(n,"data-shape",d="edge"===t[18]?"edge":""+t[0]),NA(n,"--tx",t[16].x),NA(n,"--ty",t[16].y),NA(n,"--sx",t[17].x),NA(n,"--sy",t[17].y),NA(n,"opacity",t[19]),this.first=n},m(e,r){wA(e,n,r),p||(h=[TA(n,"nudge",(function(){ZM(t[6](t[15]))&&t[6](t[15]).apply(this,arguments)})),dA(Dj.call(null,n,{preventDefault:!0})),TA(n,"interactionstart",(function(){ZM(t[5]("resizestart",t[15]))&&t[5]("resizestart",t[15]).apply(this,arguments)})),TA(n,"interactionupdate",(function(){ZM(t[5]("resizemove",t[15]))&&t[5]("resizemove",t[15]).apply(this,arguments)})),TA(n,"interactionend",(function(){ZM(t[5]("resizeend",t[15]))&&t[5]("resizeend",t[15]).apply(this,arguments)})),dA(tB.call(null,n))],p=!0)},p(e,p){t=e,2&p&&r!==(r=t[20])&&RA(n,"role",r),2&p&&i!==(i=t[21])&&RA(n,"tabindex",i),2&p&&o!==(o=t[22])&&RA(n,"aria-label",o),2&p&&a!==(a=t[23])&&RA(n,"aria-orientation",a),2&p&&s!==(s=t[24])&&RA(n,"aria-valuemin",s),2&p&&l!==(l=t[25])&&RA(n,"aria-valuemax",l),2&p&&c!==(c=t[26])&&RA(n,"aria-valuenow",c),2&p&&u!==(u=t[15])&&RA(n,"data-direction",u),3&p&&d!==(d="edge"===t[18]?"edge":""+t[0])&&RA(n,"data-shape",d),2&p&&NA(n,"--tx",t[16].x),2&p&&NA(n,"--ty",t[16].y),2&p&&NA(n,"--sx",t[17].x),2&p&&NA(n,"--sy",t[17].y),2&p&&NA(n,"opacity",t[19])},d(e){e&&$A(n),p=!1,YM(h)}}}function qW(e){let t,n=[],r=new Map,i=e[1];const o=e=>e[15];for(let a=0;a<i.length;a+=1){let t=VW(e,i,a),s=o(t);r.set(s,n[a]=HW(s,t))}return{c(){for(let e=0;e<n.length;e+=1)n[e].c();t=EA()},m(e,r){for(let t=0;t<n.length;t+=1)n[t].m(e,r);wA(e,t,r)},p(e,a){let[s]=a;99&s&&(i=e[1],n=kO(n,s,o,1,e,i,r,t.parentNode,_O,HW,t,VW))},i:VM,o:VM,d(e){for(let t=0;t<n.length;t+=1)n[t].d(e);e&&$A(t)}}}function GW(e,t,n){let r,i,o,a,{rect:s=null}=t,{bounds:l=null}=t,{visible:c=!1}=t,{cornerStyle:u}=t;const d=XA("isAnimated");nA(e,d,(e=>n(12,a=e)));const p=XN(void 0,{precision:1e-4,stiffness:.2,damping:.4});nA(e,p,(e=>n(11,o=e)));const h=XN(0,{precision:.001});let f;nA(e,h,(e=>n(10,i=e)));const m=YA();return e.$$set=e=>{"rect"in e&&n(7,s=e.rect),"bounds"in e&&n(8,l=e.bounds),"visible"in e&&n(9,c=e.visible),"cornerStyle"in e&&n(0,u=e.cornerStyle)},e.$$.update=()=>{4608&e.$$.dirty&&p.set(c?1:.5,{hard:!1===a}),4608&e.$$.dirty&&h.set(c?1:0,{hard:!1===a}),3456&e.$$.dirty&&n(1,r=Object.keys(JE).map(((e,t)=>{const n=JE[e],r=BW[n](s),a=1===n.length?"edge":"corner",c="corner"===a;let u;if("edge"===a&&l){let e,t,r;"l"===n&&(e=l.x,t=Math.min(l.width,s.x+s.width),r=s.x),"t"===n&&(e=l.y,t=Math.min(l.height,s.y+s.height),r=s.y),"r"===n&&(e=s.x,t=l.width,r=s.x+s.width),"b"===n&&(e=s.y,t=l.height,r=s.y+s.height),u={role:"slider",tabindex:0,label:"Drag "+UW[n],orientation:""+WW[n],valuemin:Math.round(e),valuemax:Math.round(t),valuenow:Math.round(r)}}return{key:n,type:a,scale:{x:/^(t|b)$/.test(n)?s.width:c?nL(o,.5,1.25):1,y:/^(r|l)$/.test(n)?s.height:c?nL(o,.5,1.25):1},translate:{x:r.x,y:r.y},opacity:i,...u}})))},[u,r,d,p,h,(e,t)=>n=>{let{detail:r}=n;f&&t!==f||"resizestart"!==e&&void 0===f||("resizestart"===e&&(f=t),"resizeend"===e&&(f=void 0),m(e,{direction:t,translation:r&&r.translation}))},e=>t=>{let{detail:n}=t;m("resizestart",{direction:e,translation:{x:0,y:0}}),m("resizemove",{direction:e,translation:n}),m("resizeend",{direction:e,translation:{x:0,y:0}})},s,l,c,i,o,a]}class KW extends OO{constructor(e){super(),AO(this,e,GW,qW,XM,{rect:7,bounds:8,visible:9,cornerStyle:0})}}var YW=e=>{function t(t,n){e.dispatchEvent(new CustomEvent(t,{detail:n}))}const n=n=>{n.preventDefault(),e.addEventListener("gesturechange",r),e.addEventListener("gestureend",i),t("gesturedown")},r=e=>{e.preventDefault(),t("gestureupdate",e.scale)},i=e=>{t("gestureup",e.scale),e.preventDefault(),o()},o=()=>{e.removeEventListener("gesturechange",r),e.removeEventListener("gestureend",i)};return e.addEventListener("gesturestart",n),{destroy:()=>{o(),e.removeEventListener("gesturestart",n)}}},ZW={[eT]:nT,[tT]:rT,[nT]:eT,[rT]:tT,[iT]:aT,[oT]:sT,[aT]:iT,[sT]:oT},XW=e=>{const t=e===rT||e===tT,n=e===eT||e===nT;return[e===tT||e===oT||e===aT,e===rT||e===sT||e===iT,e===eT||e===oT||e===iT,e===nT||e===aT||e===sT,t,n,t||n]},QW=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const{target:i,translate:o}=t,{aspectRatio:a,minSize:s,maxSize:l}=r,c=lT[ZW[i]],u=ST(hT(e.x,e.y),hT(c[0]*e.width,c[1]*e.height)),d=lT[i],p=ST(QT(e),hT(d[0]*e.width,d[1]*e.height)),[h,f,m,g,y,v,b]=XW(i);let x=o.x,w=o.y;y?w=0:v&&(x=0);const{inner:$,outer:S}=JW(u,i,n,{aspectRatio:a,minSize:s,maxSize:l});let[_,C,k,E]=$I(e);if(h?E=u.x:f&&(C=u.x),g?_=u.y:m&&(k=u.y),h){const e=$.x+$.width,t=S.x+S.width;C=nL(p.x+x,e,t)}else if(f){const e=S.x,t=$.x;E=nL(p.x+x,e,t)}if(g){const e=$.y+$.height,t=S.y+S.height;k=nL(p.y+w,e,t)}else if(m){const e=S.y,t=$.y;_=nL(p.y+w,e,t)}if(E>$.x&&(E=$.x),C<$.x+$.width&&(C=$.x+$.width),_>$.y&&(_=$.y),k<$.y+$.height&&(k=$.y+$.height),E<S.x){const e=S.x-E;E=S.x,C+=e}if(C>S.x+S.width){const e=C-(S.x+S.width);C=S.x+S.width,E-=e}if(_<S.y){const e=S.y-_;_=S.y,k+=e}if(k>S.y+S.height){const e=k-(S.y+S.height);k=S.y+S.height,_-=e}if(a)if(b){let e=C-E,t=k-_;y?(t=e/a,_=u.y-.5*t,k=u.y+.5*t):v&&(e=t*a,E=u.x-.5*e,C=u.x+.5*e)}else{const e=hT(p.x+x-u.x,p.y+w-u.y);i===oT?(e.x=Math.max(0,e.x),e.y=Math.min(0,e.y)):i===aT?(e.x=Math.max(0,e.x),e.y=Math.max(0,e.y)):i===sT?(e.x=Math.min(0,e.x),e.y=Math.max(0,e.y)):i===iT&&(e.x=Math.min(0,e.x),e.y=Math.min(0,e.y));const t=vT(e),n=vT(hT($.width,$.height)),r=vT(hT(S.width,S.height)),o=nL(t,n,r),s=hT(a,1),l=kT(bT(s),o);i===oT?(C=u.x+l.x,_=u.y-l.y):i===aT?(C=u.x+l.x,k=u.y+l.y):i===sT?(E=u.x-l.x,k=u.y+l.y):i===iT&&(E=u.x-l.x,_=u.y-l.y)}return aI(E,_,C-E,k-_)};const JW=(e,t,n,r)=>{const{aspectRatio:i,minSize:o,maxSize:a}=r,s=t===tT||t===oT||t===aT,l=t===rT||t===sT||t===iT,c=t===eT||t===oT||t===iT,u=t===nT||t===aT||t===sT,d=t===rT||t===tT,p=t===eT||t===nT,h=QT(n);s?(h.x=e.x,h.width-=e.x):l&&(h.width=e.x),u?(h.y=e.y,h.height-=e.y):c&&(h.height=e.y);const f=((e,t)=>XT(0,0,e,t))(Math.min(h.width,a.width),Math.min(h.height,a.height));if(i)if(d){const t=Math.min(e.y,n.height-e.y);f.height=Math.min(2*t,f.height)}else if(p){const t=Math.min(e.x,n.width-e.x);f.width=Math.min(2*t,f.width)}const m=i?DT(xI(eI(o),i)):o,g=i?DT(wI(f,i)):f;let y,v,b,x;s?y=e.x:l&&(v=e.x),u?b=e.y:c&&(x=e.y),s?v=y+m.width:l&&(y=v-m.width),u?x=b+m.height:c&&(b=x-m.height),d?(b=e.y-.5*m.height,x=e.y+.5*m.height):p&&(y=e.x-.5*m.width,v=e.x+.5*m.width);const w=rI([hT(y,b),hT(v,x)]);return s?v=y+g.width:l&&(y=v-g.width),u?x=b+g.height:c&&(b=x-g.height),d?(b=e.y-.5*g.height,x=e.y+.5*g.height):p&&(y=e.x-.5*g.width,v=e.x+.5*g.width),y=Math.max(n.x,y),v=Math.min(n.x+n.width,v),b=Math.max(n.y,b),x=Math.min(n.y+n.height,x),{inner:w,outer:rI([hT(y,b),hT(v,x)])}};var eV=e=>180*e/Math.PI;function tV(e){let t,n,r;return n=new zW({props:{elasticity:e[5],min:e[9],max:e[10],value:e[11],valueMin:Math.max(e[9],e[0]),valueMax:Math.min(e[10],e[1]),labelReset:e[6],base:e[12],valueLabel:Math.round(eV(e[11]))+"&deg;",oninputstart:e[2],oninputmove:e[17],oninputend:e[18]}}),{c(){t=SA("div"),PO(n.$$.fragment),RA(t,"class","PinturaImageRotator")},m(e,i){wA(e,t,i),RO(n,t,null),r=!0},p(e,t){let[r]=t;const i={};32&r&&(i.elasticity=e[5]),512&r&&(i.min=e[9]),1024&r&&(i.max=e[10]),2048&r&&(i.value=e[11]),513&r&&(i.valueMin=Math.max(e[9],e[0])),1026&r&&(i.valueMax=Math.min(e[10],e[1])),64&r&&(i.labelReset=e[6]),4096&r&&(i.base=e[12]),2048&r&&(i.valueLabel=Math.round(eV(e[11]))+"&deg;"),4&r&&(i.oninputstart=e[2]),392&r&&(i.oninputmove=e[17]),400&r&&(i.oninputend=e[18]),n.$set(i)},i(e){r||(bO(n.$$.fragment,e),r=!0)},o(e){xO(n.$$.fragment,e),r=!1},d(e){e&&$A(t),MO(n)}}}function nV(e,t,n){let r,i,o,a,s,l,c,{rotation:u}=t,{valueMin:d}=t,{valueMax:p}=t,{oninputstart:h=eE}=t,{oninputmove:f=eE}=t,{oninputend:m=eE}=t,{elasticity:g=0}=t,{labelReset:y}=t,{rotationMin:v}=t,{rotationMax:b}=t;return e.$$set=e=>{"rotation"in e&&n(13,u=e.rotation),"valueMin"in e&&n(0,d=e.valueMin),"valueMax"in e&&n(1,p=e.valueMax),"oninputstart"in e&&n(2,h=e.oninputstart),"oninputmove"in e&&n(3,f=e.oninputmove),"oninputend"in e&&n(4,m=e.oninputend),"elasticity"in e&&n(5,g=e.elasticity),"labelReset"in e&&n(6,y=e.labelReset),"rotationMin"in e&&n(14,v=e.rotationMin),"rotationMax"in e&&n(15,b=e.rotationMax)},e.$$.update=()=>{16384&e.$$.dirty&&n(9,r=v+1e-9),32768&e.$$.dirty&&n(10,i=b-1e-9),1536&e.$$.dirty&&n(12,o=r+.5*(i-r)),32768&e.$$.dirty&&n(16,a=2*b),8192&e.$$.dirty&&n(8,s=Math.sign(u)),73728&e.$$.dirty&&n(7,l=Math.round(Math.abs(u)/a)*a),8576&e.$$.dirty&&n(11,c=u-s*l)},[d,p,h,f,m,g,y,l,s,r,i,c,o,u,v,b,a,e=>f(s*l+e),e=>m(s*l+e)]}class rV extends OO{constructor(e){super(),AO(this,e,nV,tV,XM,{rotation:13,valueMin:0,valueMax:1,oninputstart:2,oninputmove:3,oninputend:4,elasticity:5,labelReset:6,rotationMin:14,rotationMax:15})}}function iV(e){let t,n;return t=new cj({props:{class:"PinturaPresetListFilter",layout:"row",options:e[8],selectedIndex:e[7],onchange:e[10]}}),{c(){PO(t.$$.fragment)},m(e,r){RO(t,e,r),n=!0},p(e,n){const r={};256&n&&(r.options=e[8]),128&n&&(r.selectedIndex=e[7]),t.$set(r)},i(e){n||(bO(t.$$.fragment,e),n=!0)},o(e){xO(t.$$.fragment,e),n=!1},d(e){MO(t,e)}}}function oV(e){let t,n;return t=new Mj({props:{icon:e[0],label:e[1],labelClass:e[2],hideLabel:e[3],options:e[9],selectedIndex:e[4],onchange:e[5],optionMapper:e[6],$$slots:{controls:[iV]},$$scope:{ctx:e}}}),{c(){PO(t.$$.fragment)},m(e,r){RO(t,e,r),n=!0},p(e,n){let[r]=n;const i={};1&r&&(i.icon=e[0]),2&r&&(i.label=e[1]),4&r&&(i.labelClass=e[2]),8&r&&(i.hideLabel=e[3]),512&r&&(i.options=e[9]),16&r&&(i.selectedIndex=e[4]),32&r&&(i.onchange=e[5]),64&r&&(i.optionMapper=e[6]),262528&r&&(i.$$scope={dirty:r,ctx:e}),t.$set(i)},i(e){n||(bO(t.$$.fragment,e),n=!0)},o(e){xO(t.$$.fragment,e),n=!1},d(e){MO(t,e)}}}const aV='fill="none" stroke="currentColor"';function sV(e,t,n){let r,i,o,{icon:a}=t,{label:s}=t,{labelClass:l}=t,{hideLabel:c}=t,{options:u}=t,{selectedIndex:d}=t,{onchange:p}=t,{optionMapper:h}=t,{filter:f="landscape"}=t,{onfilterchange:m=eE}=t;const g=(e,t,n,r,i)=>`\n    <rect ${aV} x="${e}" y="${t}" width="${n}" height="${r}" rx="${i}"/>`,y=(e,t)=>`<path ${aV} d="M${e} ${t} l2 2 l3 -4"/>`;return e.$$set=e=>{"icon"in e&&n(0,a=e.icon),"label"in e&&n(1,s=e.label),"labelClass"in e&&n(2,l=e.labelClass),"hideLabel"in e&&n(3,c=e.hideLabel),"options"in e&&n(12,u=e.options),"selectedIndex"in e&&n(4,d=e.selectedIndex),"onchange"in e&&n(5,p=e.onchange),"optionMapper"in e&&n(6,h=e.optionMapper),"filter"in e&&n(11,f=e.filter),"onfilterchange"in e&&n(13,m=e.onfilterchange)},e.$$.update=()=>{6144&e.$$.dirty&&n(9,r=((e,t)=>(e||[]).map((e=>hE(e[0])?(e[1]=e[1].map(t),e):t(e))))(u,(e=>t=>{const[n,r,i={}]=t;return RP(n)&&(i.hidden="landscape"===e?n<1:n>1),[n,r,i]})(f))),2048&e.$$.dirty&&n(7,i="landscape"===f?0:1),128&e.$$.dirty&&n(8,o=[["landscape","Landscape",{hideLabel:!0,icon:g(2,6,19,12,2)+(0===i?y(9,12):"")}],["portrait","Portrait",{hideLabel:!0,icon:g(5,3,13,18,2)+(1===i?y(9,12):"")}]])},[a,s,l,c,d,p,h,i,o,r,e=>{n(11,f=e.value),m(e.value)},f,u,m]}class lV extends OO{constructor(e){super(),AO(this,e,sV,oV,XM,{icon:0,label:1,labelClass:2,hideLabel:3,options:12,selectedIndex:4,onchange:5,optionMapper:6,filter:11,onfilterchange:13})}}const cV=e=>$T(e,(e=>cT(e,6))),uV=e=>_I(e,(e=>cT(e,6))),dV=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e-4;return Math.abs(e-t)<n};var pV=function(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const{aspectRatio:o}=i;e=uV(e),r=r.map(cV);const a=dI(e,ZW[n.target]),s=$T(a,(e=>cT(e,6))),l=o?xI(i.minSize,o):i.minSize,c=o?wI(i.maxSize,o):i.maxSize,u=dI(t,n.target);if(PT(u,a)<1){t=QT(e);const n=Math.min(l.width/e.width,l.height/e.height);cI(t,n,a)}t=uI(QT(t),l,c,a);let d=QT(t);t=uV(t);const p=LI(r,1),h=SI(e),f=SI(t),m=h.findIndex((e=>wT($T(e,(e=>cT(e,6))),s))),g=e=>p.map((t=>TI(t,e))).filter(Boolean).pop();if(o){const t=f.map(((e,t)=>{if(t===m)return;const n=hT(a.x-e.x,a.y-e.y);bT(n),kT(n,.5);const r=hT(a.x-n.x,a.y-n.y),i=GT(r,cV(e)),o=g(i);if(!o)return;const s=h[t];return{intersection:o,cornerDist:PT(a,s),intersectionDist:PT(a,o)}})).filter(Boolean);if(t.length){const n=t.reduce(((e,t)=>{const n=t.intersectionDist/t.cornerDist;return n<e?n:e}),Number.MAX_SAFE_INTEGER);d=QT(e),cI(d,n,a)}}else{const e=1===n.target.length,i=!(r[0].y===r[1].y||r[0].x===r[1].x),o=h.map(((t,n)=>{if(n===m)return;const r=f[n],o=!dV(r.x,s.x)&&!dV(r.y,s.y);if(!e&&!i&&o)return;if(e&&(dV(r.x,s.x)||dV(r.y,s.y)))return;const l=mT(e?t:a),c=_T(mT(l),r);bT(c),kT(c,.5),e?ST(l,c):_T(l,c);const u=GT(l,r);return g(u)||void 0})).filter(Boolean);if(o.length){const[e,r,i,l]=XW(n.target);let[c,u,p,h]=$I(t);o.forEach((t=>{let{x:n,y:o}=t;const a=cT(n,6),d=cT(o,6);i&&!dV(d,s.y)&&(c=Math.max(c,o)),e&&!dV(a,s.x)&&(u=Math.min(u,n)),l&&!dV(d,s.y)&&(p=Math.min(p,o)),r&&!dV(a,s.x)&&(h=Math.max(h,n))})),d=tI([c,u,p,h]),cI(d,.9999,a)}}return uI(d,l,c,a),d};function hV(e){let t,n;return t=new Hz({props:{items:e[12]}}),{c(){PO(t.$$.fragment)},m(e,r){RO(t,e,r),n=!0},p(e,n){const r={};4096&n[0]&&(r.items=e[12]),t.$set(r)},i(e){n||(bO(t.$$.fragment,e),n=!0)},o(e){xO(t.$$.fragment,e),n=!1},d(e){MO(t,e)}}}function fV(e){let t,n,r;return n=new $W({props:{$$slots:{default:[hV]},$$scope:{ctx:e}}}),{c(){t=SA("div"),PO(n.$$.fragment),RA(t,"slot","header")},m(e,i){wA(e,t,i),RO(n,t,null),r=!0},p(e,t){const r={};4096&t[0]|1024&t[7]&&(r.$$scope={dirty:t,ctx:e}),n.$set(r)},i(e){r||(bO(n.$$.fragment,e),r=!0)},o(e){xO(n.$$.fragment,e),r=!1},d(e){e&&$A(t),MO(n)}}}function mV(e){let t,n;return t=new Qz({props:{onclick:e[90],label:e[4].cropLabelButtonRecenter,icon:e[4].cropIconButtonRecenter,disabled:!e[9],hideLabel:!0,class:"PinturaButtonCenter",style:`opacity:${e[31]};transform:translate3d(${e[32].x}px, ${e[32].y}px,0)`}}),{c(){PO(t.$$.fragment)},m(e,r){RO(t,e,r),n=!0},p(e,n){const r={};16&n[0]&&(r.label=e[4].cropLabelButtonRecenter),16&n[0]&&(r.icon=e[4].cropIconButtonRecenter),512&n[0]&&(r.disabled=!e[9]),3&n[1]&&(r.style=`opacity:${e[31]};transform:translate3d(${e[32].x}px, ${e[32].y}px,0)`),t.$set(r)},i(e){n||(bO(t.$$.fragment,e),n=!0)},o(e){xO(t.$$.fragment,e),n=!1},d(e){MO(t,e)}}}function gV(e){let t,n;return t=new KW({props:{rect:e[8],bounds:e[14],visible:e[13],cornerStyle:e[1]}}),t.$on("resizestart",e[70]),t.$on("resizemove",e[71]),t.$on("resizeend",e[72]),{c(){PO(t.$$.fragment)},m(e,r){RO(t,e,r),n=!0},p(e,n){const r={};256&n[0]&&(r.rect=e[8]),16384&n[0]&&(r.bounds=e[14]),8192&n[0]&&(r.visible=e[13]),2&n[0]&&(r.cornerStyle=e[1]),t.$set(r)},i(e){n||(bO(t.$$.fragment,e),n=!0)},o(e){xO(t.$$.fragment,e),n=!1},d(e){MO(t,e)}}}function yV(e){let t,n;return{c(){t=SA("div"),n=SA("p"),RA(t,"class","PinturaImageInfo"),RA(t,"data-custom",e[24])},m(r,i){wA(r,t,i),vA(t,n),n.innerHTML=e[23]},p(e,r){8388608&r[0]&&(n.innerHTML=e[23]),16777216&r[0]&&RA(t,"data-custom",e[24])},d(e){e&&$A(t)}}}function vV(e){let t,n,r,i,o,a,s,l,c=e[22]&&e[10]&&mV(e),u=e[22]&&gV(e),d=e[11]&&yV(e);return{c(){t=SA("div"),n=SA("div"),c&&c.c(),r=kA(),u&&u.c(),o=kA(),d&&d.c(),RA(n,"class","PinturaStage"),RA(t,"slot","main")},m(p,h){wA(p,t,h),vA(t,n),c&&c.m(n,null),vA(n,r),u&&u.m(n,null),e[168](n),vA(t,o),d&&d.m(t,null),a=!0,s||(l=[dA(hD.call(null,n)),TA(n,"measure",e[166]),TA(n,"wheel",(function(){ZM(e[2]&&e[89])&&(e[2]&&e[89]).apply(this,arguments)}),{passive:!1}),TA(n,"interactionstart",e[76]),TA(n,"interactionupdate",e[77]),TA(n,"interactionrelease",e[79]),TA(n,"interactionend",e[78]),dA(i=tB.call(null,n,{drag:!0,inertia:!0,pinch:e[2],shouldStartInteraction:TV,getEventPosition:e[169]})),TA(n,"gesturedown",e[86]),TA(n,"gestureupdate",e[87]),TA(n,"gestureup",e[88]),dA(YW.call(null,n))],s=!0)},p(o,a){(e=o)[22]&&e[10]?c?(c.p(e,a),4195328&a[0]&&bO(c,1)):(c=mV(e),c.c(),bO(c,1),c.m(n,r)):c&&(yO(),xO(c,1,1,(()=>{c=null})),vO()),e[22]?u?(u.p(e,a),4194304&a[0]&&bO(u,1)):(u=gV(e),u.c(),bO(u,1),u.m(n,null)):u&&(yO(),xO(u,1,1,(()=>{u=null})),vO()),i&&ZM(i.update)&&67108868&a[0]&&i.update.call(null,{drag:!0,inertia:!0,pinch:e[2],shouldStartInteraction:TV,getEventPosition:e[169]}),e[11]?d?d.p(e,a):(d=yV(e),d.c(),d.m(t,null)):d&&(d.d(1),d=null)},i(e){a||(bO(c),bO(u),a=!0)},o(e){xO(c),xO(u),a=!1},d(n){n&&$A(t),c&&c.d(),u&&u.d(),e[168](null),d&&d.d(),s=!1,YM(l)}}}function bV(e){let t,n,r,i;const o=[{class:"PinturaControlList"},{tabs:e[7]},e[19]];let a={$$slots:{default:[xV,e=>{let{tab:t}=e;return{226:t}},e=>{let{tab:t}=e;return[0,0,0,0,0,0,0,t?512:0]}]},$$scope:{ctx:e}};for(let c=0;c<o.length;c+=1)a=qM(a,o[c]);t=new AD({props:a}),t.$on("select",e[167]);const s=[{class:"PinturaControlPanels"},{panelClass:"PinturaControlPanel"},{panels:e[18]},e[19]];let l={$$slots:{default:[SV,e=>{let{panel:t}=e;return{225:t}},e=>{let{panel:t}=e;return[0,0,0,0,0,0,0,t?256:0]}]},$$scope:{ctx:e}};for(let c=0;c<s.length;c+=1)l=qM(l,s[c]);return r=new qD({props:l}),{c(){PO(t.$$.fragment),n=kA(),PO(r.$$.fragment)},m(e,o){RO(t,e,o),wA(e,n,o),RO(r,e,o),i=!0},p(e,n){const i=524416&n[0]?EO(o,[o[0],128&n[0]&&{tabs:e[7]},524288&n[0]&&TO(e[19])]):{};1536&n[7]&&(i.$$scope={dirty:n,ctx:e}),t.$set(i);const a=786432&n[0]?EO(s,[s[0],s[1],262144&n[0]&&{panels:e[18]},524288&n[0]&&TO(e[19])]):{};2046853144&n[0]|1280&n[7]&&(a.$$scope={dirty:n,ctx:e}),r.$set(a)},i(e){i||(bO(t.$$.fragment,e),bO(r.$$.fragment,e),i=!0)},o(e){xO(t.$$.fragment,e),xO(r.$$.fragment,e),i=!1},d(e){MO(t,e),e&&$A(n),MO(r,e)}}}function xV(e){let t,n,r=e[226].label+"";return{c(){t=SA("span"),n=CA(r)},m(e,r){wA(e,t,r),vA(t,n)},p(e,t){512&t[7]&&r!==(r=e[226].label+"")&&OA(n,r)},d(e){e&&$A(t)}}}function wV(e){let t,n;return t=new zW({props:{elasticity:e[27]*e[46],base:EV,min:e[25],max:kV,valueMin:e[29][0],valueMax:e[29][1],value:e[30],labelReset:e[4].labelReset,valueLabel:Math.round(100*e[30])+"%",oninputstart:e[83],oninputmove:e[84],oninputend:e[85]}}),{c(){PO(t.$$.fragment)},m(e,r){RO(t,e,r),n=!0},p(e,n){const r={};134217728&n[0]&&(r.elasticity=e[27]*e[46]),33554432&n[0]&&(r.min=e[25]),536870912&n[0]&&(r.valueMin=e[29][0]),536870912&n[0]&&(r.valueMax=e[29][1]),1073741824&n[0]&&(r.value=e[30]),16&n[0]&&(r.labelReset=e[4].labelReset),1073741824&n[0]&&(r.valueLabel=Math.round(100*e[30])+"%"),t.$set(r)},i(e){n||(bO(t.$$.fragment,e),n=!0)},o(e){xO(t.$$.fragment,e),n=!1},d(e){MO(t,e)}}}function $V(e){let t,n;return t=new rV({props:{elasticity:e[27]*e[46],rotation:e[15],labelReset:e[4].labelReset,valueMin:e[28][0],valueMax:e[28][1],rotationMin:-e[3],rotationMax:e[3],oninputstart:e[73],oninputmove:e[74],oninputend:e[75]}}),{c(){PO(t.$$.fragment)},m(e,r){RO(t,e,r),n=!0},p(e,n){const r={};134217728&n[0]&&(r.elasticity=e[27]*e[46]),32768&n[0]&&(r.rotation=e[15]),16&n[0]&&(r.labelReset=e[4].labelReset),268435456&n[0]&&(r.valueMin=e[28][0]),268435456&n[0]&&(r.valueMax=e[28][1]),8&n[0]&&(r.rotationMin=-e[3]),8&n[0]&&(r.rotationMax=e[3]),t.$set(r)},i(e){n||(bO(t.$$.fragment,e),n=!0)},o(e){xO(t.$$.fragment,e),n=!1},d(e){MO(t,e)}}}function SV(e){let t,n,r,i;const o=[$V,wV],a=[];function s(e,t){return e[225]===e[95]+"-rotation"?0:e[225]===e[95]+"-zoom"?1:-1}return~(t=s(e))&&(n=a[t]=o[t](e)),{c(){n&&n.c(),r=EA()},m(e,n){~t&&a[t].m(e,n),wA(e,r,n),i=!0},p(e,i){let l=t;t=s(e),t===l?~t&&a[t].p(e,i):(n&&(yO(),xO(a[l],1,1,(()=>{a[l]=null})),vO()),~t?(n=a[t],n?n.p(e,i):(n=a[t]=o[t](e),n.c()),bO(n,1),n.m(r.parentNode,r)):n=null)},i(e){i||(bO(n),i=!0)},o(e){xO(n),i=!1},d(e){~t&&a[t].d(e),e&&$A(r)}}}function _V(e){let t,n,r=e[20]&&bV(e);return{c(){t=SA("div"),r&&r.c(),RA(t,"slot","footer"),NA(t,"transform",e[17])},m(e,i){wA(e,t,i),r&&r.m(t,null),n=!0},p(e,n){e[20]?r?(r.p(e,n),1048576&n[0]&&bO(r,1)):(r=bV(e),r.c(),bO(r,1),r.m(t,null)):r&&(yO(),xO(r,1,1,(()=>{r=null})),vO()),131072&n[0]&&NA(t,"transform",e[17])},i(e){n||(bO(r),n=!0)},o(e){xO(r),n=!1},d(e){e&&$A(t),r&&r.d()}}}function CV(e){let t,n,r;function i(t){e[170](t)}let o={hasHeader:e[21],$$slots:{footer:[_V],main:[vV],header:[fV]},$$scope:{ctx:e}};return void 0!==e[16]&&(o.root=e[16]),t=new NW({props:o}),eO.push((()=>IO(t,"root",i))),t.$on("measure",e[171]),{c(){PO(t.$$.fragment)},m(e,n){RO(t,e,n),r=!0},p(e,r){const i={};2097152&r[0]&&(i.hasHeader=e[21]),2145320958&r[0]|3&r[1]|1024&r[7]&&(i.$$scope={dirty:r,ctx:e}),!n&&65536&r[0]&&(n=!0,i.root=e[16],lO((()=>n=!1))),t.$set(i)},i(e){r||(bO(t.$$.fragment,e),r=!0)},o(e){xO(t.$$.fragment,e),r=!1},d(e){MO(t,e)}}}const kV=1,EV=0,TV=(e,t)=>e.target===t;function IV(e,t,n){let r,i,o,a,s,l,c,u,d,p,h,f,m,g,y,v,b,x,w,$,S,_,C,k,E,T,I,P,R,M,A,O,L,N,D,F,j,z,B,U,W,V,H,q,G,K,Y,Z,X,Q,J,ee,te,ne,re,ie,oe,ae,se,le,ce,ue,de,pe,he,fe,me,ge,ye,ve,be,xe,we,$e,Se=VM,_e=()=>(Se(),Se=eA(Ce,(e=>n(13,A=e))),Ce);e.$$.on_destroy.push((()=>Se()));let{isActive:Ce}=t;_e();let{stores:ke}=t,{cropImageSelectionCornerStyle:Ee="circle"}=t,{cropWillRenderImageSelectionGuides:Te=(e,t)=>{const n="rotate"==e;return{rows:n?5:3,cols:n?5:3,opacity:.25*t}}}=t,{cropAutoCenterImageSelectionTimeout:Ie}=t,{cropEnableZoomMatchImageAspectRatio:Pe=!0}=t,{cropEnableRotateMatchImageAspectRatio:Re="never"}=t,{cropEnableRotationInput:Me=!0}=t,{cropEnableZoom:Ae=!0}=t,{cropEnableZoomInput:Oe=!0}=t,{cropEnableZoomAutoHide:Le=!0}=t,{cropEnableImageSelection:Ne=!0}=t,{cropEnableInfoIndicator:De=!1}=t,{cropEnableZoomTowardsWheelPosition:Fe=!0}=t,{cropEnableLimitWheelInputToCropSelection:je=!0}=t,{cropEnableCenterImageSelection:ze=!0}=t,{cropEnableButtonRotateLeft:Be=!0}=t,{cropEnableButtonRotateRight:Ue=!1}=t,{cropEnableButtonFlipHorizontal:We=!0}=t,{cropEnableButtonFlipVertical:Ve=!1}=t,{cropSelectPresetOptions:He}=t,{cropEnableSelectPreset:qe=!0}=t,{cropEnableFilterMatchAspectRatio:Ge=!0}=t,{cropSelectPresetFilter:Ke=!1}=t,{cropEnableButtonToggleCropLimit:Ye=!1}=t,{cropWillRenderTools:Ze=KE}=t,{cropWillRenderInfoIndicator:Xe}=t,{cropActiveTransformTool:Qe="rotation"}=t,{cropMinimizeToolbar:Je="auto"}=t,{cropInteractionFocus:et="image"}=t,{cropRotationRange:tt=XE}=t,{cropMaskOpacity:nt=.85}=t,{locale:rt={}}=t,{cropFormatIconSelectPreset:it=function(e){const{aspectRatio:t}=e,[n,r,i]=t?[t<1?1:.3,1===t?.85:.5,t>1?1:.3]:[.2,.3,.4];return{a:n,b:r,c:i}}}=t,{cropFormatIconCropBoundary:ot=function(e){const{isBoundToImage:t}=e,[n,r,i,o]=t?[.3,1,0,0]:[0,0,.3,1];return{a:n,b:r,c:i,d:o}}}=t;const at=XA("isAnimated");nA(e,at,(e=>n(144,O=e)));const st=XA("elasticityMultiplier");nA(e,st,(e=>n(27,ye=e)));const lt=XA("redrawTrigger");nA(e,lt,(e=>n(165,ge=e)));const ct=XA("imageIsStatic");nA(e,ct,(e=>n(150,B=e)));const ut=XA("imageStaticVisualCorners");nA(e,ut,(e=>n(187,ce=e)));const dt=XA("fixScrollDirection");nA(e,dt,(e=>n(181,ne=e)));let pt="idle";const ht=DO();nA(e,ht,(e=>n(162,he=e)));const ft=()=>void 0===se,mt=e=>1/e,gt=e=>{Ge&&Ke!==e&&(n(97,Ke=e),se&&1!==se&&yt()&&(uA(Jt,se=mt(se),se),xt.write()))},yt=()=>{if(1===se||!r)return!1;const e=mt(se);return!!AF(he).find((t=>{let[n]=t;return n===e}))},vt=(e,t,n)=>QE(n)?t.width===Math.round(e.height)||t.height===Math.round(e.width):t.width===Math.round(e.width)||t.height===Math.round(e.height),bt=e=>{if("never"!==Re&&(ft()||"always"===Re&&yt())&&((e,t,n)=>{const r=qT(VT(LT(t),n),(e=>Math.abs(Math.round(e)))),i=WT(r),o=sI(e);return wT(i,o)})(W,Q,J)&&vt(W,Q,J)){uA(zt,J+=e,J);const t=QE(J),n=t?Q.height:Q.width,r=t?Q.width:Q.height;uA(Yt,W=aI(0,0,n,r),W),ft()||uA(Jt,se=GE(n,r),se)}else uA(zt,J+=e,J)},{history:xt,env:wt,isInteracting:$t,isInteractingFraction:St,isTransformingImage:_t,rootRect:Ct,stageRect:kt,utilRect:Et,utilRectPadded:Tt,rootLineColor:It,allowPan:Pt,allowZoom:Rt,allowPlayPause:Mt,rangeInputElasticity:At,presentationScalar:Ot,utilTools:Lt,imagePreviewModifiers:Nt,imageOutlineOpacity:Dt,imageFlipX:Ft,imageFlipY:jt,imageRotation:zt,imageRotationRange:Bt,imageOutputSize:Ut,imageSelectionRect:Wt,imageSelectionRectSnapshot:Vt,imageSelectionRectIntent:Ht,imageSelectionRectPresentation:qt,imageCropRectIntent:Gt,imageCropRectOrigin:Kt,imageCropRect:Yt,imageCropMinSize:Zt,imageCropMaxSize:Xt,imageCropRange:Qt,imageCropAspectRatio:Jt,imageCropLimitToImage:en,imageSize:tn,imageScalar:nn,imageOverlayMarkup:rn,stagePadded:on,stageRecenter:an}=ke;function sn(e,t){return TE(e.cropIconSelectPreset)?LF(e.cropIconSelectPreset,e,t):dN(e.cropIconSelectPreset,it({aspectRatio:t}),"{","}")}function ln(e,t){return TE(e.cropIconCropBoundary)?LF(e.cropIconCropBoundary,e,t):dN(e.cropIconCropBoundary,ot({isBoundToImage:t}),"{","}")}let cn;nA(e,wt,(e=>n(145,L=e))),nA(e,$t,(e=>n(149,z=e))),nA(e,_t,(e=>n(179,Z=e))),nA(e,Ct,(e=>n(26,re=e))),nA(e,kt,(e=>n(157,Y=e))),nA(e,Tt,(e=>n(14,q=e))),nA(e,Ot,(e=>n(154,H=e))),nA(e,Lt,(e=>n(189,de=e))),nA(e,Nt,(e=>n(178,F=e))),nA(e,Ft,(e=>n(164,me=e))),nA(e,jt,(e=>n(163,fe=e))),nA(e,zt,(e=>n(15,J=e))),nA(e,Bt,(e=>n(28,ve=e))),nA(e,Ut,(e=>n(151,U=e))),nA(e,Wt,(e=>n(156,K=e))),nA(e,Vt,(e=>n(155,G=e))),nA(e,Ht,(e=>n(188,ue=e))),nA(e,qt,(e=>n(148,j=e))),nA(e,Gt,(e=>n(182,ie=e))),nA(e,Kt,(e=>n(184,ae=e))),nA(e,Yt,(e=>n(152,W=e))),nA(e,Zt,(e=>n(160,te=e))),nA(e,Xt,(e=>n(186,le=e))),nA(e,Qt,(e=>n(183,oe=e))),nA(e,Jt,(e=>n(185,se=e))),nA(e,en,(e=>n(159,ee=e))),nA(e,tn,(e=>n(158,Q=e))),nA(e,nn,(e=>n(153,V=e))),nA(e,on,(e=>n(147,D=e)));const un=(e,t)=>{const n={target:e,translate:t},r=UT(LT(te),H),i=UT(LT(le),H);let o=QW(G,n,{...q,x:0,y:0},{aspectRatio:se,minSize:r,maxSize:i});if(o=((e,t,n)=>{const[r,i,o,a]=$I(e),s={...e};if(r<t.y&&(e.height=e.height-(t.y-r),e.y=t.y),i>t.x+t.width&&(e.width=t.x+t.width-e.x),o>t.y+t.height&&(e.height=t.y+t.height-e.y),a<t.x&&(e.width=e.width-(t.x-a),e.x=t.x),n){const t=Math.min(1,s.width/e.width,s.height/e.height);return pI(s,t)}return e})(o,{...q,x:0,y:0},se),!ee)return{boundsLimited:o,boundsIntent:o};let a=pV(G,o,n,ce,{aspectRatio:se,minSize:r,maxSize:i});return{boundsLimited:a,boundsIntent:a}},dn=(e,t)=>{const n={target:e,translate:t},r=UT(LT(te),H),i=UT(LT(le),H),o=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{target:r,translate:i}=t,{aspectRatio:o,minSize:a}=n,s=lT[ZW[r]],l=ST(QT(e),hT(s[0]*e.width,s[1]*e.height)),c=lT[r],u=ST(QT(e),hT(c[0]*e.width,c[1]*e.height)),[d,p,h,f,m,g,y]=XW(r);let v=i.x,b=i.y;m?b=0:g&&(v=0);let[x,w,$,S]=$I(e);if(d?S=l.x:p&&(w=l.x),f?x=l.y:h&&($=l.y),d?w=u.x+v:p&&(S=u.x+v),f?$=u.y+b:h&&(x=u.y+b),a&&m&&$-x<a.height){const e=a.height-($-x);x-=.5*e,$+=.5*e}if(a&&g&&w-S<a.width){const e=a.width-(w-S);S-=.5*e,w+=.5*e}if(o)if(y){let e=w-S,t=$-x;m?(t=e/o,x=l.y-.5*t,$=l.y+.5*t):g&&(e=t*o,S=l.x-.5*e,w=l.x+.5*e)}else{const e=hT(u.x+v-l.x,u.y+b-l.y);r===oT?(e.x=Math.max(0,e.x),e.y=Math.min(0,e.y)):r===aT?(e.x=Math.max(0,e.x),e.y=Math.max(0,e.y)):r===sT?(e.x=Math.min(0,e.x),e.y=Math.max(0,e.y)):r===iT&&(e.x=Math.min(0,e.x),e.y=Math.min(0,e.y));const t=vT(e),n=hT(o,1),i=kT(bT(n),t);r===oT?(w=l.x+i.x,x=l.y-i.y):r===aT?(w=l.x+i.x,$=l.y+i.y):r===sT?(S=l.x-i.x,$=l.y+i.y):r===iT&&(S=l.x-i.x,x=l.y-i.y)}return aI(S,x,w-S,$-x)}(G,n,{aspectRatio:se,minSize:r});return{boundsLimited:QW(G,n,{...q,x:0,y:0},{aspectRatio:se,minSize:r,maxSize:i}),boundsIntent:o}};let pn,hn;const fn=e=>{let{translation:t,scalar:n}=e;B&&(n=1,t=gT(mT(t)));const r=Math.min(K.width/W.width,K.height/W.height),i=kT(mT(t),1/r);let o;if(hn){const e=_T(mT(hn),t);hn=t,o=lI(QT(W),e)}else o=lI(QT(pn),gT(mT(i))),void 0!==n&&cI(o,1/n);uA(Gt,ie=o,ie),uA(Yt,W=o,W)},mn=FO([Qt,Yt],((e,t)=>{let[n,r]=e;if(!r)return;const[i,o]=n,a=fI(r);t([DT(_I(xI(i,a),cT)),DT(_I(wI(o,a),cT))])}));nA(e,mn,(e=>n(180,X=e)));const gn=FO([tn,en,Zt,Xt,Qt,zt],((e,t)=>{let[n,r,i,o,a,s]=e;if(!n)return;const l=a[0],c=a[1];let u,d;r?(u=((e,t,n)=>QE(n)?1-1/Math.min(e.height/t.width,e.width/t.height):1-1/Math.min(e.width/t.width,e.height/t.height))(n,c,s),d=Math.min(l.width/i.width,l.height/i.height)):(u=-1,d=1),t([u,d].map((e=>cT(e))))}));nA(e,gn,(e=>n(29,be=e)));const yn=FO([tn,Yt,Qt,zt],((e,t)=>{let n,[r,i,o,a]=e;if(!r||!i)return t(0);const s=o[0],l=o[1],c=i.width,u=i.height,d=fI(i),p=QE(a)?zT(r.height,r.width):r,h=wI(p,d);if(c<=h.width||u<=h.height){const e=h.width-s.width,t=h.height-s.height;n=0===e||0===t?1:1-Math.min((c-s.width)/e,(u-s.height)/t)}else{const e=l.width-h.width,t=l.height-h.height,r=wI({width:e,height:t},d);n=-Math.min((c-h.width)/r.width,(u-h.height)/r.height)}t(n)}));nA(e,yn,(e=>n(30,xe=e)));const vn=e=>{const t=fI(pn);let n,r,i;const o=QE(J)?zT(Q.height,Q.width):Q,a=wI(o,t);if(e>=0){const o=a.width-oe[0].width,s=a.height-oe[0].height;n=a.width-o*e,r=a.height-s*e,i=xI({width:n,height:r},t)}else{const o=oe[1].width-a.width,s=oe[1].height-a.height;n=a.width+o*-e,r=a.height+s*-e,i=wI({width:n,height:r},t)}n=i.width,r=i.height;const s=pn.x+.5*pn.width-.5*n,l=pn.y+.5*pn.height-.5*r;uA(Yt,W={x:s,y:l,width:n,height:r},W)};let bn;const xn=e=>{const t=cI(QT(bn),1/e);uA(Gt,ie=t,ie),uA(Yt,W=t,W)};let wn;const $n=()=>{an.set({})};let Sn;const _n=XN(0,{precision:1e-4});nA(e,_n,(e=>n(31,we=e)));const Cn=XN();nA(e,Cn,(e=>n(32,$e=e)));const kn=FO([Jt,Ut,ht],((e,t)=>{let[n,i,o]=e;if(!r)return;const a=AF(o),s=[...a].map((e=>e[0])).sort(((e,t)=>OP(e[0])&&!OP(t[0])?1:-1)).find((e=>{if(OP(e)&&i){const[t,r]=e,o=i.width===t&&i.height===r,a=n===GE(t,r);return o&&a}return e===n}));if(!s)return t(void 0);t(a.map((e=>e[0])).findIndex((e=>OP(e)?sL(e,s):e===s)))}));nA(e,kn,(e=>n(161,pe=e)));const En=(e,t)=>{if(!r||-1===e||void 0===e)return;const n=AF(t)[e][0];return n?OP(n)?GE(n[0],n[1]):n:void 0},Tn=FO([It,qt,St],((e,t)=>{let[n,r,i]=e;const{rows:o,cols:a,opacity:s}=Te(pt,i);if(!r||s<=0)return t([]);const{x:l,y:c,width:u,height:d}=r,p=u/a,h=d/o,f=[];for(let m=1;m<=o-1;m++){const e=c+h*m;f.push({id:"image-selection-guide-row-"+m,points:[hT(l,e),hT(l+u,e)],opacity:s,strokeWidth:1,strokeColor:n})}for(let m=1;m<=a-1;m++){const e=l+p*m;f.push({id:"image-selection-guide-col-"+m,points:[hT(e,c),hT(e,c+d)],opacity:s,strokeWidth:1,strokeColor:n})}t(f)}));nA(e,Tn,(e=>n(146,N=e)));const In="crop-"+ME();let Pn,Rn,Mn=In+"-"+(Me?Qe:"zoom"),An=Mn;const On=XN(O?20:0);return nA(e,On,(e=>n(143,M=e))),e.$$set=e=>{"isActive"in e&&_e(n(0,Ce=e.isActive)),"stores"in e&&n(99,ke=e.stores),"cropImageSelectionCornerStyle"in e&&n(1,Ee=e.cropImageSelectionCornerStyle),"cropWillRenderImageSelectionGuides"in e&&n(100,Te=e.cropWillRenderImageSelectionGuides),"cropAutoCenterImageSelectionTimeout"in e&&n(101,Ie=e.cropAutoCenterImageSelectionTimeout),"cropEnableZoomMatchImageAspectRatio"in e&&n(102,Pe=e.cropEnableZoomMatchImageAspectRatio),"cropEnableRotateMatchImageAspectRatio"in e&&n(103,Re=e.cropEnableRotateMatchImageAspectRatio),"cropEnableRotationInput"in e&&n(104,Me=e.cropEnableRotationInput),"cropEnableZoom"in e&&n(2,Ae=e.cropEnableZoom),"cropEnableZoomInput"in e&&n(105,Oe=e.cropEnableZoomInput),"cropEnableZoomAutoHide"in e&&n(106,Le=e.cropEnableZoomAutoHide),"cropEnableImageSelection"in e&&n(107,Ne=e.cropEnableImageSelection),"cropEnableInfoIndicator"in e&&n(108,De=e.cropEnableInfoIndicator),"cropEnableZoomTowardsWheelPosition"in e&&n(109,Fe=e.cropEnableZoomTowardsWheelPosition),"cropEnableLimitWheelInputToCropSelection"in e&&n(110,je=e.cropEnableLimitWheelInputToCropSelection),"cropEnableCenterImageSelection"in e&&n(111,ze=e.cropEnableCenterImageSelection),"cropEnableButtonRotateLeft"in e&&n(112,Be=e.cropEnableButtonRotateLeft),"cropEnableButtonRotateRight"in e&&n(113,Ue=e.cropEnableButtonRotateRight),"cropEnableButtonFlipHorizontal"in e&&n(114,We=e.cropEnableButtonFlipHorizontal),"cropEnableButtonFlipVertical"in e&&n(115,Ve=e.cropEnableButtonFlipVertical),"cropSelectPresetOptions"in e&&n(116,He=e.cropSelectPresetOptions),"cropEnableSelectPreset"in e&&n(117,qe=e.cropEnableSelectPreset),"cropEnableFilterMatchAspectRatio"in e&&n(118,Ge=e.cropEnableFilterMatchAspectRatio),"cropSelectPresetFilter"in e&&n(97,Ke=e.cropSelectPresetFilter),"cropEnableButtonToggleCropLimit"in e&&n(119,Ye=e.cropEnableButtonToggleCropLimit),"cropWillRenderTools"in e&&n(120,Ze=e.cropWillRenderTools),"cropWillRenderInfoIndicator"in e&&n(121,Xe=e.cropWillRenderInfoIndicator),"cropActiveTransformTool"in e&&n(122,Qe=e.cropActiveTransformTool),"cropMinimizeToolbar"in e&&n(123,Je=e.cropMinimizeToolbar),"cropInteractionFocus"in e&&n(124,et=e.cropInteractionFocus),"cropRotationRange"in e&&n(3,tt=e.cropRotationRange),"cropMaskOpacity"in e&&n(125,nt=e.cropMaskOpacity),"locale"in e&&n(4,rt=e.locale),"cropFormatIconSelectPreset"in e&&n(126,it=e.cropFormatIconSelectPreset),"cropFormatIconCropBoundary"in e&&n(127,ot=e.cropFormatIconCropBoundary)},e.$$.update=()=>{8192&e.$$.dirty[0]|1&e.$$.dirty[4]&&ct.set("selection"===et&&A),8388608&e.$$.dirty[3]&&n(134,r=He&&Array.isArray(He)&&He.length),8388608&e.$$.dirty[3]|1024&e.$$.dirty[4]&&ht.set(r?He:[]),8192&e.$$.dirty[0]|1048576&e.$$.dirty[4]&&A&&Dt.set(1,{hard:!O}),8192&e.$$.dirty[0]&&Pt.set(!A),8192&e.$$.dirty[0]&&Rt.set(!A),8192&e.$$.dirty[0]&&A&&Mt.set(!0),2097152&e.$$.dirty[4]&&n(129,h="overlay"===L.layoutMode),16777216&e.$$.dirty[3]|32&e.$$.dirty[4]&&n(133,S=qe&&!h),16384&e.$$.dirty[0]|2&e.$$.dirty[5]&&n(142,l=q&&K&&vI(q,K)),262144&e.$$.dirty[4]|2&e.$$.dirty[5]&&n(140,c=!(!K||!l)),327680&e.$$.dirty[4]|2&e.$$.dirty[5]&&n(138,u=c&&hI(K,l,(e=>cT(e,5)))),32784&e.$$.dirty[0]|209190928&e.$$.dirty[3]|2115072&e.$$.dirty[4]|2040&e.$$.dirty[5]&&n(12,i=ge&&Ze([Be&&["Button","rotate-left",{label:rt.cropLabelButtonRotateLeft,labelClass:"PinturaToolbarContentWide",icon:rt.cropIconButtonRotateLeft,onclick:()=>{bt(-Math.PI/2),xt.write()}}],Ue&&["Button","rotate-right",{label:rt.cropLabelButtonRotateRight,labelClass:"PinturaToolbarContentWide",icon:rt.cropIconButtonRotateRight,onclick:()=>{bt(Math.PI/2),xt.write()}}],We&&["Button","flip-horizontal",{label:rt.cropLabelButtonFlipHorizontal,labelClass:"PinturaToolbarContentWide",icon:rt.cropIconButtonFlipHorizontal,onclick:()=>{QE(J)?uA(jt,fe=!fe,fe):uA(Ft,me=!me,me),xt.write()}}],Ve&&["Button","flip-vertical",{label:rt.cropLabelButtonFlipVertical,labelClass:"PinturaToolbarContentWide",icon:rt.cropIconButtonFlipVertical,onclick:()=>{QE(J)?uA(Ft,me=!me,me):uA(jt,fe=!fe,fe),xt.write()}}],S&&r&&[!1===Ke?"Dropdown":lV,"select-preset",{icon:sn(rt,En(pe,he)),label:LF(rt.cropLabelSelectPreset,rt,En(pe,he)),labelClass:"PinturaToolbarContentWide",options:he,filter:Ke,onfilterchange:gt,selectedIndex:pe,onchange:e=>{let{value:t}=e;OP(t)?(uA(Jt,se=GE(t[0],t[1]),se),uA(Ut,U=FT(t),U)):uA(Jt,se=t,se),u&&$n(),xt.write()},optionMapper:e=>{let t=!1;const n=OP(e.value)?e.value[0]/e.value[1]:e.value;if(n){const e=eL(Q,J,n);t=e.width<te.width||e.height<te.height}return e.icon=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{width:n=24,height:r=24,bounds:i=16,radius:o=3}=t;let a,s,l,c,u=OP(e)?GE(e[0],e[1]):e,d=!!u;return u=d?u:1,l=u>1?i:u*i,c=l/u,a=Math.round(.5*(n-l)),s=Math.round(.5*(r-c)),`<rect fill="${d?"currentColor":"none"}" stroke="${d?"none":"currentColor"}" stroke-width="${n/16}" stroke-dasharray="${[n/12,n/6].join(" ")}" x="${a}" y="${s}" width="${l}" height="${c}" rx="${o}"/>`}(e.value,{bounds:14}),{...e,disabled:t}}}],Ye&&["Dropdown","select-crop-limit",{icon:ln(rt,ee),label:rt.cropLabelCropBoundary,labelClass:"PinturaToolbarContentWide",onchange:e=>{let{value:t}=e;uA(en,ee=t,ee),xt.write()},options:[[!0,rt.cropLabelCropBoundaryEdge,{icon:ln(rt,!0)}],[!1,rt.cropLabelCropBoundaryNone,{icon:ln(rt,!1)}]]}]].filter(Boolean),L,(()=>lt.set({}))).filter(Boolean)),12288&e.$$.dirty[0]|1073741824&e.$$.dirty[3]|2097184&e.$$.dirty[4]&&uA(Lt,de=A&&"never"!==Je&&("always"===Je||"short"===L.verticalSpace||h)?i.map((e=>{let[t,n,r]=e;return Array.isArray(r)?[t,n,r]:[t,n,{...r,hideLabel:!0}]})):[],de),16&e.$$.dirty[5]&&n(25,o=ee?0:-1),16384&e.$$.dirty[0]|4&e.$$.dirty[5]&&n(135,a=q&&hT(-(Y.x-q.x),-(Y.y-q.y))),16779264&e.$$.dirty[4]&&n(136,s=j&&a&&hT(fF(j.x+.5*j.width+a.x),fF(j.y+.5*j.height+a.y))),1&e.$$.dirty[5]&&n(139,d=null!=G),16384&e.$$.dirty[0]|262144&e.$$.dirty[4]&&n(141,p=q&&l&&(l.height===q.height||l.width===q.width)),1610743808&e.$$.dirty[4]&&n(137,f=!p&&H<1&&V<1),122880&e.$$.dirty[4]&&n(9,m=c&&!d&&(!u||f)),32768&e.$$.dirty[3]|268435488&e.$$.dirty[4]&&n(11,g=De&&!!W&&!h),268435456&e.$$.dirty[3]&&n(24,y=!!Xe||void 0),2048&e.$$.dirty[0]|268435456&e.$$.dirty[3]|402653184&e.$$.dirty[4]&&n(23,v=g&&Xe?Xe(W,U):g&&function(e,t){let n={};if(t){const r=e.width/e.height;t.width&&!t.height&&(n=zT(t.width,t.width/r)),t.height&&!t.width&&(n=zT(t.height*r,t.height)),n=LT(t)}else n=zT(e.width,e.height);return`${Math.round(n.width)} &times; ${Math.round(n.height)}`}(W,U)),16779264&e.$$.dirty[4]&&n(8,w=j&&a&&{x:j.x+a.x,y:j.y+a.y,width:j.width,height:j.height}),256&e.$$.dirty[0]|16384&e.$$.dirty[3]|32&e.$$.dirty[4]&&n(22,b=Ne&&!!w&&!h),262400&e.$$.dirty[3]|67112960&e.$$.dirty[4]&&n(10,x=ze&&!!s&&!Ie&&!B),512&e.$$.dirty[0]|256&e.$$.dirty[3]|33554448&e.$$.dirty[4]&&m&&Ie&&!z&&(clearTimeout(Sn),n(128,Sn=setTimeout($n,Ie))),33554448&e.$$.dirty[4]&&z&&clearTimeout(Sn),1536&e.$$.dirty[0]|1048576&e.$$.dirty[4]&&_n.set(x&&m?1:0,{hard:!1===O}),1052672&e.$$.dirty[4]&&Cn.set(s,{hard:!1===O}),8192&e.$$.dirty[0]|8388608&e.$$.dirty[4]&&(A&&!D?(uA(Nt,F.crop={maskOpacity:nt,maskMarkupOpacity:nt},F),Nt.set(F)):(delete F.crop,Nt.set(F))),4194304&e.$$.dirty[4]&&N&&rn.update((e=>{const t=e.filter((e=>!/^image\-selection\-guide/.test(e.id)));return A?[...t,...N]:t})),2097152&e.$$.dirty[4]&&n(132,$="short"!==L.verticalSpace),1073741824&e.$$.dirty[3]|288&e.$$.dirty[4]&&n(21,_="never"===Je&&!h||$&&"always"!==Je),4&e.$$.dirty[0]|4096&e.$$.dirty[3]&&n(131,C=Ae&&Oe),8192&e.$$.dirty[3]|384&e.$$.dirty[4]&&n(130,k=Le?$&&C:C),2048&e.$$.dirty[3]|64&e.$$.dirty[4]&&n(20,E=Me||k),64&e.$$.dirty[4]&&(k||n(5,An=Mn)),32&e.$$.dirty[0]&&n(19,T={name:In,selected:An}),16&e.$$.dirty[0]|2048&e.$$.dirty[3]|64&e.$$.dirty[4]&&n(7,I=[Me&&{id:In+"-rotation",label:rt.cropLabelTabRotation},k&&{id:In+"-zoom",label:rt.cropLabelTabZoom}].filter(Boolean)),128&e.$$.dirty[0]&&n(18,P=I.map((e=>e.id))),64&e.$$.dirty[0]|32&e.$$.dirty[4]&&Pn&&!Pn.children.length&&h&&Pn.dispatchEvent(new CustomEvent("measure",{detail:Pn.rect})),8192&e.$$.dirty[0]|1048576&e.$$.dirty[4]&&O&&On.set(A?0:20),524288&e.$$.dirty[4]&&n(17,R=M?`translateY(${M}px)`:"none")},[Ce,Ee,Ae,tt,rt,An,Pn,I,w,m,x,g,i,A,q,J,Rn,R,P,T,E,_,b,v,y,o,re,ye,ve,be,xe,we,$e,at,st,lt,ct,ut,dt,ht,wt,$t,_t,Ct,kt,Tt,At,Ot,Lt,Nt,Ft,jt,zt,Bt,Ut,Wt,Vt,Ht,qt,Gt,Kt,Yt,Zt,Xt,Qt,Jt,en,tn,nn,on,()=>{pt="select",uA($t,z=!0,z),uA(Vt,G=QT(K),G),cn=B?un:dn},e=>{let{detail:t}=e;const{boundsLimited:n,boundsIntent:r}=cn(t.direction,t.translation);uA(_t,Z=!0,Z),uA(Ht,ue=r,ue),uA(Wt,K=n,K)},e=>{let{detail:t}=e;const{boundsLimited:n}=cn(t.direction,t.translation);uA(_t,Z=!1,Z),uA($t,z=!1,z),uA(Ht,ue=void 0,ue),vT(t.translation)&&(uA(Wt,K=n,K),xt.write()),uA(Vt,G=void 0,G),pt=void 0},()=>{pt="rotate",uA($t,z=!0,z),uA(Kt,ae=QT(W),ae)},e=>{uA(_t,Z=!0,Z),uA(zt,J=e,J)},e=>{uA(_t,Z=!1,Z),uA($t,z=!1,z),uA(zt,J=e,J),xt.write(),uA(Kt,ae=void 0,ae)},()=>{pt="pan",hn=void 0,uA($t,z=!0,z),pn=QT(W)},e=>{let{detail:t}=e;uA(_t,Z=!0,Z),fn(t)},e=>{let{detail:t}=e;uA(_t,Z=!1,Z),uA($t,z=!1,z),(vT(t.translation)>0||0!==t.scalar)&&(fn(t),xt.write()),uA(Gt,ie=void 0,ie),pn=void 0},e=>{let{detail:{translation:t}}=e;B&&(t=gT(mT(t))),hn=t,uA($t,z=!1,z)},mn,gn,yn,()=>{pt="zoom",uA($t,z=!0,z),pn=QT(W)},e=>{uA(_t,Z=!1,Z),vn(e)},e=>{vn(e),xt.write(),uA(_t,Z=!1,Z),uA($t,z=!1,z),pn=void 0},()=>{pt="zoom",pn||(bn=QT(W),uA($t,z=!0,z))},e=>{let{detail:t}=e;bn&&(uA(_t,Z=!0,Z),xn(t))},e=>{let{detail:t}=e;bn&&(uA(_t,Z=!1,Z),uA($t,z=!1,z),xn(t),uA(Gt,ie=void 0,ie),bn=void 0,xt.write())},e=>{const t=BB(e,re,Y);if(je&&!bI(K,t))return;pt="zoom",uA($t,z=!0,z),uA(_t,Z=!0,Z),e.preventDefault(),e.stopPropagation();const n=oB(e,{fixScrollDirection:ne}),r=1+n/100,i=QT(W),o=1===Math.min(W.width/te.width,W.height/te.height);if(Pe&&ee){const e=vt(W,Q,J);if(ft()&&e&&n>0&&u){uA($t,z=!1,z),uA(_t,Z=!1,Z);const e=QE(J)?eI({height:Q.width,width:Q.height}):eI(Q);if(hI(i,e))return;if(clearTimeout(wn),hI(xt.state.crop,e))return;return uA(Yt,W=e,W),void xt.write()}}let a=sI(W);if(Fe&&"selection"!==et&&n<0&&!o){const e=_T(mT(t),K),n=Math.min(K.width/W.width,K.height/W.height),r=cI(QT(K),1.1);a=bI(r,t)?ST(QT(W),kT(e,1/n)):a}let s=cI(QT(W),r,a);if(HT(X[1],s)||(s=oI(sI(s),X[1])),HT(s,X[0])||(s=oI(sI(s),X[0])),hI(i,s,cT))return uA($t,z=!1,z),void uA(_t,Z=!1,Z);uA(Yt,W=_I(s,(e=>cT(e,5))),W),uA($t,z=!1,z),uA(_t,Z=!1,Z),clearTimeout(wn),wn=setTimeout((()=>{xt.write()}),500)},$n,_n,Cn,kn,Tn,In,On,Ke,"crop",ke,Te,Ie,Pe,Re,Me,Oe,Le,Ne,De,Fe,je,ze,Be,Ue,We,Ve,He,qe,Ge,Ye,Ze,Xe,Qe,Je,et,nt,it,ot,Sn,h,k,C,$,S,r,a,s,f,u,d,c,p,l,M,O,L,N,D,j,z,B,U,W,V,H,G,K,Y,Q,ee,te,pe,he,fe,me,ge,function(t){QA.call(this,e,t)},e=>{let{detail:t}=e;return n(5,An=t)},function(e){eO[e?"unshift":"push"]((()=>{Pn=e,n(6,Pn)}))},e=>zB(e),function(e){Rn=e,n(16,Rn)},function(t){QA.call(this,e,t)}]}var PV={util:["crop",class extends OO{constructor(e){super(),AO(this,e,IV,CV,XM,{name:98,isActive:0,stores:99,cropImageSelectionCornerStyle:1,cropWillRenderImageSelectionGuides:100,cropAutoCenterImageSelectionTimeout:101,cropEnableZoomMatchImageAspectRatio:102,cropEnableRotateMatchImageAspectRatio:103,cropEnableRotationInput:104,cropEnableZoom:2,cropEnableZoomInput:105,cropEnableZoomAutoHide:106,cropEnableImageSelection:107,cropEnableInfoIndicator:108,cropEnableZoomTowardsWheelPosition:109,cropEnableLimitWheelInputToCropSelection:110,cropEnableCenterImageSelection:111,cropEnableButtonRotateLeft:112,cropEnableButtonRotateRight:113,cropEnableButtonFlipHorizontal:114,cropEnableButtonFlipVertical:115,cropSelectPresetOptions:116,cropEnableSelectPreset:117,cropEnableFilterMatchAspectRatio:118,cropSelectPresetFilter:97,cropEnableButtonToggleCropLimit:119,cropWillRenderTools:120,cropWillRenderInfoIndicator:121,cropActiveTransformTool:122,cropMinimizeToolbar:123,cropInteractionFocus:124,cropRotationRange:3,cropMaskOpacity:125,locale:4,cropFormatIconSelectPreset:126,cropFormatIconCropBoundary:127},null,[-1,-1,-1,-1,-1,-1,-1,-1])}get name(){return this.$$.ctx[98]}get isActive(){return this.$$.ctx[0]}set isActive(e){this.$$set({isActive:e}),pO()}get stores(){return this.$$.ctx[99]}set stores(e){this.$$set({stores:e}),pO()}get cropImageSelectionCornerStyle(){return this.$$.ctx[1]}set cropImageSelectionCornerStyle(e){this.$$set({cropImageSelectionCornerStyle:e}),pO()}get cropWillRenderImageSelectionGuides(){return this.$$.ctx[100]}set cropWillRenderImageSelectionGuides(e){this.$$set({cropWillRenderImageSelectionGuides:e}),pO()}get cropAutoCenterImageSelectionTimeout(){return this.$$.ctx[101]}set cropAutoCenterImageSelectionTimeout(e){this.$$set({cropAutoCenterImageSelectionTimeout:e}),pO()}get cropEnableZoomMatchImageAspectRatio(){return this.$$.ctx[102]}set cropEnableZoomMatchImageAspectRatio(e){this.$$set({cropEnableZoomMatchImageAspectRatio:e}),pO()}get cropEnableRotateMatchImageAspectRatio(){return this.$$.ctx[103]}set cropEnableRotateMatchImageAspectRatio(e){this.$$set({cropEnableRotateMatchImageAspectRatio:e}),pO()}get cropEnableRotationInput(){return this.$$.ctx[104]}set cropEnableRotationInput(e){this.$$set({cropEnableRotationInput:e}),pO()}get cropEnableZoom(){return this.$$.ctx[2]}set cropEnableZoom(e){this.$$set({cropEnableZoom:e}),pO()}get cropEnableZoomInput(){return this.$$.ctx[105]}set cropEnableZoomInput(e){this.$$set({cropEnableZoomInput:e}),pO()}get cropEnableZoomAutoHide(){return this.$$.ctx[106]}set cropEnableZoomAutoHide(e){this.$$set({cropEnableZoomAutoHide:e}),pO()}get cropEnableImageSelection(){return this.$$.ctx[107]}set cropEnableImageSelection(e){this.$$set({cropEnableImageSelection:e}),pO()}get cropEnableInfoIndicator(){return this.$$.ctx[108]}set cropEnableInfoIndicator(e){this.$$set({cropEnableInfoIndicator:e}),pO()}get cropEnableZoomTowardsWheelPosition(){return this.$$.ctx[109]}set cropEnableZoomTowardsWheelPosition(e){this.$$set({cropEnableZoomTowardsWheelPosition:e}),pO()}get cropEnableLimitWheelInputToCropSelection(){return this.$$.ctx[110]}set cropEnableLimitWheelInputToCropSelection(e){this.$$set({cropEnableLimitWheelInputToCropSelection:e}),pO()}get cropEnableCenterImageSelection(){return this.$$.ctx[111]}set cropEnableCenterImageSelection(e){this.$$set({cropEnableCenterImageSelection:e}),pO()}get cropEnableButtonRotateLeft(){return this.$$.ctx[112]}set cropEnableButtonRotateLeft(e){this.$$set({cropEnableButtonRotateLeft:e}),pO()}get cropEnableButtonRotateRight(){return this.$$.ctx[113]}set cropEnableButtonRotateRight(e){this.$$set({cropEnableButtonRotateRight:e}),pO()}get cropEnableButtonFlipHorizontal(){return this.$$.ctx[114]}set cropEnableButtonFlipHorizontal(e){this.$$set({cropEnableButtonFlipHorizontal:e}),pO()}get cropEnableButtonFlipVertical(){return this.$$.ctx[115]}set cropEnableButtonFlipVertical(e){this.$$set({cropEnableButtonFlipVertical:e}),pO()}get cropSelectPresetOptions(){return this.$$.ctx[116]}set cropSelectPresetOptions(e){this.$$set({cropSelectPresetOptions:e}),pO()}get cropEnableSelectPreset(){return this.$$.ctx[117]}set cropEnableSelectPreset(e){this.$$set({cropEnableSelectPreset:e}),pO()}get cropEnableFilterMatchAspectRatio(){return this.$$.ctx[118]}set cropEnableFilterMatchAspectRatio(e){this.$$set({cropEnableFilterMatchAspectRatio:e}),pO()}get cropSelectPresetFilter(){return this.$$.ctx[97]}set cropSelectPresetFilter(e){this.$$set({cropSelectPresetFilter:e}),pO()}get cropEnableButtonToggleCropLimit(){return this.$$.ctx[119]}set cropEnableButtonToggleCropLimit(e){this.$$set({cropEnableButtonToggleCropLimit:e}),pO()}get cropWillRenderTools(){return this.$$.ctx[120]}set cropWillRenderTools(e){this.$$set({cropWillRenderTools:e}),pO()}get cropWillRenderInfoIndicator(){return this.$$.ctx[121]}set cropWillRenderInfoIndicator(e){this.$$set({cropWillRenderInfoIndicator:e}),pO()}get cropActiveTransformTool(){return this.$$.ctx[122]}set cropActiveTransformTool(e){this.$$set({cropActiveTransformTool:e}),pO()}get cropMinimizeToolbar(){return this.$$.ctx[123]}set cropMinimizeToolbar(e){this.$$set({cropMinimizeToolbar:e}),pO()}get cropInteractionFocus(){return this.$$.ctx[124]}set cropInteractionFocus(e){this.$$set({cropInteractionFocus:e}),pO()}get cropRotationRange(){return this.$$.ctx[3]}set cropRotationRange(e){this.$$set({cropRotationRange:e}),pO()}get cropMaskOpacity(){return this.$$.ctx[125]}set cropMaskOpacity(e){this.$$set({cropMaskOpacity:e}),pO()}get locale(){return this.$$.ctx[4]}set locale(e){this.$$set({locale:e}),pO()}get cropFormatIconSelectPreset(){return this.$$.ctx[126]}set cropFormatIconSelectPreset(e){this.$$set({cropFormatIconSelectPreset:e}),pO()}get cropFormatIconCropBoundary(){return this.$$.ctx[127]}set cropFormatIconCropBoundary(e){this.$$set({cropFormatIconCropBoundary:e}),pO()}}]};function RV(e){let t,n,r,i,o,a,s,l=e[77],c=(TE(e[77].label)?e[77].label(e[2]):e[77].label)+"";function u(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e[51](e[77],...n)}const d=()=>e[52](n,l),p=()=>e[52](null,l);return{c(){t=SA("div"),n=SA("div"),r=kA(),i=SA("span"),o=CA(c),RA(n,"class",LV),RA(t,"slot","option"),RA(t,"class","PinturaFilterOption")},m(e,l){wA(e,t,l),vA(t,n),d(),vA(t,r),vA(t,i),vA(i,o),a||(s=[TA(n,"measure",u),dA(hD.call(null,n))],a=!0)},p(t,n){l!==(e=t)[77]&&(p(),l=e[77],d()),4&n[0]|32768&n[2]&&c!==(c=(TE(e[77].label)?e[77].label(e[2]):e[77].label)+"")&&OA(o,c)},d(e){e&&$A(t),p(),a=!1,YM(s)}}}function MV(e){let t,n;return t=new cj({props:{locale:e[2],layout:"row",options:e[3],selectedIndex:e[12],onchange:e[32],$$slots:{option:[RV,e=>{let{option:t}=e;return{77:t}},e=>{let{option:t}=e;return[0,0,t?32768:0]}]},$$scope:{ctx:e}}}),{c(){PO(t.$$.fragment)},m(e,r){RO(t,e,r),n=!0},p(e,n){const r={};4&n[0]&&(r.locale=e[2]),8&n[0]&&(r.options=e[3]),4096&n[0]&&(r.selectedIndex=e[12]),1028&n[0]|98304&n[2]&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(bO(t.$$.fragment,e),n=!0)},o(e){xO(t.$$.fragment,e),n=!1},d(e){MO(t,e)}}}function AV(e){let t,n,r,i,o,a,s,l;function c(t){e[54](t)}function u(t){e[55](t)}function d(t){e[56](t)}let p={elasticity:e[13]*e[19],onscroll:e[53],$$slots:{default:[MV]},$$scope:{ctx:e}};return void 0!==e[4]&&(p.maskFeatherStartOpacity=e[4]),void 0!==e[5]&&(p.maskFeatherEndOpacity=e[5]),void 0!==e[6]&&(p.maskFeatherSize=e[6]),n=new lB({props:p}),eO.push((()=>IO(n,"maskFeatherStartOpacity",c))),eO.push((()=>IO(n,"maskFeatherEndOpacity",u))),eO.push((()=>IO(n,"maskFeatherSize",d))),n.$on("measure",e[57]),{c(){t=SA("div"),PO(n.$$.fragment),RA(t,"slot","footer"),NA(t,"transform",e[11])},m(r,i){wA(r,t,i),RO(n,t,null),a=!0,s||(l=[TA(t,"transitionend",e[30]),TA(t,"measure",e[58]),dA(hD.call(null,t,{observePosition:!0}))],s=!0)},p(e,a){const s={};8192&a[0]&&(s.elasticity=e[13]*e[19]),128&a[0]&&(s.onscroll=e[53]),5132&a[0]|65536&a[2]&&(s.$$scope={dirty:a,ctx:e}),!r&&16&a[0]&&(r=!0,s.maskFeatherStartOpacity=e[4],lO((()=>r=!1))),!i&&32&a[0]&&(i=!0,s.maskFeatherEndOpacity=e[5],lO((()=>i=!1))),!o&&64&a[0]&&(o=!0,s.maskFeatherSize=e[6],lO((()=>o=!1))),n.$set(s),2048&a[0]&&NA(t,"transform",e[11])},i(e){a||(bO(n.$$.fragment,e),a=!0)},o(e){xO(n.$$.fragment,e),a=!1},d(e){e&&$A(t),MO(n),s=!1,YM(l)}}}function OV(e){let t,n;return t=new NW({props:{$$slots:{footer:[AV]},$$scope:{ctx:e}}}),t.$on("measure",e[59]),{c(){PO(t.$$.fragment)},m(e,r){RO(t,e,r),n=!0},p(e,n){const r={};16380&n[0]|65536&n[2]&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(bO(t.$$.fragment,e),n=!0)},o(e){xO(t.$$.fragment,e),n=!1},d(e){MO(t,e)}}}let LV="PinturaFilterPreview";function NV(e,t,n){let r,i,o,a,s,l,c,u,d,p,h,f,m,g,y,v,b,x,w,$,S=VM,_=()=>(S(),S=eA(T,(e=>n(43,u=e))),T),C=VM,k=()=>(C(),C=eA(E,(e=>n(49,b=e))),E);e.$$.on_destroy.push((()=>S())),e.$$.on_destroy.push((()=>C()));let{isActive:E}=t;k();let{isActiveFraction:T}=t;_();let{stores:I}=t,{locale:P}=t,{filterFunctions:R}=t,{filterOptions:M}=t;const A=XA("elasticityMultiplier");nA(e,A,(e=>n(13,$=e)));const{history:O,interfaceImages:L,stageRectBase:N,utilRect:D,animation:F,scrollElasticity:j,imageSize:z,imagePreview:B,imageCropRect:U,imageRotation:W,imageFlipX:V,imageFlipY:H,imageBackgroundColor:q,imageGamma:G,imageColorMatrix:K,allowPan:Y,allowZoom:Z,allowZoomControls:X,allowPlayPause:Q}=I;nA(e,L,(e=>n(60,d=e))),nA(e,N,(e=>n(48,v=e))),nA(e,D,(e=>n(47,y=e))),nA(e,F,(e=>n(50,x=e))),nA(e,z,(e=>n(62,h=e))),nA(e,B,(e=>n(42,c=e))),nA(e,q,(e=>n(61,p=e))),nA(e,G,(e=>n(44,f=e))),nA(e,K,(e=>n(40,s=e)));const J=DO({});nA(e,J,(e=>n(46,g=e)));const ee=(e,t)=>uA(J,g[e.value]=t,g),te=FO(J,(e=>{if(!e[void 0])return;const t=e[void 0];return w&&BT(w,t)?w:LT(t)}));nA(e,te,(e=>n(63,w=e)));const ne=FO([E,te,U,z,W,V,H],((e,t)=>{let[n,r,i,o,a,s,l]=e;if(!n||!r||!o)return m;const c=eI(o),u=sI(c),d=tL(o,i,a),p=sI(d),h=_T(mT(u),p),f=gT(mT(h)),g=Math.max(r.width/i.width,r.height/i.height);t({origin:f,translation:h,rotation:{x:l?Math.PI:0,y:s?Math.PI:0,z:a},scale:g})}));nA(e,ne,(e=>n(45,m=e)));const re=XN(x?20:0);let ie;nA(e,re,(e=>n(39,a=e)));const oe={};let ae,se,le,ce,ue,de,pe={x:0,y:0};const he=DO([]);nA(e,he,(e=>n(41,l=e)));const fe=e=>{const t={...e,data:c,size:h,offset:{...e.offset},mask:{...e.mask},backgroundColor:p};return t.opacity=u,t.offset.y+=a,t.mask.y+=a,t.id="filter",t},me=()=>d.filter((e=>"filter"!==e.id));return KA((()=>{L.set([])})),e.$$set=e=>{"isActive"in e&&k(n(0,E=e.isActive)),"isActiveFraction"in e&&_(n(1,T=e.isActiveFraction)),"stores"in e&&n(34,I=e.stores),"locale"in e&&n(2,P=e.locale),"filterFunctions"in e&&n(35,R=e.filterFunctions),"filterOptions"in e&&n(3,M=e.filterOptions)},e.$$.update=()=>{if(262144&e.$$.dirty[1]&&Y.set(b),262144&e.$$.dirty[1]&&Z.set(b),262144&e.$$.dirty[1]&&X.set(b),262144&e.$$.dirty[1]&&b&&Q.set(!1),8&e.$$.dirty[0]&&n(38,r=AF(M)),640&e.$$.dirty[1]&&n(12,i=((e,t)=>{if(!e||!e.filter||!t)return 0;const n=e.filter;return t.findIndex((e=>{let[t]=e;if(!R[t])return!1;const r=R[t]();return sL(r,n)}))})(s,r)),786432&e.$$.dirty[1]&&x&&re.set(b?0:20),512&e.$$.dirty[0]|458752&e.$$.dirty[1]&&b&&y&&v&&de&&n(37,ue={x:v.x-y.x,y:v.y-y.y+de.y}),496&e.$$.dirty[0]|58096&e.$$.dirty[1]&&m&&ue&&pe&&ce&&ie){const e=ue.x+ce.x+pe.x,t=ue.y,n=ce.x+ue.x,i=n+ce.width;he.set(r.map(((r,o)=>{let[a]=r;const l=g[a],c=pe.x+l.x,u=c+l.width;if(u<0||c>ce.width)return!1;const d=e+l.x,p=t+l.y,h=(e=>({origin:mT(e.origin),translation:mT(e.translation),rotation:{...e.rotation},scale:e.scale}))(m);h.offset=hT(.5*l.width+d,.5*l.height+p),h.maskOpacity=1,h.mask=aI(d+0,p,l.width+0,l.height),h.maskFeather=[1,0,1,0,1,i,1,i],c<le&&ae<1&&(h.maskFeather[0]=ae,h.maskFeather[1]=n,h.maskFeather[2]=1,h.maskFeather[3]=n+le),u>ce.width-le&&se<1&&(h.maskFeather[4]=se,h.maskFeather[5]=i-le,h.maskFeather[6]=1,h.maskFeather[7]=i),h.maskCornerRadius=ie[a];let y=s&&Object.keys(s).filter((e=>"filter"!=e)).map((e=>s[e]))||[];return TE(R[a])&&y.push(R[a]()),h.colorMatrix=y.length?UM(y):void 0,h.gamma=f,h})).filter(Boolean))}if(7424&e.$$.dirty[1])if(u>0&&l){const e=[...me(),...l.map(fe)];L.set(e)}else L.set(me());256&e.$$.dirty[1]&&n(11,o=a?`translateY(${a}px)`:"none")},[E,T,P,M,ae,se,le,pe,ce,de,oe,o,i,$,A,L,N,D,F,j,z,B,q,G,K,J,ee,te,ne,re,e=>{e.target.className===LV&&n(36,ie=Object.keys(oe).reduce(((e,t)=>{const n=oe[t],r=getComputedStyle(n),i=["top-left","top-right","bottom-left","bottom-right"].map((e=>r.getPropertyValue(`border-${e}-radius`))).map(iB).map((e=>1.25*e));return e[t]=i,e}),{}))},he,e=>{let{value:t}=e;uA(K,s={...s,filter:TE(R[t])?R[t]():void 0},s),O.write()},"filter",I,R,ie,ue,r,a,s,l,c,u,f,m,g,y,v,b,x,(e,t)=>ee(e,t.detail),function(e,t){eO[e?"unshift":"push"]((()=>{oe[t.value]=e,n(10,oe)}))},e=>n(7,pe=e),function(e){ae=e,n(4,ae)},function(e){se=e,n(5,se)},function(e){le=e,n(6,le)},e=>n(8,ce=e.detail),e=>n(9,de=e.detail),function(t){QA.call(this,e,t)}]}var DV={util:["filter",class extends OO{constructor(e){super(),AO(this,e,NV,OV,XM,{name:33,isActive:0,isActiveFraction:1,stores:34,locale:2,filterFunctions:35,filterOptions:3},null,[-1,-1,-1])}get name(){return this.$$.ctx[33]}get isActive(){return this.$$.ctx[0]}set isActive(e){this.$$set({isActive:e}),pO()}get isActiveFraction(){return this.$$.ctx[1]}set isActiveFraction(e){this.$$set({isActiveFraction:e}),pO()}get stores(){return this.$$.ctx[34]}set stores(e){this.$$set({stores:e}),pO()}get locale(){return this.$$.ctx[2]}set locale(e){this.$$set({locale:e}),pO()}get filterFunctions(){return this.$$.ctx[35]}set filterFunctions(e){this.$$set({filterFunctions:e}),pO()}get filterOptions(){return this.$$.ctx[3]}set filterOptions(e){this.$$set({filterOptions:e}),pO()}}]};function FV(e){let t,n,r,i;t=new lB({props:{elasticity:e[6]*e[9],class:"PinturaControlListScroller",$$slots:{default:[zV]},$$scope:{ctx:e}}});const o=[{class:"PinturaControlPanels"},{panelClass:"PinturaControlPanel"},{panels:e[4]},e[5]];let a={$$slots:{default:[BV,e=>{let{panel:t}=e;return{42:t}},e=>{let{panel:t}=e;return[0,t?2048:0]}]},$$scope:{ctx:e}};for(let s=0;s<o.length;s+=1)a=qM(a,o[s]);return r=new qD({props:a}),{c(){PO(t.$$.fragment),n=kA(),PO(r.$$.fragment)},m(e,o){RO(t,e,o),wA(e,n,o),RO(r,e,o),i=!0},p(e,n){const i={};64&n[0]&&(i.elasticity=e[6]*e[9]),38&n[0]|8192&n[1]&&(i.$$scope={dirty:n,ctx:e}),t.$set(i);const a=48&n[0]?EO(o,[o[0],o[1],16&n[0]&&{panels:e[4]},32&n[0]&&TO(e[5])]):{};128&n[0]|10240&n[1]&&(a.$$scope={dirty:n,ctx:e}),r.$set(a)},i(e){i||(bO(t.$$.fragment,e),bO(r.$$.fragment,e),i=!0)},o(e){xO(t.$$.fragment,e),xO(r.$$.fragment,e),i=!1},d(e){MO(t,e),e&&$A(n),MO(r,e)}}}function jV(e){let t,n,r=e[43].label+"";return{c(){t=SA("span"),n=CA(r)},m(e,r){wA(e,t,r),vA(t,n)},p(e,t){4096&t[1]&&r!==(r=e[43].label+"")&&OA(n,r)},d(e){e&&$A(t)}}}function zV(e){let t,n;const r=[{class:"PinturaControlList"},{tabs:e[1]},e[5]];let i={$$slots:{default:[jV,e=>{let{tab:t}=e;return{43:t}},e=>{let{tab:t}=e;return[0,t?4096:0]}]},$$scope:{ctx:e}};for(let o=0;o<r.length;o+=1)i=qM(i,r[o]);return t=new AD({props:i}),t.$on("select",e[24]),{c(){PO(t.$$.fragment)},m(e,r){RO(t,e,r),n=!0},p(e,n){const i=34&n[0]?EO(r,[r[0],2&n[0]&&{tabs:e[1]},32&n[0]&&TO(e[5])]):{};12288&n[1]&&(i.$$scope={dirty:n,ctx:e}),t.$set(i)},i(e){n||(bO(t.$$.fragment,e),n=!0)},o(e){xO(t.$$.fragment,e),n=!1},d(e){MO(t,e)}}}function BV(e){let t,n;const r=[e[7][e[42]]];let i={};for(let o=0;o<r.length;o+=1)i=qM(i,r[o]);return t=new zW({props:i}),{c(){PO(t.$$.fragment)},m(e,r){RO(t,e,r),n=!0},p(e,n){const i=128&n[0]|2048&n[1]?EO(r,[TO(e[7][e[42]])]):{};t.$set(i)},i(e){n||(bO(t.$$.fragment,e),n=!0)},o(e){xO(t.$$.fragment,e),n=!1},d(e){MO(t,e)}}}function UV(e){let t,n,r=e[5]&&FV(e);return{c(){t=SA("div"),r&&r.c(),RA(t,"slot","footer"),NA(t,"transform",e[3])},m(e,i){wA(e,t,i),r&&r.m(t,null),n=!0},p(e,n){e[5]?r?(r.p(e,n),32&n[0]&&bO(r,1)):(r=FV(e),r.c(),bO(r,1),r.m(t,null)):r&&(yO(),xO(r,1,1,(()=>{r=null})),vO()),8&n[0]&&NA(t,"transform",e[3])},i(e){n||(bO(r),n=!0)},o(e){xO(r),n=!1},d(e){e&&$A(t),r&&r.d()}}}function WV(e){let t,n;return t=new NW({props:{$$slots:{footer:[UV]},$$scope:{ctx:e}}}),t.$on("measure",e[25]),{c(){PO(t.$$.fragment)},m(e,r){RO(t,e,r),n=!0},p(e,n){const r={};254&n[0]|8192&n[1]&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(bO(t.$$.fragment,e),n=!0)},o(e){xO(t.$$.fragment,e),n=!1},d(e){MO(t,e)}}}function VV(e,t,n){let r,i,o,a,s,l,c,u,d,p,h,f=VM,m=()=>(f(),f=eA(y,(e=>n(21,c=e))),y);e.$$.on_destroy.push((()=>f()));let{stores:g}=t,{isActive:y}=t;m();let{locale:v={}}=t,{finetuneControlConfiguration:b}=t,{finetuneOptions:x}=t,{finetuneNudgePrecision:w}=t;const{history:$,animation:S,scrollElasticity:_,rangeInputElasticity:C,imageColorMatrix:k,imageConvolutionMatrix:E,imageGamma:T,imageVignette:I,imageNoise:P,allowPan:R,allowZoom:M,allowZoomControls:A,allowPlayPause:O}=g;nA(e,S,(e=>n(22,u=e)));const L={imageColorMatrix:k,imageConvolutionMatrix:E,imageGamma:T,imageVignette:I,imageNoise:P},N=XA("elasticityMultiplier");nA(e,N,(e=>n(6,p=e)));const D="finetune-"+ME(),F=DO({});nA(e,F,(e=>n(23,d=e)));const j=DO({});nA(e,j,(e=>n(7,h=e)));let z=[];const B=XN(u?20:0);return nA(e,B,(e=>n(20,l=e))),e.$$set=e=>{"stores"in e&&n(15,g=e.stores),"isActive"in e&&m(n(0,y=e.isActive)),"locale"in e&&n(16,v=e.locale),"finetuneControlConfiguration"in e&&n(17,b=e.finetuneControlConfiguration),"finetuneOptions"in e&&n(18,x=e.finetuneOptions),"finetuneNudgePrecision"in e&&n(19,w=e.finetuneNudgePrecision)},e.$$.update=()=>{var t;2097152&e.$$.dirty[0]&&R.set(c),2097152&e.$$.dirty[0]&&M.set(c),2097152&e.$$.dirty[0]&&A.set(c),2097152&e.$$.dirty[0]&&c&&O.set(!0),327680&e.$$.dirty[0]&&n(1,r=x?x.map((e=>{let[t,n]=e;return{id:t,label:TE(n)?n(v):n}})):[]),2&e.$$.dirty[0]&&n(2,i=r.length?r[0].id:void 0),4&e.$$.dirty[0]&&n(5,o=i&&{name:D,selected:i}),2&e.$$.dirty[0]&&n(4,a=r.map((e=>e.id))),131072&e.$$.dirty[0]&&b&&(t=b,z&&z.forEach((e=>e())),z=a.map((e=>{const{getStore:n,getValue:r=KE}=t[e];return n(L).subscribe((t=>{const n=null!=t?r(t):t;uA(F,d={...d,[e]:n},d)}))}))),8519680&e.$$.dirty[0]&&b&&d&&uA(j,h=Object.keys(d).reduce(((e,t)=>{const{base:n,min:r,max:i,getLabel:o,getStore:a,setValue:s=(e,t)=>e.set(t)}=b[t],l=a(L),c=null!=d[t]?d[t]:n;return e[t]={base:n,min:r,max:i,value:c,valueLabel:o?o(c,r,i,i-r):Math.round(100*c),oninputmove:e=>{s(l,e)},oninputend:e=>{s(l,e),$.write()},elasticity:p*C,labelReset:v.labelReset,nudgeMultiplier:w},e}),{}),h),6291456&e.$$.dirty[0]&&u&&B.set(c?0:20),1048576&e.$$.dirty[0]&&n(3,s=l?`translateY(${l}px)`:"none")},[y,r,i,s,a,o,p,h,S,_,N,F,j,B,"finetune",g,v,b,x,w,l,c,u,d,e=>{let{detail:t}=e;return n(2,i=t)},function(t){QA.call(this,e,t)}]}var HV={util:["finetune",class extends OO{constructor(e){super(),AO(this,e,VV,WV,XM,{name:14,stores:15,isActive:0,locale:16,finetuneControlConfiguration:17,finetuneOptions:18,finetuneNudgePrecision:19},null,[-1,-1])}get name(){return this.$$.ctx[14]}get stores(){return this.$$.ctx[15]}set stores(e){this.$$set({stores:e}),pO()}get isActive(){return this.$$.ctx[0]}set isActive(e){this.$$set({isActive:e}),pO()}get locale(){return this.$$.ctx[16]}set locale(e){this.$$set({locale:e}),pO()}get finetuneControlConfiguration(){return this.$$.ctx[17]}set finetuneControlConfiguration(e){this.$$set({finetuneControlConfiguration:e}),pO()}get finetuneOptions(){return this.$$.ctx[18]}set finetuneOptions(e){this.$$set({finetuneOptions:e}),pO()}get finetuneNudgePrecision(){return this.$$.ctx[19]}set finetuneNudgePrecision(e){this.$$set({finetuneNudgePrecision:e}),pO()}}]},qV=(e,t)=>{const n=t.length;return e<0?e%n+n:e>=n?e%n:e};function GV(e,t,n){const r=e.slice();return r[51]=t[n].key,r[52]=t[n].index,r[53]=t[n].translate,r[16]=t[n].scale,r[54]=t[n].selected,r[15]=t[n].rotate,r[55]=t[n].dir,r[56]=t[n].center,r[57]=t[n].type,r[4]=t[n].visible,r[58]=t[n].role,r[59]=t[n].tabindex,r[60]=t[n].label,r[61]=t[n].orientation,r[62]=t[n].valuemin,r[63]=t[n].valuemax,r[64]=t[n].valuenow,r}function KV(e){let t;return{c(){t=SA("div"),RA(t,"class","PinturaShapeManipulator"),RA(t,"data-control","point"),NA(t,"pointer-events","none"),NA(t,"opacity",e[6]),NA(t,"transform",`translate3d(${e[56].x}px, ${e[56].y}px, 0) scale(${e[7]}, ${e[7]})`)},m(e,n){wA(e,t,n)},p(e,n){64&n[0]&&NA(t,"opacity",e[6]),160&n[0]&&NA(t,"transform",`translate3d(${e[56].x}px, ${e[56].y}px, 0) scale(${e[7]}, ${e[7]})`)},d(e){e&&$A(t)}}}function YV(e,t){let n,r,i,o,a,s,l,c,u,d,p,h,f,m;function g(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t[23](t[52],...n)}let y="edge"===t[57]&&t[4]&&KV(t);return{key:e,first:null,c(){n=SA("div"),p=kA(),y&&y.c(),h=EA(),RA(n,"role",r=t[58]),RA(n,"tabindex",i=t[59]),RA(n,"aria-label",o=t[60]),RA(n,"aria-orientation",a=t[61]),RA(n,"aria-valuemin",s=t[62]),RA(n,"aria-valuemax",l=t[63]),RA(n,"aria-valuenow",c=t[64]),RA(n,"class","PinturaShapeManipulator"),RA(n,"data-control",u=t[57]),RA(n,"data-selected",d=t[54]),NA(n,"cursor",t[55]?t[55]+"-resize":"move"),NA(n,"opacity",t[6]),NA(n,"--tx",t[53].x),NA(n,"--ty",t[53].y),NA(n,"--r",("edge"===t[57]?t[15]:0)+"rad"),NA(n,"--sx","point"===t[57]?t[7]:t[16].x),NA(n,"--sy","point"===t[57]?t[7]:t[16].y),this.first=n},m(e,r){wA(e,n,r),wA(e,p,r),y&&y.m(e,r),wA(e,h,r),f||(m=[TA(n,"nudge",g),dA(Dj.call(null,n,{preventDefault:!0})),TA(n,"interactionstart",(function(){ZM(t[11]("start",t[52]))&&t[11]("start",t[52]).apply(this,arguments)})),TA(n,"interactionupdate",(function(){ZM(t[11]("move",t[52]))&&t[11]("move",t[52]).apply(this,arguments)})),TA(n,"interactionend",(function(){ZM(t[11]("end",t[52]))&&t[11]("end",t[52]).apply(this,arguments)})),dA(tB.call(null,n,{observeKeys:!0}))],f=!0)},p(e,p){t=e,32&p[0]&&r!==(r=t[58])&&RA(n,"role",r),32&p[0]&&i!==(i=t[59])&&RA(n,"tabindex",i),32&p[0]&&o!==(o=t[60])&&RA(n,"aria-label",o),32&p[0]&&a!==(a=t[61])&&RA(n,"aria-orientation",a),32&p[0]&&s!==(s=t[62])&&RA(n,"aria-valuemin",s),32&p[0]&&l!==(l=t[63])&&RA(n,"aria-valuemax",l),32&p[0]&&c!==(c=t[64])&&RA(n,"aria-valuenow",c),32&p[0]&&u!==(u=t[57])&&RA(n,"data-control",u),32&p[0]&&d!==(d=t[54])&&RA(n,"data-selected",d),32&p[0]&&NA(n,"cursor",t[55]?t[55]+"-resize":"move"),64&p[0]&&NA(n,"opacity",t[6]),32&p[0]&&NA(n,"--tx",t[53].x),32&p[0]&&NA(n,"--ty",t[53].y),32&p[0]&&NA(n,"--r",("edge"===t[57]?t[15]:0)+"rad"),160&p[0]&&NA(n,"--sx","point"===t[57]?t[7]:t[16].x),160&p[0]&&NA(n,"--sy","point"===t[57]?t[7]:t[16].y),"edge"===t[57]&&t[4]?y?y.p(t,p):(y=KV(t),y.c(),y.m(h.parentNode,h)):y&&(y.d(1),y=null)},d(e){e&&$A(n),e&&$A(p),y&&y.d(e),e&&$A(h),f=!1,YM(m)}}}function ZV(e){let t,n,r;return{c(){t=SA("div"),RA(t,"role","button"),RA(t,"aria-label","Drag rotator"),RA(t,"tabindex","0"),RA(t,"class","PinturaShapeManipulator"),RA(t,"data-control","rotate"),NA(t,"transform",`translate3d(${e[0].x}px, ${e[0].y}px, 0) scale(${e[7]}, ${e[7]})`),NA(t,"opacity",e[6])},m(i,o){wA(i,t,o),n||(r=[TA(t,"nudge",e[13]),dA(Dj.call(null,t,{preventDefault:!0})),TA(t,"interactionstart",e[15]("start")),TA(t,"interactionupdate",e[15]("move")),TA(t,"interactionend",e[15]("end")),dA(tB.call(null,t,{observeKeys:!0}))],n=!0)},p(e,n){129&n[0]&&NA(t,"transform",`translate3d(${e[0].x}px, ${e[0].y}px, 0) scale(${e[7]}, ${e[7]})`),64&n[0]&&NA(t,"opacity",e[6])},d(e){e&&$A(t),n=!1,YM(r)}}}function XV(e){let t,n,r;return{c(){t=SA("div"),RA(t,"role","button"),RA(t,"aria-label","Drag scalar"),RA(t,"tabindex","0"),RA(t,"class","PinturaShapeManipulator"),RA(t,"data-control","scale"),NA(t,"transform",`translate3d(${e[1].x}px, ${e[1].y}px, 0) scale(${e[7]}, ${e[7]})`),NA(t,"opacity",e[6])},m(i,o){wA(i,t,o),n||(r=[TA(t,"nudge",e[14]),dA(Dj.call(null,t,{preventDefault:!0})),TA(t,"interactionstart",e[16]("start")),TA(t,"interactionupdate",e[16]("move")),TA(t,"interactionend",e[16]("end")),dA(tB.call(null,t,{observeKeys:!0}))],n=!0)},p(e,n){130&n[0]&&NA(t,"transform",`translate3d(${e[1].x}px, ${e[1].y}px, 0) scale(${e[7]}, ${e[7]})`),64&n[0]&&NA(t,"opacity",e[6])},d(e){e&&$A(t),n=!1,YM(r)}}}function QV(e){let t,n,r,i=[],o=new Map,a=e[5];const s=e=>e[51];for(let u=0;u<a.length;u+=1){let t=GV(e,a,u),n=s(t);o.set(n,i[u]=YV(n,t))}let l=e[2]&&e[0]&&ZV(e),c=e[3]&&e[1]&&XV(e);return{c(){for(let e=0;e<i.length;e+=1)i[e].c();t=kA(),l&&l.c(),n=kA(),c&&c.c(),r=EA()},m(e,o){for(let t=0;t<i.length;t+=1)i[t].m(e,o);wA(e,t,o),l&&l.m(e,o),wA(e,n,o),c&&c.m(e,o),wA(e,r,o)},p(e,u){6368&u[0]&&(a=e[5],i=kO(i,u,s,1,e,a,o,t.parentNode,_O,YV,t,GV)),e[2]&&e[0]?l?l.p(e,u):(l=ZV(e),l.c(),l.m(n.parentNode,n)):l&&(l.d(1),l=null),e[3]&&e[1]?c?c.p(e,u):(c=XV(e),c.c(),c.m(r.parentNode,r)):c&&(c.d(1),c=null)},i:VM,o:VM,d(e){for(let t=0;t<i.length;t+=1)i[t].d(e);e&&$A(t),l&&l.d(e),e&&$A(n),c&&c.d(e),e&&$A(r)}}}function JV(e,t,n){let r,i,o,a;const s=YA(),l=.5*XE,c=ZE-l,u=ZE+l,d=-ZE,p=d-l,h=d+l,f=YE-l,m=-YE+l,g=l,y=-l,v=ZE-XE,b=v-l,x=v+l,w=YE-XE,$=w-l,S=w+l,_=d-XE,C=_+l,k=_-l,E=d+XE,T=E+l,I=E-l;let{visible:P=!1}=t,{points:R=[]}=t,{rotatorPoint:M}=t,{bounds:A=null}=t,{scalarPoint:O}=t,{selectedPoint:L}=t,{enableDragEdges:N=!0}=t,{enableDragPoints:D=!0}=t,{enableRotatePoints:F=!0}=t,{enableScalePoints:j=!0}=t;const z=XA("isAnimated");nA(e,z,(e=>n(22,i=e)));const B=XN(.5,{precision:1e-4,stiffness:.3,damping:.7});nA(e,B,(e=>n(7,a=e)));const U=XN(0,{precision:.001,stiffness:.3,damping:.7});nA(e,U,(e=>n(6,o=e)));const W=e=>{let t="";return(e<=u&&e>=c||e>=p&&e<=h)&&(t="ns"),(e<=m||e>=f||e>=y&&e<=g)&&(t="ew"),(e>=$&&e<=S||e<=T&&e>=I)&&(t="nesw"),(e>=b&&e<=x||e<=C&&e>=k)&&(t="nwse"),t},V=(e,t)=>{s("resizestart",{indexes:e,translation:pT(),isNudge:!0}),s("resizemove",{indexes:e,translation:t,isNudge:!0}),s("resizeend",{indexes:e,translation:pT(),isNudge:!0})};return e.$$set=e=>{"visible"in e&&n(4,P=e.visible),"points"in e&&n(17,R=e.points),"rotatorPoint"in e&&n(0,M=e.rotatorPoint),"bounds"in e&&n(18,A=e.bounds),"scalarPoint"in e&&n(1,O=e.scalarPoint),"selectedPoint"in e&&n(19,L=e.selectedPoint),"enableDragEdges"in e&&n(20,N=e.enableDragEdges),"enableDragPoints"in e&&n(21,D=e.enableDragPoints),"enableRotatePoints"in e&&n(2,F=e.enableRotatePoints),"enableScalePoints"in e&&n(3,j=e.enableScalePoints)},e.$$.update=()=>{4194320&e.$$.dirty[0]&&B.set(P?1:.5,{hard:!1===i}),4194320&e.$$.dirty[0]&&U.set(P?1:0,{hard:!1===i}),131072&e.$$.dirty[0]&&n(5,r=(e=>{let t=0;const n=RT(e),r=[],i=e.length,[o,a,s,l]=e.reduce(((e,t)=>{let[n,r,i,o]=e,{x:a,y:s}=t;return o=Math.min(o,a),r=Math.max(r,a),[n=Math.min(n,s),r,i=Math.max(i,s),o]}),[1/0,-1/0,-1/0,1/0]);for(;t<i;t++){const i=qV(t-1,e),c=qV(t+1,e),u=e[i],d=e[t],p=e[c],h=Math.atan2(p.y-d.y,p.x-d.x);if(D){const e=bT(hT(u.x-d.x,u.y-d.y)),n=bT(hT(p.x-d.x,p.y-d.y)),i=hT(e.x+n.x,e.y+n.y),o=N?D&&W(Math.atan2(i.y,i.x)):void 0;r.push({index:[t],key:"point-"+t,type:"point",selected:L===t,scale:{x:1,y:1},translate:{x:d.x,y:d.y},angle:void 0,rotate:F,center:d,dir:o})}if(!N)continue;if(Array.isArray(N)&&!N.some((e=>{let[n,r]=e;return t===n&&c===r})))continue;const f=hT(d.x+.5*(p.x-d.x),d.y+.5*(p.y-d.y)),m=["t","r","b","l"][t];let g,y,v;"l"===m&&(g=A.x,y=a,v=l),"t"===m&&(g=A.y,y=s,v=o),"r"===m&&(g=l,y=A.width,v=a),"b"===m&&(g=o,y=A.height,v=s),r.push({index:[t,c],key:"edge-"+t,type:"edge",scale:{x:PT(d,p),y:1},translate:{x:d.x,y:d.y},angle:h,rotate:h,center:f,visible:Array.isArray(N),dir:W(Math.atan2(n.y-f.y,n.x-f.x)),role:"slider",tabindex:0,label:"Drag "+UW[m],orientation:""+WW[m],valuemin:Math.round(g),valuemax:Math.round(y),valuenow:Math.round(v)})}return r})(R))},[M,O,F,j,P,r,o,a,z,B,U,(e,t)=>n=>{let{detail:r}=n;const i=r&&r.translation?r.translation:hT(0,0);s("resize"+e,{...r,indexes:t,translation:i})},V,e=>{let{detail:t}=e;s("rotatestart",{translation:pT(),isNudge:!0}),s("rotatemove",{translation:t,isNudge:!0}),s("rotateend",{translation:pT(),isNudge:!0})},e=>{let{detail:t}=e;s("scalestart",{translation:pT(),isNudge:!0}),s("scalemove",{translation:t,isNudge:!0}),s("scaleend",{translation:pT(),isNudge:!0})},e=>t=>{let{detail:n}=t;const r=n&&n.translation?n.translation:hT(0,0);s("rotate"+e,{...n,translation:r})},e=>t=>{let{detail:n}=t;const r=n&&n.translation?n.translation:hT(0,0);s("scale"+e,{...n,translation:r})},R,A,L,N,D,i,(e,t)=>{let{detail:n}=t;return V(e,n)}]}class eH extends OO{constructor(e){super(),AO(this,e,JV,QV,XM,{visible:4,points:17,rotatorPoint:0,bounds:18,scalarPoint:1,selectedPoint:19,enableDragEdges:20,enableDragPoints:21,enableRotatePoints:2,enableScalePoints:3},null,[-1,-1,-1])}}var tH=(e,t)=>{const n=zB(e);return _T(n,t)},nH=e=>document.createTextNode(e),rH=e=>(XI()&&e.endsWith("<div><br></div>")?e.replace(/<div><br><\/div>$/,"<br><br>"):e).replace(/<div><br><\/div>/g,"<br>").replace(/<\/div>/g,"").replace(/<div>/g,"<br>");function iH(e){let t,n,r,i;return{c(){t=SA("pre"),RA(t,"class","PinturaContentEditable")},m(o,a){wA(o,t,a),t.innerHTML=e[0],r||(i=dA(n=OD.call(null,t,e[7]+";position:absolute;z-index:-1;pointer-events:none;")),r=!0)},p(e,r){1&r[0]&&(t.innerHTML=e[0]),n&&ZM(n.update)&&128&r[0]&&n.update.call(null,e[7]+";position:absolute;z-index:-1;pointer-events:none;")},d(e){e&&$A(t),r=!1,i()}}}function oH(e){let t,n,r,i,o,a,s=e[8]&&iH(e);return{c(){s&&s.c(),t=kA(),n=SA("pre"),RA(n,"class","PinturaContentEditable"),RA(n,"data-wrap-content",r=e[4]||e[5]?"wrap":"nowrap"),RA(n,"contenteditable",""),RA(n,"spellcheck",e[1]),RA(n,"autocorrect",e[2]),RA(n,"autocapitalize",e[3])},m(r,l){s&&s.m(r,l),wA(r,t,l),wA(r,n,l),e[26](n),o||(a=[dA(i=OD.call(null,n,e[8]?e[15](e[7]):e[7])),TA(n,"input",e[13]),TA(n,"compositionend",e[12]),TA(n,"paste",e[14]),TA(n,"keydown",e[10]),TA(n,"keyup",e[11]),TA(n,"blur",e[9])],o=!0)},p(e,o){e[8]?s?s.p(e,o):(s=iH(e),s.c(),s.m(t.parentNode,t)):s&&(s.d(1),s=null),48&o[0]&&r!==(r=e[4]||e[5]?"wrap":"nowrap")&&RA(n,"data-wrap-content",r),2&o[0]&&RA(n,"spellcheck",e[1]),4&o[0]&&RA(n,"autocorrect",e[2]),8&o[0]&&RA(n,"autocapitalize",e[3]),i&&ZM(i.update)&&384&o[0]&&i.update.call(null,e[8]?e[15](e[7]):e[7])},i:VM,o:VM,d(r){s&&s.d(r),r&&$A(t),r&&$A(n),e[26](null),o=!1,YM(a)}}}function aH(e,t,n){let r,i,{spellcheck:o="false"}=t,{autocorrect:a="off"}=t,{autocapitalize:s="off"}=t,{wrapLines:l=!0}=t,{allowNewline:c=!0}=t,{textFormat:u="text"}=t,{formatInput:d=KE}=t,{formatPaste:p=KE}=t,{styles:h}=t,{innerHTML:f}=t,{oninput:m=eE}=t,{enableTextStyleShortcuts:g=!1}=t;const y=()=>{if(!b)return;const e=document.createRange();e.selectNodeContents(b);const t=k();t.removeAllRanges(),t.addRange(e)},v=YA();let b;document.execCommand("defaultParagraphSeparator",!1,"br");const x=e=>e.replace(/<\/?(?:i|b|em|u|s|strike|strong|font)>/,"").replace(/style=".*?"/g,"").replace(/\n/gim,"<br>"),w=()=>{n(0,f=b.innerHTML);const e=rH(f);v("input",e),m(e),requestAnimationFrame((()=>b&&b.scrollTo(0,0)))},$=()=>{E(b);const e="html"===u?b.innerHTML:x(b.innerHTML);n(6,b.innerHTML=d(e),b),T(b),w()},S={b:"bold",i:"italic",u:"underline",s:"strikethrough"},_=e=>{const t=mE("span");return t.dataset.bookmark=e,t},C=(e,t,n)=>{const r=_(n);if(e.nodeType===Node.TEXT_NODE){const i=e.textContent;if("start"===n){const n=nH(i.substring(0,t)),o=nH(i.substring(t));e.replaceWith(n,r,o)}else{const n=nH(i.substring(0,t)),o=nH(i.substring(t));e.replaceWith(n,r,o)}}else e.nodeType===Node.ELEMENT_NODE&&e.insertBefore(r,e.childNodes[t])},k=()=>{const e=b.getRootNode();return"getSelection"in e?e.getSelection():document.getSelection()},E=e=>{const t=k();if(!t.getRangeAt||!t.rangeCount)return;const n=t.getRangeAt(0),{startOffset:r,endOffset:i,startContainer:o,endContainer:a}=n;if(e.contains(n.startContainer)&&e.contains(n.endContainer))if(o.nodeType===Node.TEXT_NODE&&o===a){const e=o.textContent,t=e.substring(0,r),n=_("start"),a=i-r>0?e.substring(r,i):"",s=_("end"),l=e.substring(i);o.replaceWith(t,n,a,s,l)}else C(o,r,"start"),C(a,i+(o===a?1:0),"end")},T=e=>{const t=I(e,"start"),n=I(e,"end");if(!t||!n)return;const r=document.createRange();r.setStart(t,0),r.setEnd(n,0);const i=k();i.removeAllRanges(),i.addRange(r),t.remove(),n.remove()},I=(e,t)=>{const n=e.children;for(let r=0;r<n.length;r++){const e=n[r];if(e.dataset.bookmark===t)return e;if(e.children.length){const n=I(e,t);if(n)return n}}};let P;return e.$$set=e=>{"spellcheck"in e&&n(1,o=e.spellcheck),"autocorrect"in e&&n(2,a=e.autocorrect),"autocapitalize"in e&&n(3,s=e.autocapitalize),"wrapLines"in e&&n(4,l=e.wrapLines),"allowNewline"in e&&n(5,c=e.allowNewline),"textFormat"in e&&n(16,u=e.textFormat),"formatInput"in e&&n(17,d=e.formatInput),"formatPaste"in e&&n(18,p=e.formatPaste),"styles"in e&&n(19,h=e.styles),"innerHTML"in e&&n(0,f=e.innerHTML),"oninput"in e&&n(20,m=e.oninput),"enableTextStyleShortcuts"in e&&n(21,g=e.enableTextStyleShortcuts)},e.$$.update=()=>{var t;if(64&e.$$.dirty[0]&&n(25,r=!!b),33554433&e.$$.dirty[0]&&r&&f&&(t=f)!==b.innerHTML&&(n(6,b.innerHTML=t,b),b===document.activeElement&&y()),524336&e.$$.dirty[0])if(!l&&c){const e=h.includes(":right")?"text-indent:-100px!important":h.includes(":center")?"":"min-width:calc(100% + 100px)!important";n(7,P=h+";overflow:visible;"+e)}else n(7,P=h);524288&e.$$.dirty[0]&&n(8,i=h.includes("text-stroke"))},[f,o,a,s,l,c,b,P,i,()=>{v("blur")},e=>{if(/escape/i.test(e.code))return e.stopPropagation(),void v("cancel");const t=e.ctrlKey||e.metaKey;if("html"===u&&t&&/b|i|u|s/.test(e.key))return g&&(e=>{const t=S[e];t&&document.execCommand(t)})(e.key),void e.preventDefault();/enter/i.test(e.code)&&(e.stopPropagation(),e.isComposing||(t?v("confirm"):(c||e.preventDefault(),document.execCommand("insertLineBreak"),e.preventDefault())))},()=>{},e=>{""!==e.data&&$()},e=>{const{inputType:t}=e;"insertCompositionText"!==t&&"deleteCompositionText"!==t&&$()},e=>{e.preventDefault();const t=e.clipboardData.getData("text/plain"),n="html"===u?t:x(t),r=p(n);if(!r.length)return;const i=k().getRangeAt(0);i.deleteContents(),i.insertNode(document.createTextNode(r)),w()},e=>e.replace("-webkit-text-stroke","--text-stroke").replace("text-shadow","--text-shadow"),u,d,p,h,m,g,()=>$(),()=>b&&b.focus(),y,r,function(e){eO[e?"unshift":"push"]((()=>{b=e,n(6,b)}))}]}class sH extends OO{constructor(e){super(),AO(this,e,aH,oH,XM,{spellcheck:1,autocorrect:2,autocapitalize:3,wrapLines:4,allowNewline:5,textFormat:16,formatInput:17,formatPaste:18,styles:19,innerHTML:0,oninput:20,enableTextStyleShortcuts:21,confirm:22,focus:23,select:24},null,[-1,-1])}get spellcheck(){return this.$$.ctx[1]}set spellcheck(e){this.$$set({spellcheck:e}),pO()}get autocorrect(){return this.$$.ctx[2]}set autocorrect(e){this.$$set({autocorrect:e}),pO()}get autocapitalize(){return this.$$.ctx[3]}set autocapitalize(e){this.$$set({autocapitalize:e}),pO()}get wrapLines(){return this.$$.ctx[4]}set wrapLines(e){this.$$set({wrapLines:e}),pO()}get allowNewline(){return this.$$.ctx[5]}set allowNewline(e){this.$$set({allowNewline:e}),pO()}get textFormat(){return this.$$.ctx[16]}set textFormat(e){this.$$set({textFormat:e}),pO()}get formatInput(){return this.$$.ctx[17]}set formatInput(e){this.$$set({formatInput:e}),pO()}get formatPaste(){return this.$$.ctx[18]}set formatPaste(e){this.$$set({formatPaste:e}),pO()}get styles(){return this.$$.ctx[19]}set styles(e){this.$$set({styles:e}),pO()}get innerHTML(){return this.$$.ctx[0]}set innerHTML(e){this.$$set({innerHTML:e}),pO()}get oninput(){return this.$$.ctx[20]}set oninput(e){this.$$set({oninput:e}),pO()}get enableTextStyleShortcuts(){return this.$$.ctx[21]}set enableTextStyleShortcuts(e){this.$$set({enableTextStyleShortcuts:e}),pO()}get confirm(){return this.$$.ctx[22]}get focus(){return this.$$.ctx[23]}get select(){return this.$$.ctx[24]}}const lH=["i","b","u","strike"].map((e=>({tag:e,tagOpen:new RegExp(`<${e}>`,"g"),tagClose:new RegExp(`</${e}>`,"g"),placeholderOpen:new RegExp(`___${e}O___`,"g"),placeholderClose:new RegExp(`___${e}C___`,"g")})));var cH=(e,t)=>hE(e)?parseFloat(e)/100*t:e,uH=(e,t)=>({x:BP(e.x,t.width),y:BP(e.y,t.height)});function dH(e,t,n){const r=e.slice();return r[318]=t[n],r[320]=n,r}function pH(e,t){let n,r,i,o,a,s,l,c,u,d,p,h=t[318].name+"";function f(){return t[198](t[320])}return i=new pz({props:{color:t[318].color}}),{key:e,first:null,c(){n=SA("li"),r=SA("button"),PO(i.$$.fragment),o=kA(),a=SA("span"),s=CA(h),c=kA(),RA(r,"class","PinturaShapeListItem"),RA(r,"type","button"),RA(r,"aria-label",l="Select shape "+t[318].name),this.first=n},m(e,t){wA(e,n,t),vA(n,r),RO(i,r,null),vA(r,o),vA(r,a),vA(a,s),vA(n,c),u=!0,d||(p=TA(r,"click",f),d=!0)},p(e,n){t=e;const o={};8388608&n[0]&&(o.color=t[318].color),i.$set(o),(!u||8388608&n[0])&&h!==(h=t[318].name+"")&&OA(s,h),(!u||8388608&n[0]&&l!==(l="Select shape "+t[318].name))&&RA(r,"aria-label",l)},i(e){u||(bO(i.$$.fragment,e),u=!0)},o(e){xO(i.$$.fragment,e),u=!1},d(e){e&&$A(n),MO(i),d=!1,p()}}}function hH(e){let t,n;return t=new eH({props:{visible:!0,points:e[14],bounds:e[4],rotatorPoint:e[31],scalarPoint:e[30],selectedPoint:e[19],enableDragEdges:e[20],enableDragPoints:e[33],enableRotatePoints:e[18],enableScalePoints:e[16]}}),t.$on("resizestart",e[42]),t.$on("resizemove",e[43]),t.$on("resizeend",e[44]),t.$on("rotatestart",e[45]),t.$on("rotatemove",e[46]),t.$on("rotateend",e[47]),t.$on("scalestart",e[48]),t.$on("scalemove",e[49]),t.$on("scaleend",e[50]),{c(){PO(t.$$.fragment)},m(e,r){RO(t,e,r),n=!0},p(e,n){const r={};16384&n[0]&&(r.points=e[14]),16&n[0]&&(r.bounds=e[4]),1&n[1]&&(r.rotatorPoint=e[31]),1073741824&n[0]&&(r.scalarPoint=e[30]),524288&n[0]&&(r.selectedPoint=e[19]),1048576&n[0]&&(r.enableDragEdges=e[20]),4&n[1]&&(r.enableDragPoints=e[33]),262144&n[0]&&(r.enableRotatePoints=e[18]),65536&n[0]&&(r.enableScalePoints=e[16]),t.$set(r)},i(e){n||(bO(t.$$.fragment,e),n=!0)},o(e){xO(t.$$.fragment,e),n=!1},d(e){MO(t,e)}}}function fH(e){let t,n,r,i;const o=[gH,mH],a=[];function s(e,t){return"modal"===e[5]?0:"inline"===e[5]?1:-1}return~(t=s(e))&&(n=a[t]=o[t](e)),{c(){n&&n.c(),r=EA()},m(e,n){~t&&a[t].m(e,n),wA(e,r,n),i=!0},p(e,i){let l=t;t=s(e),t===l?~t&&a[t].p(e,i):(n&&(yO(),xO(a[l],1,1,(()=>{a[l]=null})),vO()),~t?(n=a[t],n?n.p(e,i):(n=a[t]=o[t](e),n.c()),bO(n,1),n.m(r.parentNode,r)):n=null)},i(e){i||(bO(n),i=!0)},o(e){xO(n),i=!1},d(e){~t&&a[t].d(e),e&&$A(r)}}}function mH(e){let t,n,r,i,o,a,s={formatInput:e[52],wrapLines:!!e[15].width,textFormat:e[15].format,enableTextStyleShortcuts:e[6],allowNewline:e[32],styles:e[29]};return n=new sH({props:s}),e[202](n),n.$on("input",e[53]),n.$on("keyup",e[57]),n.$on("cancel",e[59]),n.$on("confirm",e[58]),{c(){t=SA("div"),PO(n.$$.fragment),RA(t,"class","PinturaInlineInput")},m(s,l){wA(s,t,l),RO(n,t,null),i=!0,o||(a=[dA(r=OD.call(null,t,e[28])),TA(t,"focusout",e[203])],o=!0)},p(e,t){const i={};32768&t[0]&&(i.wrapLines=!!e[15].width),32768&t[0]&&(i.textFormat=e[15].format),64&t[0]&&(i.enableTextStyleShortcuts=e[6]),2&t[1]&&(i.allowNewline=e[32]),536870912&t[0]&&(i.styles=e[29]),n.$set(i),r&&ZM(r.update)&&268435456&t[0]&&r.update.call(null,e[28])},i(e){i||(bO(n.$$.fragment,e),i=!0)},o(e){xO(n.$$.fragment,e),i=!1},d(r){r&&$A(t),e[202](null),MO(n),o=!1,YM(a)}}}function gH(e){let t,n;return t=new xB({props:{panelOffset:e[2],onconfirm:e[58],oncancel:e[59],buttonCancel:{icon:e[7].shapeIconInputCancel,label:e[7].shapeLabelInputCancel},buttonConfirm:{icon:e[7].shapeIconInputConfirm,label:e[7].shapeLabelInputConfirm,hideLabel:!0},willHandleKeydown:e[201],$$slots:{default:[yH]},$$scope:{ctx:e}}}),{c(){PO(t.$$.fragment)},m(e,r){RO(t,e,r),n=!0},p(e,n){const r={};4&n[0]&&(r.panelOffset=e[2]),128&n[0]&&(r.buttonCancel={icon:e[7].shapeIconInputCancel,label:e[7].shapeLabelInputCancel}),128&n[0]&&(r.buttonConfirm={icon:e[7].shapeIconInputConfirm,label:e[7].shapeLabelInputConfirm,hideLabel:!0}),4096&n[0]&&(r.willHandleKeydown=e[201]),671088896&n[0]|2048&n[10]&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(bO(t.$$.fragment,e),n=!0)},o(e){xO(t.$$.fragment,e),n=!1},d(e){MO(t,e)}}}function yH(e){let t,n,r,i;return{c(){t=SA("textarea"),RA(t,"spellcheck","false"),RA(t,"autocorrect","off"),RA(t,"autocapitalize","off")},m(o,a){wA(o,t,a),e[199](t),LA(t,e[27]),r||(i=[TA(t,"keydown",e[55]),TA(t,"keypress",e[54]),TA(t,"keyup",e[57]),TA(t,"input",e[53]),TA(t,"input",e[200]),dA(n=OD.call(null,t,e[29]))],r=!0)},p(e,r){134217728&r[0]&&LA(t,e[27]),n&&ZM(n.update)&&536870912&r[0]&&n.update.call(null,e[29])},d(n){n&&$A(t),e[199](null),r=!1,YM(i)}}}function vH(e){let t,n,r,i,o;return n=new Hz({props:{items:e[24],key:e[11]}}),{c(){t=SA("div"),PO(n.$$.fragment),RA(t,"class","PinturaShapeControls"),NA(t,"transform",e[26]),NA(t,"opacity",e[25])},m(a,s){wA(a,t,s),RO(n,t,null),r=!0,i||(o=[TA(t,"measure",e[204]),dA(hD.call(null,t))],i=!0)},p(e,r){const i={};16777216&r[0]&&(i.items=e[24]),2048&r[0]&&(i.key=e[11]),n.$set(i),67108864&r[0]&&NA(t,"transform",e[26]),33554432&r[0]&&NA(t,"opacity",e[25])},i(e){r||(bO(n.$$.fragment,e),r=!0)},o(e){xO(n.$$.fragment,e),r=!1},d(e){e&&$A(t),MO(n),i=!1,YM(o)}}}function bH(e){let t,n,r,i,o,a,s,l,c,u,d=[],p=new Map,h=e[23];const f=e=>e[318].id;for(let v=0;v<h.length;v+=1){let t=dH(e,h,v),n=f(t);p.set(n,d[v]=pH(n,t))}let m=e[17]&&hH(e),g=e[13]&&fH(e),y=e[21]>0&&vH(e);return{c(){t=SA("div"),n=SA("nav"),r=SA("ul");for(let e=0;e<d.length;e+=1)d[e].c();i=kA(),m&&m.c(),o=kA(),g&&g.c(),a=kA(),y&&y.c(),RA(n,"class","PinturaShapeList"),RA(n,"data-visible",e[22]),RA(t,"class","PinturaShapeEditor"),RA(t,"tabindex","0")},m(p,h){wA(p,t,h),vA(t,n),vA(n,r);for(let e=0;e<d.length;e+=1)d[e].m(r,null);vA(t,i),m&&m.m(t,null),vA(t,o),g&&g.m(t,null),vA(t,a),y&&y.m(t,null),e[205](t),l=!0,c||(u=[TA(n,"focusin",e[62]),TA(n,"focusout",e[63]),TA(t,"keydown",(function(){ZM(e[0]?eE:e[51])&&(e[0]?eE:e[51]).apply(this,arguments)})),TA(t,"nudge",(function(){ZM(e[0]?eE:e[61])&&(e[0]?eE:e[61]).apply(this,arguments)})),TA(t,"measure",e[197]),TA(t,"pointermove",(function(){ZM(e[0]?eE:e[64])&&(e[0]?eE:e[64]).apply(this,arguments)})),TA(t,"pointerleave",(function(){ZM(e[0]?eE:e[65])&&(e[0]?eE:e[65]).apply(this,arguments)})),TA(t,"interactionstart",(function(){ZM(e[0]?eE:e[36])&&(e[0]?eE:e[36]).apply(this,arguments)})),TA(t,"interactionupdate",(function(){ZM(e[0]?eE:e[38])&&(e[0]?eE:e[38]).apply(this,arguments)})),TA(t,"interactioncancel",(function(){ZM(e[0]?eE:e[37])&&(e[0]?eE:e[37]).apply(this,arguments)})),TA(t,"interactionrelease",(function(){ZM(e[0]?eE:e[39])&&(e[0]?eE:e[39]).apply(this,arguments)})),TA(t,"interactionend",(function(){ZM(e[0]?eE:e[40])&&(e[0]?eE:e[40]).apply(this,arguments)})),dA(hD.call(null,t)),dA(Dj.call(null,t)),dA(s=tB.call(null,t,{drag:!0,inertia:!0,multiTouch:!1,observeKeys:!0,shouldStartInteraction:xH,getEventPosition:e[206]}))],c=!0)},p(i,c){e=i,8388608&c[0]|16&c[2]&&(h=e[23],yO(),d=kO(d,c,f,1,e,h,p,r,CO,pH,null,dH),vO()),(!l||4194304&c[0])&&RA(n,"data-visible",e[22]),e[17]?m?(m.p(e,c),131072&c[0]&&bO(m,1)):(m=hH(e),m.c(),bO(m,1),m.m(t,o)):m&&(yO(),xO(m,1,1,(()=>{m=null})),vO()),e[13]?g?(g.p(e,c),8192&c[0]&&bO(g,1)):(g=fH(e),g.c(),bO(g,1),g.m(t,a)):g&&(yO(),xO(g,1,1,(()=>{g=null})),vO()),e[21]>0?y?(y.p(e,c),2097152&c[0]&&bO(y,1)):(y=vH(e),y.c(),bO(y,1),y.m(t,null)):y&&(yO(),xO(y,1,1,(()=>{y=null})),vO()),s&&ZM(s.update)&&8&c[0]&&s.update.call(null,{drag:!0,inertia:!0,multiTouch:!1,observeKeys:!0,shouldStartInteraction:xH,getEventPosition:e[206]})},i(e){if(!l){for(let e=0;e<h.length;e+=1)bO(d[e]);bO(m),bO(g),bO(y),l=!0}},o(e){for(let t=0;t<d.length;t+=1)xO(d[t]);xO(m),xO(g),xO(y),l=!1},d(n){n&&$A(t);for(let e=0;e<d.length;e+=1)d[e].d();m&&m.d(),g&&g.d(),y&&y.d(),e[205](null),c=!1,YM(u)}}}const xH=(e,t)=>e.target===t||"PinturaContentEditable"===e.target.className;function wH(e,t,n){let r,i,o,a,s,l,c,u,d,p,h,f,m,g,y,v,b,x,w,$,S,_,C,k,E,T,I,P,R,M,A,O,L,N,D,F,j,z,B,U,W,V,H,q,G,K,Y,Z,X,Q,J,ee,te,ne,re,ie,oe,ae,se,le,ce,ue,de,pe,he,fe,me=VM,ge=()=>(me(),me=eA(xe,(e=>n(193,ue=e))),xe);e.$$.on_destroy.push((()=>me()));let{uid:ye=ME()}=t,{ui:ve}=t,{disabled:be=!1}=t,{shapes:xe}=t;ge();let{selection:we}=t,{offset:$e}=t,{contextRotation:Se=0}=t,{contextFlipX:_e=!1}=t,{contextFlipY:Ce=!1}=t,{contextZoom:ke=1}=t,{active:Ee=!1}=t,{opacity:Te=1}=t,{parentRect:Ie}=t,{rootRect:Pe}=t,{utilRect:Re}=t,{hoverColor:Me}=t,{caretColor:Ae}=t,{gridColor:Oe}=t,{snapColor:Le}=t,{textInputMode:Ne="inline"}=t,{oninteractionstart:De=eE}=t,{oninteractionupdate:Fe=eE}=t,{oninteractionrelease:je=eE}=t,{oninteractionend:ze=eE}=t,{oninteractioncancel:Be=eE}=t,{onaddshape:Ue=eE}=t,{onupdateshape:We=eE}=t,{onselectshape:Ve=eE}=t,{onblurshape:He=eE}=t,{onremoveshape:qe=eE}=t,{ontapshape:Ge=eE}=t,{onhovershape:Ke=eE}=t,{ontriggerhistorywrite:Ye=eE}=t,{onhovercanvas:Ze=eE}=t,{ontapcanvas:Xe=eE}=t,{onleavecanvas:Qe=eE}=t,{beforeSelectShape:Je=()=>!0}=t,{beforeDeselectShape:et=()=>!0}=t,{beforeRemoveShape:tt=()=>!0}=t,{beforeUpdateShape:nt=(e,t,n)=>t}=t,{willRenderShapeControls:rt=KE}=t,{willRenderShapeTextControls:it=KE}=t,{willStartInteraction:ot=(e,t)=>!0}=t,{mapEditorPointToImagePoint:at}=t,{mapImagePointToEditorPoint:st}=t,{eraseRadius:lt}=t,{selectRadius:ct}=t,{enableButtonFlipVertical:ut=!1}=t,{enableTapToAddText:dt=!0}=t,{enableMultiSelect:pt=!1}=t,{enableTextStyleControls:ht=!0}=t,{locale:ft}=t,{snapThreshold:mt=0}=t,{snapPointer:gt=!0}=t,{enableSnapToContext:yt=!0}=t,{gridSize:vt=0}=t;const bt=e=>{if(0===mt)return[];let t;return yt&&(t={...Ie,x:0,y:0}),[...ue.filter((t=>t!==e)).filter((e=>!PR(e))).filter((e=>(e=>!0!==e.disableAcceptSnap)(e))).map((e=>pM({...e},Ie))),t].filter(Boolean)},xt=(e,t,n,r)=>0===e?{snapTargets:[]}:{snapThreshold:e,gridSize:t,gridRect:n,snapTargets:bt(r)},wt=XA("isAnimated");nA(e,wt,(e=>n(194,pe=e)));const $t=XA("softKeyboardState"),St=e=>e.set(tA(e)),_t=e=>tA(e).find(PR),Ct=(e,t)=>{if(!_t(t))return LR(e),It(e,t)},kt=e=>{_t(e)&&e.update((e=>e.filter((e=>!PR(e)))))},Et=e=>{const t=_t(e);if(t)return NR(t),St(e),t},Tt=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(e,t)=>({...e,...t});_t(t)&&t.update((t=>t.map((t=>PR(t)?n(t,e):t))))},It=function(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:xe).update((t=>[...t,e])),e},Pt=(e,t,n)=>{const r=nt({...e},t,{...n});return gM(e,r,n),e},Rt=(e,t)=>{const n=PT(e,t),r=xT(e,t),i=Math.PI/8,o=i*Math.round(r/i)-Se%i;t.x=e.x+n*Math.cos(o),t.y=e.y+n*Math.sin(o)},Mt=XA("keysPressed");nA(e,Mt,(e=>n(195,he=e)));const At=(e,t,n)=>0===e||t&&n?e:t||n?-e:e,Ot=e=>{if(null===e.x&&null===e.y)return Lt();e.x&&n(149,Nt=at({x:e.x,y:0}).x),e.y&&n(150,Dt=at({x:0,y:e.y}).y)},Lt=()=>{n(149,Nt=null),n(150,Dt=null)};let Nt=null,Dt=null;const Ft=(e,t)=>{const n=st(e);return at(ST(n,t))},jt=(e,t,n)=>{const r=(n-t)/e+1;return Array.from({length:r},((n,r)=>t+r*e))},zt=e=>{let t=[],n=[],r=e.points;if(void 0!==e.x1&&(r=[{x:e.x1,y:e.y1},{x:e.x2,y:e.y2}]),r){const e=r.map(st),i=rI(e),o=e[0],a=e[e.length-1];t=[i.x,i.x+.5*i.width,i.x+i.width,o.x,a.x],n=[i.y,i.y+.5*i.height,i.y+i.height,o.y,a.y]}else if(e.text||void 0!==e.width||void 0!==e.rx){let r;if(e.text&&void 0===e.height){const t=nR(e.text,e);r=aI(e.x,e.y,t.width,t.height)}else r=void 0!==e.width?nI(e):nI({x:e.x-e.rx,y:e.y-e.ry,width:2*e.rx,height:2*e.ry});const i=SI(r).map(st),o=Math.abs(e.rotation)>0?yI(r,e.rotation).map(st):i,a=rI(o),s=sI(a),l=.5*a.width,c=.5*a.height;t=[s.x-l,s.x,s.x+l],n=[s.y-c,s.y,s.y+c]}else if(void 0!==e.x){const r=st(e);t=[r.x],n=[r.y]}return{x:t,y:n}},Bt=(e,t,n)=>{let r,i,o,a=Number.Infinity,s=null,l=null;for(let c=0;c<e.length;c++){i=e[c];for(let e=0;e<t.length;e++)o=t[e],r=Math.abs(i-o),r<n&&(null===l||r<a)&&(a=r,s=i,l=o)}return{origin:s,target:l}},Ut=(e,t,n,r,i)=>{const o={x:null,y:null},a={x:null,y:null},s=t.map(zt);if(r>0){const e=st({x:0,y:0}),t=st({x:r,y:r}),n=st({x:i.width,y:i.height}),o=t.x-e.x,a=jt(o,e.x,n.x),l=jt(o,e.y,n.y);s.push({x:a,y:l})}return s.forEach((t=>{const{snapTranslation:r,snapLine:i}=((e,t,n)=>{const r={x:null,y:null},i={x:null,y:null},o=Bt(e.x,t.x,n);null!==o.target&&(r.x=o.target,i.x=o.target-o.origin);const a=Bt(e.y,t.y,n);return null!==a.target&&(r.y=a.target,i.y=a.target-a.origin),{snapTranslation:i,snapLine:r}})(e,t,n);null!==r.x&&(null===a.x||Math.abs(r.x)<Math.abs(a.x))&&(a.x=r.x||0,o.x=i.x),null!==r.y&&(null===a.y||Math.abs(r.y)<Math.abs(a.y))&&(a.y=r.y||0,o.y=i.y)})),{snapTranslation:a,snapLines:o}},Wt=(e,t)=>(null!==t.x&&(e.x+=t.x),null!==t.y&&(e.y+=t.y),e),Vt=(e,t,n,r)=>{const{snapThreshold:i=0,gridSize:o=0,gridRect:a,snapTargets:s=[]}=r||{};let l=null;if(_R(e)){if(i){const r=pM({...e},Ie),l=Ft(yR(t),n),c=Ft(vR(t),n),u=zt({...r,x1:l.x,y1:l.y,x2:c.x,y2:c.y}),{snapTranslation:d,snapLines:p}=Ut(u,s,i,o,a);Wt(n,d),Ot(p)}const r=Ft(yR(t),n),c=Ft(vR(t),n);l={x1:r.x,y1:r.y,x2:c.x,y2:c.y}}else if(e.points){if(VR(kn)&&nn(kn,{selectedPoint:void 0}),i){const r=pM({...e},Ie),l=zt({...r,points:t.points.map((e=>Ft(e,n)))}),{snapTranslation:c,snapLines:u}=Ut(l,s,i,o,a);Wt(n,c),Ot(u)}l={points:t.points.map((e=>Ft(e,n)))}}else if($R(e)||bR(e)||SR(e)){if(i){const r=pM({...e},Ie),l=Ft(t,n),c=zt({...r,...l}),{snapTranslation:u,snapLines:d}=Ut(c,s,i,o,a);Wt(n,u),Ot(d)}l=Ft(t,n)}l&&(Pt(e,l,Ie),en())},Ht={0:1,1:0,2:3,3:2},qt={0:3,1:2,2:1,3:0},Gt=(e,t,n,r,i)=>{const{shiftKey:o,snapThreshold:a=0,gridSize:s=0,gridRect:l,snapTargets:c=[],aspectRatio:u,beforeResizeShape:d=eE}=i||{},p=a?(e,t,n)=>{const{snapTranslation:r,snapLines:i}=Ut(zt(e),c,a,s,l);Wt(t,r),Ot(i);const o=Ft(n(),t);e.x=o.x,e.y=o.y}:eE;if(_R(e)||CR(e)&&AP(e,"pathClose")){const[i]=n,a=o?Rt:(e,t)=>t;let s,l,c;if(_R(e))0===i?(s=()=>yR(t),l=e=>a(vR(t),e),c=(e,t)=>{e.x1=t.x,e.y1=t.y}):1===i&&(s=()=>vR(t),l=e=>a(yR(t),e),c=(e,t)=>{e.x2=t.x,e.y2=t.y});else{const e=t.points;s=()=>({...e[i]}),l=t=>{const n=e[qV(i-1,e)],r=e[qV(i+1,e)];a(n,t),a(r,t)},c=(e,t)=>e.points=e.points.map(((e,n)=>i===n?t:e))}const u=Ft(s(),r);p(u,r,s),l(u),c(e,u)}else if(RR(e)||SR(e)||bR(e)){let o,a=!1,s=!1;if(SR(t))o=iI(t);else if(RR(t))o=nI(t);else if(AP(t,"width")){a=!0,o=nI(t);const e=nR(t.text,t);o.height=e.height}else{s=!0,o=nI(t);const e=nR(t.text,t);o.width=e.width,o.height=e.height}let l=u;e.aspectRatio?l=e.aspectRatio:!i.shiftKey||a||s||(l=o.width/o.height);const c=nI(o),h=sI(c),f=e.rotation,m=SI(c),g=yI(c,f);if(1===n.length){let t=n[0];e.flipX&&(t=Ht[t]),e.flipY&&(t=qt[t]);const[i,o,a,s]=m,c=st(g[t]),u=ST({...c},r),y=at(u);p(y,r,(()=>at(c)));const v=hT(y.x-g[t].x,y.y-g[t].y),b=yT(mT(v),-f),x=hT(m[t].x+b.x,m[t].y+b.y);let w;0===t&&(w=a),1===t&&(w=s),2===t&&(w=i),3===t&&(w=o);const $=rI([w,x]);if(l){const{width:e,height:t}=wI($,l),[n,r,i,o]=$I($);$.width=e,$.height=t,x.y<w.y&&($.y=i-t),x.x<w.x&&($.x=r-e)}const S=yI($,f,h),_=RT(S),C=yT(S[0],-f,_),k=yT(S[2],-f,_),E=rI([C,k]);d(E),Pt(e,SR(e)?dT(E):E,Ie)}else{n=n.map((t=>(e.flipX&&(t=Ht[t]),e.flipY&&(t=qt[t]),t)));const[t,i]=n.map((e=>g[e])),o={x:t.x+.5*(i.x-t.x),y:t.y+.5*(i.y-t.y)},[s,c]=n.map((e=>m[e])),[u,d]=n.map((e=>{const t=e+2;return t<4?m[t]:m[t-4]})),y={x:u.x+.5*(d.x-u.x),y:u.y+.5*(d.y-u.y)},v=st(o),b=ST({...v},r),x=at(b);p(x,r,(()=>at(v)));const w=hT(x.x-o.x,x.y-o.y),$=yT(mT(w),-f),S=_T(mT(s),c),_=$T(S,(e=>1-Math.abs(Math.sign(e)))),C=hT($.x*_.x,$.y*_.y);ST(s,C),ST(c,C);const k=rI(m);if(l){let e=k.width,t=k.height;0===_.y?t=e/l:e=t*l,k.width=e,k.height=t,0===_.y?k.y=y.y-.5*t:k.x=y.x-.5*e}const E=yI(k,f,h),T=RT(E),I=yT(E[0],-f,T),P=yT(E[2],-f,T),R=rI([I,P]);let M;SR(e)?M=dT(R):RR(e)?M=R:a&&(M={x:R.x,y:R.y,width:R.width}),Pt(e,M,Ie)}}en()};let Kt;const Yt=(e,t)=>{const n=e.points.filter(((e,n)=>n!==t));nn(e,{points:n,selectedPoint:void 0})},Zt=()=>{if(ue.length)return ue.find(PR)},Xt=()=>{if(ue.length)return ue.findIndex(PR)},Qt=()=>{const e=Zt();if(e)return NR(e),en(),e},Jt=()=>{if(!Zt())return;const e=[...ue];e.splice(Xt(),1),xe.set(e)},en=()=>{xe.set(ue)},tn=function(e){let t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).filter(Boolean).forEach((t=>delete e[t])),t&&en()},nn=function(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];e=Object.assign(e,t),n&&en()},rn=function(e,t,n){let r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];e[t]=n,r&&en()},on=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];ue.forEach((t=>nn(t,e,!1))),t&&en()},an=()=>[...ue].reverse().filter(TR),sn=()=>[...ue].reverse().find(TR),ln=()=>!!sn(),cn=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=ue.filter((e=>jR(e)&&FR(e))),i=r.findIndex((t=>t===e));if(!1===function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!tt(e))return!1;xe.set(ue.filter((t=>t!==e))),t||qe(e)}(e,n))return;if(dn=e,r.length-1<=0)return pn();if(!t)return!0;const o=i-1<0?r.length-1:i-1;return fn(r[o]),!0},un=()=>{if(a){const e=[];return o.forEach(((t,n)=>{jR(t)&&cn(t,n===o.length-1,!0)&&e.push(t)})),void(e.length&&Ye())}const e=sn();e&&cn(e)};let dn;const pn=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{storePrevious:t=!0}=e;Object.keys(gr).forEach((e=>gr[e]={}));const n=hn();t&&(dn=n),on({isSelected:!1,isEditing:!1,_prerender:!1}),n&&He(n)},hn=()=>ue.find(TR),fn=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(PR(e))return;const r=hn()||dn,i=TR(e);dn=void 0,Je(r,e)&&(n||pn(),(e=>{e.isSelected=!0})(e),!i&&Ve(e),t&&en())},mn=e=>{lr&&lr.confirm&&e.isEditing&&lr.confirm();const t={isSelected:!1,isEditing:!1,_prerender:!1};e.selectedPoint>-1&&(t.selectedPoint=void 0),nn(e,t),He(e)},gn=e=>{nn(e,{isSelected:!0,isEditing:!0,_prerender:"inline"===Ne})},yn=e=>{nn(e,{isSelected:!0,isEditing:!1,_prerender:!1})},vn=e=>{if(!e.length)return[];const t=e.filter(tt);return xe.set(ue.filter((e=>!t.includes(e)))),t},bn=e=>{const t=nR(e.text,e);return aI(e.x,e.y,e.width?Math.min(e.width,t.width):t.width,e.height?Math.min(e.height,t.height):t.height)},xn=e=>{if(RR(e))return nI(e);if(SR(e))return iI(e);const t=bn(e);return t.width=Math.max(10,e.width||t.width),t},wn=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:()=>!0;return[...e].reverse().filter(r).map((e=>({shape:e,priority:1}))).filter((e=>{const{shape:r}=e,i=pM(pR(r),Ie),o=n+.5*(i.strokeWidth||0);if($R(i))return zI(t,o,i,r.rotation);if(bR(i)){const n=xn(i),a=zI(t,o,n,r.rotation);let s=!1;if(a&&!TR(r)){const a=bn(i);"right"!==r.textAlign||r.flipX||(a.x=n.x+n.width-a.width),"center"===r.textAlign&&(a.x=n.x+.5*n.width-.5*a.width),s=zI(t,o,a,r.rotation,sI(n)),s||(e.priority=-1)}return a}return SR(i)?((e,t,n,r,i,o)=>{const a=NI(hT(n.x,n.y),n.rx,n.ry,r,i,o,12);return jI(e,t,a)})(t,o,i,r.rotation,r.flipX,r.flipY):_R(i)?DI(t,Math.max(16,o),yR(i),vR(i)):CR(i)&&i.pathClose?jI(t,o,i.points):!!CR(i)&&(1===i.points.length?IT(t,i.points[0])<o*o:FI(t,Math.max(16,o),i.points))})).sort(((e,t)=>e.priority<t.priority?1:e.priority>t.priority?-1:0)).map((e=>e.shape))},$n=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const i=Math.abs(r),o=GT(t,n),a=YT(o,i),s=((e,t)=>{let{start:n,end:r}=e;if(0===t)return[hT(n.x,n.y),hT(n.x,n.y),hT(r.x,r.y),hT(r.x,r.y)];const i=Math.atan2(r.y-n.y,r.x-n.x),o=Math.sin(i)*t,a=Math.cos(i)*t;return[hT(o+n.x,-a+n.y),hT(-o+n.x,a+n.y),hT(-o+r.x,a+r.y),hT(o+r.x,-a+r.y)]})(a,i);return e.filter((e=>{const t=pM(pR(e),Ie);if(_R(t)||CR(t)){const e=t.points?[...t.points]:[yR(t),vR(t)];return!!PI(a,e)}return((e,t)=>!!e.find((e=>RI(e,t)))||!!t.find((t=>RI(t,e))))(s,function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12;if($R(e))return yI(e,e.rotation,sI(e));if(bR(e)){const t=xn(e);return yI(t,e.rotation,sI(t))}return SR(e)?NI(hT(e.x,e.y),e.rx,e.ry,e.rotation,e.flipX,e.flipY,t):[]}(t))}))};let Sn,_n,Cn,kn,En,Tn,In,Pn=!1,Rn=!1,Mn=!1,An=!1;const On=e=>{In=e.map((e=>({shape:e,shapeOrigin:pR(e),shapeOriginComputed:pM(pR(e),Ie)})))},Ln=()=>{clearTimeout(_n),_n=void 0,n(152,An=!1),Lt()};let Nn=null;const Dn=e=>{const t=RP(e.rotation)&&0!==e.rotation;if($R(e)){if(e.width<1&&e.height<1)return;const n=sI(e),r=SI(e);return(e.flipX||e.flipY)&&MT(r,e.flipX,e.flipY,n.x,n.y),t?AT(r,e.rotation,n.x,n.y):r}if(SR(e)){if(e.rx<1&&e.ry<1)return;const n=e,r=SI(iI(e));return(e.flipX||e.flipY)&&MT(r,e.flipX,e.flipY,n.x,n.y),t?AT(r,e.rotation,n.x,n.y):r}if(_R(e))return[yR(e),vR(e)];if(CR(e)){if(e.bitmap&&!e.pathClose){const t=rI(e.points);return t.x-=.5*e.strokeWidth,t.y-=.5*e.strokeWidth,t.width+=e.strokeWidth,t.height+=e.strokeWidth,Dn({...e,...t})}return[...e.points]}if(bR(e)){if(e.width<5&&e.height<5)return;const n=xn(e);n.width=Math.max(10,n.width);const r=sI(n),i=SI(n);return(e.flipX||e.flipY)&&MT(i,e.flipX,e.flipY,r.x,r.y),t?AT(i,e.rotation,r.x,r.y):i}return[]},Fn=e=>{const t=Dn(e);let n,r;return e.flipY?(n=RT([t[0],t[1]]),r=bT(hT(t[1].x-t[2].x,t[1].y-t[2].y))):(n=RT([t[2],t[3]]),r=bT(hT(t[2].x-t[1].x,t[2].y-t[1].y))),kT(r,20/ke),{origin:n,dir:r}},jn=e=>t=>t.id===e,zn=e=>{const t=jn(e);return e=>e.filter((e=>t=>!e(t))(t))},Bn=e=>{const t=jn(e),n=zn(e);return()=>ve.update((e=>e.some(t)?n(e):e))},Un=e=>{const t=zn(e);return function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];ve.update((e=>[...t(e),...n.filter(Boolean)]))}},Wn=Bn("markup-hover"),Vn=Un("markup-hover");let Hn;const qn="markup-manipulator-segment-"+ye,Gn=Bn(qn),Kn=Un(qn),Yn=(e,t)=>{const n=e[t],r=t-1<0?e[e.length-1]:e[t-1],i=t+1<e.length?e[t+1]:e[0],o=_T(mT(r),n);bT(o);const a=ST(kT(o,10),n),s=_T(mT(i),n);return bT(s),[a,n,ST(kT(s,10),n)]},Zn=()=>{n(153,Hn=void 0),Wn()},Xn="markup-multi-selection-segment-"+ye,Qn=Bn(Xn),Jn=Un(Xn),er=(e,t)=>{if(mt<=0)return e;if(t)return Lt(),e;const n=at(e),i=bt(),{snapTranslation:o,snapLines:a}=Ut(zt(n),i,mt,vt,r);return Ot(a),Wt(e,o),e},tr=XN(0);nA(e,tr,(e=>n(196,fe=e)));const nr="markup-grid-line-"+ye,rr=Bn(nr),ir=Un(nr),or="markup-snap-line",ar=Bn(or),sr=Un(or);let lr;$t.subscribe((e=>{"inline"===Ne&&i&&i.isEditing&&"hidden"===e&&pr()}));const cr=e=>{n(8,lr.innerHTML=(e=>function(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:lH).forEach((t=>{let{tag:n,placeholderOpen:r,placeholderClose:i}=t;e=e.replace(r,`<${n}>`).replace(i,`</${n}>`)})),e}(e=(e=function(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:lH).forEach((t=>{let{tag:n,tagOpen:r,tagClose:i}=t;e=e.replace(r,`___${n}O___`).replace(i,`___${n}C___`)})),e}(e)).replace(/ {2,}/g," ").replace(/\u00a0/g,"&nbsp;").split("\n").join("<br>")))(e),lr)},ur=()=>{const e=(e=>{const t=void 0===e.value?e.innerHTML:e.value,n="text"===i.format?rH(t).split(/<br>|<br\/>/g).join("\n").replace(/&nbsp;/g,String.fromCharCode(160)).replace(/&amp;/g,"&"):t;return xR(i)&&!1!==i.disableNewline?(e=>{const t=e.split(/[\n\r]/g);return t.length>1?t.map((e=>e.trim())).filter((e=>e.length)).join(" "):t[0]})(n):n})(lr),t=UR(i,e),n=!0===t?e:t;let r=j.x,o=j.y;if(!i.height){const e=yI({...B},i.rotation),t=nR(n,d),a=yI({x:r,y:o,...t},i.rotation),[s,,l]=e,[c,,u]=a;let p=s,h=c;i.flipX&&(p=l,h=u);const f=_T(mT(p),h);r+=f.x,o+=f.y}nn(i,{x:hE(F.x)?BP(r,Ie.width):r,y:hE(F.y)?BP(o,Ie.height):o,text:n})},dr=e=>{const{key:t,ctrlKey:n,metaKey:r,altKey:i}=e;return"Enter"===t&&(n||i||r)},pr=()=>{c&&Qt(),lr&&lr.confirm&&lr.confirm(),lr&&ur(),yn(i),We(i)},hr=()=>{c?Jt():(nn(i,{text:F.text,x:F.x,y:F.y}),yn(i))},fr=function(e,t,n){let r,i,{flipX:o,flipY:a,rotation:s}=n,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"top left";const[c,u,d,p]=yI(e,s),[h,f,m,g]=yI(t,s);return"top center"===l?(r=RT(a?[p,d]:[c,u]),i=RT(a?[g,m]:[h,f])):"top right"===l&&!o||"top left"===l&&o?(r=a?d:u,i=a?m:f):(r=a?p:c,i=a?g:h),_T(mT(r),i)},mr=(e,t,n)=>hT(hE(e.x)?BP(t.x+n.x,Ie.width):t.x+n.x,hE(e.y)?BP(t.y+n.y,Ie.height):t.y+n.y),gr={},yr=()=>Yt(i,i.selectedPoint),vr=()=>gn(i),br=(e,t,n)=>{const{width:r,height:i,...o}=n,a=nR(t.text,o),s=fr(aI(n.x,n.y,e.width,e.height),aI(n.x,n.y,a.width,a.height),n,"top "+t.textAlign),l=!1!==n.disableNewline;tn(t,["width","height",l&&"textAlign"]),nn(t,{...mr(t,n,s)})},xr=function(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const{height:o,...a}=n,s=qT(nR(t.text,a),(e=>Math.ceil(e))),l=zT(i.width||n.width||r.width,s.height),c=i.textAlign||"left",u=fr(aI(n.x,n.y,e.width,e.height),aI(n.x,n.y,l.width,l.height),n,"top "+c);tn(t,["height"]),nn(t,{...mr(t,n,u),width:hE(t.width)?BP(l.width,Ie.width):l.width,textAlign:c})},wr=function(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const o=zT(i.width||r.width,i.height||r.height),a=i.textAlign||"left",s=fr(aI(n.x,n.y,e.width,e.height),aI(n.x,n.y,o.width,o.height),n,"top "+a);nn(t,{...mr(t,n,s),width:hE(t.width)?BP(o.width,Ie.width):o.width,height:hE(t.width)?BP(o.height,Ie.height):o.height,textAlign:a})},$r=()=>{const e=qT(nR(i.text,d),(e=>Math.ceil(e))),t=AP(i,"height"),n=!t&&AP(i,"width"),r=i.id;let o=gr[r];if(o||(gr[r]={},o=gr[r]),t){o.textAlign=i.textAlign,o.width=d.width,o.height=d.height;const t=zT(d.width,d.height);WR(i,"auto-height")?xr(t,i,d,e,o):WR(i,"auto-width")&&br(t,i,d)}else if(n){o.textAlign=i.textAlign,o.width=d.width;const t=zT(d.width,e.height);WR(i,"auto-width")?br(t,i,d):WR(i,"fixed-size")&&wr(t,i,d,e,o)}else{o.textAlign=i.textAlign||o.textAlign;const t=zT(Math.ceil(e.width),Math.ceil(e.height));WR(i,"fixed-size")?wr(t,i,d,e,o):WR(i,"auto-height")&&xr(t,i,d,e,o)}},Sr=e=>{e.stopPropagation();const t=i.flipX||!1;rn(i,"flipX",!t),We(i)},_r=e=>{e.stopPropagation();const t=i.flipY||!1;rn(i,"flipY",!t),We(i)},Cr=e=>{rn(i,"opacity",e)},kr=e=>{Cr(e),We(i)},Er=e=>{e.stopPropagation(),e.target.blur(),un()},Tr=e=>{e.stopPropagation(),ue.findIndex((e=>e===i))!==ue.length-1&&(xe.set(ue.filter((e=>e!==i)).concat([i])),We(i))},Ir=e=>{e.stopPropagation(),Pr()},Pr=()=>{const e=(a?o:[i]).filter(zR).map((e=>{const t=pR(e);t.id=ME();const n=hT(50,-50);if(AP(t,"points")){const e=mM(t,["points"],Ie);e.points.forEach((e=>{e.x+=n.x,e.y+=n.y})),gM(t,e,Ie)}else if(_R(t)){const e=mM(t,["x1","y1","x2","y2"],Ie);e.x1+=n.x,e.y1+=n.y,e.x2+=n.x,e.y2+=n.y,gM(t,e,Ie)}else{const e=mM(t,["x","y"],Ie);e.x+=50,e.y-=50,gM(t,e,Ie)}return xe.set([...ue,t]),Ue(t),t}));if(e.length>1)return pn(),void e.forEach((e=>{fn(e,!0,!0)}));fn(e[0])},Rr=XN(0,{stiffness:.2,damping:.7});let Mr;nA(e,Rr,(e=>n(21,de=e)));const Ar=(e,t)=>{const{disableTextLayout:n=[]}=t;return"height"in t?n.includes("auto-height")?e.shapeIconButtonTextLayoutAutoWidth:e.shapeIconButtonTextLayoutAutoHeight:"width"in t?n.includes("auto-width")?e.shapeIconButtonTextLayoutFixedSize:e.shapeIconButtonTextLayoutAutoWidth:n.includes("fixed-size")?e.shapeIconButtonTextLayoutAutoHeight:e.shapeIconButtonTextLayoutFixedSize},Or=(e,t)=>{const{disableTextLayout:n=[]}=t;return"height"in t?n.includes("auto-height")?e.shapeTitleButtonTextLayoutAutoWidth:e.shapeTitleButtonTextLayoutAutoHeight:"width"in t?n.includes("auto-width")?e.shapeTitleButtonTextLayoutFixedSize:e.shapeTitleButtonTextLayoutAutoWidth:n.includes("fixed-size")?e.shapeTitleButtonTextLayoutAutoHeight:e.shapeTitleButtonTextLayoutFixedSize};let Lr,Nr=!1,Dr=pT();const Fr=e=>{Ke(e),n(153,Hn=e)},jr=e=>{fn(ue[e])};let zr;function Br(e){$B(e)&&e.target===zr&&e.preventDefault()}return KA((()=>{ar(),rr(),Gn(),Wn(),zr.removeEventListener("touchmove",Br,!1)})),e.$$set=e=>{"uid"in e&&n(67,ye=e.uid),"ui"in e&&n(68,ve=e.ui),"disabled"in e&&n(0,be=e.disabled),"shapes"in e&&ge(n(1,xe=e.shapes)),"selection"in e&&n(69,we=e.selection),"offset"in e&&n(2,$e=e.offset),"contextRotation"in e&&n(70,Se=e.contextRotation),"contextFlipX"in e&&n(71,_e=e.contextFlipX),"contextFlipY"in e&&n(72,Ce=e.contextFlipY),"contextZoom"in e&&n(73,ke=e.contextZoom),"active"in e&&n(74,Ee=e.active),"opacity"in e&&n(75,Te=e.opacity),"parentRect"in e&&n(76,Ie=e.parentRect),"rootRect"in e&&n(3,Pe=e.rootRect),"utilRect"in e&&n(4,Re=e.utilRect),"hoverColor"in e&&n(77,Me=e.hoverColor),"caretColor"in e&&n(78,Ae=e.caretColor),"gridColor"in e&&n(79,Oe=e.gridColor),"snapColor"in e&&n(80,Le=e.snapColor),"textInputMode"in e&&n(5,Ne=e.textInputMode),"oninteractionstart"in e&&n(81,De=e.oninteractionstart),"oninteractionupdate"in e&&n(82,Fe=e.oninteractionupdate),"oninteractionrelease"in e&&n(83,je=e.oninteractionrelease),"oninteractionend"in e&&n(84,ze=e.oninteractionend),"oninteractioncancel"in e&&n(85,Be=e.oninteractioncancel),"onaddshape"in e&&n(86,Ue=e.onaddshape),"onupdateshape"in e&&n(87,We=e.onupdateshape),"onselectshape"in e&&n(88,Ve=e.onselectshape),"onblurshape"in e&&n(89,He=e.onblurshape),"onremoveshape"in e&&n(90,qe=e.onremoveshape),"ontapshape"in e&&n(91,Ge=e.ontapshape),"onhovershape"in e&&n(92,Ke=e.onhovershape),"ontriggerhistorywrite"in e&&n(93,Ye=e.ontriggerhistorywrite),"onhovercanvas"in e&&n(94,Ze=e.onhovercanvas),"ontapcanvas"in e&&n(95,Xe=e.ontapcanvas),"onleavecanvas"in e&&n(96,Qe=e.onleavecanvas),"beforeSelectShape"in e&&n(97,Je=e.beforeSelectShape),"beforeDeselectShape"in e&&n(98,et=e.beforeDeselectShape),"beforeRemoveShape"in e&&n(99,tt=e.beforeRemoveShape),"beforeUpdateShape"in e&&n(100,nt=e.beforeUpdateShape),"willRenderShapeControls"in e&&n(101,rt=e.willRenderShapeControls),"willRenderShapeTextControls"in e&&n(102,it=e.willRenderShapeTextControls),"willStartInteraction"in e&&n(103,ot=e.willStartInteraction),"mapEditorPointToImagePoint"in e&&n(104,at=e.mapEditorPointToImagePoint),"mapImagePointToEditorPoint"in e&&n(105,st=e.mapImagePointToEditorPoint),"eraseRadius"in e&&n(106,lt=e.eraseRadius),"selectRadius"in e&&n(107,ct=e.selectRadius),"enableButtonFlipVertical"in e&&n(108,ut=e.enableButtonFlipVertical),"enableTapToAddText"in e&&n(109,dt=e.enableTapToAddText),"enableMultiSelect"in e&&n(110,pt=e.enableMultiSelect),"enableTextStyleControls"in e&&n(6,ht=e.enableTextStyleControls),"locale"in e&&n(7,ft=e.locale),"snapThreshold"in e&&n(111,mt=e.snapThreshold),"snapPointer"in e&&n(112,gt=e.snapPointer),"enableSnapToContext"in e&&n(113,yt=e.enableSnapToContext),"gridSize"in e&&n(114,vt=e.gridSize)},e.$$.update=()=>{var t,me;if(16384&e.$$.dirty[2]|2097152&e.$$.dirty[3]&&n(180,r=vt>0?{x:0,y:0,...Ie}:void 0),1&e.$$.dirty[0]|128&e.$$.dirty[6]&&n(12,i=!be&&ue&&(Zt()||sn())),131072&e.$$.dirty[3]|128&e.$$.dirty[6]&&n(172,o=pt?ue.filter(TR):[]),131072&e.$$.dirty[5]&&n(171,a=o.length>1),16384&e.$$.dirty[2]|196608&e.$$.dirty[5]&&n(192,s=a?o.map((e=>pM(pR(e),Ie))):[]),4096&e.$$.dirty[0]&&n(189,l=!!i),4096&e.$$.dirty[0]&&n(174,c=i&&PR(i)),4096&e.$$.dirty[0]|524288&e.$$.dirty[5]&&n(11,u=i&&!c?i.id:void 0),4104&e.$$.dirty[0]|16384&e.$$.dirty[2]&&n(15,d=Pe&&i&&pM(pR(i),Ie)),4096&e.$$.dirty[0]|524288&e.$$.dirty[5]&&n(155,p=!(!i||!c)),36864&e.$$.dirty[0]|8192&e.$$.dirty[2]&&n(187,h=i&&Te&&Dn(d)||[]),65536&e.$$.dirty[5]|64&e.$$.dirty[6]&&n(184,f=a?s.map(Dn):[]),4096&e.$$.dirty[0]|65536&e.$$.dirty[5]&&n(191,m=!a&&i&&qR(t=i)&&GR(t)&&!0!==t.disableResize&&(RR(t)||wR(t)||SR(t)||_R(t)||CR(t)&&AP(t,"pathClose"))&&!kR(i)),4096&e.$$.dirty[0]|65536&e.$$.dirty[5]&&n(18,g=!a&&i&&(e=>qR(e)&&!0!==e.disableRotate&&(RR(e)||AP(e,"text")||SR(e)))(i)&&!kR(i)),4096&e.$$.dirty[0]&&n(16,y=i&&bR(i)&&!wR(i)&&!kR(i)&&!1===i.disableTextScale),4096&e.$$.dirty[0]|32&e.$$.dirty[6]&&n(20,v=!!m&&function(e){return!!e&&(bR(e)&&!e.height?[[1,2],[3,0]]:!_R(e)&&!CR(e))}(i)),1052672&e.$$.dirty[0]|32&e.$$.dirty[6]&&n(33,b=!!i&&!Array.isArray(v)&&m),196608&e.$$.dirty[5]&&n(190,x=a?(e=>{const t=e.map((e=>Dn(pM(e,Ie)))).flat(),n=rI(t);return SI(n)})(o):[]),4096&e.$$.dirty[0]|65536&e.$$.dirty[5]|2&e.$$.dirty[6]&&n(17,w=i&&h.length>1||a),4096&e.$$.dirty[3]|65536&e.$$.dirty[5]|18&e.$$.dirty[6]&&n(185,$=a?x.map(st):h.map(st)),4&e.$$.dirty[0]|1073741824&e.$$.dirty[5]&&n(14,S=$.map((e=>hT(e.x-$e.x,e.y-$e.y)))),4096&e.$$.dirty[0]&&n(19,_=i&&i.points&&RP(i.selectedPoint)?i.selectedPoint:-1),524288&e.$$.dirty[0]&&n(164,C=_>=0),540672&e.$$.dirty[0]|512&e.$$.dirty[5]&&n(169,k=C?S[_]:void 0),4096&e.$$.dirty[0]|8&e.$$.dirty[6]&&n(32,E=l&&(wR(i)?!AP(i,"disableNewline")||!i.disableNewline:!1===i.disableNewline)),4096&e.$$.dirty[3]|536870912&e.$$.dirty[4]&&(Hn&&st&&!TR(Hn)&&FR(Hn)?(e=>{const t=Dn(pM(pR(e),Ie));if(!t)return;const n=t.map(st),r=!!e.pathClose||!(!e.bitmap&&(CR(e)||_R(e))),i="hook"===e.selectionStyle,o=i?n.map(((e,t,n)=>({id:"markup-hover",points:Yn(n,t),strokeColor:[0,0,0,.1],strokeWidth:2}))):[{id:"markup-hover",points:n.map((e=>hT(e.x+1,e.y+1))),strokeColor:[0,0,0,.1],strokeWidth:2,pathClose:r}],a=i?n.map(((e,t,n)=>({id:"markup-hover",points:Yn(n,t),strokeColor:Me,strokeWidth:2}))):[{id:"markup-hover",points:n,strokeColor:Me,strokeWidth:2,pathClose:r}];Vn(...o,...a)})(Hn):Wn()),442368&e.$$.dirty[0]|8192&e.$$.dirty[2]&&n(186,T=w&&g&&Te&&S?(e=>{const t=Fn(e),n=st({x:t.origin.x+t.dir.x,y:t.origin.y+t.dir.y});return{origin:st(t.origin),position:n}})(d):void 0),4&e.$$.dirty[0]|1&e.$$.dirty[6]&&n(31,I=T&&hT(T.position.x-$e.x,T.position.y-$e.y)),245760&e.$$.dirty[0]|8192&e.$$.dirty[2]&&n(188,P=w&&y&&Te&&S?(e=>{const t=Dn(e);let n=2;e.flipX&&e.flipY?n=0:e.flipX?n=3:e.flipY&&(n=1);const r={...t[n]};return st({x:r.x,y:r.y})})(d):void 0),4&e.$$.dirty[0]|4&e.$$.dirty[6]&&n(30,R=P&&hT(P.x-$e.x,P.y-$e.y)),512&e.$$.dirty[6]&&n(179,L=!!(he||[]).find((e=>[91,93,17].includes(e)))),524288&e.$$.dirty[3]|16777216&e.$$.dirty[5]&&n(181,M=!(L||!gt)),4096&e.$$.dirty[0]|8192&e.$$.dirty[2]|1073741824&e.$$.dirty[4]|1141374976&e.$$.dirty[5]&&i&&$&&Te>0&&(i===Hn&&Zn(),((e,t,n)=>{if(!FR(t))return;const r=CR(t),i=r&&AP(t,"pathClose"),o=i&&(e=>e.strokeWidth&&(e=>{const t=e.strokeColor;return!!t&&(3===t.length||t[3]>0)})(e))(t),a=PR(t),s=kR(t),l="hook"===t.selectionStyle,c=!0!==t.disableShowPoints,{selectionOpacity:u=1}=t;if(a&&r&&!i)return;const d=[],p=[...$],f=p[p.length-1],m=p[0],g=(s?.05:.1)*e*u,y=g>0,v=(s?.5:1)*e*u,b=v>0,x=[0,0,0],w=[1,1,1],S=s?1:1.5;he.includes(16)&&f&&n&&Rt(f,n);const _=(p.length&&i&&a&&n?IT(m,n):1/0)<=256,C=(p.length&&i&&a&&n?IT(f,n):1/0)<=256;!_&&n&&p.push(n);const k=p.length>1,E=!!t.pathClose||!(!t.bitmap&&(CR(t)||_R(t)))||p.length>2&&_;k&&y&&(l?d.push(...p.map(((e,t,n)=>({id:qn,points:Yn(n,t),strokeColor:x,opacity:g})))):d.push({id:qn,points:p.map((e=>hT(e.x+1,e.y+1))),pathClose:E,strokeColor:x,strokeWidth:2,opacity:g})),i&&y&&c&&d.push(...p.map((e=>({id:qn,...e,rx:2*S,ry:2*S,backgroundColor:x,opacity:g})))),T&&y&&d.push({id:qn,points:[hT(T.origin.x+1,T.origin.y+1),hT(T.position.x+1,T.position.y+1)],strokeColor:x,strokeWidth:2,opacity:g}),k&&b&&(l?d.push(...p.map(((e,t,n)=>({id:qn,points:Yn(n,t),strokeColor:w,strokeWidth:S,opacity:v})))):d.push({id:qn,points:p,pathClose:E,strokeColor:w,strokeWidth:S,backgroundColor:a&&i&&t.backgroundColor&&t.backgroundColor[3]>0?t.backgroundColor:[0,0,0,0],opacity:v})),i&&c&&d.push(...p.map((e=>({id:qn,...e,rx:3*S,ry:3*S,backgroundColor:[.5,.5,.5],strokeWidth:S,strokeColor:w})))),i&&a&&c&&$.length>=3&&d.push({...m,id:qn,rx:S*(_?5:4),ry:S*(_?5:4),backgroundColor:_?Me:[.5,.5,.5],strokeWidth:S,strokeColor:w}),i&&a&&o&&c&&!_&&h.length>=2&&d.push({...f,id:qn,rx:S*(C?5:4),ry:S*(C?5:4),backgroundColor:C?Me:[.5,.5,.5],strokeWidth:S,strokeColor:w}),T&&b&&!l&&d.push({id:qn,points:[{x:T.origin.x,y:T.origin.y},{x:T.position.x,y:T.position.y}],strokeColor:w,strokeWidth:S,opacity:v}),Kn(...d)})(Te,i,c&&CR(i)?er({...Lr},!M):void 0)),4096&e.$$.dirty[0]&&(i||(Zn(),Gn())),4096&e.$$.dirty[3]|536870912&e.$$.dirty[5])if(f.length){Qn();const e=f.map((e=>({id:Xn,points:e.map(st),strokeWidth:1,strokeColor:[1,1,1,.5],pathClose:!0})));Jn(...e)}else Qn();536870912&e.$$.dirty[4]&&n(182,A=!!Hn),134217728&e.$$.dirty[4]&&n(183,O=!!kn),1073741824&e.$$.dirty[4]|469762048&e.$$.dirty[5]&&(!Lr||O||A||er({...Lr},!M)),131072&e.$$.dirty[2]|2101248&e.$$.dirty[3]|33554432&e.$$.dirty[5]|1024&e.$$.dirty[6]&&vt>0&&r&&st&&((e,t,n,r)=>{const i=st({x:0,y:0}),o=st({x:e,y:e}),a=st({x:t.width,y:t.height}),s=o.x-i.x;if(tr.set(s>6?1:0),r<=0)return rr();const l=jt(s,i.x,a.x).map((e=>({id:nr,opacity:r,points:[{x:e,y:i.y},{x:e,y:a.y}],strokeWidth:1,strokeColor:n}))),c=jt(s,i.y,a.y).map((e=>({id:nr,opacity:r,points:[{x:i.x,y:e},{x:a.x,y:e}],strokeWidth:1,strokeColor:n})));ir(...c,...l)})(vt,r,Oe,fe),262144&e.$$.dirty[2]|4096&e.$$.dirty[3]|100663296&e.$$.dirty[4]|16777216&e.$$.dirty[5]&&st&&(L?ar():((e,t,n)=>{if(null===e&&null===t)return ar();let r,i;null!==e&&(r={id:or,strokeColor:n,strokeWidth:1.5,points:[st({x:e,y:0}),st({x:e,y:Ie.height})]}),null!==t&&(i={id:or,strokeColor:n,strokeWidth:1.5,points:[st({x:0,y:t}),st({x:Ie.width,y:t})]}),sr(r,i)})(Nt,Dt,Le)),4096&e.$$.dirty[2]&&(e=>{if(!e)return on({_prerender:!1});const t=ue.find((e=>e.isEditing));t&&nn(t,{_prerender:"inline"===Ne})})(Ee),512&e.$$.dirty[6]&&he&&he.length&&(()=>{const[e]=he;8!==e&&46!==e||ln()&&(i.isEditing||jR(i)&&(CR(i)&&RP(i.selectedPoint)?setTimeout((()=>Yt(i,i.selectedPoint)),0):setTimeout((()=>un()),0)))})(),288&e.$$.dirty[0]&&lr&&"inline"===Ne&&lr.focus(),4096&e.$$.dirty[0]&&n(178,N=i&&bR(i)),4096&e.$$.dirty[0]|8388608&e.$$.dirty[5]&&n(13,D=N&&!1!==UR(i)&&kR(i)),8192&e.$$.dirty[0]&&n(173,F=D?{...i}:void 0),16384&e.$$.dirty[2]|262144&e.$$.dirty[5]&&n(175,j=F&&pM({...F},Ie)),1048576&e.$$.dirty[5]&&n(177,z=j&&nR(j.text,j)),5242880&e.$$.dirty[5]&&(B=j&&aI(j.x,j.y,z.width,z.height)),12288&e.$$.dirty[0]&&n(27,U=D?i.text:""),12296&e.$$.dirty[0]|16384&e.$$.dirty[2]&&n(176,W=Pe&&i&&D&&pM({...pR(i),width:RP(i.width)?Math.floor(i.width):void 0,height:RP(i.height)?Math.floor(i.height):void 0},Ie)),8224&e.$$.dirty[0]|2097152&e.$$.dirty[5]&&n(29,V=D&&((e,t)=>{const{textAlign:n="left",fontFamily:r="sans-serif",fontWeight:i="normal",fontStyle:o="normal",letterSpacing:a="normal",textShadowX:s=0,textShadowY:l=0,textShadowBlur:c=0,textShadowColor:u,textOutlineWidth:d=0,textOutlineColor:p}=e,h="!important",f=`caret-color:${q};text-align:${n}${h};font-family:${r}${h};font-weight:${i}${h};font-style:${o}${h};letter-spacing:${RP(a)?a+"px":"normal"}${h}`;if("modal"===t)return f;const m=d?`;-webkit-text-stroke:${2*d}px ${UP(p)} ${h}`:"",g=c||s||l?`;text-shadow:${s}px ${l}px ${c}px ${UP(u)} ${h}`:"";let y=e.fontSize,v=1,b="";y>1e3&&NE()&&(v=y/1e3,b=`transform-origin:0 0;transform:scale(${v})`,y=1e3);let x=e.lineHeight/v;const w=UP(e.color),$=.5*Math.max(0,y-x);return`--font-scalar:${v};--bottom-inset:${$}px;padding:${$}px 0 0${h};color:${w}${h};font-size:${y}px${h};line-height:${x}px${h};${f};${b}${m}${g}`})(W,Ne)),8196&e.$$.dirty[0]|2304&e.$$.dirty[2]|2097152&e.$$.dirty[5]&&n(28,H=D&&((e,t,n,r)=>{let o,a;e.width&&e.height?(o=sI(e),a=NT(e)):(a=nR(i.text,d),a.width=d.width||a.width,o=hT(e.x+.5*a.width,e.y+.5*a.height));const s=Math.max(0,e.fontSize-e.lineHeight)+e.lineHeight,l=st(o);let c=l.x-t.x-.5*a.width,u=l.y-t.y-.5*a.height,p=e.flipX,h=e.flipY,f=e.rotation;_e&&Ce?(p=!p,h=!h):_e?(p=!p,f=-f):Ce&&(h=!h,f=-f),f+=r;const m=n*(p?-1:1),g=n*(h?-1:1);return`--line-height:${s}px;width:${a.width}px;height:${a.height}px;transform:translate(${c}px,${u}px) rotate(${f}rad) scale(${m}, ${g})`})(W,$e,ke,Se)),65536&e.$$.dirty[2]&&(q=Ae?UP(Ae):"auto"),8480&e.$$.dirty[0]&&D&&lr&&"inline"===Ne&&cr(U),4096&e.$$.dirty[0]|33&e.$$.dirty[5]&&n(160,G=i&&!p?i:G),32&e.$$.dirty[5]&&n(162,K=G&&BR(G)),32&e.$$.dirty[5]&&n(157,Y=G&&WR(G)),32&e.$$.dirty[5]&&n(159,Z=G&&zR(G)),32&e.$$.dirty[5]&&n(158,X=G&&jR(G)),65568&e.$$.dirty[5]&&n(161,Q=!a&&G&&(e=>!0!==e.disableReorder)(G)),32&e.$$.dirty[5]&&n(156,J=G&&!1!==UR(G)),32&e.$$.dirty[5]&&n(163,ee=G&&AP(G,"backgroundImage")&&DR(G,"opacity")),4128&e.$$.dirty[0]&&n(166,te=i&&"html"===i.format&&"inline"===Ne),4096&e.$$.dirty[0]|2049&e.$$.dirty[5]&&n(170,ne=i&&(!p||te)),268435456&e.$$.dirty[4]|32768&e.$$.dirty[5]|256&e.$$.dirty[6]&&Rr.set(ne&&!An?1:0,{hard:!1===pe}),16384&e.$$.dirty[0]|40960&e.$$.dirty[5]&&n(168,re=ne&&S.length?(me=rI(S),$T(hT(me.x+.5*me.width,me.y),fF)):re),528&e.$$.dirty[0]|24576&e.$$.dirty[5]&&n(167,ie=(k||re)&&Mr&&Re&&((e,t,n)=>{const r=e.x,i=e.y,o=r+e.width;let a=Math.max(t.x-.5*n.width,r),s=Math.max(t.y-n.height-16,i);return a+n.width>o&&(a=o-n.width),hT(a,s)})(Re,k||re,Mr)),4096&e.$$.dirty[5]&&n(26,oe=ie?`translate(${ie.x}px, ${ie.y}px)`:void 0),2097152&e.$$.dirty[0]|4096&e.$$.dirty[5]&&n(25,ae=ie?de:void 0),8192&e.$$.dirty[0]&&n(165,se=D?"text":"shape"),6272&e.$$.dirty[0]|33536&e.$$.dirty[3]|4094&e.$$.dirty[5]|128&e.$$.dirty[6]&&n(24,le="text"===se&&it&&te?DB((()=>it([["div","text-styles",{class:"PinturaShapeControlsGroup"},[...[["bold",{label:"B",style:"font-weight:900;",title:"Bold",shortcut:["CMD","B"]}],["italic",{label:"I",style:"font-family:Times New Roman;font-style:italic;",title:"Italic",shortcut:["CMD","I"]}],["underline",{label:"U",style:"text-decoration:underline;",title:"Underline",shortcut:["CMD","U"]}],["strikeThrough",{label:"S",style:"text-decoration:line-through;",title:"Strikethrough",shortcut:["CMD","S"]}]].map((e=>{let[t,n]=e;return["Button","style-"+t,{onclick:()=>document.execCommand(t),...n,style:"font-size:1.25em;text-underline-offset:1px;text-decoration-thickness:1.5px;font-weight:400;"+n.style}]}))]],["div","text-reset",{class:"PinturaShapeControlsGroup"},[["Button","style-reset",{onclick:()=>document.execCommand("removeFormat"),style:"font-weight:400",title:"Remove styles",label:[["span","T",{style:"font-size:1.25em;font-style:italic;font-family:Times New Roman;text-decoration:underline",textContent:"T"}],["span","x",{style:"position:relative;top:.175rem;",innerHTML:"&times;"}]]}]]]],u))):"shape"===se&&rt&&u?DB((()=>rt(C?[["div","epsilon",{class:"PinturaShapeControlsGroup"},[["Button","remove-point",{onclick:yr,label:ft.shapeTitleButtonRemove,icon:ft.shapeIconButtonRemove,shortcut:["Backspace"],hideLabel:!0}]]]]:[ee&&["div","alpha",{class:"PinturaShapeControlsGroup"},[["ToggleSlider","adjust-opacity",{onrelease:kr,onchange:Cr,step:.01,value:AP(i,"opacity")?i.opacity:1,label:(e,t,n)=>Math.round(e/n*100)+"%",min:0,max:1,direction:"x"}]]],["div","beta",{class:"PinturaShapeControlsGroup"},[K&&["Button","flip-horizontal",{onclick:Sr,label:ft.shapeTitleButtonFlipHorizontal,icon:ft.shapeIconButtonFlipHorizontal,hideLabel:!0}],K&&ut&&["Button","flip-vertical",{onclick:_r,label:ft.shapeTitleButtonFlipVertical,icon:ft.shapeIconButtonFlipVertical,hideLabel:!0}],Q&&["Button","to-front",{onclick:Tr,label:ft.shapeTitleButtonMoveToFront,icon:ft.shapeIconButtonMoveToFront,hideLabel:!0,disabled:ue[ue.length-1]===G}],Z&&["Button","duplicate",{onclick:Ir,label:ft.shapeTitleButtonDuplicate,icon:ft.shapeIconButtonDuplicate,shortcut:["CMD","D"],hideLabel:!0}],X&&["Button","remove",{onclick:Er,label:ft.shapeTitleButtonRemove,icon:ft.shapeIconButtonRemove,shortcut:["Backspace"],hideLabel:!0}]].filter(Boolean)],J&&Y&&["div","gamma",{class:"PinturaShapeControlsGroup"},[["Button","text-layout",{onclick:$r,label:LF(Or,ft,i),icon:LF(Ar,ft,i),hideLabel:!0}]]],J&&["div","delta",{class:"PinturaShapeControlsGroup"},[["Button","edit-text",{label:ft.shapeLabelInputText,onclick:vr}]]]].filter(Boolean),u))):[]),128&e.$$.dirty[0]|128&e.$$.dirty[6]&&n(23,ce=ue.filter(FR).filter((e=>e.id)).filter((e=>!PR(e))).map((e=>({id:e.id,color:bR(e)?e.color:_R(e)?e.strokeColor:e.backgroundColor,name:e.name||ft["shapeLabelTool"+KO(iM(e))]})))),1024&e.$$.dirty[0]&&zr&&zr.addEventListener("touchmove",Br,!1)},[be,xe,$e,Pe,Re,Ne,ht,ft,lr,Mr,zr,u,i,D,S,d,y,w,g,_,v,de,Nr,ce,le,ae,oe,U,H,V,R,I,E,b,wt,Mt,e=>{const{origin:t}=e.detail,r=pt&&he.includes(16);In=void 0,n(151,kn=void 0),En=void 0,Tn=void 0,Pn=!1,Cn=void 0,Rn=!1,Mn=!1,Lt(),clearTimeout(_n),_n=setTimeout((()=>n(152,An=!0)),250);const s=Zt();if(!s||CR(s)&&AP(s,"pathClose")||Qt(),Sn=at(mT(t)),s&&CR(s)&&AP(s,"pathClose"))return De(e);const l=wn(ue,Sn,ct,(e=>FR(e))),c=l.length&&l.shift();if(i&&kR(i))if(c!==i)pr();else{const e=AP(i,"height"),t=!e&&AP(i,"width");if(e||t){const e=pR(i),t=pR(e);pM(t,Ie);const n=qT(nR(e.text,t),(e=>Math.ceil(e))),r=zT(t.width,t.height||n.height);br(r,e,t);const o=wn([{...e,strokeWidth:"5%"}],Sn,0);Mn=0===o.length}}if(i&&dt&&(Rn=!0),!c&&i&&kR(i)&&mn(i),ot(t)){if(c&&TR(c))return Pn=!0,n(151,kn=c),a?(r&&mn(c),void On(o)):(En=pR(kn),void(Tn=pM(pR(kn),Ie)));if(Cn=c||void 0,!De(e)&&c){if(fn(c,!0,r),n(151,kn=c),a)return On(o);En=pR(kn),Tn=pM(pR(kn),Ie)}}},e=>{Ln(),Be(e)},e=>{const{translation:t,ctrlKey:n,metaKey:i,shiftKey:a,position:s}=e.detail;if(kn){if(!GR(kn))return;if(kR(kn)){if(!Mn)return;pr()}if(a){let e=Math.abs(t.x),n=Math.abs(t.y);"x"===Nn&&(n-=64),"y"===Nn&&(e-=64),e>n?(t.y=0,Nn="x"):n>e&&(t.x=0,Nn="y")}else Nn=null;const e=n||i;if(In){if(!o.every(GR))return;return void In.forEach((e=>{let{shape:n,shapeOriginComputed:i}=e;Vt(n,i,t,{...xt(0,vt,r,n)})}))}return Vt(kn,Tn,t,{...xt(e?0:mt,vt,r,kn)})}Fe(e)},e=>{if(Ln(),kn){if(!a)if(e.detail.isTap&&CR(kn)&&HR(kn)){const{position:t}=e.detail,n=at(mT(t));((e,t)=>{const n=e.points,r=[];for(let s=0;s<n.length-1;s++)r.push([n[s],n[s+1]]);r.push([n[n.length-1],n[0]]);const i=r.findIndex((e=>{let[n,r]=e;return DI(t,6,n,r)}));let o;const a=[];for(let s=0;s<r.length;s++)a.push(r[s][0]),s===i&&(o=s+1,a.push(t));nn(e,{points:a,selectedPoint:o})})(kn,n)}else e.detail.isTap&&Pn&&bR(kn)&&!1!==UR(kn)&&gn(kn)}else je(e)},e=>{const t=Cn&&e.detail.isTap,r=pt&&he.includes(16);if(e.detail.isTap&&setTimeout((()=>{Xe({target:kn||Cn,position:Sn},0)})),kn)return Ge(kn),i=kn,o=En,JSON.stringify(i)!==JSON.stringify(o)&&We(kn),void n(151,kn=void 0);var i,o;let a=!0;if(!r){const e=hn();a=!e||et(e,Cn||void 0),a&&pn({storePrevious:!1})}ze(e),a&&t&&fn(Cn,!0,r)},tr,e=>{n(152,An=!0),n(151,kn=i),Tn=d},e=>{if(!kn)return void n(152,An=!1);const{translation:t,indexes:i,shiftKey:o,ctrlKey:a,metaKey:s,isNudge:l}=e.detail;Gt(kn,Tn,i,t,{shiftKey:!l&&o,...xt(a||s?0:mt,vt,r,kn)}),VR(kn)&&IT(t)>16&&nn(kn,{selectedPoint:void 0})},e=>{if(!kn)return void n(152,An=!1);fn(kn);const{isTap:t,translation:r,indexes:o}=e.detail;t&&(VR(kn)&&nn(kn,{selectedPoint:kn.selectedPoint===o[0]?void 0:o[0]}),Ge(kn)),n(151,kn=void 0),n(152,An=!1),We(i)},e=>{Kt=Fn(d).origin,n(152,An=!0),n(151,kn=i),Tn=d},e=>{if(!kn)return void n(152,An=!1);const{translation:t,shiftKey:r}=e.detail;((e,t,n,r)=>{const i=xn(pM(pR(e),Ie)),o=sI(i),a=Ft(Kt,n);let s=xT(a,o)+Math.PI/2;if(r.shiftKey){const e=Math.PI/16;s=e*Math.round(s/e)-Se%e}Pt(e,{rotation:s},Ie),en()})(kn,0,t,{shiftKey:r})},()=>{kn?(fn(kn),n(151,kn=void 0),n(152,An=!1),We(i)):n(152,An=!1)},e=>{n(152,An=!0),n(151,kn=i),Tn=d},e=>{if(!kn)return void n(152,An=!1);const{translation:t,ctrlKey:i,metaKey:o}=e.detail;((e,t,n,r)=>{const i=nI(t),o=nR(t.text,t);i.width||(i.width=o.width),i.height||(i.height=o.height);let a=2;e.flipX&&e.flipY?a=0:e.flipX?a=3:e.flipY&&(a=1),Gt(e,t,[a],n,{...r,aspectRatio:i.width/i.height,beforeResizeShape:e=>{const n=e.width/i.width;e.fontSize=t.fontSize*n,t.width||delete e.width,t.height||delete e.height}})})(kn,Tn,t,{...xt(i||o?0:mt,vt,r,kn)})},()=>{kn?(fn(kn),n(151,kn=void 0),n(152,An=!1),We(i)):n(152,An=!1)},e=>{const{key:t}=e,n=/escape/i.test(t);if(ln())return n?(e.preventDefault(),e.stopPropagation(),mn(i)):void(Z&&"d"===t&&(e.metaKey||e.ctrlKey)&&(e.preventDefault(),e.stopPropagation(),Pr()))},e=>{const t=UR(i,e);return!0===t?e:t},ur,e=>{const{target:t,key:n}=e,r=t.value||t.innerText,o=t.selectionStart||0,a=t.selectionEnd||r.length,s=r.substring(0,o)+n+r.substring(a);if(UR(i,s)!==s)return e.preventDefault()},e=>xR(i)&&/enter/i.test(e.code)&&!1!==i.disableNewline?e.preventDefault():/arrow/i.test(e.code)?e.stopPropagation():/escape/i.test(e.key)?hr():void 0,dr,e=>{if(dr(e))return pr()},pr,hr,Rr,e=>{const t=an();t&&(t.find(kR)||t.find((e=>!GR(e)))||t.forEach((t=>{n(151,kn=t),Tn=pM(pR(kn),Ie),Vt(kn,Tn,e.detail)})))},e=>{n(22,Nr=!0)},e=>{let{relatedTarget:t}=e;t&&t.classList.contains("shape-selector__button")||n(22,Nr=!1)},e=>{if("touch"===e.pointerType||"PinturaShapeEditor"!==e.target.className)return void Qe();(An||_n)&&Fr(void 0);const t=tH(e,Pe);n(154,Lr=mT(t));const r=$T(at(t),(e=>Math.round(e)));if(wT(r,Dr))return;if(Dr=mT(r),Ze(An,t,r),An||_n)return;if(p)return;const[i]=wn(ue,r,0,FR);i&&PR(i)||Fr(i)},e=>{"touch"!==e.pointerType&&Qe()},jr,ye,ve,we,Se,_e,Ce,ke,Ee,Te,Ie,Me,Ae,Oe,Le,De,Fe,je,ze,Be,Ue,We,Ve,He,qe,Ge,Ke,Ye,Ze,Xe,Qe,Je,et,tt,nt,rt,it,ot,at,st,lt,ct,ut,dt,pt,mt,gt,yt,vt,St,_t,Ct,kt,Et,Tt,It,function(e){let t,n,i,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=[],s=SR(e),l=bR(e),c="relative"===o.position;const u=o.interpolateInput,d=bt(),p=e=>{if(!mt)return e;const t=at(e),{snapTranslation:n,snapLines:i}=Ut(zt(t),d,mt,vt,r);return Wt(e,n),Ot(i),e},h=!!hn(),f=o.isSelection?we:xe,m="step"===o.inputMode;if(CR(e)){if(m){let r=!1;const o=(e,t)=>{const n=_t(f),i=e&&hT(cH(e.x,Ie.width),cH(e.y,Ie.height)),o=i&&st(i);he.includes(16)&&o&&Rt(o,t);const a=at(t),s=n.points.length?n.points[0]:a,l=hT(cH(s.x,Ie.width),cH(s.y,Ie.height)),u=st(l),d=IT(u,t);if(!r&&1===n.points.length&&d<36)return kt(f);if(n.points.length>2&&d<=256){n.pathClose=!0,FR(n)&&fn(n);const e=Et(f);return void Ue(e)}const p=n.strokeWidth&&n.strokeColor&&(void 0===n.strokeColor[3]||n.strokeColor[3]>0),h=IT(o,t);if(p&&n.points.length>1&&h<256){n.pathClose=!1,n.backgroundColor=[0,0,0,0],FR(n)&&fn(n);const e=Et(f);Ue(e)}else if(!(n.points.length>0&&h<100))return c?uH(a,Ie):a};return{start:e=>{const a=_t(f),{origin:s}=e.detail;if(n=4,t=p(mT(s)),i=mT(t),a){const e=a.points[a.points.length-1],n=o(e,t);return n&&(a.points=[...a.points,n]),void Tt({points:a.points},f)}r=!0},update:e=>{if(!r)return;const n=_t(f);if(!n)return;const i=n.points[0],a=o(i,hT(t.x+e.detail.translation.x,t.y+e.detail.translation.y));a&&(n.points[1]=a,Tt({points:n.points},f))},release:e=>e.detail.preventInertia(),cancel:()=>{kt(f)},end:n=>{if(!r)return;const i=at(t),o=c?uH(i,Ie):i,{isTap:a}=n.detail;if(a&&wn(ue,i,0,FR).length)return kt(f);Ct({...e,points:[o]},f)}}}return{start:r=>{const{origin:o}=r.detail;n=4,t=mT(o),i=mT(t),a.push({...i});const s=at(t),l=c?uH(s,Ie):s;Ct({...e,points:[l]},f)},update:e=>{const r=_t(f);if(!r)return;const{translation:o}=e.detail,s=hT(t.x+o.x,t.y+o.y),l=PT(i,s);if(cT(l,5)<=n)return;const d=[],p=xT(s,i),h=n-l,m={x:i.x+h*Math.cos(p),y:i.y+h*Math.sin(p)};if(a.push({...m}),u&&r.points.length>1){const e=a.length,t=Math.ceil(l/10);let n=l/30;const r=a[e-3],i=a[e-2],o=a[e-1];a[e-4]||(n*=.1),d.push(...AI(r,i,o,t,n).slice(1,-1)),a.splice(e-1,0,...d)}d.push(m),i.x=m.x,i.y=m.y,Tt({points:r.points.concat(d.map((e=>{const t=at(e);return c?uH(t,Ie):t})))},f)},release:e=>e.detail.preventInertia(),cancel:()=>{kt(f)},end:e=>{const t=_t(f);if(!t)return;if(e.detail.isTap){let e=!1;if(t.bitmap?(Cn&&(e=!0),h&&(e=!0)):e=!0,e)return kt(f)}const n=Et(f);Ue(n)}}}return s||l||$R(e)?{start:n=>{const{origin:r}=n.detail;t=p(mT(r));const i=at(t),o=c?uH(i,Ie):i,a=-1*At(Se,_e,Ce),l={...e,rotation:a,...o};l.flipX=_e,l.flipY=Ce,delete l.position,l.opacity=0,(s?["rx","ry"]:["width","height"]).forEach((e=>{l[e]=c?"0%":0})),Ct(l,f)},update:e=>{const n=_t(f);if(!n)return;n.opacity=1;let{aspectRatio:r}=n,{translation:i,shiftKey:o,ctrlKey:a}=e.detail;!r&&o&&(r=1);const l=p(hT(t.x+i.x,t.y+i.y)),c=at(t),u=at(l);if(r){const e=rI([c,u]),t=wI(e,r),n=u.x<c.x?-1:1,i=u.y<c.y?-1:1;u.x=c.x+t.width*n,u.y=c.y+t.height*i}const d={x:c.x+.5*(u.x-c.x),y:c.y+.5*(u.y-c.y)},h=At(Se,_e,Ce);yT(c,h,d),yT(u,h,d);const m=Math.min(c.x,u.x),g=Math.min(c.y,u.y);let y=Math.max(c.x,u.x)-m,v=Math.max(c.y,u.y)-g,b={};s?(a?(b.x=c.x,b.y=c.y):(b.x=m+.5*y,b.y=g+.5*v),b.rx=.5*y,b.ry=.5*v):(a?(b.x=c.x-.5*y,b.y=c.y-.5*v):(b.x=m,b.y=g),b.width=y,b.height=v),Tt(b,f,((e,t)=>Pt(e,t,Ie)))},release:e=>{e.detail.preventInertia()},cancel:()=>{kt(f)},end:e=>{const n=_t(f);if(n){if(e.detail.isTap){if(bR(n)&&dt&&Rn)return kt(f);if(!bR(n)||!dt||Cn)return kt(f);delete n.width,delete n.height,!1!==n.disableNewline&&delete n.textAlign;const e=pM({...n},Ie),r=nR(n.text,e),i=at({x:t.x,y:t.y-.5*r.height}),o=at({x:t.x+r.width,y:t.y+.5*r.height}),a={x:i.x+.5*(o.x-i.x),y:i.y+.5*(o.y-i.y)},s=At(Se,_e,Ce);yT(i,s,a),yT(o,s,a);let l=Math.min(i.x,o.x),c=Math.min(i.y,o.y);l<0&&(l=0),c<0&&(c=0),l+r.width>Ie.width&&(l=Ie.width-r.width),c+r.height>Ie.height&&(c=Ie.height-r.height),n.x=hE(n.x)?BP(l,Ie.width):l,n.y=hE(n.y)?BP(c,Ie.height):c}if(n.opacity=1,bR(n)){const e=pM({...n},Ie);if(RP(e.width)&&e.width<1||RP(e.height)&&e.height<1)return kt(f);Ue(n)}else{const e=Et(f);Ue(e)}FR(n)&&fn(n),bR(n)&&gn(n)}}}:_R(e)?{start:n=>{const{origin:r}=n.detail,i=at(p(r)),o=$T(i,fF);t=mT(r),Ct({...e,x1:c?BP(o.x,Ie.width):o.x,y1:c?BP(o.y,Ie.height):o.y,x2:c?BP(o.x,Ie.width):o.x,y2:c?BP(o.y,Ie.height):o.y,opacity:0},f)},update:e=>{if(!_t(f))return;const{translation:n}=e.detail,r=p(ST(mT(t),n));if(he.includes(16)){const e=PT(t,r),n=xT(t,r),i=Math.PI/4,o=i*Math.round(n/i);r.x=t.x+e*Math.cos(o),r.y=t.y+e*Math.sin(o)}const i=at(r);Tt({x2:c?BP(i.x,Ie.width):i.x,y2:c?BP(i.y,Ie.height):i.y,opacity:1},f)},release:e=>e.detail.preventInertia(),cancel:()=>{kt(f)},end:e=>{const t=_t(f);if(!t)return;if(e.detail.isTap)return kt(f);t.opacity=1;const n=Et(f);Ue(n),FR(t)&&fn(n)}}:void 0},()=>{let e,t;const n=lt*lt,r=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=IT(e,t);if(!r&&i<2)return!1;const o=ue.filter((e=>!e.disableErase));let a;return a=i<n?wn(ue,at(t),lt):$n(o,at(e),at(t),lt),vn(a).forEach(qe),!0};return{start:n=>{e=hT(Math.round(n.detail.origin.x),Math.round(n.detail.origin.y)),r(e,e,!0),t=e},update:n=>{const{translation:i}=n.detail,o=hT(Math.round(e.x+i.x),Math.round(e.y+i.y));r(t,o)&&(t=mT(o))},release:e=>e.detail.preventInertia(),cancel:()=>{kt(collection)},end:()=>{}}},Zt,Xt,e=>{if(!Zt())return LR(e),It(e)},Qt,Jt,function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{id:ME(),...e}},en,tn,nn,rn,function(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];ue.forEach((n=>rn(n,e,t,!1))),n&&en()},on,an,sn,ln,pn,fn,mn,gn,yn,vn,bn,xn,wn,$n,Nt,Dt,kn,An,Hn,Lr,p,J,Y,X,Z,G,Q,K,ee,C,se,te,ie,re,k,ne,a,o,F,c,j,W,z,N,L,r,M,A,O,f,$,T,h,P,l,x,m,s,ue,pe,he,fe,function(t){QA.call(this,e,t)},e=>jr(e),function(e){eO[e?"unshift":"push"]((()=>{lr=e,n(8,lr)}))},function(){U=this.value,n(27,U),n(13,D),n(12,i),n(178,N),n(0,be),n(193,ue)},e=>{const{key:t}=e;if("Enter"===t){if(dr(e))return!0;if(!1===i.disableNewline)return!1}return!0},function(e){eO[e?"unshift":"push"]((()=>{lr=e,n(8,lr)}))},()=>{zr&&zr.focus()},e=>n(9,Mr=e.detail),function(e){eO[e?"unshift":"push"]((()=>{zr=e,n(10,zr)}))},e=>tH(e,Pe)]}class $H extends OO{constructor(e){super(),AO(this,e,wH,bH,XM,{uid:67,ui:68,disabled:0,shapes:1,selection:69,offset:2,contextRotation:70,contextFlipX:71,contextFlipY:72,contextZoom:73,active:74,opacity:75,parentRect:76,rootRect:3,utilRect:4,hoverColor:77,caretColor:78,gridColor:79,snapColor:80,textInputMode:5,oninteractionstart:81,oninteractionupdate:82,oninteractionrelease:83,oninteractionend:84,oninteractioncancel:85,onaddshape:86,onupdateshape:87,onselectshape:88,onblurshape:89,onremoveshape:90,ontapshape:91,onhovershape:92,ontriggerhistorywrite:93,onhovercanvas:94,ontapcanvas:95,onleavecanvas:96,beforeSelectShape:97,beforeDeselectShape:98,beforeRemoveShape:99,beforeUpdateShape:100,willRenderShapeControls:101,willRenderShapeTextControls:102,willStartInteraction:103,mapEditorPointToImagePoint:104,mapImagePointToEditorPoint:105,eraseRadius:106,selectRadius:107,enableButtonFlipVertical:108,enableTapToAddText:109,enableMultiSelect:110,enableTextStyleControls:6,locale:7,snapThreshold:111,snapPointer:112,enableSnapToContext:113,gridSize:114,syncShapeCollection:115,getShapeDraft:116,addShapeDraft:117,discardShapeDraft:118,confirmShapeDraft:119,updateShapeDraft:120,addShape:121,createShape:122,eraseShape:123,getMarkupItemDraft:124,getMarkupItemDraftIndex:125,addMarkupItemDraft:126,confirmMarkupItemDraft:127,discardMarkupItemDraft:128,createMarkupItem:129,syncShapes:130,removeMarkupShapeProps:131,updateMarkupShape:132,updateMarkupShapeProperty:133,updateMarkupItemsShapeProperty:134,updateMarkupShapeItems:135,getActiveMarkupItems:136,getActiveMarkupItem:137,hasActiveMarkupItem:138,blurShapes:139,selectShape:140,deselectMarkupItem:141,editMarkupItem:142,finishEditMarkupItem:143,removeMarkupItems:144,getTextShapeRect:145,getMarkupShapeRect:146,getShapesNearPosition:147,getShapesBetweenPoints:148},null,[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1])}get syncShapeCollection(){return this.$$.ctx[115]}get getShapeDraft(){return this.$$.ctx[116]}get addShapeDraft(){return this.$$.ctx[117]}get discardShapeDraft(){return this.$$.ctx[118]}get confirmShapeDraft(){return this.$$.ctx[119]}get updateShapeDraft(){return this.$$.ctx[120]}get addShape(){return this.$$.ctx[121]}get createShape(){return this.$$.ctx[122]}get eraseShape(){return this.$$.ctx[123]}get getMarkupItemDraft(){return this.$$.ctx[124]}get getMarkupItemDraftIndex(){return this.$$.ctx[125]}get addMarkupItemDraft(){return this.$$.ctx[126]}get confirmMarkupItemDraft(){return this.$$.ctx[127]}get discardMarkupItemDraft(){return this.$$.ctx[128]}get createMarkupItem(){return this.$$.ctx[129]}get syncShapes(){return this.$$.ctx[130]}get removeMarkupShapeProps(){return this.$$.ctx[131]}get updateMarkupShape(){return this.$$.ctx[132]}get updateMarkupShapeProperty(){return this.$$.ctx[133]}get updateMarkupItemsShapeProperty(){return this.$$.ctx[134]}get updateMarkupShapeItems(){return this.$$.ctx[135]}get getActiveMarkupItems(){return this.$$.ctx[136]}get getActiveMarkupItem(){return this.$$.ctx[137]}get hasActiveMarkupItem(){return this.$$.ctx[138]}get blurShapes(){return this.$$.ctx[139]}get selectShape(){return this.$$.ctx[140]}get deselectMarkupItem(){return this.$$.ctx[141]}get editMarkupItem(){return this.$$.ctx[142]}get finishEditMarkupItem(){return this.$$.ctx[143]}get removeMarkupItems(){return this.$$.ctx[144]}get getTextShapeRect(){return this.$$.ctx[145]}get getMarkupShapeRect(){return this.$$.ctx[146]}get getShapesNearPosition(){return this.$$.ctx[147]}get getShapesBetweenPoints(){return this.$$.ctx[148]}}function SH(e){let t,n,r;return n=new Hz({props:{items:e[2]}}),{c(){t=SA("ul"),PO(n.$$.fragment),RA(t,"class","PinturaShapeStyleList")},m(e,i){wA(e,t,i),RO(n,t,null),r=!0},p(e,t){const r={};4&t&&(r.items=e[2]),n.$set(r)},i(e){r||(bO(n.$$.fragment,e),r=!0)},o(e){xO(n.$$.fragment,e),r=!1},d(e){e&&$A(t),MO(n)}}}function _H(e){let t,n;return t=new lB({props:{class:"PinturaShapeStyles",elasticity:e[0],$$slots:{default:[CH]},$$scope:{ctx:e}}}),{c(){PO(t.$$.fragment)},m(e,r){RO(t,e,r),n=!0},p(e,n){const r={};1&n&&(r.elasticity=e[0]),524292&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(bO(t.$$.fragment,e),n=!0)},o(e){xO(t.$$.fragment,e),n=!1},d(e){MO(t,e)}}}function CH(e){let t,n,r;return n=new Hz({props:{items:e[2]}}),{c(){t=SA("ul"),PO(n.$$.fragment),RA(t,"class","PinturaShapeStyleList")},m(e,i){wA(e,t,i),RO(n,t,null),r=!0},p(e,t){const r={};4&t&&(r.items=e[2]),n.$set(r)},i(e){r||(bO(n.$$.fragment,e),r=!0)},o(e){xO(n.$$.fragment,e),r=!1},d(e){e&&$A(t),MO(n)}}}function kH(e){let t,n,r,i;const o=[_H,SH],a=[];function s(e,t){return e[1]?0:1}return n=s(e),r=a[n]=o[n](e),{c(){t=SA("div"),r.c(),NA(t,"opacity",e[5]),NA(t,"pointer-events",e[4]),NA(t,"visibility",e[3])},m(e,r){wA(e,t,r),a[n].m(t,null),i=!0},p(e,i){let[l]=i,c=n;n=s(e),n===c?a[n].p(e,l):(yO(),xO(a[c],1,1,(()=>{a[c]=null})),vO(),r=a[n],r?r.p(e,l):(r=a[n]=o[n](e),r.c()),bO(r,1),r.m(t,null)),32&l&&NA(t,"opacity",e[5]),16&l&&NA(t,"pointer-events",e[4]),8&l&&NA(t,"visibility",e[3])},i(e){i||(bO(r),i=!0)},o(e){xO(r),i=!1},d(e){e&&$A(t),a[n].d()}}}function EH(e,t,n){let r,i,o,a,s,l,c,u,{isActive:d=!1}=t,{controls:p=[]}=t,{locale:h}=t,{scrollElasticity:f}=t,{scrollEnable:m=!0}=t,{hideTitles:g=!1}=t,{willRenderControls:y=KE}=t;const v=XA("redrawTrigger");nA(e,v,(e=>n(16,l=e)));const b=XA("env");nA(e,b,(e=>n(15,s=e)));const x=XA("isAnimated");nA(e,x,(e=>n(18,u=e)));const w=XN(0,{stiffness:.25,damping:.9});return nA(e,w,(e=>n(17,c=e))),e.$$set=e=>{"isActive"in e&&n(10,d=e.isActive),"controls"in e&&n(11,p=e.controls),"locale"in e&&n(12,h=e.locale),"scrollElasticity"in e&&n(0,f=e.scrollElasticity),"scrollEnable"in e&&n(1,m=e.scrollEnable),"hideTitles"in e&&n(13,g=e.hideTitles),"willRenderControls"in e&&n(14,y=e.willRenderControls)},e.$$.update=()=>{263168&e.$$.dirty&&w.set(d?1:0,{hard:!1===u}),131072&e.$$.dirty&&n(5,r=c),1024&e.$$.dirty&&n(4,i=d?"auto":"none"),131072&e.$$.dirty&&n(3,o=c<=0?"hidden":"visible"),129024&e.$$.dirty&&n(2,a=l&&y(p.map((e=>["ShapeStyle",e.id,{title:e.componentProps.title,locale:h,hideTitle:g,items:[[e.component,e.id,e.componentProps]]}])),s,(()=>v.set({}))))},[f,m,a,o,i,r,v,b,x,w,d,p,h,g,y,s,l,c,u]}class TH extends OO{constructor(e){super(),AO(this,e,EH,kH,XM,{isActive:10,controls:11,locale:12,scrollElasticity:0,scrollEnable:1,hideTitles:13,willRenderControls:14})}}function IH(e,t,n){const r=e.slice();return r[15]=t[n].key,r[6]=t[n].controls,r[16]=t[n].isActive,r}function PH(e,t){let n,r,i;return r=new TH({props:{isActive:t[16],controls:t[6],locale:t[1],scrollElasticity:t[2],scrollEnable:t[3],hideTitles:t[4],willRenderControls:t[5]}}),{key:e,first:null,c(){n=EA(),PO(r.$$.fragment),this.first=n},m(e,t){wA(e,n,t),RO(r,e,t),i=!0},p(e,n){t=e;const i={};128&n&&(i.isActive=t[16]),128&n&&(i.controls=t[6]),2&n&&(i.locale=t[1]),4&n&&(i.scrollElasticity=t[2]),8&n&&(i.scrollEnable=t[3]),16&n&&(i.hideTitles=t[4]),32&n&&(i.willRenderControls=t[5]),r.$set(i)},i(e){i||(bO(r.$$.fragment,e),i=!0)},o(e){xO(r.$$.fragment,e),i=!1},d(e){e&&$A(n),MO(r,e)}}}function RH(e){let t,n,r,i=[],o=new Map,a=e[7];const s=e=>e[15];for(let l=0;l<a.length;l+=1){let t=IH(e,a,l),n=s(t);o.set(n,i[l]=PH(n,t))}return{c(){t=SA("div");for(let e=0;e<i.length;e+=1)i[e].c();RA(t,"class",n=CD(["PinturaShapeStyleEditor",!e[3]&&"PinturaShapeStyleEditorOverflow",e[0]]))},m(e,n){wA(e,t,n);for(let r=0;r<i.length;r+=1)i[r].m(t,null);r=!0},p(e,l){let[c]=l;190&c&&(a=e[7],yO(),i=kO(i,c,s,1,e,a,o,t,CO,PH,null,IH),vO()),(!r||9&c&&n!==(n=CD(["PinturaShapeStyleEditor",!e[3]&&"PinturaShapeStyleEditorOverflow",e[0]])))&&RA(t,"class",n)},i(e){if(!r){for(let e=0;e<a.length;e+=1)bO(i[e]);r=!0}},o(e){for(let t=0;t<i.length;t+=1)xO(i[t]);r=!1},d(e){e&&$A(t);for(let t=0;t<i.length;t+=1)i[t].d()}}}function MH(e,t,n){let r,i,o,{class:a}=t,{controls:s={}}=t,{shapeProps:l}=t,{onchange:c}=t,{locale:u}=t,{scrollElasticity:d}=t,{scrollEnable:p=!0}=t,{hideTitles:h=!1}=t,{willRenderControls:f}=t;const m=[];return e.$$set=e=>{"class"in e&&n(0,a=e.class),"controls"in e&&n(6,s=e.controls),"shapeProps"in e&&n(8,l=e.shapeProps),"onchange"in e&&n(9,c=e.onchange),"locale"in e&&n(1,u=e.locale),"scrollElasticity"in e&&n(2,d=e.scrollElasticity),"scrollEnable"in e&&n(3,p=e.scrollEnable),"hideTitles"in e&&n(4,h=e.hideTitles),"willRenderControls"in e&&n(5,f=e.willRenderControls)},e.$$.update=()=>{64&e.$$.dirty&&n(11,r=Object.keys(s).filter((e=>s[e]))),2304&e.$$.dirty&&n(10,i=l&&Object.keys(l).length&&r&&DR(l)?(e=>r.filter((t=>t.split("_").every((t=>AP(e,t)&&DR(e,t))))).map((t=>{const n=(e.settings&&e.settings[t]||{}).control||t,r=t.split("_");let i=r.length>1?r.map((t=>e[t])):e[t];if(TE(s[n])){const{title:r,component:o}=s[n](i,(e=>{c({[t]:e})}),{selectedShapeId:e.id});return{id:n,component:Hz,componentProps:{title:r,items:o}}}let[o,a]=s[n];if(hE(o)&&s[o]){const e={...a};[o,a]=s[o],a={...a,...e}}const l=TE(a.options)?a.options(e):a.options;return"RadioGroup"===o&&(a.selectedIndex=-1),TE(a.formatValue)&&(i=a.formatValue(i)),{id:n,component:o,componentProps:{...a,options:l,locale:u,value:i,optionLabelClass:"PinturaButtonLabel",onchange:n=>{const i=CE(n)&&!OP(n)?n.value:n;a.onchange&&a.onchange(i,e);const o=r.length>1?r.reduce(((e,t,n)=>({...e,[t]:Array.isArray(i)?i[n]:i})),{}):{[t]:i};c(o)}}}})).filter(Boolean))(l):[]),1280&e.$$.dirty&&n(7,o=((e,t)=>{let n=m.find((t=>t.key===e));return n||(n={key:e,controls:t},m.push(n)),m.forEach((e=>e.isActive=!1)),n.controls=t,n.isActive=!0,m})(l&&Object.keys(l).length?Object.keys(l).join("_"):"none",i||[]))},[a,u,d,p,h,f,s,o,l,c,i,r]}class AH extends OO{constructor(e){super(),AO(this,e,MH,RH,XM,{class:0,controls:6,shapeProps:8,onchange:9,locale:1,scrollElasticity:2,scrollEnable:3,hideTitles:4,willRenderControls:5})}}var OH=e=>/<svg /.test(e);function LH(e){let t,n;return t=new Hz({props:{items:e[10]}}),{c(){PO(t.$$.fragment)},m(e,r){RO(t,e,r),n=!0},p(e,n){const r={};1024&n&&(r.items=e[10]),t.$set(r)},i(e){n||(bO(t.$$.fragment,e),n=!0)},o(e){xO(t.$$.fragment,e),n=!1},d(e){MO(t,e)}}}function NH(e){let t,n,r,i;const o=[FH,DH],a=[];function s(e,t){return e[8]?0:1}return t=s(e),n=a[t]=o[t](e),{c(){n.c(),r=EA()},m(e,n){a[t].m(e,n),wA(e,r,n),i=!0},p(e,i){let l=t;t=s(e),t===l?a[t].p(e,i):(yO(),xO(a[l],1,1,(()=>{a[l]=null})),vO(),n=a[t],n?n.p(e,i):(n=a[t]=o[t](e),n.c()),bO(n,1),n.m(r.parentNode,r))},i(e){i||(bO(n),i=!0)},o(e){xO(n),i=!1},d(e){a[t].d(e),e&&$A(r)}}}function DH(e){let t,n,r,i,o=e[10]&&jH(e);return r=new lB({props:{scrollAutoCancel:e[9],elasticity:e[0],$$slots:{default:[zH]},$$scope:{ctx:e}}}),{c(){t=SA("div"),o&&o.c(),n=kA(),PO(r.$$.fragment),RA(t,"class","PinturaShapePresetsFlat")},m(e,a){wA(e,t,a),o&&o.m(t,null),vA(t,n),RO(r,t,null),i=!0},p(e,i){e[10]?o?(o.p(e,i),1024&i&&bO(o,1)):(o=jH(e),o.c(),bO(o,1),o.m(t,n)):o&&(yO(),xO(o,1,1,(()=>{o=null})),vO());const a={};512&i&&(a.scrollAutoCancel=e[9]),1&i&&(a.elasticity=e[0]),536871070&i&&(a.$$scope={dirty:i,ctx:e}),r.$set(a)},i(e){i||(bO(o),bO(r.$$.fragment,e),i=!0)},o(e){xO(o),xO(r.$$.fragment,e),i=!1},d(e){e&&$A(t),o&&o.d(),MO(r)}}}function FH(e){let t,n,r,i,o;n=new lB({props:{elasticity:e[0],class:"PinturaShapePresetsGroups",$$slots:{default:[qH]},$$scope:{ctx:e}}});const a=[{class:"PinturaControlPanels"},{panelClass:"PinturaControlPanel"},{panels:e[11]},e[12]];let s={$$slots:{default:[KH,e=>{let{panel:t,panelIsActive:n}=e;return{26:t,27:n}},e=>{let{panel:t,panelIsActive:n}=e;return(t?67108864:0)|(n?134217728:0)}]},$$scope:{ctx:e}};for(let l=0;l<a.length;l+=1)s=qM(s,a[l]);return i=new qD({props:s}),{c(){t=SA("div"),PO(n.$$.fragment),r=kA(),PO(i.$$.fragment),RA(t,"class","PinturaShapePresetsGrouped")},m(e,a){wA(e,t,a),RO(n,t,null),vA(t,r),RO(i,t,null),o=!0},p(e,t){const r={};1&t&&(r.elasticity=e[0]),536876128&t&&(r.$$scope={dirty:t,ctx:e}),n.$set(r);const o=6144&t?EO(a,[a[0],a[1],2048&t&&{panels:e[11]},4096&t&&TO(e[12])]):{};738206239&t&&(o.$$scope={dirty:t,ctx:e}),i.$set(o)},i(e){o||(bO(n.$$.fragment,e),bO(i.$$.fragment,e),o=!0)},o(e){xO(n.$$.fragment,e),xO(i.$$.fragment,e),o=!1},d(e){e&&$A(t),MO(n),MO(i)}}}function jH(e){let t,n;return t=new Hz({props:{items:e[10]}}),{c(){PO(t.$$.fragment)},m(e,r){RO(t,e,r),n=!0},p(e,n){const r={};1024&n&&(r.items=e[10]),t.$set(r)},i(e){n||(bO(t.$$.fragment,e),n=!0)},o(e){xO(t.$$.fragment,e),n=!1},d(e){MO(t,e)}}}function zH(e){let t,n;return t=new dF({props:{items:e[7],onclickitem:e[1],ongrabitem:e[2],ondragitem:e[3],ondropitem:e[4]}}),{c(){PO(t.$$.fragment)},m(e,r){RO(t,e,r),n=!0},p(e,n){const r={};128&n&&(r.items=e[7]),2&n&&(r.onclickitem=e[1]),4&n&&(r.ongrabitem=e[2]),8&n&&(r.ondragitem=e[3]),16&n&&(r.ondropitem=e[4]),t.$set(r)},i(e){n||(bO(t.$$.fragment,e),n=!0)},o(e){xO(t.$$.fragment,e),n=!1},d(e){MO(t,e)}}}function BH(e){let t,n;return t=new Hz({props:{items:e[10]}}),{c(){PO(t.$$.fragment)},m(e,r){RO(t,e,r),n=!0},p(e,n){const r={};1024&n&&(r.items=e[10]),t.$set(r)},i(e){n||(bO(t.$$.fragment,e),n=!0)},o(e){xO(t.$$.fragment,e),n=!1},d(e){MO(t,e)}}}function UH(e){let t,n;return t=new eF({props:{$$slots:{default:[WH]},$$scope:{ctx:e}}}),{c(){PO(t.$$.fragment)},m(e,r){RO(t,e,r),n=!0},p(e,n){const r={};805306368&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(bO(t.$$.fragment,e),n=!0)},o(e){xO(t.$$.fragment,e),n=!1},d(e){MO(t,e)}}}function WH(e){let t,n=e[28].icon+"";return{c(){t=_A("g")},m(e,r){wA(e,t,r),t.innerHTML=n},p(e,r){268435456&r&&n!==(n=e[28].icon+"")&&(t.innerHTML=n)},d(e){e&&$A(t)}}}function VH(e){let t,n,r=e[28].label+"";return{c(){t=SA("span"),n=CA(r)},m(e,r){wA(e,t,r),vA(t,n)},p(e,t){268435456&t&&r!==(r=e[28].label+"")&&OA(n,r)},d(e){e&&$A(t)}}}function HH(e){let t,n,r,i=e[28].icon&&UH(e),o=!e[28].hideLabel&&VH(e);return{c(){i&&i.c(),t=kA(),o&&o.c(),n=EA()},m(e,a){i&&i.m(e,a),wA(e,t,a),o&&o.m(e,a),wA(e,n,a),r=!0},p(e,r){e[28].icon?i?(i.p(e,r),268435456&r&&bO(i,1)):(i=UH(e),i.c(),bO(i,1),i.m(t.parentNode,t)):i&&(yO(),xO(i,1,1,(()=>{i=null})),vO()),e[28].hideLabel?o&&(o.d(1),o=null):o?o.p(e,r):(o=VH(e),o.c(),o.m(n.parentNode,n))},i(e){r||(bO(i),r=!0)},o(e){xO(i),r=!1},d(e){i&&i.d(e),e&&$A(t),o&&o.d(e),e&&$A(n)}}}function qH(e){let t,n,r,i=e[10]&&BH(e);const o=[{class:"PinturaControlList"},{tabs:e[5]},e[12],{layout:"compact"}];let a={$$slots:{default:[HH,e=>{let{tab:t}=e;return{28:t}},e=>{let{tab:t}=e;return t?268435456:0}]},$$scope:{ctx:e}};for(let s=0;s<o.length;s+=1)a=qM(a,o[s]);return n=new AD({props:a}),n.$on("select",e[18]),{c(){i&&i.c(),t=kA(),PO(n.$$.fragment)},m(e,o){i&&i.m(e,o),wA(e,t,o),RO(n,e,o),r=!0},p(e,r){e[10]?i?(i.p(e,r),1024&r&&bO(i,1)):(i=BH(e),i.c(),bO(i,1),i.m(t.parentNode,t)):i&&(yO(),xO(i,1,1,(()=>{i=null})),vO());const a=4128&r?EO(o,[o[0],32&r&&{tabs:e[5]},4096&r&&TO(e[12]),o[3]]):{};805306368&r&&(a.$$scope={dirty:r,ctx:e}),n.$set(a)},i(e){r||(bO(i),bO(n.$$.fragment,e),r=!0)},o(e){xO(i),xO(n.$$.fragment,e),r=!1},d(e){i&&i.d(e),e&&$A(t),MO(n,e)}}}function GH(e){let t,n;return t=new dF({props:{items:e[13][e[26]].items,disabled:e[13][e[26]].disabled,onclickitem:e[1],ongrabitem:e[2],ondragitem:e[3],ondropitem:e[4]}}),{c(){PO(t.$$.fragment)},m(e,r){RO(t,e,r),n=!0},p(e,n){const r={};67117056&n&&(r.items=e[13][e[26]].items),67117056&n&&(r.disabled=e[13][e[26]].disabled),2&n&&(r.onclickitem=e[1]),4&n&&(r.ongrabitem=e[2]),8&n&&(r.ondragitem=e[3]),16&n&&(r.ondropitem=e[4]),t.$set(r)},i(e){n||(bO(t.$$.fragment,e),n=!0)},o(e){xO(t.$$.fragment,e),n=!1},d(e){MO(t,e)}}}function KH(e){let t,n;return t=new lB({props:{scroll:e[27]?{scrollOffset:0,animate:!1}:void 0,scrollAutoCancel:e[9],elasticity:e[0],$$slots:{default:[GH]},$$scope:{ctx:e}}}),{c(){PO(t.$$.fragment)},m(e,r){RO(t,e,r),n=!0},p(e,n){const r={};134217728&n&&(r.scroll=e[27]?{scrollOffset:0,animate:!1}:void 0),512&n&&(r.scrollAutoCancel=e[9]),1&n&&(r.elasticity=e[0]),603987998&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(bO(t.$$.fragment,e),n=!0)},o(e){xO(t.$$.fragment,e),n=!1},d(e){MO(t,e)}}}function YH(e){let t,n,r,i;const o=[NH,LH],a=[];function s(e,t){return e[9]?0:e[10]?1:-1}return~(n=s(e))&&(r=a[n]=o[n](e)),{c(){t=SA("div"),r&&r.c(),RA(t,"class","PinturaShapePresetsPalette")},m(e,r){wA(e,t,r),~n&&a[n].m(t,null),i=!0},p(e,i){let[l]=i,c=n;n=s(e),n===c?~n&&a[n].p(e,l):(r&&(yO(),xO(a[c],1,1,(()=>{a[c]=null})),vO()),~n?(r=a[n],r?r.p(e,l):(r=a[n]=o[n](e),r.c()),bO(r,1),r.m(t,null)):r=null)},i(e){i||(bO(r),i=!0)},o(e){xO(r),i=!1},d(e){e&&$A(t),~n&&a[n].d()}}}function ZH(e,t,n){let r,i,o,a,s,l,c,u,d,{locale:p}=t,{presets:h}=t,{scrollElasticity:f}=t,{enableSelectImage:m=!0}=t,{willRenderPresetToolbar:g=KE}=t,{onaddpreset:y=eE}=t,{ongrabpreset:v}=t,{ondragpreset:b}=t,{ondroppreset:x}=t;const w="presets-"+ME(),$=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return OH(e)?e:MP(e)?jP(e,t):`<img src="${e}" alt="${t}"/>`},S=e=>WE(HI(e)),_=["src","alt","thumb","shape","id","mount","disabled"],C=e=>e.map((e=>(e=>OP(e)&&hE(e[0])&&OP(e[1]))(e)?{...e[2],id:`${w}-${e[0].toLowerCase()}`,label:e[0],items:C(e[1])}:(e=>{let t,n,r,i,o,a,s,l=e;return hE(e)?MP(e)?(t=e,o=e,i=$(t,o)):(t=e,o=S(t),i=$(t,o)):(t=e.src,o=e.alt||(hE(t)?S(t):hE(e.thumb)?S(e.thumb):void 0),i=$(e.thumb||t,o),n=e.shape,a=e.mount,s=e.disabled,r=Object.keys(e).reduce(((t,n)=>(_.includes(n)||(t[n]=e[n]),t)),{})),{id:l,src:t,thumb:i,shape:n,shapeProps:r,alt:o,title:o,mount:a,disabled:s}})(e)));return e.$$set=e=>{"locale"in e&&n(14,p=e.locale),"presets"in e&&n(15,h=e.presets),"scrollElasticity"in e&&n(0,f=e.scrollElasticity),"enableSelectImage"in e&&n(16,m=e.enableSelectImage),"willRenderPresetToolbar"in e&&n(17,g=e.willRenderPresetToolbar),"onaddpreset"in e&&n(1,y=e.onaddpreset),"ongrabpreset"in e&&n(2,v=e.ongrabpreset),"ondragpreset"in e&&n(3,b=e.ondragpreset),"ondroppreset"in e&&n(4,x=e.ondroppreset)},e.$$.update=()=>{32768&e.$$.dirty&&n(7,r=C(h)),128&e.$$.dirty&&n(9,i=r.length),640&e.$$.dirty&&n(8,o=i&&r.some((e=>!!e.items))),384&e.$$.dirty&&n(5,a=o&&r),384&e.$$.dirty&&n(13,s=o&&r.reduce(((e,t)=>(e[t.id]=t,e)),{})),96&e.$$.dirty&&n(6,l=l||a&&(a.find((e=>!e.disabled))||{}).id),64&e.$$.dirty&&n(12,c={name:w,selected:l}),32&e.$$.dirty&&n(11,u=a&&a.map((e=>e.id))),212994&e.$$.dirty&&n(10,d=p&&g([m&&["Button","browse",{label:p.shapeLabelButtonSelectSticker,icon:p.shapeIconButtonSelectSticker,onclick:()=>{NB().then((e=>{e&&y(e)}))}}]]))},[f,y,v,b,x,a,l,r,o,i,d,u,c,s,p,h,m,g,e=>{let{detail:t}=e;return n(6,l=t)}]}class XH extends OO{constructor(e){super(),AO(this,e,ZH,YH,XM,{locale:14,presets:15,scrollElasticity:0,enableSelectImage:16,willRenderPresetToolbar:17,onaddpreset:1,ongrabpreset:2,ondragpreset:3,ondroppreset:4})}}function QH(e){let t,n,r,i;return t=new Hz({props:{items:e[30]}}),r=new AH({props:{locale:e[4],shapeProps:e[49],onchange:e[85],controls:e[9],scrollEnable:!1,hideTitles:!0,willRenderControls:e[165]}}),{c(){PO(t.$$.fragment),n=kA(),PO(r.$$.fragment)},m(e,o){RO(t,e,o),wA(e,n,o),RO(r,e,o),i=!0},p(e,n){const i={};1073741824&n[0]&&(i.items=e[30]),t.$set(i);const o={};16&n[0]&&(o.locale=e[4]),262144&n[1]&&(o.shapeProps=e[49]),512&n[0]&&(o.controls=e[9]),r.$set(o)},i(e){i||(bO(t.$$.fragment,e),bO(r.$$.fragment,e),i=!0)},o(e){xO(t.$$.fragment,e),xO(r.$$.fragment,e),i=!1},d(e){MO(t,e),e&&$A(n),MO(r,e)}}}function JH(e){let t,n,r;return n=new $W({props:{$$slots:{default:[QH]},$$scope:{ctx:e}}}),{c(){t=SA("div"),PO(n.$$.fragment),RA(t,"slot","header")},m(e,i){wA(e,t,i),RO(n,t,null),r=!0},p(e,t){const r={};1073742352&t[0]|262144&t[1]|134217728&t[6]&&(r.$$scope={dirty:t,ctx:e}),n.$set(r)},i(e){r||(bO(n.$$.fragment,e),r=!0)},o(e){xO(n.$$.fragment,e),r=!1},d(e){e&&$A(t),MO(n)}}}function eq(e){let t,n;const r=[{locale:e[4]},{ui:e[69]},{shapes:e[5]},{selection:e[58]},{uid:e[20]},{parentRect:e[37]},{rootRect:e[55]},{utilRect:e[39]},{offset:e[50]},{disabled:e[38]},{contextRotation:e[23]},{contextFlipX:e[24]},{contextFlipY:e[25]},{contextZoom:e[36]?e[36].scale:void 0},{active:e[35]},{opacity:e[56]},{hoverColor:e[57]},{caretColor:e[57]},{snapColor:e[57]},{gridColor:[1,1,1,.125]},{eraseRadius:e[47]},{selectRadius:e[6]},{enableButtonFlipVertical:e[10]},{enableMultiSelect:e[14]},{mapEditorPointToImagePoint:e[21]},{mapImagePointToEditorPoint:e[22]},{enableTapToAddText:e[13]},{textInputMode:e[8]},{snapThreshold:e[16]},{snapPointer:!e[48]},{enableSnapToContext:e[17]},{gridSize:e[15]},{willStartInteraction:e[95]},{oninteractionstart:e[79]},{oninteractionupdate:e[80]},{oninteractionrelease:e[81]},{oninteractionend:e[83]},{oninteractioncancel:e[82]},{onleavecanvas:e[87]},{onhovercanvas:e[86]},{onhovershape:e[89]},{ontapcanvas:e[88]},{onaddshape:e[156]},{onselectshape:e[157]},{onblurshape:e[158]},{ontapshape:e[159]},{onupdateshape:e[160]},{onremoveshape:e[161]},{ontriggerhistorywrite:e[162]},e[42]];let i={};for(let o=0;o<r.length;o+=1)i=qM(i,r[o]);return t=new $H({props:i}),e[163](t),{c(){PO(t.$$.fragment)},m(e,r){RO(t,e,r),n=!0},p(e,n){const i=66315632&n[0]|252381681&n[1]|255721600&n[2]|12&n[3]?EO(r,[16&n[0]&&{locale:e[4]},128&n[2]&&{ui:e[69]},32&n[0]&&{shapes:e[5]},134217728&n[1]&&{selection:e[58]},1048576&n[0]&&{uid:e[20]},64&n[1]&&{parentRect:e[37]},16777216&n[1]&&{rootRect:e[55]},256&n[1]&&{utilRect:e[39]},524288&n[1]&&{offset:e[50]},128&n[1]&&{disabled:e[38]},8388608&n[0]&&{contextRotation:e[23]},16777216&n[0]&&{contextFlipX:e[24]},33554432&n[0]&&{contextFlipY:e[25]},32&n[1]&&{contextZoom:e[36]?e[36].scale:void 0},16&n[1]&&{active:e[35]},33554432&n[1]&&{opacity:e[56]},67108864&n[1]&&{hoverColor:e[57]},67108864&n[1]&&{caretColor:e[57]},67108864&n[1]&&{snapColor:e[57]},r[19],65536&n[1]&&{eraseRadius:e[47]},64&n[0]&&{selectRadius:e[6]},1024&n[0]&&{enableButtonFlipVertical:e[10]},16384&n[0]&&{enableMultiSelect:e[14]},2097152&n[0]&&{mapEditorPointToImagePoint:e[21]},4194304&n[0]&&{mapImagePointToEditorPoint:e[22]},8192&n[0]&&{enableTapToAddText:e[13]},256&n[0]&&{textInputMode:e[8]},65536&n[0]&&{snapThreshold:e[16]},131072&n[1]&&{snapPointer:!e[48]},131072&n[0]&&{enableSnapToContext:e[17]},32768&n[0]&&{gridSize:e[15]},4&n[3]&&{willStartInteraction:e[95]},131072&n[2]&&{oninteractionstart:e[79]},262144&n[2]&&{oninteractionupdate:e[80]},524288&n[2]&&{oninteractionrelease:e[81]},2097152&n[2]&&{oninteractionend:e[83]},1048576&n[2]&&{oninteractioncancel:e[82]},33554432&n[2]&&{onleavecanvas:e[87]},16777216&n[2]&&{onhovercanvas:e[86]},134217728&n[2]&&{onhovershape:e[89]},67108864&n[2]&&{ontapcanvas:e[88]},1&n[1]|8&n[3]&&{onaddshape:e[156]},1&n[1]&&{onselectshape:e[157]},1&n[1]&&{onblurshape:e[158]},1&n[1]&&{ontapshape:e[159]},1&n[1]|8&n[3]&&{onupdateshape:e[160]},1&n[1]|8&n[3]&&{onremoveshape:e[161]},8&n[3]&&{ontriggerhistorywrite:e[162]},2048&n[1]&&TO(e[42])]):{};t.$set(i)},i(e){n||(bO(t.$$.fragment,e),n=!0)},o(e){xO(t.$$.fragment,e),n=!1},d(n){e[163](null),MO(t,n)}}}function tq(e){let t,n,r,i,o=e[51]&&eq(e);return{c(){t=SA("div"),o&&o.c(),RA(t,"slot","main"),NA(t,"cursor",e[46])},m(a,s){wA(a,t,s),o&&o.m(t,null),e[164](t),n=!0,r||(i=[TA(t,"keydown",e[84]),dA(yD.call(null,t)),TA(t,"dropfiles",(function(){ZM(e[12]?e[94]:eE)&&(e[12]?e[94]:eE).apply(this,arguments)})),dA(hD.call(null,t)),TA(t,"measure",e[152])],r=!0)},p(n,r){(e=n)[51]?o?(o.p(e,r),1048576&r[1]&&bO(o,1)):(o=eq(e),o.c(),bO(o,1),o.m(t,null)):o&&(yO(),xO(o,1,1,(()=>{o=null})),vO()),32768&r[1]&&NA(t,"cursor",e[46])},i(e){n||(bO(o),n=!0)},o(e){xO(o),n=!1},d(n){n&&$A(t),o&&o.d(),e[164](null),r=!1,YM(i)}}}function nq(e){let t,n;return t=new XH({props:{locale:e[4],presets:e[19],enableSelectImage:e[11],willRenderPresetToolbar:e[43],onaddpreset:e[93],ongrabpreset:e[90],ondragpreset:e[91],ondroppreset:e[92],scrollElasticity:e[44]}}),{c(){PO(t.$$.fragment)},m(e,r){RO(t,e,r),n=!0},p(e,n){const r={};16&n[0]&&(r.locale=e[4]),524288&n[0]&&(r.presets=e[19]),2048&n[0]&&(r.enableSelectImage=e[11]),4096&n[1]&&(r.willRenderPresetToolbar=e[43]),8192&n[1]&&(r.scrollElasticity=e[44]),t.$set(r)},i(e){n||(bO(t.$$.fragment,e),n=!0)},o(e){xO(t.$$.fragment,e),n=!1},d(e){MO(t,e)}}}function rq(e){let t,n,r,i="stack"===e[7]&&iq(e),o=(e[53]&&e[34]||"row"===e[7])&&sq(e);return{c(){i&&i.c(),t=kA(),o&&o.c(),n=EA()},m(e,a){i&&i.m(e,a),wA(e,t,a),o&&o.m(e,a),wA(e,n,a),r=!0},p(e,r){"stack"===e[7]?i?(i.p(e,r),128&r[0]&&bO(i,1)):(i=iq(e),i.c(),bO(i,1),i.m(t.parentNode,t)):i&&(yO(),xO(i,1,1,(()=>{i=null})),vO()),e[53]&&e[34]||"row"===e[7]?o?(o.p(e,r),128&r[0]|4194312&r[1]&&bO(o,1)):(o=sq(e),o.c(),bO(o,1),o.m(n.parentNode,n)):o&&(yO(),xO(o,1,1,(()=>{o=null})),vO())},i(e){r||(bO(i),bO(o),r=!0)},o(e){xO(i),xO(o),r=!1},d(e){i&&i.d(e),e&&$A(t),o&&o.d(e),e&&$A(n)}}}function iq(e){let t,n,r,i;const o=[aq,oq],a=[];function s(e,t){return e[45]?0:1}return n=s(e),r=a[n]=o[n](e),{c(){t=SA("div"),r.c(),RA(t,"class","PinturaControlPanels")},m(e,r){wA(e,t,r),a[n].m(t,null),i=!0},p(e,i){let l=n;n=s(e),n===l?a[n].p(e,i):(yO(),xO(a[l],1,1,(()=>{a[l]=null})),vO(),r=a[n],r?r.p(e,i):(r=a[n]=o[n](e),r.c()),bO(r,1),r.m(t,null))},i(e){i||(bO(r),i=!0)},o(e){xO(r),i=!1},d(e){e&&$A(t),a[n].d()}}}function oq(e){let t,n,r;return n=new AH({props:{locale:e[4],shapeProps:e[49],onchange:e[85],controls:e[9],scrollElasticity:e[44],willRenderControls:e[18]}}),{c(){t=SA("div"),PO(n.$$.fragment),RA(t,"class","PinturaControlPanel")},m(e,i){wA(e,t,i),RO(n,t,null),r=!0},p(e,t){const r={};16&t[0]&&(r.locale=e[4]),262144&t[1]&&(r.shapeProps=e[49]),512&t[0]&&(r.controls=e[9]),8192&t[1]&&(r.scrollElasticity=e[44]),262144&t[0]&&(r.willRenderControls=e[18]),n.$set(r)},i(e){r||(bO(n.$$.fragment,e),r=!0)},o(e){xO(n.$$.fragment,e),r=!1},d(e){e&&$A(t),MO(n)}}}function aq(e){let t,n,r;return n=new XH({props:{locale:e[4],presets:e[19],enableSelectImage:e[11],willRenderPresetToolbar:e[43],onaddpreset:e[93],ongrabpreset:e[90],ondragpreset:e[91],ondroppreset:e[92],scrollElasticity:e[44]}}),{c(){t=SA("div"),PO(n.$$.fragment),RA(t,"class","PinturaControlPanel")},m(e,i){wA(e,t,i),RO(n,t,null),r=!0},p(e,t){const r={};16&t[0]&&(r.locale=e[4]),524288&t[0]&&(r.presets=e[19]),2048&t[0]&&(r.enableSelectImage=e[11]),4096&t[1]&&(r.willRenderPresetToolbar=e[43]),8192&t[1]&&(r.scrollElasticity=e[44]),n.$set(r)},i(e){r||(bO(n.$$.fragment,e),r=!0)},o(e){xO(n.$$.fragment,e),r=!1},d(e){e&&$A(t),MO(n)}}}function sq(e){let t,n;return t=new lB({props:{class:"PinturaControlListScroller",elasticity:e[44],$$slots:{default:[fq]},$$scope:{ctx:e}}}),{c(){PO(t.$$.fragment)},m(e,r){RO(t,e,r),n=!0},p(e,n){const r={};8192&n[1]&&(r.elasticity=e[44]),262801&n[0]|262154&n[1]|134217728&n[6]&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(bO(t.$$.fragment,e),n=!0)},o(e){xO(t.$$.fragment,e),n=!1},d(e){MO(t,e)}}}function lq(e){let t,n;return t=new cj({props:{locale:e[4],class:"PinturaControlList",optionClass:"PinturaControlListOption",layout:"row",options:e[32],selectedIndex:e[32].findIndex(e[153]),onchange:e[78],$$slots:{option:[pq,e=>{let{option:t}=e;return{212:t}},e=>{let{option:t}=e;return[0,0,0,0,0,0,t?67108864:0]}]},$$scope:{ctx:e}}}),{c(){PO(t.$$.fragment)},m(e,r){RO(t,e,r),n=!0},p(e,n){const r={};16&n[0]&&(r.locale=e[4]),2&n[1]&&(r.options=e[32]),1&n[0]|2&n[1]&&(r.selectedIndex=e[32].findIndex(e[153])),16&n[0]|201326592&n[6]&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(bO(t.$$.fragment,e),n=!0)},o(e){xO(t.$$.fragment,e),n=!1},d(e){MO(t,e)}}}function cq(e){let t,n;return t=new eF({props:{$$slots:{default:[uq]},$$scope:{ctx:e}}}),{c(){PO(t.$$.fragment)},m(e,r){RO(t,e,r),n=!0},p(e,n){const r={};16&n[0]|201326592&n[6]&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(bO(t.$$.fragment,e),n=!0)},o(e){xO(t.$$.fragment,e),n=!1},d(e){MO(t,e)}}}function uq(e){let t,n=(TE(e[212].icon)?e[212].icon(e[4]):e[212].icon)+"";return{c(){t=_A("g")},m(e,r){wA(e,t,r),t.innerHTML=n},p(e,r){16&r[0]|67108864&r[6]&&n!==(n=(TE(e[212].icon)?e[212].icon(e[4]):e[212].icon)+"")&&(t.innerHTML=n)},d(e){e&&$A(t)}}}function dq(e){let t,n,r=(TE(e[212].label)?e[212].label(e[4]):e[212].label)+"";return{c(){t=SA("span"),n=CA(r)},m(e,r){wA(e,t,r),vA(t,n)},p(e,t){16&t[0]|67108864&t[6]&&r!==(r=(TE(e[212].label)?e[212].label(e[4]):e[212].label)+"")&&OA(n,r)},d(e){e&&$A(t)}}}function pq(e){let t,n,r,i=e[212].icon&&cq(e),o=!e[212].hideLabel&&dq(e);return{c(){t=SA("div"),i&&i.c(),n=kA(),o&&o.c(),RA(t,"slot","option")},m(e,a){wA(e,t,a),i&&i.m(t,null),vA(t,n),o&&o.m(t,null),r=!0},p(e,r){e[212].icon?i?(i.p(e,r),67108864&r[6]&&bO(i,1)):(i=cq(e),i.c(),bO(i,1),i.m(t,n)):i&&(yO(),xO(i,1,1,(()=>{i=null})),vO()),e[212].hideLabel?o&&(o.d(1),o=null):o?o.p(e,r):(o=dq(e),o.c(),o.m(t,null))},i(e){r||(bO(i),r=!0)},o(e){xO(i),r=!1},d(e){e&&$A(t),i&&i.d(),o&&o.d()}}}function hq(e){let t,n;return t=new AH({props:{locale:e[4],shapeProps:e[49],onchange:e[85],controls:e[9],scrollEnable:!1,hideTitles:!0,willRenderControls:e[154]}}),{c(){PO(t.$$.fragment)},m(e,r){RO(t,e,r),n=!0},p(e,n){const r={};16&n[0]&&(r.locale=e[4]),262144&n[1]&&(r.shapeProps=e[49]),512&n[0]&&(r.controls=e[9]),262144&n[0]&&(r.willRenderControls=e[154]),t.$set(r)},i(e){n||(bO(t.$$.fragment,e),n=!0)},o(e){xO(t.$$.fragment,e),n=!1},d(e){MO(t,e)}}}function fq(e){let t,n,r,i=e[34]&&lq(e),o="row"===e[7]&&hq(e);return{c(){i&&i.c(),t=kA(),o&&o.c(),n=EA()},m(e,a){i&&i.m(e,a),wA(e,t,a),o&&o.m(e,a),wA(e,n,a),r=!0},p(e,r){e[34]?i?(i.p(e,r),8&r[1]&&bO(i,1)):(i=lq(e),i.c(),bO(i,1),i.m(t.parentNode,t)):i&&(yO(),xO(i,1,1,(()=>{i=null})),vO()),"row"===e[7]?o?(o.p(e,r),128&r[0]&&bO(o,1)):(o=hq(e),o.c(),bO(o,1),o.m(n.parentNode,n)):o&&(yO(),xO(o,1,1,(()=>{o=null})),vO())},i(e){r||(bO(i),bO(o),r=!0)},o(e){xO(i),xO(o),r=!1},d(e){i&&i.d(e),e&&$A(t),o&&o.d(e),e&&$A(n)}}}function mq(e){let t,n;return t=new lB({props:{class:"PinturaControlListScroller",elasticity:e[44],$$slots:{default:[bq]},$$scope:{ctx:e}}}),{c(){PO(t.$$.fragment)},m(e,r){RO(t,e,r),n=!0},p(e,n){const r={};8192&n[1]&&(r.elasticity=e[44]),134217744&n[0]|8388608&n[1]|134217728&n[6]&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(bO(t.$$.fragment,e),n=!0)},o(e){xO(t.$$.fragment,e),n=!1},d(e){MO(t,e)}}}function gq(e){let t,n;return t=new eF({props:{$$slots:{default:[yq]},$$scope:{ctx:e}}}),{c(){PO(t.$$.fragment)},m(e,r){RO(t,e,r),n=!0},p(e,n){const r={};16&n[0]|201326592&n[6]&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(bO(t.$$.fragment,e),n=!0)},o(e){xO(t.$$.fragment,e),n=!1},d(e){MO(t,e)}}}function yq(e){let t,n=(TE(e[212].icon)?e[212].icon(e[4]):e[212].icon)+"";return{c(){t=_A("g")},m(e,r){wA(e,t,r),t.innerHTML=n},p(e,r){16&r[0]|67108864&r[6]&&n!==(n=(TE(e[212].icon)?e[212].icon(e[4]):e[212].icon)+"")&&(t.innerHTML=n)},d(e){e&&$A(t)}}}function vq(e){let t,n,r,i,o,a=(TE(e[212].label)?e[212].label(e[4]):e[212].label)+"",s=e[212].icon&&gq(e);return{c(){t=SA("div"),s&&s.c(),n=kA(),r=SA("span"),i=CA(a),RA(t,"slot","option")},m(e,a){wA(e,t,a),s&&s.m(t,null),vA(t,n),vA(t,r),vA(r,i),o=!0},p(e,r){e[212].icon?s?(s.p(e,r),67108864&r[6]&&bO(s,1)):(s=gq(e),s.c(),bO(s,1),s.m(t,n)):s&&(yO(),xO(s,1,1,(()=>{s=null})),vO()),(!o||16&r[0]|67108864&r[6])&&a!==(a=(TE(e[212].label)?e[212].label(e[4]):e[212].label)+"")&&OA(i,a)},i(e){o||(bO(s),o=!0)},o(e){xO(s),o=!1},d(e){e&&$A(t),s&&s.d()}}}function bq(e){let t,n;return t=new cj({props:{locale:e[4],class:"PinturaControlList",optionClass:"PinturaControlListOption",layout:"row",options:e[54],selectedIndex:e[54].findIndex(e[155]),onchange:e[77],$$slots:{option:[vq,e=>{let{option:t}=e;return{212:t}},e=>{let{option:t}=e;return[0,0,0,0,0,0,t?67108864:0]}]},$$scope:{ctx:e}}}),{c(){PO(t.$$.fragment)},m(e,r){RO(t,e,r),n=!0},p(e,n){const r={};16&n[0]&&(r.locale=e[4]),8388608&n[1]&&(r.options=e[54]),134217728&n[0]|8388608&n[1]&&(r.selectedIndex=e[54].findIndex(e[155])),16&n[0]|201326592&n[6]&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(bO(t.$$.fragment,e),n=!0)},o(e){xO(t.$$.fragment,e),n=!1},d(e){MO(t,e)}}}function xq(e){let t,n,r,i,o;const a=[rq,nq],s=[];function l(e,t){return e[52]?0:e[45]?1:-1}~(n=l(e))&&(r=s[n]=a[n](e));let c=e[33]&&mq(e);return{c(){t=SA("div"),r&&r.c(),i=kA(),c&&c.c(),RA(t,"slot","footer"),NA(t,"transform",e[40])},m(e,r){wA(e,t,r),~n&&s[n].m(t,null),vA(t,i),c&&c.m(t,null),o=!0},p(e,o){let u=n;n=l(e),n===u?~n&&s[n].p(e,o):(r&&(yO(),xO(s[u],1,1,(()=>{s[u]=null})),vO()),~n?(r=s[n],r?r.p(e,o):(r=s[n]=a[n](e),r.c()),bO(r,1),r.m(t,i)):r=null),e[33]?c?(c.p(e,o),4&o[1]&&bO(c,1)):(c=mq(e),c.c(),bO(c,1),c.m(t,null)):c&&(yO(),xO(c,1,1,(()=>{c=null})),vO()),512&o[1]&&NA(t,"transform",e[40])},i(e){o||(bO(r),bO(c),o=!0)},o(e){xO(r),xO(c),o=!1},d(e){e&&$A(t),~n&&s[n].d(),c&&c.d()}}}function wq(e){let t,n;return t=new NW({props:{hasHeader:e[41],$$slots:{footer:[xq],main:[tq],header:[JH]},$$scope:{ctx:e}}}),t.$on("measure",e[166]),{c(){PO(t.$$.fragment)},m(e,r){RO(t,e,r),n=!0},p(e,n){const r={};1024&n[1]&&(r.hasHeader=e[41]),2080374769&n[0]|134216703&n[1]|134217728&n[6]&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(bO(t.$$.fragment,e),n=!0)},o(e){xO(t.$$.fragment,e),n=!1},d(e){MO(t,e)}}}function $q(e,t,n){let r,i,o,a,s,l,c,u,d,p,h,f,m,g,y,v,b,x,w,$,S,_,C,k,E,T,I,P,R,M,A,O,L,N,D,F,j,z,B,U,W,V,H,q,G,K,Y,Z,X,Q,J,ee,te,ne,re,ie,oe,ae,se,le,ce,ue,de,pe,he,fe,me,ge,ye=VM,ve=()=>(ye(),ye=eA(Ee,(e=>n(35,G=e))),Ee),be=VM,xe=()=>(be(),be=eA(Me,(e=>n(145,X=e))),Me),we=VM,$e=()=>(we(),we=eA(dt,(e=>n(37,ie=e))),dt),Se=VM,_e=()=>(Se(),Se=eA(Ie,(e=>n(151,pe=e))),Ie),Ce=VM,ke=()=>(Ce(),Ce=eA(Te,(e=>n(56,me=e))),Te);e.$$.on_destroy.push((()=>ye())),e.$$.on_destroy.push((()=>be())),e.$$.on_destroy.push((()=>we())),e.$$.on_destroy.push((()=>Se())),e.$$.on_destroy.push((()=>Ce()));let{isActive:Ee}=t;ve();let{isActiveFraction:Te}=t;ke();let{isVisible:Ie}=t;_e();let{stores:Pe}=t,{locale:Re={}}=t,{shapes:Me}=t;xe();let{toolbar:Ae=[]}=t,{toolShapes:Oe={}}=t,{toolActive:Le}=t,{toolSelectRadius:Ne}=t,{toolRetainStyles:De=!1}=t,{toolbarLayout:Fe="stack"}=t,{textInputMode:je}=t,{shapeControls:ze={}}=t,{enableButtonFlipVertical:Be=!1}=t,{enablePresetSelectImage:Ue=!0}=t,{enablePresetDropImage:We=!0}=t,{enableSelectToolToAddShape:Ve=!1}=t,{enableAutoSelectMoveTool:He=["line","arrow","path","rectangle","ellipse","text"]}=t,{enableTapToAddText:qe=!1}=t,{enableMoveTool:Ge=!1}=t,{enableViewTool:Ke=!1}=t,{enableToolShareStyles:Ye=!0}=t,{enableMultiSelect:Ze=!1}=t,{gridSize:Xe=0}=t,{snapThreshold:Qe=0}=t,{enableSnapToContext:Je=!0}=t,{willRenderHeaderTools:et=KE}=t,{willRenderPresetToolbar:tt}=t,{willRenderShapeStyleControls:nt}=t,{willStartInteraction:rt}=t,{shapePresets:it=[]}=t,{utilKey:ot}=t,{mapScreenPointToImagePoint:at}=t,{mapImagePointToScreenPoint:st}=t,{imageRotation:lt=0}=t,{imageFlipX:ct=!1}=t,{imageFlipY:ut=!1}=t,{parentRect:dt}=t;$e();let{hooks:pt={}}=t;const ht=XA("selection");nA(e,ht,(e=>n(150,ce=e)));const ft=XA("isAnimated");nA(e,ft,(e=>n(142,K=e)));const mt=XA("elasticityMultiplier");nA(e,mt,(e=>n(146,Q=e)));const gt=XA("ui");nA(e,gt,(e=>n(177,ue=e)));const yt=XA("keysPressed");let vt;nA(e,yt,(e=>n(149,le=e)));const{env:bt,history:xt,rootRect:wt,rootColorSecondary:$t,enablePanInput:St,enablePanInputStatus:_t,enableZoomInput:Ct,stageRect:kt,utilRectPadded:Et,scrollElasticity:Tt,imageOverlayMarkup:It,imagePreviewModifiers:Pt,imageCropRect:Rt,stageScalar:Mt,imageSelectionRect:At,imageTransformsInterpolated:Ot,imageSelectionPan:Lt,imageSize:Nt,allowPan:Dt,allowZoom:Ft,allowZoomControls:jt,allowPlayPause:zt}=Pe;nA(e,bt,(e=>n(143,Y=e))),nA(e,wt,(e=>n(55,fe=e))),nA(e,$t,(e=>n(57,ge=e))),nA(e,_t,(e=>n(38,ae=e))),nA(e,kt,(e=>n(147,J=e))),nA(e,Et,(e=>n(39,de=e))),nA(e,Pt,(e=>n(178,he=e))),nA(e,Rt,(e=>n(176,oe=e))),nA(e,Mt,(e=>n(174,ne=e))),nA(e,At,(e=>n(175,re=e))),nA(e,Ot,(e=>n(36,ee=e))),nA(e,Lt,(e=>n(173,te=e))),nA(e,Nt,(e=>n(148,se=e)));let Bt=0,Ut={};const Wt=e=>at(tH(e,fe));let Vt,Ht,qt,Gt={};const Kt=e=>{if(!CR(e)||!AP(e,"pathClose"))return;const t=[...e.strokeColor];t[3]=1,Vt.updateMarkupShape(e,{pathClose:!1,strokeColor:t},!1),Vt.removeMarkupShapeProps(e,["backgroundColor"],!1),Vt.confirmMarkupItemDraft(),Vt.selectShape(e),j("addshape",e),xt.write()};let Yt;const Zt=(e,t)=>RP(e)?e:e.endsWith("%")?parseFloat(e)/100*t.width:void 0;let Xt,Qt,Jt;const en=(e,t,n)=>{let r=!1;t||(r=!0,t=F?at(sI(J)):sI(oe)),t.x-=ie.x||0,t.y-=ie.y||0,(ct||ut)&&(e.flipX=ct,e.flipY=ut);const i=Vt.getShapesNearPosition(X,t);if(r&&i.length){const e=.1*Math.min(oe.width,oe.height);t.x+=Math.round(-e+Math.random()*e*2),t.y+=Math.round(-e+Math.random()*e*2)}if(0!==lt&&(e.rotation=ct&&ut?-lt:ct||ut?lt:-lt),AP(e,"width")&&AP(e,"height")){const{width:n,height:r}=mM(e,["width","height"],ie);gM(e,{x:t.x-.5*n,y:t.y-.5*r},ie)}else if(SR(e))gM(e,{x:t.x,y:t.y},ie);else if(_R(e)){const{x1:r,y1:i,x2:o,y2:a}=mM(e,["x1","y1","x2","y2"],ie),s=PT(hT(r,i),hT(o,a)),l=hE(n)?oM(n,ie.width):s;gM(e,{x1:t.x-l,y1:t.y+l,x2:t.x+l,y2:t.y-l},ie)}else if(CR(e)){const{points:n}=mM(e,["points"],ie),r=RT(n);gM(e,{points:n.map((e=>({x:e.x+t.x-r.x,y:e.y+t.y-r.y})))},ie)}return e},tn=(e,t)=>{const n=en(gR(e,oe),t);return e.shape&&(AP(e.shape,"x")&&(n.x=e.shape.x),AP(e.shape,"y")&&(n.y=e.shape.y)),nn(n)},nn=e=>{const{beforeAddShape:t=()=>!0}=pt;if(t(e))return Vt.addShape(e),Vt.selectShape(e),j("addshape",e),xt.write(),e};let rn=!1;const on=()=>{xt.write()};let an;const sn=XA("redrawTrigger");nA(e,sn,(e=>n(144,Z=e)));const ln=[],cn=XN(K?20:0);return nA(e,cn,(e=>n(141,q=e))),e.$$set=e=>{"isActive"in e&&ve(n(1,Ee=e.isActive)),"isActiveFraction"in e&&ke(n(2,Te=e.isActiveFraction)),"isVisible"in e&&_e(n(3,Ie=e.isVisible)),"stores"in e&&n(100,Pe=e.stores),"locale"in e&&n(4,Re=e.locale),"shapes"in e&&xe(n(5,Me=e.shapes)),"toolbar"in e&&n(101,Ae=e.toolbar),"toolShapes"in e&&n(102,Oe=e.toolShapes),"toolActive"in e&&n(0,Le=e.toolActive),"toolSelectRadius"in e&&n(6,Ne=e.toolSelectRadius),"toolRetainStyles"in e&&n(103,De=e.toolRetainStyles),"toolbarLayout"in e&&n(7,Fe=e.toolbarLayout),"textInputMode"in e&&n(8,je=e.textInputMode),"shapeControls"in e&&n(9,ze=e.shapeControls),"enableButtonFlipVertical"in e&&n(10,Be=e.enableButtonFlipVertical),"enablePresetSelectImage"in e&&n(11,Ue=e.enablePresetSelectImage),"enablePresetDropImage"in e&&n(12,We=e.enablePresetDropImage),"enableSelectToolToAddShape"in e&&n(104,Ve=e.enableSelectToolToAddShape),"enableAutoSelectMoveTool"in e&&n(105,He=e.enableAutoSelectMoveTool),"enableTapToAddText"in e&&n(13,qe=e.enableTapToAddText),"enableMoveTool"in e&&n(106,Ge=e.enableMoveTool),"enableViewTool"in e&&n(107,Ke=e.enableViewTool),"enableToolShareStyles"in e&&n(108,Ye=e.enableToolShareStyles),"enableMultiSelect"in e&&n(14,Ze=e.enableMultiSelect),"gridSize"in e&&n(15,Xe=e.gridSize),"snapThreshold"in e&&n(16,Qe=e.snapThreshold),"enableSnapToContext"in e&&n(17,Je=e.enableSnapToContext),"willRenderHeaderTools"in e&&n(109,et=e.willRenderHeaderTools),"willRenderPresetToolbar"in e&&n(110,tt=e.willRenderPresetToolbar),"willRenderShapeStyleControls"in e&&n(18,nt=e.willRenderShapeStyleControls),"willStartInteraction"in e&&n(111,rt=e.willStartInteraction),"shapePresets"in e&&n(19,it=e.shapePresets),"utilKey"in e&&n(20,ot=e.utilKey),"mapScreenPointToImagePoint"in e&&n(21,at=e.mapScreenPointToImagePoint),"mapImagePointToScreenPoint"in e&&n(22,st=e.mapImagePointToScreenPoint),"imageRotation"in e&&n(23,lt=e.imageRotation),"imageFlipX"in e&&n(24,ct=e.imageFlipX),"imageFlipY"in e&&n(25,ut=e.imageFlipY),"parentRect"in e&&$e(n(26,dt=e.parentRect)),"hooks"in e&&n(112,pt=e.hooks)},e.$$.update=()=>{var t,te,ne,re;if(33554432&e.$$.dirty[4]&&n(124,r=le.includes(18)),1049088&e.$$.dirty[3]&&(vt&&Oe===vt||n(113,vt=Oe)),16&e.$$.dirty[1]&&Dt.set(G),16&e.$$.dirty[1]&&Ft.set(G),16&e.$$.dirty[1]&&jt.set(G),256&e.$$.dirty[3]&&n(33,i=Array.isArray(Ae)&&Ae.length>1&&Array.isArray(Ae[0][1])),4&e.$$.dirty[1]|256&e.$$.dirty[3]&&n(54,o=i?Ae.map(((e,t)=>[t,e[0]])):[]),134217728&e.$$.dirty[0]|4&e.$$.dirty[1]|256&e.$$.dirty[3]&&n(140,a=i?Ae[Bt][1]:Ae),524288&e.$$.dirty[0]|155648&e.$$.dirty[3]|65536&e.$$.dirty[4]&&n(32,s=((e,t)=>{let{willRenderPresetToolbar:n,shapePresets:r,enableViewTool:o,enableMoveTool:a}=t,s=0!==r.length||n?e:e.filter((e=>"preset"!==e[0]));return i&&(s=[["move",e=>e.shapeLabelToolMove,{icon:e=>e.shapeIconToolMove}],["view",e=>e.shapeLabelToolView,{icon:e=>e.shapeIconToolView}],...s]),s=a?s:s.filter((e=>"move"!==e[0])),o?s:s.filter((e=>"view"!==e[0]))})(a,{willRenderPresetToolbar:tt,shapePresets:it,enableMoveTool:Ge,enableViewTool:Ke})),2&e.$$.dirty[1]&&n(138,u=!!s.length),1&e.$$.dirty[0]|2&e.$$.dirty[1]|16384&e.$$.dirty[4]&&u&&void 0===Le&&n(0,Le=s[0][0]),134217729&e.$$.dirty[0]|4&e.$$.dirty[1]|2097152&e.$$.dirty[3]|65536&e.$$.dirty[4]&&i&&n(114,Ut={...Ut,[Bt]:a.map((e=>{let[t]=e;return t})).includes(Le)?Le:Ut[Bt]||a[0][0]}),512&e.$$.dirty[0]&&n(137,l=!!Object.keys(ze).length),2&e.$$.dirty[1]&&n(34,c=s.length>1),12&e.$$.dirty[1]&&n(53,d=c||i),1&e.$$.dirty[0]&&n(139,p=void 0!==Le),57344&e.$$.dirty[4]&&n(52,h=(!p||u)&&l),536870912&e.$$.dirty[0]&&n(31,j=an&&(t=an,(e,n)=>{t.dispatchEvent(CB(e,n))})),1&e.$$.dirty[0]|17&e.$$.dirty[1]&&G&&j&&j("selectcontrol",Le),16&e.$$.dirty[1]&&(G?uA(Pt,he[ot]={maskMarkupOpacity:.85},he):delete he[ot]),1&e.$$.dirty[0]|1048576&e.$$.dirty[3]&&n(136,f=Le&&vt[Le]?vt[Le][1]:void 0),4096&e.$$.dirty[4]&&n(125,m=f&&f.isSelection?"selection":"shapes"),3&e.$$.dirty[4]&&(e=>{if(!Vt)return;const t=Vt.getShapeDraft(ht);t&&(e&&(Ht=t.drawMode),Vt.updateShapeDraft({drawMode:e?"subtract":Ht},ht))})("selection"===m&&r),268435457&e.$$.dirty[0]&&Le&&Vt){const e=Vt.getMarkupItemDraft();e&&Kt(e)}if(1&e.$$.dirty[0]&&Le&&Vt&&"move"!==Le&&Vt.blurShapes(),16&e.$$.dirty[1]|134217728&e.$$.dirty[4]&&n(51,g=pe&&G),256&e.$$.dirty[1]|8388608&e.$$.dirty[4]&&n(50,y=de&&hT(J.x-de.x,J.y-de.y)),512&e.$$.dirty[0]&&n(135,v=Object.keys(ze)),16384&e.$$.dirty[0]|16&e.$$.dirty[1]|2097152&e.$$.dirty[4]&&n(122,b=Ze?G&&X.filter(TR):[]),536870912&e.$$.dirty[3]&&n(123,x=b.length>1),16&e.$$.dirty[1]|2097152&e.$$.dirty[4]&&n(119,w=G&&X.filter(TR)[0]),16&e.$$.dirty[1]|2097152&e.$$.dirty[4]&&n(130,$=G&&X.find((e=>IR(e)))),16&e.$$.dirty[1]|2097152&e.$$.dirty[4]&&n(133,S=G&&X.find((e=>PR(e)))),1&e.$$.dirty[0]|16&e.$$.dirty[1]|1048576&e.$$.dirty[3]&&n(127,_=G&&vt[Le]?(e=>{const t=pR(e);return Object.assign(t,ue[ot]?ue[ot][Le]:{}),rM(t),t})(vt[Le][0]):{}),1048576&e.$$.dirty[3]&&vt&&n(115,Gt={}),1&e.$$.dirty[0]|4227072&e.$$.dirty[3]|2056&e.$$.dirty[4]&&n(126,C=_&&Object.keys(_).reduce(((e,t)=>{const n="disableStyle"===t,r="settings"===t,i=!!v.find((e=>e.split("_").includes(t)));if(!n&&!r&&!i)return e;if(void 0===_[t])return e;if(!0===_.disableStyle)return e;if(_.disableStyle&&_.disableStyle.includes(t))return e;if("strokeWidth"===t&&Object.keys(Gt).includes("strokeWidth")&&void 0===Gt[t]&&AP(_,"points"))return e[t]=_[t],e;const{share:o=!0}=_.settings&&_.settings[t]||{},a=Ye&&o?Gt:Gt[Le]||{};return e[t]=AP(a,t)?a[t]:_[t],e}),{})),1048577&e.$$.dirty[0]|1024&e.$$.dirty[3]|4&e.$$.dirty[4]&&(De?((e,t,n)=>{const r=ue[e],i=r?r[t]:{};gt.set({...ue,[e]:{...r,[t]:{...i,...n}}})})(ot,Le,C):(te=ot,gt.set({[te]:{}}))),16&e.$$.dirty[1]|67108864&e.$$.dirty[3]|67108868&e.$$.dirty[4]&&n(134,k=ce&&G?w||C:void 0),1610612736&e.$$.dirty[3]|1536&e.$$.dirty[4]&&n(49,E=x?function(e){const t={};return e.forEach((e=>{Object.entries(e).filter((e=>{let[t]=e;return!t.startsWith("_")})).forEach((e=>{let[n,r]=e;AP(t,n)?"disableStyle"===n&&OP(r)&&t[n].push(...r):t[n]=r}))})),t}(b):k||S),1&e.$$.dirty[0]|8&e.$$.dirty[4]&&n(48,T=AP(_,"eraseRadius")||AP(_,"points")&&!AP(_,"pathClose")||"move"===Le||"view"===Le),64&e.$$.dirty[1]|8&e.$$.dirty[4]&&n(47,I=_&&void 0!==_.eraseRadius?Zt(_.eraseRadius,ie):void 0),16&e.$$.dirty[1]|33554432&e.$$.dirty[4]&&n(131,P=G&&le.includes(32)),1&e.$$.dirty[0]|16&e.$$.dirty[1]&&n(132,R=G&&"view"===Le),384&e.$$.dirty[4]&&n(129,M=R||P),96&e.$$.dirty[4]&&n(128,A=!!M&&(!!$||yF(document.activeElement))),16&e.$$.dirty[1]|48&e.$$.dirty[4]&&St.set(!G||M&&!A),16&e.$$.dirty[1]|16&e.$$.dirty[4]&&Ct.set(!G||!A),64&e.$$.dirty[1]|12&e.$$.dirty[4]&&n(120,O=_.cursorStyle?((e,t,n)=>{let r,{cursorStyle:i,cursorSize:o}=e;const a=t[o];if(void 0===a?r=Zt(o,n):RP(a)?r=a:hE(a)&&(r=cM(o,t[o],n),"strokeWidth"===o&&(r*=.5)),!(r<=0||void 0===r))return{size:r,style:i}})(_,{..._,...C},ie):void 0),33554432&e.$$.dirty[3]|16777216&e.$$.dirty[4]&&n(121,L=Jt&&(re=se,(ne=Jt).x>=0&&ne.y>=0&&ne.x<=re.width&&ne.y<=re.height)),1048576&e.$$.dirty[0]|160&e.$$.dirty[1]|427819008&e.$$.dirty[3]|3&e.$$.dirty[4])if(L&&!Xt&&O&&!ae){const e=O.size*ee.scale,t={id:"cursor-"+ot,x:Qt.x,y:Qt.y,strokeWidth:.5,strokeColor:[0,0,0]};"ellipse"===O.style&&(t.rx=e,t.ry=e);const n={strokeWidth:2.5,strokeColor:[1,1,1],opacity:.75},i=[{...t,...n},t];if("selection"===m&&r){const t=e,r=Qt.x+t,o=Qt.y+t+4,a={id:"cursor-"+ot,strokeWidth:.75,strokeColor:[0,0,0],points:[{x:r,y:o},{x:r+4,y:o}]};i.push({...a,...n,strokeWidth:2,points:[{x:r-.5,y:o},{x:r+4.5,y:o}]},a)}(e=>{It.update((t=>[...t.filter((e=>e.id!=="cursor-"+ot)),...e]))})(i)}else It.update((e=>e.filter((e=>e.id!=="cursor-"+ot))));1&e.$$.dirty[0]|128&e.$$.dirty[1]|478150656&e.$$.dirty[3]&&n(46,N=L?((e,t,n,r,i,o)=>{if(r)return"grab";if(e&&!t)return"none";if(!t)return"move"===o?"default":"crosshair";let a=t||n;return TR(a)?IR(a)?"modal"===je?"default":"text":!GR(a)||x&&!b.every(GR)?"default":"move":"default"})(O,Xt,w,ae,0,Le):"default"),526337&e.$$.dirty[0]|131072&e.$$.dirty[3]&&n(45,D="preset"===Le&&(it.length>0||Ue||tt)),64&e.$$.dirty[1]&&(F=!AP(ie,"x")&&!AP(ie,"y")),4194304&e.$$.dirty[4]&&n(44,z=Q*Tt),131072&e.$$.dirty[3]|1572864&e.$$.dirty[4]&&n(43,B=Z&&tt?e=>DB((()=>tt(e,tn,{...Y},(()=>sn.set({}))))):KE),524288&e.$$.dirty[3]&&n(42,U=Object.keys(pt).reduce(((e,t)=>("beforeAddShape"===t||void 0===pt[t]||(e[t]=pt[t]),e)),{})),16&e.$$.dirty[1]&&(e=>{X&&Me.update((t=>t.map((t=>(t._prerender=!!e&&IR(t),t)))))})(G),65536&e.$$.dirty[3]|1572864&e.$$.dirty[4]&&n(30,W=Z&&et([],Y,(()=>sn.set({})))),1073742336&e.$$.dirty[0]&&n(41,V=!!W.length||!!Object.keys(ze).some((e=>ln.includes(e)))),16&e.$$.dirty[1]|262144&e.$$.dirty[4]&&K&&cn.set(G?0:20),e.$$.dirty[4],131072&e.$$.dirty[4]&&n(40,H=q?`translateY(${q}px)`:"none")},zt.set(!1),[Le,Ee,Te,Ie,Re,Me,Ne,Fe,je,ze,Be,Ue,We,qe,Ze,Xe,Qe,Je,nt,it,ot,at,st,lt,ct,ut,dt,Bt,Vt,an,W,j,s,i,c,G,ee,ie,ae,de,H,V,U,B,z,D,N,I,T,E,y,g,h,d,o,fe,me,ge,ht,ft,mt,gt,yt,bt,wt,$t,_t,kt,Et,It,Pt,Rt,Mt,At,Ot,Lt,Nt,(e,t)=>{let{index:r}=e;n(27,Bt=r),n(0,Le=Ut[r])},(e,t)=>{let{value:r}=e;n(0,Le=r),(Ve||/enter/i.test(t.key))&&(e=>{const[t,n]=vt[e];let r,i,o="relative"===n.position;const a=o?"0%":0,s=o?"0%":0;$R(t)||bR(t)?(i=o?"20%":.2*ie.width,r=pR(t),JR(r),eM(r),r.x=a,r.y=s,gM(r,{width:i,height:i},ie)):SR(t)?(i=o?"10%":.1*ie.width,r=pR(t),r.x=a,r.y=s,gM(r,{rx:i,ry:i},ie)):_R(t)&&(i=o?"10%":.1*ie.width,r=pR(t),r.x1=a,r.y1=s,r.x2=a,r.y2=s),r&&Promise.resolve().then((()=>{nn(en(r,void 0,i))}))})(r)},e=>{if("eraser"===Le)qt=Vt.eraseShape();else if(Le&&vt[Le]){const[e,t={}]=vt[Le],n=pR(e);JR(n),eM(n);const{drawMode:i}=k;"selection"===m&&"new"===i&&ht.set([]);let o={};"selection"===m&&(j("selectiondown",[...ce]),r&&(Ht=n.drawMode,o.drawMode="subtract")),qt=Vt.createShape({...n,...C,...o},t)}else qt=void 0;return!!qt&&(qt.start(e),!0)},e=>!!qt&&(qt.update(e),!0),e=>!!qt&&(qt.release(e),!0),e=>!!qt&&(qt.cancel(e),qt=void 0,!0),e=>{if(!qt)return!1;if(qt.end(e),qt=void 0,"selection"===m){if(e.detail.isTap){const[e]=vt[Le];e.bitmap||ht.set([])}j("selectionup",[...ce])}const t=Vt.getMarkupItemDraft(),r=Ge&&(!0===He||Array.isArray(He)&&He.includes(Le));return t&&!t.isEditing||!r||n(0,Le="move"),!0},e=>{const{key:t}=e,n=Vt.getMarkupItemDraft();/escape/i.test(t)&&n&&(e.preventDefault(),e.stopPropagation(),Vt.discardMarkupItemDraft(),qt=void 0),/enter/i.test(t)&&n&&(e.preventDefault(),e.stopPropagation(),Kt(n),qt=void 0)},function(e){Object.keys(e).forEach((t=>{const{retain:r=!0,share:i=!0}=_.settings&&_.settings[t]||{};r&&(Ye&&i?n(115,Gt[t]=e[t],Gt):(Gt[Le]||n(115,Gt[Le]={},Gt),n(115,Gt[Le][t]=e[t],Gt)))})),j("selectstyle",e),w&&(x?b.forEach((t=>{Vt.updateMarkupShape(t,((e,t)=>{const n={};return Object.entries(e).forEach((e=>{let[r,i]=e;AP(t,r)&&(n[r]=i)})),n})(e,t))})):Vt.updateMarkupShape(w,e),clearTimeout(Yt),Yt=setTimeout((()=>{on()}),200))},(e,t,r)=>{n(117,Qt=t),n(118,Jt=r)},()=>{n(118,Jt=void 0),n(117,Qt=void 0)},e=>{j("markuptap",e)},e=>n(116,Xt=e),()=>{rn=!1},(e,t)=>{if(rn)return;const{beforeAddShape:n=()=>!0}=pt,r=Wt(t),i=Vt.getMarkupItemDraft(),o=bI(oe,{x:r.x+(ie.x||0),y:r.y+(ie.y||0)});if(i&&!o&&Vt.discardMarkupItemDraft(),o){if(!i){const i=gR(e,oe),o=en(i,r);return n(o)?(LR(o),void Vt.addShape(o)):(rn=!0,void t.preventDefault())}$R(i)&&(r.x-=.5*i.width,r.y-=.5*i.height),e.shape&&(AP(e.shape,"x")&&(r.x=e.shape.x),AP(e.shape,"y")&&(r.y=e.shape.y)),Vt.updateMarkupShape(i,r)}},(e,t)=>{if(rn)return;const n=Wt(t);if(!bI(oe,{x:n.x+(ie.x||0),y:n.y+(ie.y||0)}))return void Vt.discardMarkupItemDraft();const r=Vt.confirmMarkupItemDraft();Vt.selectShape(r),j("addshape",r),xt.write()},e=>tn(e),e=>{return t=e.detail.resources,n=Wt(e.detail.event),t.forEach((e=>tn(e,n)));var t,n},e=>{if(!rt)return!0;const t=rectClone(re);return rectScale(t,1/ne),rectTranslate(t,te),rectScale(t,ee.scale),rt(e,{...t,x:t.x+J.x,y:t.y+J.y})},on,sn,ln,cn,Pe,Ae,Oe,De,Ve,He,Ge,Ke,Ye,et,tt,rt,pt,vt,Ut,Gt,Xt,Qt,Jt,w,O,L,b,x,r,m,C,_,A,M,$,P,R,S,k,v,f,l,u,p,a,q,K,Y,Z,X,Q,J,se,le,ce,pe,function(t){QA.call(this,e,t)},e=>e[0]===Le,(e,t,n)=>{const r=e.filter((e=>{let[,t]=e;return!ln.includes(t)}));return nt?nt(r,t,n):r},e=>e[0]===Bt,e=>{Promise.resolve().then((()=>{j("addshape",e),on()}))},e=>{j("selectshape",e)},e=>{Promise.resolve().then((()=>{j("blurshape",e)}))},e=>{j("tapshape",e)},e=>{j("updateshape",e),on()},e=>{j("removeshape",e),on()},()=>{on()},function(e){eO[e?"unshift":"push"]((()=>{Vt=e,n(28,Vt)}))},function(e){eO[e?"unshift":"push"]((()=>{an=e,n(29,an)}))},e=>e.filter((e=>{let[,t]=e;return ln.includes(t)})),function(t){QA.call(this,e,t)}]}class Sq extends OO{constructor(e){super(),AO(this,e,$q,wq,XM,{isActive:1,isActiveFraction:2,isVisible:3,stores:100,locale:4,shapes:5,toolbar:101,toolShapes:102,toolActive:0,toolSelectRadius:6,toolRetainStyles:103,toolbarLayout:7,textInputMode:8,shapeControls:9,enableButtonFlipVertical:10,enablePresetSelectImage:11,enablePresetDropImage:12,enableSelectToolToAddShape:104,enableAutoSelectMoveTool:105,enableTapToAddText:13,enableMoveTool:106,enableViewTool:107,enableToolShareStyles:108,enableMultiSelect:14,gridSize:15,snapThreshold:16,enableSnapToContext:17,willRenderHeaderTools:109,willRenderPresetToolbar:110,willRenderShapeStyleControls:18,willStartInteraction:111,shapePresets:19,utilKey:20,mapScreenPointToImagePoint:21,mapImagePointToScreenPoint:22,imageRotation:23,imageFlipX:24,imageFlipY:25,parentRect:26,hooks:112},null,[-1,-1,-1,-1,-1,-1,-1])}get isActive(){return this.$$.ctx[1]}set isActive(e){this.$$set({isActive:e}),pO()}get isActiveFraction(){return this.$$.ctx[2]}set isActiveFraction(e){this.$$set({isActiveFraction:e}),pO()}get isVisible(){return this.$$.ctx[3]}set isVisible(e){this.$$set({isVisible:e}),pO()}get stores(){return this.$$.ctx[100]}set stores(e){this.$$set({stores:e}),pO()}get locale(){return this.$$.ctx[4]}set locale(e){this.$$set({locale:e}),pO()}get shapes(){return this.$$.ctx[5]}set shapes(e){this.$$set({shapes:e}),pO()}get toolbar(){return this.$$.ctx[101]}set toolbar(e){this.$$set({toolbar:e}),pO()}get toolShapes(){return this.$$.ctx[102]}set toolShapes(e){this.$$set({toolShapes:e}),pO()}get toolActive(){return this.$$.ctx[0]}set toolActive(e){this.$$set({toolActive:e}),pO()}get toolSelectRadius(){return this.$$.ctx[6]}set toolSelectRadius(e){this.$$set({toolSelectRadius:e}),pO()}get toolRetainStyles(){return this.$$.ctx[103]}set toolRetainStyles(e){this.$$set({toolRetainStyles:e}),pO()}get toolbarLayout(){return this.$$.ctx[7]}set toolbarLayout(e){this.$$set({toolbarLayout:e}),pO()}get textInputMode(){return this.$$.ctx[8]}set textInputMode(e){this.$$set({textInputMode:e}),pO()}get shapeControls(){return this.$$.ctx[9]}set shapeControls(e){this.$$set({shapeControls:e}),pO()}get enableButtonFlipVertical(){return this.$$.ctx[10]}set enableButtonFlipVertical(e){this.$$set({enableButtonFlipVertical:e}),pO()}get enablePresetSelectImage(){return this.$$.ctx[11]}set enablePresetSelectImage(e){this.$$set({enablePresetSelectImage:e}),pO()}get enablePresetDropImage(){return this.$$.ctx[12]}set enablePresetDropImage(e){this.$$set({enablePresetDropImage:e}),pO()}get enableSelectToolToAddShape(){return this.$$.ctx[104]}set enableSelectToolToAddShape(e){this.$$set({enableSelectToolToAddShape:e}),pO()}get enableAutoSelectMoveTool(){return this.$$.ctx[105]}set enableAutoSelectMoveTool(e){this.$$set({enableAutoSelectMoveTool:e}),pO()}get enableTapToAddText(){return this.$$.ctx[13]}set enableTapToAddText(e){this.$$set({enableTapToAddText:e}),pO()}get enableMoveTool(){return this.$$.ctx[106]}set enableMoveTool(e){this.$$set({enableMoveTool:e}),pO()}get enableViewTool(){return this.$$.ctx[107]}set enableViewTool(e){this.$$set({enableViewTool:e}),pO()}get enableToolShareStyles(){return this.$$.ctx[108]}set enableToolShareStyles(e){this.$$set({enableToolShareStyles:e}),pO()}get enableMultiSelect(){return this.$$.ctx[14]}set enableMultiSelect(e){this.$$set({enableMultiSelect:e}),pO()}get gridSize(){return this.$$.ctx[15]}set gridSize(e){this.$$set({gridSize:e}),pO()}get snapThreshold(){return this.$$.ctx[16]}set snapThreshold(e){this.$$set({snapThreshold:e}),pO()}get enableSnapToContext(){return this.$$.ctx[17]}set enableSnapToContext(e){this.$$set({enableSnapToContext:e}),pO()}get willRenderHeaderTools(){return this.$$.ctx[109]}set willRenderHeaderTools(e){this.$$set({willRenderHeaderTools:e}),pO()}get willRenderPresetToolbar(){return this.$$.ctx[110]}set willRenderPresetToolbar(e){this.$$set({willRenderPresetToolbar:e}),pO()}get willRenderShapeStyleControls(){return this.$$.ctx[18]}set willRenderShapeStyleControls(e){this.$$set({willRenderShapeStyleControls:e}),pO()}get willStartInteraction(){return this.$$.ctx[111]}set willStartInteraction(e){this.$$set({willStartInteraction:e}),pO()}get shapePresets(){return this.$$.ctx[19]}set shapePresets(e){this.$$set({shapePresets:e}),pO()}get utilKey(){return this.$$.ctx[20]}set utilKey(e){this.$$set({utilKey:e}),pO()}get mapScreenPointToImagePoint(){return this.$$.ctx[21]}set mapScreenPointToImagePoint(e){this.$$set({mapScreenPointToImagePoint:e}),pO()}get mapImagePointToScreenPoint(){return this.$$.ctx[22]}set mapImagePointToScreenPoint(e){this.$$set({mapImagePointToScreenPoint:e}),pO()}get imageRotation(){return this.$$.ctx[23]}set imageRotation(e){this.$$set({imageRotation:e}),pO()}get imageFlipX(){return this.$$.ctx[24]}set imageFlipX(e){this.$$set({imageFlipX:e}),pO()}get imageFlipY(){return this.$$.ctx[25]}set imageFlipY(e){this.$$set({imageFlipY:e}),pO()}get parentRect(){return this.$$.ctx[26]}set parentRect(e){this.$$set({parentRect:e}),pO()}get hooks(){return this.$$.ctx[112]}set hooks(e){this.$$set({hooks:e}),pO()}}var _q=(e,t,n,r,i,o,a,s,l)=>{const c=mT(e),u=.5*n.width,d=.5*n.height,p=.5*t.width,h=.5*t.height,f=i.x+r.x,m=i.y+r.y;s&&(c.x=n.width-c.x),l&&(c.y=n.height-c.y);const g=Math.cos(o),y=Math.sin(o);c.x-=u,c.y-=d;const v=c.x*g-c.y*y,b=c.x*y+c.y*g;c.x=u+v,c.y=d+b,c.x*=a,c.y*=a,c.x+=p,c.y+=h,c.x+=f,c.y+=m,c.x-=u*a,c.y-=d*a;const x=(i.x-f)*a,w=(i.y-m)*a,$=x*g-w*y,S=x*y+w*g;return c.x+=$,c.y+=S,c},Cq=(e,t,n,r,i,o,a,s,l)=>{const c=mT(e),u=WT(n),d=WT(t),p=hT(i.x+r.x,i.y+r.y),h=Math.cos(o),f=Math.sin(o);c.x-=d.x,c.y-=d.y;const m=(i.x-p.x)*a,g=(i.y-p.y)*a,y=m*h-g*f,v=m*f+g*h;c.x-=y,c.y-=v,c.x-=p.x,c.y-=p.y,c.x/=a,c.y/=a;const b=c.x*h+c.y*f,x=c.x*f-c.y*h;return c.x=b,c.y=-x,c.x+=u.x,c.y+=u.y,s&&(c.x=n.width-c.x),l&&(c.y=n.height-c.y),c},kq=e=>"boolean"==typeof e;function Eq(e){let t,n,r;function i(t){e[60](t)}let o={utilKey:e[1],stores:e[5],locale:e[6],isActive:e[2],isActiveFraction:e[3],isVisible:e[4],mapScreenPointToImagePoint:e[46],mapImagePointToScreenPoint:e[45],imageRotation:e[47],imageFlipX:e[44],imageFlipY:e[43],shapes:e[49],toolbar:e[21]||e[7],toolShapes:e[22]||e[8],toolRetainStyles:e[9],enableSelectToolToAddShape:e[31],enableTapToAddText:e[32],enableViewTool:e[30],enableMoveTool:e[34],enableAutoSelectMoveTool:e[33],enableMultiSelect:e[35],snapThreshold:e[16],gridSize:RP(e[18])?e[18]:e[15],enableSnapToContext:kq(e[19])?e[19]:e[17],enableToolShareStyles:e[13],shapeControls:e[23]||e[10],shapePresets:e[27],enableButtonFlipVertical:e[24],parentRect:e[50],enablePresetDropImage:e[26],enablePresetSelectImage:e[25],toolSelectRadius:e[11],textInputMode:e[12],willStartInteraction:e[14],willRenderPresetToolbar:e[28]||e[20],willRenderShapeStyleControls:e[29],hooks:{willRenderShapeControls:e[36],willRenderShapeTextControls:e[37],beforeAddShape:e[38],beforeRemoveShape:e[39],beforeDeselectShape:e[40],beforeSelectShape:e[41],beforeUpdateShape:e[42]}};return void 0!==e[0]&&(o.toolActive=e[0]),t=new Sq({props:o}),eO.push((()=>IO(t,"toolActive",i))),t.$on("measure",e[61]),{c(){PO(t.$$.fragment)},m(e,n){RO(t,e,n),r=!0},p(e,r){const i={};32&r[0]&&(i.stores=e[5]),64&r[0]&&(i.locale=e[6]),4&r[0]&&(i.isActive=e[2]),8&r[0]&&(i.isActiveFraction=e[3]),16&r[0]&&(i.isVisible=e[4]),32768&r[1]&&(i.mapScreenPointToImagePoint=e[46]),16384&r[1]&&(i.mapImagePointToScreenPoint=e[45]),65536&r[1]&&(i.imageRotation=e[47]),8192&r[1]&&(i.imageFlipX=e[44]),4096&r[1]&&(i.imageFlipY=e[43]),2097280&r[0]&&(i.toolbar=e[21]||e[7]),4194560&r[0]&&(i.toolShapes=e[22]||e[8]),512&r[0]&&(i.toolRetainStyles=e[9]),1&r[1]&&(i.enableSelectToolToAddShape=e[31]),2&r[1]&&(i.enableTapToAddText=e[32]),1073741824&r[0]&&(i.enableViewTool=e[30]),8&r[1]&&(i.enableMoveTool=e[34]),4&r[1]&&(i.enableAutoSelectMoveTool=e[33]),16&r[1]&&(i.enableMultiSelect=e[35]),65536&r[0]&&(i.snapThreshold=e[16]),294912&r[0]&&(i.gridSize=RP(e[18])?e[18]:e[15]),655360&r[0]&&(i.enableSnapToContext=kq(e[19])?e[19]:e[17]),8192&r[0]&&(i.enableToolShareStyles=e[13]),8389632&r[0]&&(i.shapeControls=e[23]||e[10]),134217728&r[0]&&(i.shapePresets=e[27]),16777216&r[0]&&(i.enableButtonFlipVertical=e[24]),67108864&r[0]&&(i.enablePresetDropImage=e[26]),33554432&r[0]&&(i.enablePresetSelectImage=e[25]),2048&r[0]&&(i.toolSelectRadius=e[11]),4096&r[0]&&(i.textInputMode=e[12]),16384&r[0]&&(i.willStartInteraction=e[14]),269484032&r[0]&&(i.willRenderPresetToolbar=e[28]||e[20]),536870912&r[0]&&(i.willRenderShapeStyleControls=e[29]),4064&r[1]&&(i.hooks={willRenderShapeControls:e[36],willRenderShapeTextControls:e[37],beforeAddShape:e[38],beforeRemoveShape:e[39],beforeDeselectShape:e[40],beforeSelectShape:e[41],beforeUpdateShape:e[42]}),!n&&1&r[0]&&(n=!0,i.toolActive=e[0],lO((()=>n=!1))),t.$set(i)},i(e){r||(bO(t.$$.fragment,e),r=!0)},o(e){xO(t.$$.fragment,e),r=!1},d(e){MO(t,e)}}}function Tq(e,t,n){let r,i,o,a,s,l,c,u,d,{isActive:p}=t,{isActiveFraction:h}=t,{isVisible:f}=t,{stores:m}=t,{locale:g={}}=t,{markupEditorToolbar:y}=t,{markupEditorToolStyles:v}=t,{markupEditorToolRetainStyles:b}=t,{markupEditorShapeStyleControls:x}=t,{markupEditorToolSelectRadius:w}=t,{markupEditorTextInputMode:$}=t,{markupEditorToolShareStyles:S}=t,{markupEditorWillStartInteraction:_}=t,{markupEditorGridSize:C=0}=t,{markupEditorSnapThreshold:k=0}=t,{markupEditorSnapToContext:E=!1}=t,{annotateGridSize:T}=t,{annotateSnapToContext:I}=t,{willRenderShapePresetToolbar:P}=t,{annotateTools:R}=t,{annotateToolShapes:M}=t,{annotateShapeControls:A}=t,{annotateActiveTool:O}=t,{annotateEnableButtonFlipVertical:L=!1}=t,{annotateEnableSelectImagePreset:N=!1}=t,{annotateEnableDropImagePreset:D=!0}=t,{annotatePresets:F=[]}=t,{annotateWillRenderShapePresetToolbar:j}=t,{annotateWillRenderShapeStyleControls:z}=t,{enableViewTool:B}=t,{enableSelectToolToAddShape:U}=t,{enableTapToAddText:W}=t,{enableAutoSelectMoveTool:V}=t,{enableMoveTool:H}=t,{enableMultiSelect:q}=t,{willRenderShapeControls:G}=t,{willRenderShapeTextControls:K}=t,{beforeAddShape:Y}=t,{beforeRemoveShape:Z}=t,{beforeDeselectShape:X}=t,{beforeSelectShape:Q}=t,{beforeUpdateShape:J}=t;const{rootRect:ee,imageAnnotation:te,imageSize:ne,imageRotation:re,imageFlipX:ie,imageFlipY:oe,imageTransforms:ae,imageTransformsInterpolated:se}=m;return nA(e,ee,(e=>n(59,u=e))),nA(e,ne,(e=>n(58,c=e))),nA(e,re,(e=>n(47,d=e))),nA(e,ie,(e=>n(44,a=e))),nA(e,oe,(e=>n(43,o=e))),nA(e,ae,(e=>n(57,l=e))),nA(e,se,(e=>n(56,s=e))),e.$$set=e=>{"isActive"in e&&n(2,p=e.isActive),"isActiveFraction"in e&&n(3,h=e.isActiveFraction),"isVisible"in e&&n(4,f=e.isVisible),"stores"in e&&n(5,m=e.stores),"locale"in e&&n(6,g=e.locale),"markupEditorToolbar"in e&&n(7,y=e.markupEditorToolbar),"markupEditorToolStyles"in e&&n(8,v=e.markupEditorToolStyles),"markupEditorToolRetainStyles"in e&&n(9,b=e.markupEditorToolRetainStyles),"markupEditorShapeStyleControls"in e&&n(10,x=e.markupEditorShapeStyleControls),"markupEditorToolSelectRadius"in e&&n(11,w=e.markupEditorToolSelectRadius),"markupEditorTextInputMode"in e&&n(12,$=e.markupEditorTextInputMode),"markupEditorToolShareStyles"in e&&n(13,S=e.markupEditorToolShareStyles),"markupEditorWillStartInteraction"in e&&n(14,_=e.markupEditorWillStartInteraction),"markupEditorGridSize"in e&&n(15,C=e.markupEditorGridSize),"markupEditorSnapThreshold"in e&&n(16,k=e.markupEditorSnapThreshold),"markupEditorSnapToContext"in e&&n(17,E=e.markupEditorSnapToContext),"annotateGridSize"in e&&n(18,T=e.annotateGridSize),"annotateSnapToContext"in e&&n(19,I=e.annotateSnapToContext),"willRenderShapePresetToolbar"in e&&n(20,P=e.willRenderShapePresetToolbar),"annotateTools"in e&&n(21,R=e.annotateTools),"annotateToolShapes"in e&&n(22,M=e.annotateToolShapes),"annotateShapeControls"in e&&n(23,A=e.annotateShapeControls),"annotateActiveTool"in e&&n(0,O=e.annotateActiveTool),"annotateEnableButtonFlipVertical"in e&&n(24,L=e.annotateEnableButtonFlipVertical),"annotateEnableSelectImagePreset"in e&&n(25,N=e.annotateEnableSelectImagePreset),"annotateEnableDropImagePreset"in e&&n(26,D=e.annotateEnableDropImagePreset),"annotatePresets"in e&&n(27,F=e.annotatePresets),"annotateWillRenderShapePresetToolbar"in e&&n(28,j=e.annotateWillRenderShapePresetToolbar),"annotateWillRenderShapeStyleControls"in e&&n(29,z=e.annotateWillRenderShapeStyleControls),"enableViewTool"in e&&n(30,B=e.enableViewTool),"enableSelectToolToAddShape"in e&&n(31,U=e.enableSelectToolToAddShape),"enableTapToAddText"in e&&n(32,W=e.enableTapToAddText),"enableAutoSelectMoveTool"in e&&n(33,V=e.enableAutoSelectMoveTool),"enableMoveTool"in e&&n(34,H=e.enableMoveTool),"enableMultiSelect"in e&&n(35,q=e.enableMultiSelect),"willRenderShapeControls"in e&&n(36,G=e.willRenderShapeControls),"willRenderShapeTextControls"in e&&n(37,K=e.willRenderShapeTextControls),"beforeAddShape"in e&&n(38,Y=e.beforeAddShape),"beforeRemoveShape"in e&&n(39,Z=e.beforeRemoveShape),"beforeDeselectShape"in e&&n(40,X=e.beforeDeselectShape),"beforeSelectShape"in e&&n(41,Q=e.beforeSelectShape),"beforeUpdateShape"in e&&n(42,J=e.beforeUpdateShape)},e.$$.update=()=>{503328768&e.$$.dirty[1]&&n(46,r=e=>Cq(e,u,c,s.origin,s.translation,l.rotation.z,s.scale,a,o)),503328768&e.$$.dirty[1]&&n(45,i=e=>_q(e,u,c,s.origin,s.translation,l.rotation.z,s.scale,a,o))},[O,"annotate",p,h,f,m,g,y,v,b,x,w,$,S,_,C,k,E,T,I,P,R,M,A,L,N,D,F,j,z,B,U,W,V,H,q,G,K,Y,Z,X,Q,J,o,a,i,r,d,ee,te,ne,re,ie,oe,ae,se,s,l,c,u,function(e){O=e,n(0,O)},function(t){QA.call(this,e,t)}]}var Iq={util:["annotate",class extends OO{constructor(e){super(),AO(this,e,Tq,Eq,XM,{name:1,isActive:2,isActiveFraction:3,isVisible:4,stores:5,locale:6,markupEditorToolbar:7,markupEditorToolStyles:8,markupEditorToolRetainStyles:9,markupEditorShapeStyleControls:10,markupEditorToolSelectRadius:11,markupEditorTextInputMode:12,markupEditorToolShareStyles:13,markupEditorWillStartInteraction:14,markupEditorGridSize:15,markupEditorSnapThreshold:16,markupEditorSnapToContext:17,annotateGridSize:18,annotateSnapToContext:19,willRenderShapePresetToolbar:20,annotateTools:21,annotateToolShapes:22,annotateShapeControls:23,annotateActiveTool:0,annotateEnableButtonFlipVertical:24,annotateEnableSelectImagePreset:25,annotateEnableDropImagePreset:26,annotatePresets:27,annotateWillRenderShapePresetToolbar:28,annotateWillRenderShapeStyleControls:29,enableViewTool:30,enableSelectToolToAddShape:31,enableTapToAddText:32,enableAutoSelectMoveTool:33,enableMoveTool:34,enableMultiSelect:35,willRenderShapeControls:36,willRenderShapeTextControls:37,beforeAddShape:38,beforeRemoveShape:39,beforeDeselectShape:40,beforeSelectShape:41,beforeUpdateShape:42},null,[-1,-1])}get name(){return this.$$.ctx[1]}get isActive(){return this.$$.ctx[2]}set isActive(e){this.$$set({isActive:e}),pO()}get isActiveFraction(){return this.$$.ctx[3]}set isActiveFraction(e){this.$$set({isActiveFraction:e}),pO()}get isVisible(){return this.$$.ctx[4]}set isVisible(e){this.$$set({isVisible:e}),pO()}get stores(){return this.$$.ctx[5]}set stores(e){this.$$set({stores:e}),pO()}get locale(){return this.$$.ctx[6]}set locale(e){this.$$set({locale:e}),pO()}get markupEditorToolbar(){return this.$$.ctx[7]}set markupEditorToolbar(e){this.$$set({markupEditorToolbar:e}),pO()}get markupEditorToolStyles(){return this.$$.ctx[8]}set markupEditorToolStyles(e){this.$$set({markupEditorToolStyles:e}),pO()}get markupEditorToolRetainStyles(){return this.$$.ctx[9]}set markupEditorToolRetainStyles(e){this.$$set({markupEditorToolRetainStyles:e}),pO()}get markupEditorShapeStyleControls(){return this.$$.ctx[10]}set markupEditorShapeStyleControls(e){this.$$set({markupEditorShapeStyleControls:e}),pO()}get markupEditorToolSelectRadius(){return this.$$.ctx[11]}set markupEditorToolSelectRadius(e){this.$$set({markupEditorToolSelectRadius:e}),pO()}get markupEditorTextInputMode(){return this.$$.ctx[12]}set markupEditorTextInputMode(e){this.$$set({markupEditorTextInputMode:e}),pO()}get markupEditorToolShareStyles(){return this.$$.ctx[13]}set markupEditorToolShareStyles(e){this.$$set({markupEditorToolShareStyles:e}),pO()}get markupEditorWillStartInteraction(){return this.$$.ctx[14]}set markupEditorWillStartInteraction(e){this.$$set({markupEditorWillStartInteraction:e}),pO()}get markupEditorGridSize(){return this.$$.ctx[15]}set markupEditorGridSize(e){this.$$set({markupEditorGridSize:e}),pO()}get markupEditorSnapThreshold(){return this.$$.ctx[16]}set markupEditorSnapThreshold(e){this.$$set({markupEditorSnapThreshold:e}),pO()}get markupEditorSnapToContext(){return this.$$.ctx[17]}set markupEditorSnapToContext(e){this.$$set({markupEditorSnapToContext:e}),pO()}get annotateGridSize(){return this.$$.ctx[18]}set annotateGridSize(e){this.$$set({annotateGridSize:e}),pO()}get annotateSnapToContext(){return this.$$.ctx[19]}set annotateSnapToContext(e){this.$$set({annotateSnapToContext:e}),pO()}get willRenderShapePresetToolbar(){return this.$$.ctx[20]}set willRenderShapePresetToolbar(e){this.$$set({willRenderShapePresetToolbar:e}),pO()}get annotateTools(){return this.$$.ctx[21]}set annotateTools(e){this.$$set({annotateTools:e}),pO()}get annotateToolShapes(){return this.$$.ctx[22]}set annotateToolShapes(e){this.$$set({annotateToolShapes:e}),pO()}get annotateShapeControls(){return this.$$.ctx[23]}set annotateShapeControls(e){this.$$set({annotateShapeControls:e}),pO()}get annotateActiveTool(){return this.$$.ctx[0]}set annotateActiveTool(e){this.$$set({annotateActiveTool:e}),pO()}get annotateEnableButtonFlipVertical(){return this.$$.ctx[24]}set annotateEnableButtonFlipVertical(e){this.$$set({annotateEnableButtonFlipVertical:e}),pO()}get annotateEnableSelectImagePreset(){return this.$$.ctx[25]}set annotateEnableSelectImagePreset(e){this.$$set({annotateEnableSelectImagePreset:e}),pO()}get annotateEnableDropImagePreset(){return this.$$.ctx[26]}set annotateEnableDropImagePreset(e){this.$$set({annotateEnableDropImagePreset:e}),pO()}get annotatePresets(){return this.$$.ctx[27]}set annotatePresets(e){this.$$set({annotatePresets:e}),pO()}get annotateWillRenderShapePresetToolbar(){return this.$$.ctx[28]}set annotateWillRenderShapePresetToolbar(e){this.$$set({annotateWillRenderShapePresetToolbar:e}),pO()}get annotateWillRenderShapeStyleControls(){return this.$$.ctx[29]}set annotateWillRenderShapeStyleControls(e){this.$$set({annotateWillRenderShapeStyleControls:e}),pO()}get enableViewTool(){return this.$$.ctx[30]}set enableViewTool(e){this.$$set({enableViewTool:e}),pO()}get enableSelectToolToAddShape(){return this.$$.ctx[31]}set enableSelectToolToAddShape(e){this.$$set({enableSelectToolToAddShape:e}),pO()}get enableTapToAddText(){return this.$$.ctx[32]}set enableTapToAddText(e){this.$$set({enableTapToAddText:e}),pO()}get enableAutoSelectMoveTool(){return this.$$.ctx[33]}set enableAutoSelectMoveTool(e){this.$$set({enableAutoSelectMoveTool:e}),pO()}get enableMoveTool(){return this.$$.ctx[34]}set enableMoveTool(e){this.$$set({enableMoveTool:e}),pO()}get enableMultiSelect(){return this.$$.ctx[35]}set enableMultiSelect(e){this.$$set({enableMultiSelect:e}),pO()}get willRenderShapeControls(){return this.$$.ctx[36]}set willRenderShapeControls(e){this.$$set({willRenderShapeControls:e}),pO()}get willRenderShapeTextControls(){return this.$$.ctx[37]}set willRenderShapeTextControls(e){this.$$set({willRenderShapeTextControls:e}),pO()}get beforeAddShape(){return this.$$.ctx[38]}set beforeAddShape(e){this.$$set({beforeAddShape:e}),pO()}get beforeRemoveShape(){return this.$$.ctx[39]}set beforeRemoveShape(e){this.$$set({beforeRemoveShape:e}),pO()}get beforeDeselectShape(){return this.$$.ctx[40]}set beforeDeselectShape(e){this.$$set({beforeDeselectShape:e}),pO()}get beforeSelectShape(){return this.$$.ctx[41]}set beforeSelectShape(e){this.$$set({beforeSelectShape:e}),pO()}get beforeUpdateShape(){return this.$$.ctx[42]}set beforeUpdateShape(e){this.$$set({beforeUpdateShape:e}),pO()}}]};function Pq(e){let t,n,r;function i(t){e[52](t)}let o={utilKey:e[1],stores:e[5],locale:e[6],isActive:e[2],isActiveFraction:e[3],isVisible:e[4],mapScreenPointToImagePoint:e[44],mapImagePointToScreenPoint:e[43],shapes:e[46],toolbar:e[20]||e[7],toolShapes:e[21]||e[8],toolRetainStyles:e[9],shapeControls:e[22]||e[10],shapePresets:e[26],enableSelectToolToAddShape:e[29],enableTapToAddText:e[30],enableViewTool:e[31],enableMoveTool:e[32],enableAutoSelectMoveTool:e[33],enableMultiSelect:e[34],snapThreshold:e[16],gridSize:RP(e[18])?e[18]:e[15],enableSnapToContext:kq(e[19])?e[19]:e[17],enableToolShareStyles:e[13],enablePresetSelectImage:e[24],enablePresetDropImage:e[25],enableButtonFlipVertical:e[23],parentRect:e[45],toolSelectRadius:e[11],textInputMode:e[12],willStartInteraction:e[42],willRenderPresetToolbar:e[27]||e[14],willRenderShapeStyleControls:e[28],hooks:{willRenderShapeControls:e[35],willRenderShapeTextControls:e[36],beforeAddShape:e[37],beforeRemoveShape:e[38],beforeDeselectShape:e[39],beforeSelectShape:e[40],beforeUpdateShape:e[41]}};return void 0!==e[0]&&(o.toolActive=e[0]),t=new Sq({props:o}),eO.push((()=>IO(t,"toolActive",i))),t.$on("measure",e[53]),{c(){PO(t.$$.fragment)},m(e,n){RO(t,e,n),r=!0},p(e,r){const i={};32&r[0]&&(i.stores=e[5]),64&r[0]&&(i.locale=e[6]),4&r[0]&&(i.isActive=e[2]),8&r[0]&&(i.isActiveFraction=e[3]),16&r[0]&&(i.isVisible=e[4]),8192&r[1]&&(i.mapScreenPointToImagePoint=e[44]),4096&r[1]&&(i.mapImagePointToScreenPoint=e[43]),1048704&r[0]&&(i.toolbar=e[20]||e[7]),2097408&r[0]&&(i.toolShapes=e[21]||e[8]),512&r[0]&&(i.toolRetainStyles=e[9]),4195328&r[0]&&(i.shapeControls=e[22]||e[10]),67108864&r[0]&&(i.shapePresets=e[26]),536870912&r[0]&&(i.enableSelectToolToAddShape=e[29]),1073741824&r[0]&&(i.enableTapToAddText=e[30]),1&r[1]&&(i.enableViewTool=e[31]),2&r[1]&&(i.enableMoveTool=e[32]),4&r[1]&&(i.enableAutoSelectMoveTool=e[33]),8&r[1]&&(i.enableMultiSelect=e[34]),65536&r[0]&&(i.snapThreshold=e[16]),294912&r[0]&&(i.gridSize=RP(e[18])?e[18]:e[15]),655360&r[0]&&(i.enableSnapToContext=kq(e[19])?e[19]:e[17]),8192&r[0]&&(i.enableToolShareStyles=e[13]),16777216&r[0]&&(i.enablePresetSelectImage=e[24]),33554432&r[0]&&(i.enablePresetDropImage=e[25]),8388608&r[0]&&(i.enableButtonFlipVertical=e[23]),2048&r[0]&&(i.toolSelectRadius=e[11]),4096&r[0]&&(i.textInputMode=e[12]),2048&r[1]&&(i.willStartInteraction=e[42]),134234112&r[0]&&(i.willRenderPresetToolbar=e[27]||e[14]),268435456&r[0]&&(i.willRenderShapeStyleControls=e[28]),2032&r[1]&&(i.hooks={willRenderShapeControls:e[35],willRenderShapeTextControls:e[36],beforeAddShape:e[37],beforeRemoveShape:e[38],beforeDeselectShape:e[39],beforeSelectShape:e[40],beforeUpdateShape:e[41]}),!n&&1&r[0]&&(n=!0,i.toolActive=e[0],lO((()=>n=!1))),t.$set(i)},i(e){r||(bO(t.$$.fragment,e),r=!0)},o(e){xO(t.$$.fragment,e),r=!1},d(e){MO(t,e)}}}function Rq(e,t,n){let r,i,o,a,s,{isActive:l}=t,{isActiveFraction:c}=t,{isVisible:u}=t,{stores:d}=t,{locale:p={}}=t,{markupEditorToolbar:h}=t,{markupEditorToolStyles:f}=t,{markupEditorToolRetainStyles:m}=t,{markupEditorShapeStyleControls:g}=t,{markupEditorToolSelectRadius:y}=t,{markupEditorTextInputMode:v}=t,{markupEditorToolShareStyles:b}=t,{willRenderShapePresetToolbar:x}=t,{markupEditorGridSize:w}=t,{markupEditorSnapThreshold:$}=t,{markupEditorSnapToContext:S=!0}=t,{decorateGridSize:_}=t,{decorateSnapToContext:C}=t,{decorateTools:k}=t,{decorateToolShapes:E}=t,{decorateShapeControls:T}=t,{decorateActiveTool:I}=t,{decorateEnableButtonFlipVertical:P=!1}=t,{decorateEnableSelectImagePreset:R=!1}=t,{decorateEnableDropImagePreset:M=!0}=t,{decoratePresets:A=[]}=t,{decorateWillRenderShapePresetToolbar:O}=t,{decorateWillRenderShapeStyleControls:L}=t,{enableSelectToolToAddShape:N}=t,{enableTapToAddText:D}=t,{enableViewTool:F}=t,{enableMoveTool:j}=t,{enableAutoSelectMoveTool:z}=t,{enableMultiSelect:B}=t,{willRenderShapeControls:U}=t,{willRenderShapeTextControls:W}=t,{beforeAddShape:V}=t,{beforeRemoveShape:H}=t,{beforeDeselectShape:q}=t,{beforeSelectShape:G}=t,{beforeUpdateShape:K}=t,{markupEditorWillStartInteraction:Y}=t;const{imageCropRect:Z,imageDecoration:X,imageSelectionRectPresentation:Q,imageTransformsInterpolated:J}=d;return nA(e,Q,(e=>n(50,a=e))),nA(e,J,(e=>n(51,s=e))),e.$$set=e=>{"isActive"in e&&n(2,l=e.isActive),"isActiveFraction"in e&&n(3,c=e.isActiveFraction),"isVisible"in e&&n(4,u=e.isVisible),"stores"in e&&n(5,d=e.stores),"locale"in e&&n(6,p=e.locale),"markupEditorToolbar"in e&&n(7,h=e.markupEditorToolbar),"markupEditorToolStyles"in e&&n(8,f=e.markupEditorToolStyles),"markupEditorToolRetainStyles"in e&&n(9,m=e.markupEditorToolRetainStyles),"markupEditorShapeStyleControls"in e&&n(10,g=e.markupEditorShapeStyleControls),"markupEditorToolSelectRadius"in e&&n(11,y=e.markupEditorToolSelectRadius),"markupEditorTextInputMode"in e&&n(12,v=e.markupEditorTextInputMode),"markupEditorToolShareStyles"in e&&n(13,b=e.markupEditorToolShareStyles),"willRenderShapePresetToolbar"in e&&n(14,x=e.willRenderShapePresetToolbar),"markupEditorGridSize"in e&&n(15,w=e.markupEditorGridSize),"markupEditorSnapThreshold"in e&&n(16,$=e.markupEditorSnapThreshold),"markupEditorSnapToContext"in e&&n(17,S=e.markupEditorSnapToContext),"decorateGridSize"in e&&n(18,_=e.decorateGridSize),"decorateSnapToContext"in e&&n(19,C=e.decorateSnapToContext),"decorateTools"in e&&n(20,k=e.decorateTools),"decorateToolShapes"in e&&n(21,E=e.decorateToolShapes),"decorateShapeControls"in e&&n(22,T=e.decorateShapeControls),"decorateActiveTool"in e&&n(0,I=e.decorateActiveTool),"decorateEnableButtonFlipVertical"in e&&n(23,P=e.decorateEnableButtonFlipVertical),"decorateEnableSelectImagePreset"in e&&n(24,R=e.decorateEnableSelectImagePreset),"decorateEnableDropImagePreset"in e&&n(25,M=e.decorateEnableDropImagePreset),"decoratePresets"in e&&n(26,A=e.decoratePresets),"decorateWillRenderShapePresetToolbar"in e&&n(27,O=e.decorateWillRenderShapePresetToolbar),"decorateWillRenderShapeStyleControls"in e&&n(28,L=e.decorateWillRenderShapeStyleControls),"enableSelectToolToAddShape"in e&&n(29,N=e.enableSelectToolToAddShape),"enableTapToAddText"in e&&n(30,D=e.enableTapToAddText),"enableViewTool"in e&&n(31,F=e.enableViewTool),"enableMoveTool"in e&&n(32,j=e.enableMoveTool),"enableAutoSelectMoveTool"in e&&n(33,z=e.enableAutoSelectMoveTool),"enableMultiSelect"in e&&n(34,B=e.enableMultiSelect),"willRenderShapeControls"in e&&n(35,U=e.willRenderShapeControls),"willRenderShapeTextControls"in e&&n(36,W=e.willRenderShapeTextControls),"beforeAddShape"in e&&n(37,V=e.beforeAddShape),"beforeRemoveShape"in e&&n(38,H=e.beforeRemoveShape),"beforeDeselectShape"in e&&n(39,q=e.beforeDeselectShape),"beforeSelectShape"in e&&n(40,G=e.beforeSelectShape),"beforeUpdateShape"in e&&n(41,K=e.beforeUpdateShape),"markupEditorWillStartInteraction"in e&&n(42,Y=e.markupEditorWillStartInteraction)},e.$$.update=()=>{1048576&e.$$.dirty[1]&&n(49,r=s?s.scale:1),786432&e.$$.dirty[1]&&n(44,i=e=>{const t=mT(e);return t.x-=a.x,t.y-=a.y,t.x/=r,t.y/=r,t}),786432&e.$$.dirty[1]&&n(43,o=e=>{const t=mT(e);return t.x*=r,t.y*=r,t.x+=a.x,t.y+=a.y,t})},[I,"decorate",l,c,u,d,p,h,f,m,g,y,v,b,x,w,$,S,_,C,k,E,T,P,R,M,A,O,L,N,D,F,j,z,B,U,W,V,H,q,G,K,Y,o,i,Z,X,Q,J,r,a,s,function(e){I=e,n(0,I)},function(t){QA.call(this,e,t)}]}var Mq={util:["decorate",class extends OO{constructor(e){super(),AO(this,e,Rq,Pq,XM,{name:1,isActive:2,isActiveFraction:3,isVisible:4,stores:5,locale:6,markupEditorToolbar:7,markupEditorToolStyles:8,markupEditorToolRetainStyles:9,markupEditorShapeStyleControls:10,markupEditorToolSelectRadius:11,markupEditorTextInputMode:12,markupEditorToolShareStyles:13,willRenderShapePresetToolbar:14,markupEditorGridSize:15,markupEditorSnapThreshold:16,markupEditorSnapToContext:17,decorateGridSize:18,decorateSnapToContext:19,decorateTools:20,decorateToolShapes:21,decorateShapeControls:22,decorateActiveTool:0,decorateEnableButtonFlipVertical:23,decorateEnableSelectImagePreset:24,decorateEnableDropImagePreset:25,decoratePresets:26,decorateWillRenderShapePresetToolbar:27,decorateWillRenderShapeStyleControls:28,enableSelectToolToAddShape:29,enableTapToAddText:30,enableViewTool:31,enableMoveTool:32,enableAutoSelectMoveTool:33,enableMultiSelect:34,willRenderShapeControls:35,willRenderShapeTextControls:36,beforeAddShape:37,beforeRemoveShape:38,beforeDeselectShape:39,beforeSelectShape:40,beforeUpdateShape:41,markupEditorWillStartInteraction:42},null,[-1,-1])}get name(){return this.$$.ctx[1]}get isActive(){return this.$$.ctx[2]}set isActive(e){this.$$set({isActive:e}),pO()}get isActiveFraction(){return this.$$.ctx[3]}set isActiveFraction(e){this.$$set({isActiveFraction:e}),pO()}get isVisible(){return this.$$.ctx[4]}set isVisible(e){this.$$set({isVisible:e}),pO()}get stores(){return this.$$.ctx[5]}set stores(e){this.$$set({stores:e}),pO()}get locale(){return this.$$.ctx[6]}set locale(e){this.$$set({locale:e}),pO()}get markupEditorToolbar(){return this.$$.ctx[7]}set markupEditorToolbar(e){this.$$set({markupEditorToolbar:e}),pO()}get markupEditorToolStyles(){return this.$$.ctx[8]}set markupEditorToolStyles(e){this.$$set({markupEditorToolStyles:e}),pO()}get markupEditorToolRetainStyles(){return this.$$.ctx[9]}set markupEditorToolRetainStyles(e){this.$$set({markupEditorToolRetainStyles:e}),pO()}get markupEditorShapeStyleControls(){return this.$$.ctx[10]}set markupEditorShapeStyleControls(e){this.$$set({markupEditorShapeStyleControls:e}),pO()}get markupEditorToolSelectRadius(){return this.$$.ctx[11]}set markupEditorToolSelectRadius(e){this.$$set({markupEditorToolSelectRadius:e}),pO()}get markupEditorTextInputMode(){return this.$$.ctx[12]}set markupEditorTextInputMode(e){this.$$set({markupEditorTextInputMode:e}),pO()}get markupEditorToolShareStyles(){return this.$$.ctx[13]}set markupEditorToolShareStyles(e){this.$$set({markupEditorToolShareStyles:e}),pO()}get willRenderShapePresetToolbar(){return this.$$.ctx[14]}set willRenderShapePresetToolbar(e){this.$$set({willRenderShapePresetToolbar:e}),pO()}get markupEditorGridSize(){return this.$$.ctx[15]}set markupEditorGridSize(e){this.$$set({markupEditorGridSize:e}),pO()}get markupEditorSnapThreshold(){return this.$$.ctx[16]}set markupEditorSnapThreshold(e){this.$$set({markupEditorSnapThreshold:e}),pO()}get markupEditorSnapToContext(){return this.$$.ctx[17]}set markupEditorSnapToContext(e){this.$$set({markupEditorSnapToContext:e}),pO()}get decorateGridSize(){return this.$$.ctx[18]}set decorateGridSize(e){this.$$set({decorateGridSize:e}),pO()}get decorateSnapToContext(){return this.$$.ctx[19]}set decorateSnapToContext(e){this.$$set({decorateSnapToContext:e}),pO()}get decorateTools(){return this.$$.ctx[20]}set decorateTools(e){this.$$set({decorateTools:e}),pO()}get decorateToolShapes(){return this.$$.ctx[21]}set decorateToolShapes(e){this.$$set({decorateToolShapes:e}),pO()}get decorateShapeControls(){return this.$$.ctx[22]}set decorateShapeControls(e){this.$$set({decorateShapeControls:e}),pO()}get decorateActiveTool(){return this.$$.ctx[0]}set decorateActiveTool(e){this.$$set({decorateActiveTool:e}),pO()}get decorateEnableButtonFlipVertical(){return this.$$.ctx[23]}set decorateEnableButtonFlipVertical(e){this.$$set({decorateEnableButtonFlipVertical:e}),pO()}get decorateEnableSelectImagePreset(){return this.$$.ctx[24]}set decorateEnableSelectImagePreset(e){this.$$set({decorateEnableSelectImagePreset:e}),pO()}get decorateEnableDropImagePreset(){return this.$$.ctx[25]}set decorateEnableDropImagePreset(e){this.$$set({decorateEnableDropImagePreset:e}),pO()}get decoratePresets(){return this.$$.ctx[26]}set decoratePresets(e){this.$$set({decoratePresets:e}),pO()}get decorateWillRenderShapePresetToolbar(){return this.$$.ctx[27]}set decorateWillRenderShapePresetToolbar(e){this.$$set({decorateWillRenderShapePresetToolbar:e}),pO()}get decorateWillRenderShapeStyleControls(){return this.$$.ctx[28]}set decorateWillRenderShapeStyleControls(e){this.$$set({decorateWillRenderShapeStyleControls:e}),pO()}get enableSelectToolToAddShape(){return this.$$.ctx[29]}set enableSelectToolToAddShape(e){this.$$set({enableSelectToolToAddShape:e}),pO()}get enableTapToAddText(){return this.$$.ctx[30]}set enableTapToAddText(e){this.$$set({enableTapToAddText:e}),pO()}get enableViewTool(){return this.$$.ctx[31]}set enableViewTool(e){this.$$set({enableViewTool:e}),pO()}get enableMoveTool(){return this.$$.ctx[32]}set enableMoveTool(e){this.$$set({enableMoveTool:e}),pO()}get enableAutoSelectMoveTool(){return this.$$.ctx[33]}set enableAutoSelectMoveTool(e){this.$$set({enableAutoSelectMoveTool:e}),pO()}get enableMultiSelect(){return this.$$.ctx[34]}set enableMultiSelect(e){this.$$set({enableMultiSelect:e}),pO()}get willRenderShapeControls(){return this.$$.ctx[35]}set willRenderShapeControls(e){this.$$set({willRenderShapeControls:e}),pO()}get willRenderShapeTextControls(){return this.$$.ctx[36]}set willRenderShapeTextControls(e){this.$$set({willRenderShapeTextControls:e}),pO()}get beforeAddShape(){return this.$$.ctx[37]}set beforeAddShape(e){this.$$set({beforeAddShape:e}),pO()}get beforeRemoveShape(){return this.$$.ctx[38]}set beforeRemoveShape(e){this.$$set({beforeRemoveShape:e}),pO()}get beforeDeselectShape(){return this.$$.ctx[39]}set beforeDeselectShape(e){this.$$set({beforeDeselectShape:e}),pO()}get beforeSelectShape(){return this.$$.ctx[40]}set beforeSelectShape(e){this.$$set({beforeSelectShape:e}),pO()}get beforeUpdateShape(){return this.$$.ctx[41]}set beforeUpdateShape(e){this.$$set({beforeUpdateShape:e}),pO()}get markupEditorWillStartInteraction(){return this.$$.ctx[42]}set markupEditorWillStartInteraction(e){this.$$set({markupEditorWillStartInteraction:e}),pO()}}]};function Aq(e){let t,n;return t=new Sq({props:{stores:e[3],locale:e[4],isActive:e[0],isActiveFraction:e[1],isVisible:e[2],mapScreenPointToImagePoint:e[26],mapImagePointToScreenPoint:e[25],utilKey:"sticker",shapePresets:e[5],shapes:e[6]?e[35]:e[36],toolActive:"preset",imageFlipX:!!e[6]&&e[24],imageFlipY:!!e[6]&&e[23],imageRotation:e[6]?e[31]:0,parentRect:e[6]?e[37]:e[33],snapThreshold:e[29],gridSize:e[28],enableMultiSelect:e[12],enableSnapToContext:e[27],enablePresetDropImage:e[7],enablePresetSelectImage:e[30],enableButtonFlipVertical:e[10]||e[8],toolSelectRadius:e[15],willStartInteraction:e[22],willRenderPresetToolbar:e[11]||e[9]||e[16],hooks:{willRenderShapeControls:e[13],willRenderShapeTextControls:e[14],beforeAddShape:e[17],beforeRemoveShape:e[18],beforeDeselectShape:e[19],beforeSelectShape:e[20],beforeUpdateShape:e[21]}}}),t.$on("measure",e[60]),{c(){PO(t.$$.fragment)},m(e,r){RO(t,e,r),n=!0},p(e,n){const r={};8&n[0]&&(r.stores=e[3]),16&n[0]&&(r.locale=e[4]),1&n[0]&&(r.isActive=e[0]),2&n[0]&&(r.isActiveFraction=e[1]),4&n[0]&&(r.isVisible=e[2]),67108864&n[0]&&(r.mapScreenPointToImagePoint=e[26]),33554432&n[0]&&(r.mapImagePointToScreenPoint=e[25]),32&n[0]&&(r.shapePresets=e[5]),64&n[0]&&(r.shapes=e[6]?e[35]:e[36]),16777280&n[0]&&(r.imageFlipX=!!e[6]&&e[24]),8388672&n[0]&&(r.imageFlipY=!!e[6]&&e[23]),64&n[0]|1&n[1]&&(r.imageRotation=e[6]?e[31]:0),64&n[0]&&(r.parentRect=e[6]?e[37]:e[33]),536870912&n[0]&&(r.snapThreshold=e[29]),268435456&n[0]&&(r.gridSize=e[28]),4096&n[0]&&(r.enableMultiSelect=e[12]),134217728&n[0]&&(r.enableSnapToContext=e[27]),128&n[0]&&(r.enablePresetDropImage=e[7]),1073741824&n[0]&&(r.enablePresetSelectImage=e[30]),1280&n[0]&&(r.enableButtonFlipVertical=e[10]||e[8]),32768&n[0]&&(r.toolSelectRadius=e[15]),4194304&n[0]&&(r.willStartInteraction=e[22]),68096&n[0]&&(r.willRenderPresetToolbar=e[11]||e[9]||e[16]),4087808&n[0]&&(r.hooks={willRenderShapeControls:e[13],willRenderShapeTextControls:e[14],beforeAddShape:e[17],beforeRemoveShape:e[18],beforeDeselectShape:e[19],beforeSelectShape:e[20],beforeUpdateShape:e[21]}),t.$set(r)},i(e){n||(bO(t.$$.fragment,e),n=!0)},o(e){xO(t.$$.fragment,e),n=!1},d(e){MO(t,e)}}}function Oq(e,t,n){let r,i,o,a,s,l,c,u,d,p,h,f,m,g,y,{isActive:v}=t,{isActiveFraction:b}=t,{isVisible:x}=t,{stores:w}=t,{locale:$={}}=t,{stickers:S=[]}=t,{stickerForceEnable:_=!1}=t,{stickerStickToImage:C=!1}=t,{stickerEnableSelectImagePreset:k=!0}=t,{stickerEnableDropImagePreset:E=!0}=t,{stickerEnableButtonFlipVertical:T=!1}=t,{stickerWillRenderShapePresetToolbar:I}=t,{stickerEnableSelectImage:P=!0}=t,{stickersEnableButtonFlipVertical:R=!1}=t,{stickersWillRenderShapePresetToolbar:M}=t,{markupEditorGridSize:A=0}=t,{markupEditorSnapThreshold:O=0}=t,{markupEditorSnapToContext:L=!1}=t,{enableMultiSelect:N}=t,{annotateGridSize:D}=t,{annotateSnapToContext:F}=t,{decorateGridSize:j}=t,{decorateSnapToContext:z}=t,{willRenderShapeControls:B}=t,{willRenderShapeTextControls:U}=t,{markupEditorToolSelectRadius:W}=t,{willRenderShapePresetToolbar:V}=t,{beforeAddShape:H}=t,{beforeRemoveShape:q}=t,{beforeDeselectShape:G}=t,{beforeSelectShape:K}=t,{beforeUpdateShape:Y}=t,{markupEditorWillStartInteraction:Z}=t;const{rootRect:X,imageCropRect:Q,imageSelectionRectPresentation:J,imageAnnotation:ee,imageDecoration:te,imageSize:ne,imageTransforms:re,imageTransformsInterpolated:ie,imageRotation:oe,imageFlipX:ae,imageFlipY:se}=w;return nA(e,X,(e=>n(59,g=e))),nA(e,J,(e=>n(55,u=e))),nA(e,ne,(e=>n(58,m=e))),nA(e,re,(e=>n(57,f=e))),nA(e,ie,(e=>n(56,h=e))),nA(e,oe,(e=>n(31,y=e))),nA(e,ae,(e=>n(24,p=e))),nA(e,se,(e=>n(23,d=e))),e.$$set=e=>{"isActive"in e&&n(0,v=e.isActive),"isActiveFraction"in e&&n(1,b=e.isActiveFraction),"isVisible"in e&&n(2,x=e.isVisible),"stores"in e&&n(3,w=e.stores),"locale"in e&&n(4,$=e.locale),"stickers"in e&&n(5,S=e.stickers),"stickerForceEnable"in e&&n(44,_=e.stickerForceEnable),"stickerStickToImage"in e&&n(6,C=e.stickerStickToImage),"stickerEnableSelectImagePreset"in e&&n(45,k=e.stickerEnableSelectImagePreset),"stickerEnableDropImagePreset"in e&&n(7,E=e.stickerEnableDropImagePreset),"stickerEnableButtonFlipVertical"in e&&n(8,T=e.stickerEnableButtonFlipVertical),"stickerWillRenderShapePresetToolbar"in e&&n(9,I=e.stickerWillRenderShapePresetToolbar),"stickerEnableSelectImage"in e&&n(46,P=e.stickerEnableSelectImage),"stickersEnableButtonFlipVertical"in e&&n(10,R=e.stickersEnableButtonFlipVertical),"stickersWillRenderShapePresetToolbar"in e&&n(11,M=e.stickersWillRenderShapePresetToolbar),"markupEditorGridSize"in e&&n(47,A=e.markupEditorGridSize),"markupEditorSnapThreshold"in e&&n(48,O=e.markupEditorSnapThreshold),"markupEditorSnapToContext"in e&&n(49,L=e.markupEditorSnapToContext),"enableMultiSelect"in e&&n(12,N=e.enableMultiSelect),"annotateGridSize"in e&&n(50,D=e.annotateGridSize),"annotateSnapToContext"in e&&n(51,F=e.annotateSnapToContext),"decorateGridSize"in e&&n(52,j=e.decorateGridSize),"decorateSnapToContext"in e&&n(53,z=e.decorateSnapToContext),"willRenderShapeControls"in e&&n(13,B=e.willRenderShapeControls),"willRenderShapeTextControls"in e&&n(14,U=e.willRenderShapeTextControls),"markupEditorToolSelectRadius"in e&&n(15,W=e.markupEditorToolSelectRadius),"willRenderShapePresetToolbar"in e&&n(16,V=e.willRenderShapePresetToolbar),"beforeAddShape"in e&&n(17,H=e.beforeAddShape),"beforeRemoveShape"in e&&n(18,q=e.beforeRemoveShape),"beforeDeselectShape"in e&&n(19,G=e.beforeDeselectShape),"beforeSelectShape"in e&&n(20,K=e.beforeSelectShape),"beforeUpdateShape"in e&&n(21,Y=e.beforeUpdateShape),"markupEditorWillStartInteraction"in e&&n(22,Z=e.markupEditorWillStartInteraction)},e.$$.update=()=>{33554432&e.$$.dirty[1]&&n(54,r=h?h.scale:1),49152&e.$$.dirty[1]&&n(30,i=!1!==k&&P),131072&e.$$.dirty[1]&&n(29,o=O),64&e.$$.dirty[0]|2686976&e.$$.dirty[1]&&n(28,a=C?RP(D)?D:A:RP(j)?j:A),64&e.$$.dirty[0]|5505024&e.$$.dirty[1]&&n(27,s=C?kq(F)?F:L:kq(z)?z:L),25165888&e.$$.dirty[0]|528482304&e.$$.dirty[1]&&n(26,l=C?e=>Cq(e,g,m,h.origin,h.translation,f.rotation.z,h.scale,p,d):e=>{const t=mT(e);return t.x-=u.x,t.y-=u.y,t.x/=r,t.y/=r,t}),25165888&e.$$.dirty[0]|528482304&e.$$.dirty[1]&&n(25,c=C?e=>_q(e,g,m,h.origin,h.translation,f.rotation.z,h.scale,p,d):e=>{const t=mT(e);return t.x*=r,t.y*=r,t.x+=u.x,t.y+=u.y,t})},[v,b,x,w,$,S,C,E,T,I,R,M,N,B,U,W,V,H,q,G,K,Y,Z,d,p,c,l,s,a,o,i,y,X,Q,J,ee,te,ne,re,ie,oe,ae,se,"sticker",_,k,P,A,O,L,D,F,j,z,r,u,h,f,m,g,function(t){QA.call(this,e,t)}]}var Lq={util:["sticker",class extends OO{constructor(e){super(),AO(this,e,Oq,Aq,XM,{name:43,isActive:0,isActiveFraction:1,isVisible:2,stores:3,locale:4,stickers:5,stickerForceEnable:44,stickerStickToImage:6,stickerEnableSelectImagePreset:45,stickerEnableDropImagePreset:7,stickerEnableButtonFlipVertical:8,stickerWillRenderShapePresetToolbar:9,stickerEnableSelectImage:46,stickersEnableButtonFlipVertical:10,stickersWillRenderShapePresetToolbar:11,markupEditorGridSize:47,markupEditorSnapThreshold:48,markupEditorSnapToContext:49,enableMultiSelect:12,annotateGridSize:50,annotateSnapToContext:51,decorateGridSize:52,decorateSnapToContext:53,willRenderShapeControls:13,willRenderShapeTextControls:14,markupEditorToolSelectRadius:15,willRenderShapePresetToolbar:16,beforeAddShape:17,beforeRemoveShape:18,beforeDeselectShape:19,beforeSelectShape:20,beforeUpdateShape:21,markupEditorWillStartInteraction:22},null,[-1,-1])}get name(){return this.$$.ctx[43]}get isActive(){return this.$$.ctx[0]}set isActive(e){this.$$set({isActive:e}),pO()}get isActiveFraction(){return this.$$.ctx[1]}set isActiveFraction(e){this.$$set({isActiveFraction:e}),pO()}get isVisible(){return this.$$.ctx[2]}set isVisible(e){this.$$set({isVisible:e}),pO()}get stores(){return this.$$.ctx[3]}set stores(e){this.$$set({stores:e}),pO()}get locale(){return this.$$.ctx[4]}set locale(e){this.$$set({locale:e}),pO()}get stickers(){return this.$$.ctx[5]}set stickers(e){this.$$set({stickers:e}),pO()}get stickerForceEnable(){return this.$$.ctx[44]}set stickerForceEnable(e){this.$$set({stickerForceEnable:e}),pO()}get stickerStickToImage(){return this.$$.ctx[6]}set stickerStickToImage(e){this.$$set({stickerStickToImage:e}),pO()}get stickerEnableSelectImagePreset(){return this.$$.ctx[45]}set stickerEnableSelectImagePreset(e){this.$$set({stickerEnableSelectImagePreset:e}),pO()}get stickerEnableDropImagePreset(){return this.$$.ctx[7]}set stickerEnableDropImagePreset(e){this.$$set({stickerEnableDropImagePreset:e}),pO()}get stickerEnableButtonFlipVertical(){return this.$$.ctx[8]}set stickerEnableButtonFlipVertical(e){this.$$set({stickerEnableButtonFlipVertical:e}),pO()}get stickerWillRenderShapePresetToolbar(){return this.$$.ctx[9]}set stickerWillRenderShapePresetToolbar(e){this.$$set({stickerWillRenderShapePresetToolbar:e}),pO()}get stickerEnableSelectImage(){return this.$$.ctx[46]}set stickerEnableSelectImage(e){this.$$set({stickerEnableSelectImage:e}),pO()}get stickersEnableButtonFlipVertical(){return this.$$.ctx[10]}set stickersEnableButtonFlipVertical(e){this.$$set({stickersEnableButtonFlipVertical:e}),pO()}get stickersWillRenderShapePresetToolbar(){return this.$$.ctx[11]}set stickersWillRenderShapePresetToolbar(e){this.$$set({stickersWillRenderShapePresetToolbar:e}),pO()}get markupEditorGridSize(){return this.$$.ctx[47]}set markupEditorGridSize(e){this.$$set({markupEditorGridSize:e}),pO()}get markupEditorSnapThreshold(){return this.$$.ctx[48]}set markupEditorSnapThreshold(e){this.$$set({markupEditorSnapThreshold:e}),pO()}get markupEditorSnapToContext(){return this.$$.ctx[49]}set markupEditorSnapToContext(e){this.$$set({markupEditorSnapToContext:e}),pO()}get enableMultiSelect(){return this.$$.ctx[12]}set enableMultiSelect(e){this.$$set({enableMultiSelect:e}),pO()}get annotateGridSize(){return this.$$.ctx[50]}set annotateGridSize(e){this.$$set({annotateGridSize:e}),pO()}get annotateSnapToContext(){return this.$$.ctx[51]}set annotateSnapToContext(e){this.$$set({annotateSnapToContext:e}),pO()}get decorateGridSize(){return this.$$.ctx[52]}set decorateGridSize(e){this.$$set({decorateGridSize:e}),pO()}get decorateSnapToContext(){return this.$$.ctx[53]}set decorateSnapToContext(e){this.$$set({decorateSnapToContext:e}),pO()}get willRenderShapeControls(){return this.$$.ctx[13]}set willRenderShapeControls(e){this.$$set({willRenderShapeControls:e}),pO()}get willRenderShapeTextControls(){return this.$$.ctx[14]}set willRenderShapeTextControls(e){this.$$set({willRenderShapeTextControls:e}),pO()}get markupEditorToolSelectRadius(){return this.$$.ctx[15]}set markupEditorToolSelectRadius(e){this.$$set({markupEditorToolSelectRadius:e}),pO()}get willRenderShapePresetToolbar(){return this.$$.ctx[16]}set willRenderShapePresetToolbar(e){this.$$set({willRenderShapePresetToolbar:e}),pO()}get beforeAddShape(){return this.$$.ctx[17]}set beforeAddShape(e){this.$$set({beforeAddShape:e}),pO()}get beforeRemoveShape(){return this.$$.ctx[18]}set beforeRemoveShape(e){this.$$set({beforeRemoveShape:e}),pO()}get beforeDeselectShape(){return this.$$.ctx[19]}set beforeDeselectShape(e){this.$$set({beforeDeselectShape:e}),pO()}get beforeSelectShape(){return this.$$.ctx[20]}set beforeSelectShape(e){this.$$set({beforeSelectShape:e}),pO()}get beforeUpdateShape(){return this.$$.ctx[21]}set beforeUpdateShape(e){this.$$set({beforeUpdateShape:e}),pO()}get markupEditorWillStartInteraction(){return this.$$.ctx[22]}set markupEditorWillStartInteraction(e){this.$$set({markupEditorWillStartInteraction:e}),pO()}},e=>{let{stickers:t,stickerEnableSelectImage:n,stickerEnableSelectImagePreset:r,stickerEnableDropImagePreset:i,stickerForceEnable:o}=e;return t&&t.length||n||r||i||o}]};function Nq(e){let t,n,r=(e[14](e[36].value)||"")+"";return{c(){t=new FA(!1),n=EA(),t.a=n},m(e,i){t.m(r,e,i),wA(e,n,i)},p(e,n){32&n[1]&&r!==(r=(e[14](e[36].value)||"")+"")&&t.p(r)},i:VM,o:VM,d(e){e&&$A(n),e&&t.d()}}}function Dq(e){let t,n;return t=new Hz({props:{items:e[16](e[36].value)}}),{c(){PO(t.$$.fragment)},m(e,r){RO(t,e,r),n=!0},p(e,n){const r={};32&n[1]&&(r.items=e[16](e[36].value)),t.$set(r)},i(e){n||(bO(t.$$.fragment,e),n=!0)},o(e){xO(t.$$.fragment,e),n=!1},d(e){MO(t,e)}}}function Fq(e){let t,n,r,i,o,a,s,l,c=(TE(e[36].label)?e[36].label(e[1]):e[36].label)+"";const u=[Dq,Nq],d=[];function p(e,t){return 32&t[1]&&(n=null),null==n&&(n=!!e[15](e[36].value)),n?0:1}return r=p(e,[-1,-1]),i=d[r]=u[r](e),{c(){t=SA("div"),i.c(),o=kA(),a=SA("span"),s=CA(c),RA(t,"slot","option")},m(e,n){wA(e,t,n),d[r].m(t,null),vA(t,o),vA(t,a),vA(a,s),l=!0},p(e,n){let a=r;r=p(e,n),r===a?d[r].p(e,n):(yO(),xO(d[a],1,1,(()=>{d[a]=null})),vO(),i=d[r],i?i.p(e,n):(i=d[r]=u[r](e),i.c()),bO(i,1),i.m(t,o)),(!l||2&n[0]|32&n[1])&&c!==(c=(TE(e[36].label)?e[36].label(e[1]):e[36].label)+"")&&OA(s,c)},i(e){l||(bO(i),l=!0)},o(e){xO(i),l=!1},d(e){e&&$A(t),d[r].d()}}}function jq(e){let t,n;return t=new cj({props:{locale:e[1],class:"PinturaControlList",layout:"row",options:e[2],selectedIndex:e[6],onchange:e[12],$$slots:{option:[Fq,e=>{let{option:t}=e;return{36:t}},e=>{let{option:t}=e;return[0,t?32:0]}]},$$scope:{ctx:e}}}),{c(){PO(t.$$.fragment)},m(e,r){RO(t,e,r),n=!0},p(e,n){const r={};2&n[0]&&(r.locale=e[1]),4&n[0]&&(r.options=e[2]),64&n[0]&&(r.selectedIndex=e[6]),2&n[0]|96&n[1]&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(bO(t.$$.fragment,e),n=!0)},o(e){xO(t.$$.fragment,e),n=!1},d(e){MO(t,e)}}}function zq(e){let t,n,r,i,o;return n=new AH({props:{locale:e[1],class:"PinturaControlPanels",shapeProps:e[4],onchange:e[13],controls:e[3],scrollElasticity:e[7]}}),i=new lB({props:{elasticity:e[10],$$slots:{default:[jq]},$$scope:{ctx:e}}}),{c(){t=SA("div"),PO(n.$$.fragment),r=kA(),PO(i.$$.fragment),RA(t,"slot","footer"),NA(t,"transform",e[5])},m(e,a){wA(e,t,a),RO(n,t,null),vA(t,r),RO(i,t,null),o=!0},p(e,r){const o={};2&r[0]&&(o.locale=e[1]),16&r[0]&&(o.shapeProps=e[4]),8&r[0]&&(o.controls=e[3]),128&r[0]&&(o.scrollElasticity=e[7]),n.$set(o);const a={};70&r[0]|64&r[1]&&(a.$$scope={dirty:r,ctx:e}),i.$set(a),32&r[0]&&NA(t,"transform",e[5])},i(e){o||(bO(n.$$.fragment,e),bO(i.$$.fragment,e),o=!0)},o(e){xO(n.$$.fragment,e),xO(i.$$.fragment,e),o=!1},d(e){e&&$A(t),MO(n),MO(i)}}}function Bq(e){let t,n;return t=new NW({props:{$$slots:{footer:[zq]},$$scope:{ctx:e}}}),t.$on("measure",e[25]),{c(){PO(t.$$.fragment)},m(e,r){RO(t,e,r),n=!0},p(e,n){const r={};254&n[0]|64&n[1]&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(bO(t.$$.fragment,e),n=!0)},o(e){xO(t.$$.fragment,e),n=!1},d(e){MO(t,e)}}}function Uq(e,t,n){let r,i,o,a,s,l,c,u,d=VM,p=()=>(d(),d=eA(h,(e=>n(22,s=e))),h);e.$$.on_destroy.push((()=>d()));let{isActive:h}=t;p();let{stores:f}=t,{locale:m={}}=t,{frameStyles:g={}}=t,{frameOptions:y=[]}=t,{markupEditorShapeStyleControls:v}=t;const b=XA("elasticityMultiplier");nA(e,b,(e=>n(24,u=e)));const{history:x,animation:w,scrollElasticity:$,imageFrame:S,allowPan:_,allowZoom:C,allowZoomControls:k,allowPlayPause:E}=f;nA(e,w,(e=>n(23,l=e))),nA(e,S,(e=>n(4,c=e)));let T,I={};const P=XN(l?20:0);return nA(e,P,(e=>n(21,a=e))),e.$$set=e=>{"isActive"in e&&p(n(0,h=e.isActive)),"stores"in e&&n(19,f=e.stores),"locale"in e&&n(1,m=e.locale),"frameStyles"in e&&n(20,g=e.frameStyles),"frameOptions"in e&&n(2,y=e.frameOptions),"markupEditorShapeStyleControls"in e&&n(3,v=e.markupEditorShapeStyleControls)},e.$$.update=()=>{4194304&e.$$.dirty[0]&&_.set(s),4194304&e.$$.dirty[0]&&C.set(s),4194304&e.$$.dirty[0]&&k.set(s),4194304&e.$$.dirty[0]&&s&&E.set(!0),16777216&e.$$.dirty[0]&&n(7,r=u*$),20&e.$$.dirty[0]&&n(6,i=c?y.findIndex((e=>{let[t]=e;return t===c.id})):0),12582912&e.$$.dirty[0]&&l&&P.set(s?0:20),2097152&e.$$.dirty[0]&&n(5,o=a?`translateY(${a}px)`:"none")},[h,m,y,v,c,o,i,r,b,w,$,S,e=>{let{value:t}=e;const n=g[t];if(!n||!n.shape)return S.set(void 0),void x.write();const{shape:r}=n,i={id:t,...pR(r),...Object.keys(I).reduce(((e,t)=>r[t]?(e[t]=I[t],e):e),{})};S.set(i),x.write()},function(e){AP(e,"frameColor")&&(I.frameColor=e.frameColor),c&&(gM(c,e),S.set(c),clearTimeout(T),T=setTimeout((()=>{x.write()}),200))},e=>{const t=g[e];var n;if(t&&t.thumb)return n=t.thumb,/div/i.test(n)||OH(n)?n:/rect|path|circle|line|<g>/i.test(n)?`<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" stroke-width="1" stroke="currentColor" fill="none" aria-hidden="true" focusable="false" stroke-linecap="round" stroke-linejoin="round">${n}</svg>`:`<img src="${n}" alt=""/>`},e=>{const t=g[e];return!(!t||!t.thumb)&&OP(t.thumb)},e=>g[e].thumb,P,"frame",f,g,a,s,l,u,function(t){QA.call(this,e,t)}]}var Wq={util:["frame",class extends OO{constructor(e){super(),AO(this,e,Uq,Bq,XM,{name:18,isActive:0,stores:19,locale:1,frameStyles:20,frameOptions:2,markupEditorShapeStyleControls:3},null,[-1,-1])}get name(){return this.$$.ctx[18]}get isActive(){return this.$$.ctx[0]}set isActive(e){this.$$set({isActive:e}),pO()}get stores(){return this.$$.ctx[19]}set stores(e){this.$$set({stores:e}),pO()}get locale(){return this.$$.ctx[1]}set locale(e){this.$$set({locale:e}),pO()}get frameStyles(){return this.$$.ctx[20]}set frameStyles(e){this.$$set({frameStyles:e}),pO()}get frameOptions(){return this.$$.ctx[2]}set frameOptions(e){this.$$set({frameOptions:e}),pO()}get markupEditorShapeStyleControls(){return this.$$.ctx[3]}set markupEditorShapeStyleControls(e){this.$$set({markupEditorShapeStyleControls:e}),pO()}},e=>{let{src:t}=e;return t&&!TL(t)}]};function Vq(e){let t,n,r,i,o,a,s,l;return{c(){t=SA("div"),n=SA("input"),i=kA(),o=SA("label"),a=CA(e[1]),RA(n,"id",e[0]),RA(n,"type","number"),RA(n,"min","1"),RA(n,"inputmode","numeric"),RA(n,"pattern","[0-9]*"),RA(n,"data-state",e[3]),RA(n,"autocomplete","off"),RA(n,"placeholder",e[4]),n.value=r=void 0===e[5]?"":e[7](e[5]+""),RA(o,"for",e[0]),RA(o,"title",e[2]),RA(o,"aria-label",e[2]),RA(t,"class","PinturaInputDimension")},m(r,c){wA(r,t,c),vA(t,n),vA(t,i),vA(t,o),vA(o,a),s||(l=TA(n,"input",e[8]),s=!0)},p(e,t){let[i]=t;1&i&&RA(n,"id",e[0]),8&i&&RA(n,"data-state",e[3]),16&i&&RA(n,"placeholder",e[4]),160&i&&r!==(r=void 0===e[5]?"":e[7](e[5]+""))&&n.value!==r&&(n.value=r),2&i&&OA(a,e[1]),1&i&&RA(o,"for",e[0]),4&i&&RA(o,"title",e[2]),4&i&&RA(o,"aria-label",e[2])},i:VM,o:VM,d(e){e&&$A(t),s=!1,l()}}}function Hq(e,t,n){let{id:r}=t,{label:i}=t,{title:o}=t,{state:a}=t,{placeholder:s}=t,{value:l}=t,{onchange:c}=t,{format:u=e=>e.replace(/\D/g,"")}=t;return e.$$set=e=>{"id"in e&&n(0,r=e.id),"label"in e&&n(1,i=e.label),"title"in e&&n(2,o=e.title),"state"in e&&n(3,a=e.state),"placeholder"in e&&n(4,s=e.placeholder),"value"in e&&n(5,l=e.value),"onchange"in e&&n(6,c=e.onchange),"format"in e&&n(7,u=e.format)},[r,i,o,a,s,l,c,u,e=>c(u(e.currentTarget.value))]}class qq extends OO{constructor(e){super(),AO(this,e,Hq,Vq,XM,{id:0,label:1,title:2,state:3,placeholder:4,value:5,onchange:6,format:7})}}function Gq(e){let t;return{c(){t=_A("g")},m(n,r){wA(n,t,r),t.innerHTML=e[2]},p(e,n){4&n&&(t.innerHTML=e[2])},d(e){e&&$A(t)}}}function Kq(e){let t,n,r,i,o,a,s,l;return o=new eF({props:{$$slots:{default:[Gq]},$$scope:{ctx:e}}}),{c(){t=SA("div"),n=SA("input"),r=kA(),i=SA("label"),PO(o.$$.fragment),RA(n,"id",e[0]),RA(n,"class","implicit"),RA(n,"type","checkbox"),n.checked=e[1],RA(i,"for",e[0]),RA(i,"title",e[3])},m(c,u){wA(c,t,u),vA(t,n),vA(t,r),vA(t,i),RO(o,i,null),a=!0,s||(l=TA(n,"change",e[5]),s=!0)},p(e,t){let[r]=t;(!a||1&r)&&RA(n,"id",e[0]),(!a||2&r)&&(n.checked=e[1]);const s={};68&r&&(s.$$scope={dirty:r,ctx:e}),o.$set(s),(!a||1&r)&&RA(i,"for",e[0]),(!a||8&r)&&RA(i,"title",e[3])},i(e){a||(bO(o.$$.fragment,e),a=!0)},o(e){xO(o.$$.fragment,e),a=!1},d(e){e&&$A(t),MO(o),s=!1,l()}}}function Yq(e,t,n){let{id:r}=t,{locked:i}=t,{icon:o}=t,{title:a}=t,{onchange:s}=t;return e.$$set=e=>{"id"in e&&n(0,r=e.id),"locked"in e&&n(1,i=e.locked),"icon"in e&&n(2,o=e.icon),"title"in e&&n(3,a=e.title),"onchange"in e&&n(4,s=e.onchange)},[r,i,o,a,s,e=>s(e.currentTarget.checked)]}class Zq extends OO{constructor(e){super(),AO(this,e,Yq,Kq,XM,{id:0,locked:1,icon:2,title:3,onchange:4})}}function Xq(e){let t;return{c(){t=CA("Save")},m(e,n){wA(e,t,n)},d(e){e&&$A(t)}}}function Qq(e){let t,n,r,i,o,a,s,l,c,u,d,p,h,f=e[1].resizeLabelFormCaption+"";return l=new Hz({props:{items:e[4]}}),u=new Qz({props:{type:"submit",class:"implicit",$$slots:{default:[Xq]},$$scope:{ctx:e}}}),{c(){t=SA("form"),n=SA("div"),r=SA("fieldset"),i=SA("legend"),o=CA(f),a=kA(),s=SA("div"),PO(l.$$.fragment),c=kA(),PO(u.$$.fragment),RA(i,"class","implicit"),RA(s,"class","PinturaFieldsetInner"),RA(n,"class","PinturaFormInner"),RA(t,"slot","footer"),NA(t,"transform",e[3])},m(f,m){wA(f,t,m),vA(t,n),vA(n,r),vA(r,i),vA(i,o),vA(r,a),vA(r,s),RO(l,s,null),e[66](s),vA(n,c),RO(u,n,null),d=!0,p||(h=[TA(s,"focusin",e[15]),TA(s,"focusout",e[16]),TA(t,"submit",IA(e[17]))],p=!0)},p(e,n){(!d||2&n[0])&&f!==(f=e[1].resizeLabelFormCaption+"")&&OA(o,f);const r={};16&n[0]&&(r.items=e[4]),l.$set(r);const i={};32&n[3]&&(i.$$scope={dirty:n,ctx:e}),u.$set(i),8&n[0]&&NA(t,"transform",e[3])},i(e){d||(bO(l.$$.fragment,e),bO(u.$$.fragment,e),d=!0)},o(e){xO(l.$$.fragment,e),xO(u.$$.fragment,e),d=!1},d(n){n&&$A(t),MO(l),e[66](null),MO(u),p=!1,YM(h)}}}function Jq(e){let t,n;return t=new NW({props:{$$slots:{footer:[Qq]},$$scope:{ctx:e}}}),t.$on("measure",e[67]),{c(){PO(t.$$.fragment)},m(e,r){RO(t,e,r),n=!0},p(e,n){const r={};30&n[0]|32&n[3]&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(bO(t.$$.fragment,e),n=!0)},o(e){xO(t.$$.fragment,e),n=!1},d(e){MO(t,e)}}}function eG(e,t,n){let r,i,o,a,s,l,c,u,d,p,h,f,m,g,y,v,b,x,w,$,S,_,C,k,E,T,I,P,R,M,A=VM,O=()=>(A(),A=eA(N,(e=>n(50,h=e))),N);e.$$.on_destroy.push((()=>A()));const L=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:9999;if(hE(e)&&!(e=e.replace(/\D/g,"")).length)return;const r=Math.round(e);return Number.isNaN(r)?void 0:nL(r,t,n)};let{isActive:N}=t;O();let{stores:D}=t,{locale:F={}}=t,{resizeMinSize:j=zT(1,1)}=t,{resizeMaxSize:z=zT(9999,9999)}=t,{resizeAspectRatioLocked:B=!1}=t,{resizeEnableButtonLockAspectRatio:U=!0}=t,{resizeSizePresetOptions:W}=t,{resizeWidthPresetOptions:V}=t,{resizeHeightPresetOptions:H}=t,{resizeWillRenderFooter:q=KE}=t,{resizeFormatIconButtonMaintainAspectRatio:G=function(e){const{active:t,activeFraction:n}=e;return{active:t,activeFraction:3*(n-1)}}}=t;const K=XN(0,{stiffness:.15,damping:.3});nA(e,K,(e=>n(55,v=e)));const{animation:Y,imageSize:Z,imageCropRect:X,imageCropRectAspectRatio:Q,imageCropAspectRatio:J,imageOutputSize:ee,imageSelectionZoom:te,imageSelectionPan:ne,history:re,env:ie,allowPan:oe,allowZoom:ae,allowZoomControls:se,allowPlayPause:le}=D;nA(e,Y,(e=>n(51,f=e))),nA(e,Z,(e=>n(74,P=e))),nA(e,X,(e=>n(53,g=e))),nA(e,Q,(e=>n(54,y=e))),nA(e,J,(e=>n(73,k=e))),nA(e,ee,(e=>n(62,C=e))),nA(e,te,(e=>n(75,R=e))),nA(e,ne,(e=>n(76,M=e))),nA(e,ie,(e=>n(52,m=e)));const ce=ME();let ue,de,pe,he,fe,me,ge=pT();const ye=(e,t,n,r,i)=>null!=e&&n!==t?e>=r[t]&&e<=i[t]?"valid":"invalid":"undetermined",ve=(e,t,n)=>Math.round(null!=e?e/t:n.height),be=()=>{B&&de&&pe&&("width"===he?n(40,pe=Math.round(de/y)):"height"===he?n(39,de=Math.round(pe*y)):("width"===fe?n(40,pe=Math.round(de/y)):"height"===fe&&n(39,de=Math.round(pe*y)),xe()))},xe=e=>{let t=L(de),r=L(pe),i=t,o=r,a=i&&o,s=e||y;if(!i&&!o)return;i&&!o?o=Math.round(i/s):o&&!i&&(i=Math.round(o*s)),s=e||a?GE(i,o):y;let l=zT(i,o);HT(z,l)||(l=wI(z,s)),HT(l,j)||(l=xI(j,s)),n(39,de=null!=t?Math.round(l.width):void 0),n(40,pe=null!=r?Math.round(l.height):void 0)},we=()=>{xe();const{width:e,height:t}=C||{};e===de&&t===pe||(de||pe?(de&&pe&&uA(J,k=de/pe,k),uA(ee,C=zT(de,pe),C)):(uA(J,k=P.width/P.height,k),uA(J,k=void 0,k),uA(ee,C=void 0,C)),re.write())},$e=ee.subscribe((e=>{if(!e)return n(39,de=void 0),void n(40,pe=void 0);n(39,de=e.width),n(40,pe=e.height),xe()})),Se=J.subscribe((e=>{(de||pe)&&e&&(de&&pe&&GE(de,pe)!==e?(n(40,pe=de/e),xe(e)):xe())})),_e=e=>hE(e[0])?(e[1]=e[1].map(_e),e):RP(e)?[e,""+e]:e,Ce=e=>{if(hE(e[0]))return e[1]=e[1].map(Ce),e;let[t,n]=e;if(RP(t)&&RP(n)){const[e,r]=[t,n];n=`${e} &times; ${r}`,t=[e,r]}return[t,n]},ke=DO();nA(e,ke,(e=>n(61,_=e)));const Ee=DO();nA(e,Ee,(e=>n(65,I=e)));const Te=DO();nA(e,Te,(e=>n(59,$=e)));const Ie=DO();nA(e,Ie,(e=>n(64,T=e)));const Pe=DO();nA(e,Pe,(e=>n(57,x=e)));const Re=DO();nA(e,Re,(e=>n(63,E=e)));const Me=FO([ee,Ee],((e,t)=>{let[n,r]=e;if(!r)return t(-1);const i=r.findIndex((e=>{let[t]=e;if(!t&&!n)return!0;if(!t)return!1;const[r,i]=t;return n.width===r&&n.height===i}));t(i<0?0:i)}));nA(e,Me,(e=>n(60,S=e)));const Ae=FO([ee,Ie],((e,t)=>{let[n,r]=e;if(!r)return t(-1);const i=r.findIndex((e=>{let[t]=e;return!t&&!n||!!t&&n.width===t}));t(i<0?0:i)}));nA(e,Ae,(e=>n(58,w=e)));const Oe=FO([ee,Re],((e,t)=>{let[n,r]=e;if(!r)return t(-1);const i=r.findIndex((e=>{let[t]=e;return!t&&!n||!!t&&n.height===t}));t(i<0?0:i)}));let Le,Ne;nA(e,Oe,(e=>n(56,b=e)));const De=XA("redrawTrigger"),Fe=XN(f?20:0);return nA(e,Fe,(e=>n(49,p=e))),KA((()=>{$e(),Se()})),e.$$set=e=>{"isActive"in e&&O(n(0,N=e.isActive)),"stores"in e&&n(30,D=e.stores),"locale"in e&&n(1,F=e.locale),"resizeMinSize"in e&&n(31,j=e.resizeMinSize),"resizeMaxSize"in e&&n(32,z=e.resizeMaxSize),"resizeAspectRatioLocked"in e&&n(28,B=e.resizeAspectRatioLocked),"resizeEnableButtonLockAspectRatio"in e&&n(33,U=e.resizeEnableButtonLockAspectRatio),"resizeSizePresetOptions"in e&&n(34,W=e.resizeSizePresetOptions),"resizeWidthPresetOptions"in e&&n(35,V=e.resizeWidthPresetOptions),"resizeHeightPresetOptions"in e&&n(36,H=e.resizeHeightPresetOptions),"resizeWillRenderFooter"in e&&n(37,q=e.resizeWillRenderFooter),"resizeFormatIconButtonMaintainAspectRatio"in e&&n(38,G=e.resizeFormatIconButtonMaintainAspectRatio)},e.$$.update=()=>{524288&e.$$.dirty[1]&&oe.set(!h),524288&e.$$.dirty[1]&&ae.set(!h),524288&e.$$.dirty[1]&&se.set(!h),524288&e.$$.dirty[1]&&h&&le.set(!0),1073741832&e.$$.dirty[1]&&W&&(uA(ke,_=W.map(Ce),_),uA(Ee,I=AF(_),I)),1073741824&e.$$.dirty[1]&&n(48,a=!!_),536870912&e.$$.dirty[1]|8&e.$$.dirty[2]&&n(47,r=S>-1&&I[S][1]),268435472&e.$$.dirty[1]&&V&&(uA(Te,$=V.map(_e),$),uA(Ie,T=AF($),T)),268566528&e.$$.dirty[1]&&n(45,s=!a&&$),134217728&e.$$.dirty[1]|4&e.$$.dirty[2]&&n(46,i=w>-1&&T[w][1]),67108896&e.$$.dirty[1]&&H&&(uA(Pe,x=H.map(_e),x),uA(Re,E=AF(x),E)),67239936&e.$$.dirty[1]&&n(44,l=!a&&x),33554432&e.$$.dirty[1]|2&e.$$.dirty[2]&&n(43,o=b>-1&&E[b][1]),155648&e.$$.dirty[1]&&n(42,c=!a&&!s&&!l),268435458&e.$$.dirty[0]|2145648583&e.$$.dirty[1]&&n(4,u=De&&DB((()=>{return q([a&&["Dropdown","size-presets",{label:r,options:_,onchange:e=>{return(t=e.value)&&!Le&&(Le={...g},Ne=k),t?(uA(J,k=GE(t[0],t[1]),k),uA(ee,C=FT(t),C)):(uA(X,g=Le,g),uA(J,k=Ne,k),uA(ee,C=void 0,C),Le=void 0,Ne=void 0),void re.write();var t},selectedIndex:S}],s&&["Dropdown","width-presets",{label:i,options:$,onchange:e=>{n(39,de=e.value),we()},selectedIndex:w}],s&&l&&["span","times",{class:"PinturaResizeLabel",innerHTML:"&times;"}],l&&["Dropdown","height-presets",{label:o,options:x,onchange:e=>{n(40,pe=e.value),we()},selectedIndex:b}],c&&[qq,"width-input",{id:"width-"+ce,title:F.resizeTitleInputWidth,label:F.resizeLabelInputWidth,placeholder:(e=L(pe),t=y,u=g,Math.round(null!=e?e*t:u.width)),value:de,state:ye(L(de),"width",he,j,z),onchange:e=>{n(39,de=e),be()}}],c&&U&&[Zq,"aspect-ratio-lock",{id:"aspect-ratio-lock-"+ce,title:F.resizeTitleButtonMaintainAspectRatio,icon:TE(F.resizeIconButtonMaintainAspectRatio)?F.resizeIconButtonMaintainAspectRatio(B,v):dN(F.resizeIconButtonMaintainAspectRatio,G({active:B,activeFraction:v}),"{","}"),locked:B,onchange:e=>{n(28,B=e),be()}}],c&&[qq,"height-input",{id:"height-"+ce,title:F.resizeTitleInputHeight,label:F.resizeLabelInputHeight,placeholder:ve(L(de),y,g),value:pe,state:ye(L(pe),"height",he,j,z),onchange:e=>{n(40,pe=e),be()}}]].filter(Boolean),{...m},(()=>De.set({})));var e,t,u})).filter(Boolean)),268435456&e.$$.dirty[0]&&K.set(B?1:0),1024&e.$$.dirty[1]&&he&&(fe=he),524288&e.$$.dirty[1]&&h&&(ge=M,me=R),524288&e.$$.dirty[1]|1&e.$$.dirty[2]&&(h?setTimeout((()=>{return e=C,uA(ne,M=pT(),M),void uA(te,R=e&&g?e.width/g.width||e.height/g.height:1,R);var e}),0):(uA(ne,M=ge,M),uA(te,R=me,R))),1572864&e.$$.dirty[1]&&f&&Fe.set(h?0:20),262144&e.$$.dirty[1]&&n(3,d=p?`translateY(${p}px)`:"none")},[N,F,ue,d,u,K,Y,Z,X,Q,J,ee,te,ne,ie,e=>{const t=e.target.id;/width/.test(t)?n(41,he="width"):/height/.test(t)?n(41,he="height"):/aspectRatio/i.test(t)?n(41,he="lock"):n(41,he=void 0)},e=>{ue.contains(e.relatedTarget)||we(),n(41,he=void 0)},we,ke,Ee,Te,Ie,Pe,Re,Me,Ae,Oe,Fe,B,"resize",D,j,z,U,W,V,H,q,G,de,pe,he,c,o,l,s,i,r,a,p,h,f,m,g,y,v,b,x,w,$,S,_,C,E,T,I,function(e){eO[e?"unshift":"push"]((()=>{ue=e,n(2,ue)}))},function(t){QA.call(this,e,t)}]}var tG={util:["resize",class extends OO{constructor(e){super(),AO(this,e,eG,Jq,XM,{name:29,isActive:0,stores:30,locale:1,resizeMinSize:31,resizeMaxSize:32,resizeAspectRatioLocked:28,resizeEnableButtonLockAspectRatio:33,resizeSizePresetOptions:34,resizeWidthPresetOptions:35,resizeHeightPresetOptions:36,resizeWillRenderFooter:37,resizeFormatIconButtonMaintainAspectRatio:38},null,[-1,-1,-1,-1])}get name(){return this.$$.ctx[29]}get isActive(){return this.$$.ctx[0]}set isActive(e){this.$$set({isActive:e}),pO()}get stores(){return this.$$.ctx[30]}set stores(e){this.$$set({stores:e}),pO()}get locale(){return this.$$.ctx[1]}set locale(e){this.$$set({locale:e}),pO()}get resizeMinSize(){return this.$$.ctx[31]}set resizeMinSize(e){this.$$set({resizeMinSize:e}),pO()}get resizeMaxSize(){return this.$$.ctx[32]}set resizeMaxSize(e){this.$$set({resizeMaxSize:e}),pO()}get resizeAspectRatioLocked(){return this.$$.ctx[28]}set resizeAspectRatioLocked(e){this.$$set({resizeAspectRatioLocked:e}),pO()}get resizeEnableButtonLockAspectRatio(){return this.$$.ctx[33]}set resizeEnableButtonLockAspectRatio(e){this.$$set({resizeEnableButtonLockAspectRatio:e}),pO()}get resizeSizePresetOptions(){return this.$$.ctx[34]}set resizeSizePresetOptions(e){this.$$set({resizeSizePresetOptions:e}),pO()}get resizeWidthPresetOptions(){return this.$$.ctx[35]}set resizeWidthPresetOptions(e){this.$$set({resizeWidthPresetOptions:e}),pO()}get resizeHeightPresetOptions(){return this.$$.ctx[36]}set resizeHeightPresetOptions(e){this.$$set({resizeHeightPresetOptions:e}),pO()}get resizeWillRenderFooter(){return this.$$.ctx[37]}set resizeWillRenderFooter(e){this.$$set({resizeWillRenderFooter:e}),pO()}get resizeFormatIconButtonMaintainAspectRatio(){return this.$$.ctx[38]}set resizeFormatIconButtonMaintainAspectRatio(e){this.$$set({resizeFormatIconButtonMaintainAspectRatio:e}),pO()}}]};function nG(e){let t,n;return t=new Sq({props:{stores:e[3],locale:e[4],isActive:e[0],isActiveFraction:e[1],isVisible:e[2],mapScreenPointToImagePoint:e[10],mapImagePointToScreenPoint:e[9],enableMultiSelect:e[6],utilKey:"redact",imageRotation:e[11],imageFlipX:e[8],imageFlipY:e[7],shapes:e[12],toolbar:["rect"],toolShapes:{rectangle:[{x:0,y:0,width:0,height:0}]},toolActive:"rectangle",parentRect:e[14],enablePresetDropImage:!1,enablePresetSelectImage:!1,willStartInteraction:e[5],hooks:{willRenderShapeControls:e[25]}}}),t.$on("measure",e[26]),{c(){PO(t.$$.fragment)},m(e,r){RO(t,e,r),n=!0},p(e,n){let[r]=n;const i={};8&r&&(i.stores=e[3]),16&r&&(i.locale=e[4]),1&r&&(i.isActive=e[0]),2&r&&(i.isActiveFraction=e[1]),4&r&&(i.isVisible=e[2]),1024&r&&(i.mapScreenPointToImagePoint=e[10]),512&r&&(i.mapImagePointToScreenPoint=e[9]),64&r&&(i.enableMultiSelect=e[6]),2048&r&&(i.imageRotation=e[11]),256&r&&(i.imageFlipX=e[8]),128&r&&(i.imageFlipY=e[7]),32&r&&(i.willStartInteraction=e[5]),t.$set(i)},i(e){n||(bO(t.$$.fragment,e),n=!0)},o(e){xO(t.$$.fragment,e),n=!1},d(e){MO(t,e)}}}function rG(e,t,n){let r,i,o,a,s,l,c,u,d,{isActive:p}=t,{isActiveFraction:h}=t,{isVisible:f}=t,{stores:m}=t,{locale:g={}}=t,{markupEditorWillStartInteraction:y}=t,{enableMultiSelect:v}=t;const{imageRedaction:b,rootRect:x,imageSize:w,imageRotation:$,imageFlipX:S,imageFlipY:_,imageTransforms:C,imageTransformsInterpolated:k}=m;return nA(e,x,(e=>n(24,u=e))),nA(e,w,(e=>n(23,c=e))),nA(e,$,(e=>n(11,d=e))),nA(e,S,(e=>n(8,a=e))),nA(e,_,(e=>n(7,o=e))),nA(e,C,(e=>n(22,l=e))),nA(e,k,(e=>n(21,s=e))),e.$$set=e=>{"isActive"in e&&n(0,p=e.isActive),"isActiveFraction"in e&&n(1,h=e.isActiveFraction),"isVisible"in e&&n(2,f=e.isVisible),"stores"in e&&n(3,m=e.stores),"locale"in e&&n(4,g=e.locale),"markupEditorWillStartInteraction"in e&&n(5,y=e.markupEditorWillStartInteraction),"enableMultiSelect"in e&&n(6,v=e.enableMultiSelect)},e.$$.update=()=>{31457664&e.$$.dirty&&n(10,r=e=>Cq(e,u,c,s.origin,s.translation,l.rotation.z,s.scale,a,o)),31457664&e.$$.dirty&&n(9,i=e=>_q(e,u,c,s.origin,s.translation,l.rotation.z,s.scale,a,o))},[p,h,f,m,g,y,v,o,a,i,r,d,b,x,w,$,S,_,C,k,"redact",s,l,c,u,e=>(((e,t)=>{const n=AU(e,t);Jz(n,(t=>RU(t)===e))})("to-front",MU(e[0])),e),function(t){QA.call(this,e,t)}]}var iG={util:["redact",class extends OO{constructor(e){super(),AO(this,e,rG,nG,XM,{name:20,isActive:0,isActiveFraction:1,isVisible:2,stores:3,locale:4,markupEditorWillStartInteraction:5,enableMultiSelect:6})}get name(){return this.$$.ctx[20]}get isActive(){return this.$$.ctx[0]}set isActive(e){this.$$set({isActive:e}),pO()}get isActiveFraction(){return this.$$.ctx[1]}set isActiveFraction(e){this.$$set({isActiveFraction:e}),pO()}get isVisible(){return this.$$.ctx[2]}set isVisible(e){this.$$set({isVisible:e}),pO()}get stores(){return this.$$.ctx[3]}set stores(e){this.$$set({stores:e}),pO()}get locale(){return this.$$.ctx[4]}set locale(e){this.$$set({locale:e}),pO()}get markupEditorWillStartInteraction(){return this.$$.ctx[5]}set markupEditorWillStartInteraction(e){this.$$set({markupEditorWillStartInteraction:e}),pO()}get enableMultiSelect(){return this.$$.ctx[6]}set enableMultiSelect(e){this.$$set({enableMultiSelect:e}),pO()}},e=>{let{src:t}=e;return t&&!TL(t)}]};function oG(e){let t;return{c(){t=SA("div")},m(e,n){wA(e,t,n)},p:VM,d(e){e&&$A(t)}}}function aG(e){let t,n,r,i;return{c(){t=SA("div"),RA(t,"class","PinturaFillTile")},m(o,a){wA(o,t,a),r||(i=dA(n=hG.call(null,t,e[31].value)),r=!0)},p(e,t){n&&ZM(n.update)&&1&t[1]&&n.update.call(null,e[31].value)},d(e){e&&$A(t),r=!1,i()}}}function sG(e){let t,n,r;return{c(){t=SA("div"),n=SA("img"),JM(n.src,r=e[31].value)||RA(n,"src",r),RA(n,"alt",""),RA(n,"width","48"),RA(n,"height","64"),RA(t,"class","PinturaFillTile")},m(e,r){wA(e,t,r),vA(t,n)},p(e,t){1&t[1]&&!JM(n.src,r=e[31].value)&&RA(n,"src",r)},d(e){e&&$A(t)}}}function lG(e){let t,n,r=(TE(e[31].label)?e[31].label(e[1]):e[31].label)+"";return{c(){t=SA("span"),n=CA(r)},m(e,r){wA(e,t,r),vA(t,n)},p(e,t){2&t[0]|1&t[1]&&r!==(r=(TE(e[31].label)?e[31].label(e[1]):e[31].label)+"")&&OA(n,r)},d(e){e&&$A(t)}}}function cG(e){let t,n,r,i;function o(e,t){return 1&t[1]&&(n=null),1&t[1]&&(r=null),null==n&&(n=!!hE(e[31].value)),n?sG:(null==r&&(r=!!OP(e[31].value)),r?aG:oG)}let a=o(e,[-1,-1]),s=a(e),l=e[31].label&&lG(e);return{c(){t=SA("div"),s.c(),i=kA(),l&&l.c(),RA(t,"slot","option")},m(e,n){wA(e,t,n),s.m(t,null),vA(t,i),l&&l.m(t,null)},p(e,n){a===(a=o(e,n))&&s?s.p(e,n):(s.d(1),s=a(e),s&&(s.c(),s.m(t,i))),e[31].label?l?l.p(e,n):(l=lG(e),l.c(),l.m(t,null)):l&&(l.d(1),l=null)},d(e){e&&$A(t),s.d(),l&&l.d()}}}function uG(e){let t,n;return t=new cj({props:{locale:e[1],class:"PinturaControlList",layout:"row",options:e[2],selectedIndex:e[4],onchange:e[10],$$slots:{option:[cG,e=>{let{option:t}=e;return{31:t}},e=>{let{option:t}=e;return[0,t?1:0]}]},$$scope:{ctx:e}}}),{c(){PO(t.$$.fragment)},m(e,r){RO(t,e,r),n=!0},p(e,n){const r={};2&n[0]&&(r.locale=e[1]),4&n[0]&&(r.options=e[2]),16&n[0]&&(r.selectedIndex=e[4]),2&n[0]|3&n[1]&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(bO(t.$$.fragment,e),n=!0)},o(e){xO(t.$$.fragment,e),n=!1},d(e){MO(t,e)}}}function dG(e){let t,n,r;return n=new lB({props:{elasticity:e[5],$$slots:{default:[uG]},$$scope:{ctx:e}}}),{c(){t=SA("div"),PO(n.$$.fragment),RA(t,"slot","footer"),NA(t,"transform",e[3])},m(e,i){wA(e,t,i),RO(n,t,null),r=!0},p(e,r){const i={};32&r[0]&&(i.elasticity=e[5]),22&r[0]|2&r[1]&&(i.$$scope={dirty:r,ctx:e}),n.$set(i),8&r[0]&&NA(t,"transform",e[3])},i(e){r||(bO(n.$$.fragment,e),r=!0)},o(e){xO(n.$$.fragment,e),r=!1},d(e){e&&$A(t),MO(n)}}}function pG(e){let t,n;return t=new NW({props:{$$slots:{footer:[dG]},$$scope:{ctx:e}}}),t.$on("measure",e[21]),{c(){PO(t.$$.fragment)},m(e,r){RO(t,e,r),n=!0},p(e,n){const r={};62&n[0]|2&n[1]&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(bO(t.$$.fragment,e),n=!0)},o(e){xO(t.$$.fragment,e),n=!1},d(e){MO(t,e)}}}function hG(e){const t=document.createElement("div");return e.append(t),{update(n){const[r,i,o,a]=n.map(((e,t)=>t<3?Math.round(255*e):e));e.dataset.transparent=a<1,t.style.backgroundColor=`rgba(${r},${i},${o},${a})`}}}function fG(e,t,n){let r,i,o,a,s,l,c,u,d,p,h=VM,f=()=>(h(),h=eA(m,(e=>n(16,l=e))),m);e.$$.on_destroy.push((()=>h()));let{isActive:m}=t;f();let{stores:g}=t,{locale:y={}}=t,{fillOptions:v=[]}=t;const b=e=>e.map((e=>(e=>OP(e)&&hE(e[0])&&OP(e[1]))(e)?[e[0],b(e[1]),e[2]]:(e=>[Array.isArray(e)&&3===e.length?[...e,1]:e,void 0,{disabled:!1}])(e))),x=XA("elasticityMultiplier");nA(e,x,(e=>n(20,p=e)));const{history:w,animation:$,scrollElasticity:S,imageBackgroundColor:_,imageBackgroundImage:C,allowPan:k,allowZoom:E,allowZoomControls:T,allowPlayPause:I}=g;nA(e,$,(e=>n(17,c=e))),nA(e,_,(e=>n(19,d=e))),nA(e,C,(e=>n(18,u=e)));const P=XN(c?20:0);return nA(e,P,(e=>n(15,s=e))),e.$$set=e=>{"isActive"in e&&f(n(0,m=e.isActive)),"stores"in e&&n(13,g=e.stores),"locale"in e&&n(1,y=e.locale),"fillOptions"in e&&n(14,v=e.fillOptions)},e.$$.update=()=>{16384&e.$$.dirty[0]&&n(2,r=b(v)),65536&e.$$.dirty[0]&&k.set(l),65536&e.$$.dirty[0]&&E.set(l),65536&e.$$.dirty[0]&&T.set(l),65536&e.$$.dirty[0]&&l&&I.set(!0),1048576&e.$$.dirty[0]&&n(5,i=p*S),786436&e.$$.dirty[0]&&n(4,o=r.findIndex((e=>{let[t]=e;return u?t===u:Array.isArray(t)?sL(t,d):void 0}))||0),196608&e.$$.dirty[0]&&c&&P.set(l?0:20),32768&e.$$.dirty[0]&&n(3,a=s?`translateY(${s}px)`:"none")},[m,y,r,a,o,i,x,$,_,C,e=>{let{value:t}=e;hE(t)&&(uA(_,d=void 0,d),uA(C,u=t,u)),OP(t)&&(uA(_,d=t,d),uA(C,u=void 0,u)),w.write()},P,"fill",g,v,s,l,c,u,d,p,function(t){QA.call(this,e,t)}]}var mG={util:["fill",class extends OO{constructor(e){super(),AO(this,e,fG,pG,XM,{name:12,isActive:0,stores:13,locale:1,fillOptions:14},null,[-1,-1])}get name(){return this.$$.ctx[12]}get isActive(){return this.$$.ctx[0]}set isActive(e){this.$$set({isActive:e}),pO()}get stores(){return this.$$.ctx[13]}set stores(e){this.$$set({stores:e}),pO()}get locale(){return this.$$.ctx[1]}set locale(e){this.$$set({locale:e}),pO()}get fillOptions(){return this.$$.ctx[14]}set fillOptions(e){this.$$set({fillOptions:e}),pO()}},e=>{let{src:t,fillOptions:n}=e;return t&&!TL(t)&&n&&n.length}]};const gG='<g fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><path d="M18 6L6 18M6 6l12 12"></path></path></g>',yG='<path fill="none" d="M9 15 L12 9 L15 15 M10 13.5 h3" stroke="currentColor" stroke-width=".125em"/>';var vG={labelReset:"Reset",labelDefault:"Default",labelAuto:"Auto",labelNone:"None",labelEdit:"Edit",labelClose:"Close",labelSupportError:"{features} not supported on this browser",labelColor:"Color",labelWidth:"Width",labelSize:"Size",labelOffset:"Offset",labelAmount:"Amount",labelInset:"Inset",labelRadius:"Radius",labelColorPalette:"Color palette",labelSizeExtraSmall:"Extra small",labelSizeSmall:"Small",labelSizeMediumSmall:"Medium small",labelSizeMedium:"Medium",labelSizeMediumLarge:"Medium large",labelSizeLarge:"Large",labelSizeExtraLarge:"Extra large",labelButtonCancel:"Cancel",labelButtonUndo:"Undo",labelButtonRedo:"Redo",labelButtonRevert:"Revert",labelButtonExport:"Done",labelZoom:"Zoom",labelZoomIn:"Zoom in",labelZoomOut:"Zoom out",labelZoomFit:"Fit to view",labelZoomActual:"Actual size",iconZoomIn:'<path stroke="currentColor" stroke-width=".125em" d="M8 12 h8 M12 8 v8" />',iconZoomOut:'<path stroke="currentColor" stroke-width=".125em" d="M9 12 h6" />',iconSupportError:'<g fill="none" stroke="currentColor" stroke-width="2"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/><g><line x1="12" y1="9" x2="12" y2="13"/><line x1="12" y1="17" x2="12.01" y2="17"/></g>',iconButtonClose:gG,iconButtonRevert:'<g fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><path d="M7.388 18.538a8 8 0 10-2.992-9.03"/><path fill="currentColor" d="M2.794 11.696L2.37 6.714l5.088 3.18z"/><path d="M12 8v4M12 12l4 2"/></g>',iconButtonUndo:'<g fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><path d="M10 8h4c2.485 0 5 2 5 5s-2.515 5-5 5h-4"/><path fill="currentColor" d="M5 8l4-3v6z"/></g>',iconButtonRedo:'<g fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><path d="M14 8h-4c-2.485 0-5 2-5 5s2.515 5 5 5h4"/><path fill="currentColor" d="M19 8l-4-3v6z"/></g>',iconButtonExport:'<polyline points="20 6 9 17 4 12" fill="none" stroke="currentColor" stroke-width=".125em"></polyline>',statusLabelButtonClose:"Close",statusIconButtonClose:gG,statusImageLoadNone:"Waiting for image",statusImageLoadMinSize:"Minimum image size is {minWidth} &times; {minHeight}",statusImageLoadPrepare:"Preparing image&hellip;",statusImageLoadBusy:"Loading image&hellip;",statusImageLoadError:"Error loading image",statusImageProcessBusy:"Processing image&hellip;",statusImageProcessError:"Error processing image",statusImageUploadBusy:"Uploading image&hellip;",statusImageUploadError:"Error uploading image"};const bG={shapeLabelButtonSelectSticker:"Select image",shapeIconButtonSelectSticker:'<g fill="none" stroke="currentColor" stroke-width="0.0625em"><path d="M8 21 L15 11 L19 15"/><path d="M15 2 v5 h5"/><path d="M8 2 h8 l4 4 v12 q0 4 -4 4 h-8 q-4 0 -4 -4 v-12 q0 -4 4 -4z"/></g><circle fill="currentColor" cx="10" cy="8" r="1.5"/>',shapeIconButtonFlipHorizontal:'<g stroke="currentColor" stroke-width=".125em"><path fill="none" d="M6 6.5h5v11H6z"/><path fill="currentColor" d="M15 6.5h3v11h-3z"/><path d="M11 4v16" fill="currentColor"/></g>',shapeIconButtonFlipVertical:'<g stroke="currentColor" stroke-width=".125em"><rect x="7" y="8" width="11" height="5" fill="none"/><rect x="7" y="17" width="11" height="2" fill="currentColor"/><line x1="5" y1="13" x2="20" y2="13"/></g>',shapeIconButtonRemove:'<g fill="none" fill-rule="evenodd"><path stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" d="M7.5 7h9z"/><path d="M7.916 9h8.168a1 1 0 01.99 1.14l-.972 6.862a2 2 0 01-1.473 1.653c-.877.23-1.753.345-2.629.345-.876 0-1.752-.115-2.628-.345a2 2 0 01-1.473-1.653l-.973-6.862A1 1 0 017.916 9z" fill="currentColor"/><rect fill="currentColor" x="10" y="5" width="4" height="3" rx="1"/></g>',shapeIconButtonDuplicate:'<g fill="none" fill-rule="evenodd"><path d="M15 13.994V16a2 2 0 01-2 2H8a2 2 0 01-2-2v-5a2 2 0 012-2h2.142" stroke="currentColor" stroke-width=".125em"/><path d="M15 9V8a1 1 0 00-2 0v1h-1a1 1 0 000 2h1v1a1 1 0 002 0v-1h1a1 1 0 000-2h-1zm-4-4h6a2 2 0 012 2v6a2 2 0 01-2 2h-6a2 2 0 01-2-2V7a2 2 0 012-2z" fill="currentColor"/></g>',shapeIconButtonMoveToFront:'<g fill="none" fill-rule="evenodd"><rect fill="currentColor" x="11" y="13" width="8" height="2" rx="1"/><rect fill="currentColor" x="9" y="17" width="10" height="2" rx="1"/><path d="M11.364 8H10a5 5 0 000 10M12 6.5L14.5 8 12 9.5z" stroke="currentColor" stroke-width=".125em" stroke-linecap="round"/></g>',shapeIconButtonTextLayoutAutoWidth:""+yG,shapeIconButtonTextLayoutAutoHeight:'<g fill="currentColor"><circle cx="4" cy="12" r="1.5"/><circle cx="20" cy="12" r="1.5"/></g>'+yG,shapeIconButtonTextLayoutFixedSize:'<g fill="currentColor"><circle cx="5" cy="6" r="1.5"/><circle cx="19" cy="6" r="1.5"/><circle cx="19" cy="19" r="1.5"/><circle cx="5" cy="19" r="1.5"/></g>'+yG,shapeTitleButtonTextLayoutAutoWidth:"Auto width",shapeTitleButtonTextLayoutAutoHeight:"Auto height",shapeTitleButtonTextLayoutFixedSize:"Fixed size",shapeTitleButtonFlipHorizontal:"Flip Horizontal",shapeTitleButtonFlipVertical:"Flip Vertical",shapeTitleButtonRemove:"Remove",shapeTitleButtonDuplicate:"Duplicate",shapeTitleButtonMoveToFront:"Move to front",shapeLabelInputText:"Edit text",shapeIconInputCancel:'<g fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><path d="M18 6L6 18M6 6l12 12"/></g>',shapeIconInputConfirm:'<g fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><polyline points="20 6 9 17 4 12"/></g>',shapeLabelInputCancel:"Cancel",shapeLabelInputConfirm:"Confirm",shapeLabelStrokeNone:"No outline",shapeLabelFontStyleNormal:"Normal",shapeLabelFontStyleBold:"Bold",shapeLabelFontStyleItalic:"Italic",shapeLabelFontStyleItalicBold:"Bold Italic",shapeTitleBackgroundColor:"Fill color",shapeTitleCornerRadius:"Corner radius",shapeTitleFontFamily:"Font",shapeTitleFontSize:"Font size",shapeTitleFontStyle:"Font style",shapeTitleLineHeight:"Line height",shapeTitleLineStart:"Start",shapeTitleLineEnd:"End",shapeTitleStrokeWidth:"Line width",shapeTitleStrokeColor:"Line color",shapeTitleLineDecorationBar:"Bar",shapeTitleLineDecorationCircle:"Circle",shapeTitleLineDecorationSquare:"Square",shapeTitleLineDecorationArrow:"Arrow",shapeTitleLineDecorationCircleSolid:"Circle solid",shapeTitleLineDecorationSquareSolid:"Square solid",shapeTitleLineDecorationArrowSolid:"Arrow solid",shapeIconLineDecorationBar:'<g stroke="currentColor" stroke-linecap="round" stroke-width=".125em"><path d="M5,12 H16"/><path d="M16,8 V16"/></g>',shapeIconLineDecorationCircle:'<g stroke="currentColor" stroke-linecap="round"><path stroke-width=".125em" d="M5,12 H12"/><circle fill="none" stroke-width=".125em" cx="16" cy="12" r="4"/></g>',shapeIconLineDecorationSquare:'<g stroke="currentColor" stroke-linecap="round"><path stroke-width=".125em" d="M5,12 H12"/><rect fill="none" stroke-width=".125em" x="12" y="8" width="8" height="8"/></g>',shapeIconLineDecorationArrow:'<g stroke="currentColor" stroke-linecap="round" stroke-width=".125em"><path d="M5,12 H16 M13,7 l6,5 l-6,5" fill="none"/></g>',shapeIconLineDecorationCircleSolid:'<g stroke="currentColor" stroke-linecap="round"><path stroke-width=".125em" d="M5,12 H12"/><circle fill="currentColor" cx="16" cy="12" r="4"/></g>',shapeIconLineDecorationSquareSolid:'<g stroke="currentColor" stroke-linecap="round"><path stroke-width=".125em" d="M5,12 H12"/><rect fill="currentColor" x="12" y="8" width="8" height="8"/></g>',shapeIconLineDecorationArrowSolid:'<g stroke="currentColor" stroke-linecap="round" stroke-width=".125em"><path d="M5,12 H16"/><path d="M13,7 l6,5 l-6,5z" fill="currentColor"/></g>',shapeTitleColorTransparent:"Transparent",shapeTitleColorWhite:"White",shapeTitleColorSilver:"Silver",shapeTitleColorGray:"Gray",shapeTitleColorBlack:"Black",shapeTitleColorNavy:"Navy",shapeTitleColorBlue:"Blue",shapeTitleColorAqua:"Aqua",shapeTitleColorTeal:"Teal",shapeTitleColorOlive:"Olive",shapeTitleColorGreen:"Green",shapeTitleColorYellow:"Yellow",shapeTitleColorOrange:"Orange",shapeTitleColorRed:"Red",shapeTitleColorMaroon:"Maroon",shapeTitleColorFuchsia:"Fuchsia",shapeTitleColorPurple:"Purple",shapeTitleTextOutline:"Text outline",shapeTitleTextOutlineWidth:"Width",shapeTitleTextShadow:"Text shadow",shapeTitleTextShadowBlur:"Blur",shapeTitleTextColor:"Font color",shapeTitleTextAlign:"Text align",shapeTitleTextAlignLeft:"Left align text",shapeTitleTextAlignCenter:"Center align text",shapeTitleTextAlignRight:"Right align text",shapeIconTextAlignLeft:'<g stroke-width=".125em" stroke="currentColor"><line x1="5" y1="8" x2="15" y2="8"/><line x1="5" y1="12" x2="19" y2="12"/><line x1="5" y1="16" x2="14" y2="16"/></g>',shapeIconTextAlignCenter:'<g stroke-width=".125em" stroke="currentColor"><line x1="7" y1="8" x2="17" y2="8"/><line x1="5" y1="12" x2="19" y2="12"/><line x1="8" y1="16" x2="16" y2="16"/></g>',shapeIconTextAlignRight:'<g stroke-width=".125em" stroke="currentColor"><line x1="9" y1="8" x2="19" y2="8"/><line x1="5" y1="12" x2="19" y2="12"/><line x1="11" y1="16" x2="19" y2="16"/></g>',shapeLabelToolMove:"Move",shapeLabelToolView:"View",shapeLabelToolSharpie:"Sharpie",shapeLabelToolEraser:"Eraser",shapeLabelToolPath:"Path",shapeLabelToolRectangle:"Rectangle",shapeLabelToolEllipse:"Ellipse",shapeLabelToolArrow:"Arrow",shapeLabelToolLine:"Line",shapeLabelToolText:"Text",shapeLabelToolPreset:"Stickers",shapeIconToolView:'<g stroke-width=".125em" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path d="M10.98 9.703V2.567c0-1.19 1.19-1.785 1.784-1.785.595 0 1.784.595 1.784 1.785v3.568"/><path d="M14.548 9.703V4.35c0-1.19 1.19-1.784 1.784-1.784.595 0 1.784.594 1.784 1.784v2.973"/><path d="M18.116 10.244V7.271c0-1.19 1.19-1.784 1.784-1.784.595 0 1.785.595 1.785 1.784 0 1.19 0 8.92-1.19 12.488-1.19 3.569-10.704 4.758-13.678 0-2.973-4.757-2.973-4.757-4.163-6.541-1.189-1.784-1.153-2.974-.594-3.568.558-.595 1.784-1.19 2.973.594 1.277 1.916 2.07 2.907 2.379 2.974V5.487c0-1.19 1.19-1.784 1.784-1.784.595 0 1.784.595 1.784 1.784V8.46"/></g>',shapeIconToolMove:'<g stroke-width=".125em" stroke="currentColor" fill="none"><path d="M6 2 L6 19 L18 13 Z M13 18 L16 24" stroke="currentColor" stroke-width=".125em" fill="none" fill-rule="evenodd" stroke-linejoin="round"/></g>',shapeIconToolSharpie:'<g stroke-width=".125em" stroke="currentColor" fill="none"><path d="M2.025 5c5.616-2.732 8.833-3.857 9.65-3.374C12.903 2.351.518 12.666 2.026 14 3.534 15.334 16.536.566 17.73 2.566 18.924 4.566 3.98 17.187 4.831 18c.851.813 9.848-6 11.643-6 1.087 0-2.53 5.11-2.92 7-.086.41 3.323-1.498 4.773-1 .494.17.64 2.317 1.319 3 .439.443 1.332.776 2.679 1" stroke="currentColor" stroke-width=".125em" fill="none" fill-rule="evenodd" stroke-linejoin="round"/></g>',shapeIconToolEraser:'<g stroke-width=".125em" stroke="currentColor" stroke-linecap="round" fill="none"><g transform="translate(3, 15) rotate(-45)"><rect x="0" y="0" width="18" height="10" rx="3"/></g><line x1="11" y1="21" x2="18" y2="21"/><line x1="20" y1="21" x2="22" y2="21"/></g>',shapeIconToolPath:'<g stroke-width=".125em" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" fill="none"><circle cx="21" cy="3" r="2"/><circle cx="9" cy="9" r="2"/><circle cx="3" cy="21" r="2"/><path d="M19 4 11 8 M8 11 4 19"/></g>',shapeIconToolRectangle:'<g stroke-width=".125em" stroke="currentColor" fill="none"><rect x="1" y="1" width="22" height="22" rx="4"/></g>',shapeIconToolEllipse:'<g stroke-width=".125em" stroke="currentColor" fill="none"><circle cx="12" cy="12" r="11"/></g>',shapeIconToolArrow:'<g stroke-width=".125em" stroke="currentColor" fill="none"><line x1="20" y1="3" x2="6" y2="21"/><path d="m10 6 L21.5 1 L20 13.5" fill="currentColor" stroke="none"/></g>',shapeIconToolLine:'<g stroke-width=".125em" stroke="currentColor" fill="none"><line x1="20" y1="3" x2="6" y2="21"/></g>',shapeIconToolText:'<g stroke="none" fill="currentColor" transform="translate(6,0)"><path d="M8.14 20.085c.459 0 .901-.034 1.329-.102a8.597 8.597 0 001.015-.21v1.984c-.281.135-.695.247-1.242.336a9.328 9.328 0 01-1.477.133c-3.312 0-4.968-1.745-4.968-5.235V6.804H.344v-1.25l2.453-1.078L3.89.819h1.5v3.97h4.97v2.015H5.39v10.078c0 1.031.245 1.823.735 2.375s1.161.828 2.015.828z"/>',shapeIconToolPreset:'<g fill="none" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><path d="M12 22c2.773 0 1.189-5.177 3-7 1.796-1.808 7-.25 7-3 0-5.523-4.477-10-10-10S2 6.477 2 12s4.477 10 10 10z"></path><path d="M20 17c-3 3-5 5-8 5"></path></g>',shapeTitleSelectionMode:"Selection mode",shapeTitleBrushSize:"Brush size",shapeLabelSelectionModeNew:"New",shapeLabelSelectionModeAdd:"Add",shapeLabelSelectionModeSubtract:"Remove",shapeLabelToolSelectionBrush:"Brush",shapeLabelToolSelectionLassoo:"Lassoo",shapeLabelToolSelectionRectangle:"Rectangle marquee",shapeLabelToolSelectionEllipse:"Ellipse marquee",shapeIconSelectionModeNew:'<g fill="none" fill-rule="evenodd" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"><path d="M6.5 17H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v1.5"/><rect width="12" height="12" x="9" y="9" fill="currentColor" fill-opacity=".25" rx="2"/></g>',shapeIconSelectionModeAdd:'<g fill="none" fill-rule="evenodd" stroke="currentColor"><path fill="currentColor" fill-opacity=".25" stroke-linecap="round" stroke-linejoin="round" d="M15 3a2 2 0 0 1 2 2v4h2a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-8a2 2 0 0 1-2-2v-2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h10Z"/><path d="M13 15h4M15 13v4"/></g>',shapeIconSelectionModeSubtract:'<g fill="none" fill-rule="evenodd" stroke="currentColor"><path fill="currentColor" fill-opacity=".25" stroke-linecap="round" stroke-linejoin="round" d="M15 3a2 2 0 0 1 2 2v4h-6a2 2 0 0 0-1.995 1.85L9 11v6H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h10Z"/><rect width="12" height="12" x="9" y="9" stroke-linecap="round" stroke-linejoin="round" rx="2"/><path d="M13 15h4"/></g>',shapeIconToolSelectionBrush:'<g stroke-width=".125em" stroke="currentColor" fill="none"><path d="M2.025 5c5.616-2.732 8.833-3.857 9.65-3.374C12.903 2.351.518 12.666 2.026 14 3.534 15.334 16.536.566 17.73 2.566 18.924 4.566 3.98 17.187 4.831 18c.851.813 9.848-6 11.643-6 1.087 0-2.53 5.11-2.92 7-.086.41 3.323-1.498 4.773-1 .494.17.64 2.317 1.319 3 .439.443 1.332.776 2.679 1" stroke="currentColor" fill-rule="evenodd" stroke-linejoin="round"/></g>',shapeIconToolSelectionLassoo:'<g fill="none" fill-rule="evenodd" stroke-width=".125em" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M11.428 17.702a18.46 18.46 0 0 0 4.085-1.595c5.851-3.112 9.019-8.599 7.074-12.256-1.945-3.657-8.265-4.1-14.116-.988C2.619 5.974-.55 11.46 1.396 15.118c.63 1.186 1.72 2.033 3.105 2.532"/><ellipse cx="8" cy="18.5" rx="3.5" ry="2.833" transform="rotate(-15 8 18.5)"/><path stroke-linecap="round" d="M5 18c3.347 1.048 5.514 1.881 6.5 2.5.859.54 1.517.994 1.5 2.364"/></g>',shapeIconToolSelectionRectangle:'<g stroke-width=".125em" stroke="currentColor"><path d="M9 1 h6 m4 0 h4v4 m0 4 v6 m0 4 v4h-4 m-4 0 h-6 m-4 0 h-4v-4 m0 -4 v-6 m0 -4 v-4h4" fill="none" /></g>',shapeIconToolSelectionEllipse:'<path stroke-width=".125em" stroke="currentColor" d="M1.21 9.853a11.054 11.054 0 0 0 0 4.294m1.643 3.965a11.054 11.054 0 0 0 3.035 3.035m3.965 1.644a11.054 11.054 0 0 0 4.294 0m3.965-1.644a11.054 11.054 0 0 0 3.035-3.035m1.644-3.965a11.054 11.054 0 0 0 0-4.294m-1.644-3.965a11.054 11.054 0 0 0-3.035-3.035m-3.965-1.644a11.054 11.054 0 0 0-4.294 0M5.888 2.853a11.054 11.054 0 0 0-3.035 3.035"/>'};var xG=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e);Object.keys(n).forEach((r=>{n[r].get?Object.defineProperty(t,r,{get:()=>e[r],set:t=>e[r]=t}):t[r]=e[r]}))},wG=e=>{const t={},{sub:n,pub:r}=GP();cE()&&null!==document.doctype||console.warn("Browser is in quirks mode, add <!DOCTYPE html> to page to fix render issues");const i=bL();xG(i,t);const o=((e,t)=>{const n={},r=new Map,i=new bU({target:e,props:{stores:t,pluginComponents:Array.from(kU)}});let o=!1;const a=()=>{o||(cE()&&window.removeEventListener("pagehide",a),i&&(o=!0,i.$destroy()))};function s(e,t){return r.get(e)===t||(r.set(e,t),!1)}SU||(SU=new Set(GD(bU).filter((e=>!wU.includes(e))))),SU.forEach((e=>{Object.defineProperty(n,e,{get:()=>i[e],set:$U.includes(e)?t=>{s(e,t)||(i[e]={...i[e],...t})}:t=>{s(e,t)||(i[e]=t)}})})),Object.defineProperty(n,"previewImageData",{get:()=>i.imagePreviewCurrent}),_U.forEach((e=>{const t=CU[e],r=t[0];Object.defineProperty(n,e,{get:()=>i.pluginInterface[r][e],set:n=>{if(s(e,n))return;const r=t.reduce(((t,r)=>(t[r]={...i.pluginOptions[r],[e]:n},t)),{});i.pluginOptions={...i.pluginOptions,...r}}})})),Object.defineProperty(n,"element",{get:()=>i.root,set:()=>{}});const l=i.history;return YO(n,{on:(e,t)=>{if(o)return()=>{};if(/undo|redo|revert|writehistory/.test(e))return l.on(e,t);const n=[i.sub(e,t),i.$on(e,(e=>t(e instanceof CustomEvent&&!e.detail?void 0:e)))].filter(Boolean);return()=>n.forEach((e=>e()))},updateImagePreview:e=>{i.imagePreviewSrc=e},close:()=>!o&&i.pub("close"),destroy:a}),Object.defineProperty(n,"history",{get:()=>({undo:()=>l.undo(),redo:()=>l.redo(),revert:()=>l.revert(),get:()=>l.get(),getCollapsed:()=>l.get().splice(0,l.index+1),set:e=>l.set(e),write:e=>l.write(e),get length(){return l.length()},get index(){return l.index},set index(e){l.index=e}})}),cE()&&window.addEventListener("pagehide",a),n})(e,i.stores);xG(o,t);const a=["loadImage","processImage","abortProcessImage","abortLoadImage"].map((e=>o.on(e,(t=>{const n=i[e](t&&t.detail);n instanceof Promise&&n.catch(eE)})))),s=(e,t)=>{const r=n(e,t),a=i.on(e,t),s=o.on(e,t);return()=>{r(),a(),s()}};t.handleEvent=eE;const l=TU.map((e=>s(e,(n=>t.handleEvent(e,n)))));return YO(t,{on:s,updateImage:e=>new Promise(((n,r)=>{const o=t.history.get(),a=t.history.index,s=t.imageState;i.loadImage(e).then((e=>{t.history.set(o),t.history.index=a,t.imageState=s,n(e)})).catch(r)})),close:()=>{r("close")},destroy:()=>{[...a,...l].forEach((e=>e())),o.destroy(),i.destroy(),r("destroy")}}),setTimeout((()=>r("init",t)),0),t};cE()&&HTMLElement;var $G=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=hE(e)?document.querySelector(e):e;if(!UI(n))return;t.class=t.class?"pintura-editor "+t.class:"pintura-editor";const r=wG(n);return Object.assign(r,t)};const{document:SG,window:_G}=SO;const CG=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5,i=arguments.length>4?arguments[4]:void 0;const o=hT(t.x-e.x,t.y-e.y),a=bT(o),s=r*n;let l;l=i?.5*s:Math.ceil(.5*(s-1));const c=kT(mT(a),l);return{anchor:mT(e),offset:c,normal:a,solid:i,size:s,sizeHalf:l}},kG=(e,t,n)=>{const{strokeWidth:r,strokeColor:i,strokeJoin:o,strokeCap:a,...s}=e,{anchor:l,offset:c,normal:u,solid:d,size:p,sizeHalf:h}=t,f=l.x,m=l.y,g=kT(mT(u),p),y=hT(f+g.x,m+g.y);if(kT(g,.55),d){ST(n,c);const e=kT(mT(u),.5*h);return[{...s,points:[hT(f-e.x,m-e.y),hT(y.x-g.y,y.y+g.x),hT(y.x+g.y,y.y-g.x)],pathClose:!0,backgroundColor:i}]}{const e=kT((e=>{const t=e.x;return e.x=-e.y,e.y=t,e})(mT(u)),.5),t=hT(f-e.x,m-e.y),n=hT(f+e.x,m+e.y);return[{...s,points:[hT(y.x+g.y,y.y-g.x),t,hT(f,m),n,hT(y.x-g.y,y.y+g.x)],pathClose:!1,strokeWidth:r,strokeColor:i,strokeJoin:o,strokeCap:a}]}},EG=(e,t,n)=>{const{strokeWidth:r,strokeColor:i,...o}=e,{anchor:a,solid:s,offset:l,normal:c,sizeHalf:u}=t;return ST(n,l),s&&ST(n,gT(mT(c))),[{...o,x:a.x,y:a.y,rx:u,ry:u,backgroundColor:s?i:void 0,strokeWidth:s?void 0:r,strokeColor:s?void 0:i}]},TG=(e,t)=>{const{strokeWidth:n,strokeColor:r,strokeJoin:i,strokeCap:o,...a}=e,{anchor:s,offset:l}=t;return[{...a,points:[hT(s.x-l.y,s.y+l.x),hT(s.x+l.y,s.y-l.x)],strokeWidth:n,strokeColor:r,strokeJoin:i,strokeCap:o}]},IG=(e,t,n)=>{const{strokeWidth:r,strokeColor:i,...o}=e,{anchor:a,solid:s,offset:l,normal:c,sizeHalf:u}=t;return ST(n,l),[{...o,x:a.x-u,y:a.y-u,width:2*u,height:2*u,rotation:(d=c,Math.atan2(d.y,d.x)),backgroundColor:s?i:void 0,strokeWidth:s?void 0:r,strokeColor:s?void 0:i}];var d},PG=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t=>{if(!t.lineStart&&!t.lineEnd)return;const n=[],{x1:r,y1:i,x2:o,y2:a,lineStart:s,lineEnd:l,strokeWidth:c,strokeColor:u,strokeJoin:d,strokeCap:p,strokeDash:h,lineStartScalar:f,lineEndScalar:m,bitmap:g,aboveFrame:y,opacity:v}=t,b=hT(r,i),x=hT(o,a),w=[b,x],$={bitmap:g,aboveFrame:y,opacity:v,strokeColor:u,strokeWidth:c,strokeJoin:d,strokeCap:p,lineStartScalar:f,lineEndScalar:m};if(s){const[t,r]=s.split("-"),i=e[t];if(i){const e=CG(b,x,c,f||m,!!r);n.push(...i($,e,b))}}if(l){const[t,r]=l.split("-"),i=e[t];if(i){const e=CG(x,b,c,m,!!r);n.push(...i($,e,x))}}return[{...$,strokeDash:h,points:w},...n]}},RG=(e,t)=>{const n=parseFloat(e)*t;return hE(e)?n+"%":n},MG=(e,t)=>hE(e)?oM(e,t):e,AG=e=>[{...e,frameStyle:"line",frameInset:0,frameOffset:0,frameSize:e.frameSize?RG(e.frameSize,2):"2.5%",frameRadius:e.frameRound?RG(e.frameSize,2):0}],OG=(e,t)=>{let{width:n,height:r,frameImage:i,frameSize:o="15%",frameOutset:a=0,frameSlices:s={x1:.15,y1:.15,x2:.85,y2:.85}}=e,{isPreview:l}=t;if(!i)return[];const c=Math.sqrt(n*r),u=MG(o,c),d=l?u:Math.round(u),p=d,h=MG(a,c),f=2*h,{x1:m,x2:g,y1:y,y2:v}=s,b={x0:0,y0:0,x1:d,y1:p,x2:n-d,y2:r-p,x3:n,y3:r,cw:d,ch:p,ew:n-d-d,eh:r-p-p},x=l?1:0,w=2*x,$=h>0,S={expandsCanvas:$,width:b.cw,height:b.ch,backgroundImage:i};return[{expandsCanvas:$,x:b.x1-x-h,y:b.y0-h,width:b.ew+w+f,height:b.ch,backgroundCorners:[{x:m,y:0},{x:g,y:0},{x:g,y:y},{x:m,y:y}],backgroundImage:i},{expandsCanvas:$,x:b.x1-x-h,y:b.y2+h,width:b.ew+w+f,height:b.ch,backgroundCorners:[{x:m,y:v},{x:g,y:v},{x:g,y:1},{x:m,y:1}],backgroundImage:i},{expandsCanvas:$,x:b.x0-h,y:b.y1-x-h,width:b.cw,height:b.eh+w+f,backgroundCorners:[{x:0,y:y},{x:m,y:y},{x:m,y:v},{x:0,y:v}],backgroundImage:i},{expandsCanvas:$,x:b.x2+h,y:b.y1-x-h,width:b.cw,height:b.eh+w+f,backgroundCorners:[{x:g,y:y},{x:1,y:y},{x:1,y:v},{x:g,y:v}],backgroundImage:i},{...S,x:b.x0-h,y:b.y0-h,backgroundCorners:[{x:0,y:0},{x:m,y:0},{x:m,y:y},{x:0,y:y}]},{...S,x:b.x2+h,y:b.y0-h,backgroundCorners:[{x:g,y:0},{x:1,y:0},{x:1,y:y},{x:g,y:y}]},{...S,x:b.x2+h,y:b.y2+h,backgroundCorners:[{x:g,y:v},{x:1,y:v},{x:1,y:1},{x:g,y:1}]},{...S,x:b.x0-h,y:b.y2+h,backgroundCorners:[{x:0,y:v},{x:m,y:v},{x:m,y:1},{x:0,y:1}]}]},LG=(e,t)=>{let{x:n,y:r,width:i,height:o,frameInset:a="3.5%",frameSize:s=".25%",frameColor:l=[1,1,1],frameOffset:c="5%",frameAmount:u=1,frameRadius:d=0,expandsCanvas:p=!1}=e,{isPreview:h}=t;const f=Math.sqrt(i*o);let m=MG(s,f);const g=MG(a,f),y=MG(c,f);let v=0;h||(m=Math.max(1,Math.round(m)),v=m%2==0?0:.5);const b=MG(RG(d,u),f);return new Array(u).fill(void 0).map(((e,t)=>{const a=y*t;let s=n+g+a,c=r+g+a,u=n+i-g-a,d=r+o-g-a;return h||(s=Math.round(s),c=Math.round(c),u=Math.round(u),d=Math.round(d)),{x:s+v,y:c+v,width:u-s,height:d-c,cornerRadius:b>0?b-a:0,strokeWidth:m,strokeColor:l,expandsCanvas:p}}))},NG=(e,t)=>{let{x:n,y:r,width:i,height:o,frameSize:a=".25%",frameOffset:s=0,frameInset:l="2.5%",frameColor:c=[1,1,1]}=e,{isPreview:u}=t;const d=Math.sqrt(i*o);let p=MG(a,d),h=MG(l,d),f=MG(s,d),m=0;u||(p=Math.max(1,Math.round(p)),h=Math.round(h),f=Math.round(f),m=p%2==0?0:.5);const g=f-h,y=n+h+m,v=r+h+m,b=n+i-h-m,x=r+o-h-m;return[{points:[hT(y+g,v),hT(b-g,v)]},{points:[hT(b,v+g),hT(b,x-g)]},{points:[hT(b-g,x),hT(y+g,x)]},{points:[hT(y,x-g),hT(y,v+g)]}].map((e=>(e.strokeWidth=p,e.strokeColor=c,e)))},DG=(e,t)=>{let{x:n,y:r,width:i,height:o,frameSize:a=".25%",frameInset:s="2.5%",frameLength:l="2.5%",frameColor:c=[1,1,1]}=e,{isPreview:u}=t;const d=Math.sqrt(i*o);let p=MG(a,d),h=MG(s,d),f=MG(l,d),m=0;u||(p=Math.max(1,Math.round(p)),h=Math.round(h),f=Math.round(f),m=p%2==0?0:.5);const g=n+h+m,y=r+h+m,v=n+i-h-m,b=r+o-h-m;return[{points:[hT(g,y+f),hT(g,y),hT(g+f,y)]},{points:[hT(v-f,y),hT(v,y),hT(v,y+f)]},{points:[hT(v,b-f),hT(v,b),hT(v-f,b)]},{points:[hT(g+f,b),hT(g,b),hT(g,b-f)]}].map((e=>(e.strokeWidth=p,e.strokeColor=c,e)))},FG=(e,t)=>{let{x:n,y:r,width:i,height:o,frameColor:a=[1,1,1]}=e,{isPreview:s}=t;const l=Math.sqrt(i*o),c=.1*l;let u=.2*l,d=0;const p=.5*c;return s?d=1:u=Math.ceil(u),a.length=3,[{id:"border",x:n-p+d,y:r-p+d,width:i+c-2*d,height:o+u-2*d,frameStyle:"line",frameInset:0,frameOffset:0,frameSize:c,frameColor:a,expandsCanvas:!0},{id:"chin",x:n-p,y:o-d,width:i+c,height:u,backgroundColor:a,expandsCanvas:!0}].filter(Boolean)},jG=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(t,n)=>{if(!AP(t,"frameStyle"))return;const r=t.frameStyle,i=e[r];if(!i)return;const{frameStyle:o,...a}=t;return i(a,n)}},zG=e=>{const t=function(n){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{isPreview:!0};const i=e.map((e=>{const i=e(n,r);if(i)return i.map((e=>t(e,r)))})).filter(Boolean).flat();return i.length?i.flat().map(((e,t)=>(e.id=n.id+"_"+t,e))):n};return t};"undefined"!=typeof window&&(e=>{if(!e)return;const[t,n,r,i]=[[108,111,99,97,116,105,111,110],[82,101,103,69,120,112],[116,101,115,116],[112,113,105,110,97,92,46,110,108]].map((e=>e.map((e=>String.fromCharCode(e))).join("")));e._gp4y96c=new e[n](i)[r](e[t])})(window);const BG=iN,UG=aN,WG=()=>({read:async(e,t)=>{const n=await async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,e.size],r=arguments.length>3?arguments[3]:void 0;const i=await async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,e.size],n=arguments.length>2?arguments[2]:void 0;return await sE(e.slice(...t),n)}(e,n,r);return iE(i,t)}(e,{exif:[274]},[0,262144],t);return n&&n.exif&&n.exif[274]||1},apply:_E}),VG=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{blurAmount:t,dataSizeScalar:n,scrambleAmount:r,backgroundColor:i}=e;return(e,o)=>async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)return;const{width:n,height:r,colorSpace:i="srgb"}=e,{dataSize:o=96,dataSizeScalar:a=1,scrambleAmount:s=4,blurAmount:l=6,outputFormat:c="canvas",backgroundColor:u=[0,0,0]}=t,d=Math.round(o*a),p=Math.min(d/n,d/r),h=Math.floor(n*p),f=Math.floor(r*p),m=mE("canvas",{width:h,height:f}),g=m.getContext("2d",{willReadFrequently:!0,colorSpace:i});if(u.length=3,g.fillStyle=UP(u),g.fillRect(0,0,h,f),vE(e)){const t=mE("canvas",{width:n,height:r});t.getContext("2d",{willReadFrequently:!0,colorSpace:i}).putImageData(e,0,0),g.drawImage(t,0,0,h,f),yE(t)}else g.drawImage(e,0,0,h,f);const y=g.getImageData(0,0,h,f),v=[];if(s>0&&v.push([VN,{amount:s}]),l>0)for(let x=0;x<l;x++)v.push([kP,{matrix:HN}]);let b;if(v.length){const e=(t,n)=>`(err, imageData) => {\n(${t[n][0].toString()})(Object.assign({ imageData: imageData }, filterInstructions[${n}]), \n${t[n+1]?e(t,n+1):"done"})\n}`,t=`function (options, done) {\nconst filterInstructions = options.filterInstructions;\nconst imageData = options.imageData;\n(${e(v,0)})(null, imageData)\n}`,n=await OE(t,[{imageData:y,filterInstructions:v.map((e=>e[1]))}],[y.data.buffer]);b=SP(n)}else b=y;return"canvas"===c?(g.putImageData(b,0,0),m):b}(e,{blurAmount:t,scrambleAmount:r,backgroundColor:i,...o,dataSizeScalar:n||o.dataSizeScalar})},HG=ZU,qG=bW,GG={markupEditorToolbar:QU(),markupEditorToolStyles:ZU(),markupEditorShapeStyleControls:bW()},KG=PV,YG=DV,ZG=HV,XG=Iq,QG=Mq,JG=Lq,eK=Wq,tK=iG,nK=tG,rK=mG,iK=NU,oK=LU,aK=FU,sK=vG,lK=bG,cK={cropLabel:"Crop",cropIcon:'<g stroke-width=".125em" stroke="currentColor" fill="none"><path d="M23 17H9a2 2 0 0 1-2-2v-5m0-3V1 M1 7h14a2 2 0 0 1 2 2v7m0 4v3"/></g>',cropIconButtonRecenter:'<path stroke="currentColor" fill="none" stroke-width="2" stroke-linejoin="bevel" d="M1.5 7.5v-6h6M1.5 16.5v6h6M22.5 16.5v6h-6M22.5 7.5v-6h-6"/><circle cx="12" cy="12" r="3.5" fill="currentColor" stroke="none"/>',cropIconButtonRotateLeft:'<g stroke="none" fill="currentColor"><path fill="none" d="M-1-1h582v402H-1z"/><rect x="3" rx="1" height="12" width="12" y="9"/><path d="M15 5h-1a5 5 0 015 5 1 1 0 002 0 7 7 0 00-7-7h-1.374l.747-.747A1 1 0 0011.958.84L9.603 3.194a1 1 0 000 1.415l2.355 2.355a1 1 0 001.415-1.414l-.55-.55H15z"/></g>',cropIconButtonRotateRight:'<g stroke="none" fill="currentColor"><path fill="none" d="M-1-1h582v402H-1z"/><path d="M11.177 5H10a5 5 0 00-5 5 1 1 0 01-2 0 7 7 0 017-7h1.374l-.747-.747A1 1 0 0112.042.84l2.355 2.355a1 1 0 010 1.415l-2.355 2.354a1 1 0 01-1.415-1.414l.55-.55z"/><rect rx="1" height="12" width="12" y="9" x="9"/></g>',cropIconButtonFlipVertical:'<g stroke="none" fill="currentColor"><path d="M19.993 12.143H7a1 1 0 0 1-1-1V5.994a1 1 0 0 1 1.368-.93l12.993 5.15a1 1 0 0 1-.368 1.93z"/><path d="M19.993 14a1 1 0 0 1 .368 1.93L7.368 21.078A1 1 0 0 1 6 20.148V15a1 1 0 0 1 1-1h12.993z" opacity=".6"/></g>',cropIconButtonFlipHorizontal:'<g stroke="none" fill="currentColor"><path d="M11.93 7.007V20a1 1 0 0 1-1 1H5.78a1 1 0 0 1-.93-1.368l5.15-12.993a1 1 0 0 1 1.929.368z"/><path d="M14 7.007V20a1 1 0 0 0 1 1h5.149a1 1 0 0 0 .93-1.368l-5.15-12.993A1 1 0 0 0 14 7.007z" opacity=".6"/></g>',cropIconSelectPreset:'<g fill="currentColor">\n        <rect opacity="{a}" x="2" y="4" width="10" height="18" rx="1"/>\n        <rect opacity="{b}" x="4" y="8" width="14" height="14" rx="1"/>\n        <rect opacity="{c}" x="6" y="12" width="17" height="10" rx="1"/>\n    </g>',cropIconCropBoundary:'<g fill="currentColor">\n        <rect opacity="{a}" x="2" y="3" width="20" height="20" rx="1"/>\n        <rect opacity="{b}" x="7" y="8" width="10" height="10" rx="1"/>\n        <rect opacity="{c}" x="4" y="8" width="14" height="14" rx="1"/>\n        <rect opacity="{d}" x="12" y="4" width="10" height="10" rx="1"/>\n    </g>',cropLabelButtonRecenter:"Recenter",cropLabelButtonRotateLeft:"Rotate left",cropLabelButtonRotateRight:"Rotate right",cropLabelButtonFlipHorizontal:"Flip horizontal",cropLabelButtonFlipVertical:"Flip vertical",cropLabelSelectPreset:"Crop shape",cropLabelCropBoundary:"Crop boundary",cropLabelCropBoundaryEdge:"Edge of image",cropLabelCropBoundaryNone:"None",cropLabelTabRotation:"Rotation",cropLabelTabZoom:"Scale"},uK={fillLabel:"Fill",fillIcon:'\n    <g fill="none" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em">\n        <g transform="rotate(60, 12, 12)">\n            <rect x="4" y="4" width="14" height="16" rx="3"/>\n        </g>\n        <path d="M21 13 L21 21"></path>\n        <path d="M4.5 12.5 L19 12.5"></path>\n    </g>\n    '},dK={filterLabel:"Filter",filterIcon:'<g stroke-width=".125em" stroke="currentColor" fill="none"><path d="M18.347 9.907a6.5 6.5 0 1 0-1.872 3.306M3.26 11.574a6.5 6.5 0 1 0 2.815-1.417 M10.15 17.897A6.503 6.503 0 0 0 16.5 23a6.5 6.5 0 1 0-6.183-8.51"/></g>',filterLabelChrome:"Chrome",filterLabelFade:"Fade",filterLabelCold:"Cold",filterLabelWarm:"Warm",filterLabelPastel:"Pastel",filterLabelMonoDefault:"Mono",filterLabelMonoNoir:"Noir",filterLabelMonoWash:"Wash",filterLabelMonoStark:"Stark",filterLabelSepiaDefault:"Sepia",filterLabelSepiaBlues:"Blues",filterLabelSepiaRust:"Rust",filterLabelSepiaColor:"Color"},pK={finetuneLabel:"Finetune",finetuneIcon:'<g stroke-width=".125em" stroke="currentColor" fill="none"><path d="M4 1v5.5m0 3.503V23M12 1v10.5m0 3.5v8M20 1v15.5m0 3.5v3M2 7h4M10 12h4M18 17h4"/></g>',finetuneLabelBrightness:"Brightness",finetuneLabelContrast:"Contrast",finetuneLabelSaturation:"Saturation",finetuneLabelExposure:"Exposure",finetuneLabelTemperature:"Temperature",finetuneLabelGamma:"Gamma",finetuneLabelClarity:"Clarity",finetuneLabelVignette:"Vignette"},hK={resizeLabel:"Resize",resizeIcon:'<g stroke-width=".125em" stroke="currentColor" fill="none"><rect x="2" y="12" width="10" height="10" rx="2"/><path d="M4 11.5V4a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-5.5"/><path d="M14 10l3.365-3.365M14 6h4v4"/></g>',resizeLabelFormCaption:"Image output size",resizeLabelInputWidth:"w",resizeTitleInputWidth:"Width",resizeLabelInputHeight:"h",resizeTitleInputHeight:"Height",resizeTitleButtonMaintainAspectRatio:"Maintain aspectratio",resizeIconButtonMaintainAspectRatio:'<defs><mask id="mask1" x="-2" y="-2" width="24" height="24"><rect x="0" y="0" width="24" height="10" fill="#fff" stroke="none"/></mask></defs><g fill="none" fill-rule="evenodd"><g mask="url(#mask1)"><path transform="translate(0 {activeFraction})" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" d="M9.401 10.205v-.804a2.599 2.599 0 0 1 5.198 0V17"/></g><rect fill="currentColor" x="7" y="10" width="10" height="7" rx="1.5"/></g>'},fK={decorateLabel:"Decorate",decorateIcon:'<g fill="none" fill-rule="evenodd"><path stroke="currentColor" stroke-width=".125em" stroke-linecap="round" stroke-linejoin="round" d="M12 18.5l-6.466 3.4 1.235-7.2-5.23-5.1 7.228-1.05L12 2l3.233 6.55 7.229 1.05-5.231 5.1 1.235 7.2z"/></g>'},mK={annotateLabel:"Annotate",annotateIcon:'<g stroke-width=".125em" stroke="currentColor" fill="none"><path d="M17.086 2.914a2.828 2.828 0 1 1 4 4l-14.5 14.5-5.5 1.5 1.5-5.5 14.5-14.5z"/></g>'},gK={stickerLabel:"Sticker",stickerIcon:'<g fill="none" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><path d="M12 22c2.773 0 1.189-5.177 3-7 1.796-1.808 7-.25 7-3 0-5.523-4.477-10-10-10S2 6.477 2 12s4.477 10 10 10z"/><path d="M20 17c-3 3-5 5-8 5"/></g>'},yK={frameLabel:"Frame",frameIcon:'<g fill="none" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em">\n            <rect x="2" y="2" width="20" height="20" rx="4"/>\n            <rect x="6" y="6" width="12" height="12" rx="1"/>\n        </g>',frameLabelMatSharp:"Mat",frameLabelMatRound:"Bevel",frameLabelLineSingle:"Line",frameLabelLineMultiple:"Zebra",frameLabelEdgeSeparate:"Inset",frameLabelEdgeOverlap:"Plus",frameLabelEdgeCross:"Lumber",frameLabelCornerHooks:"Hook",frameLabelPolaroid:"Polaroid"},vK={redactLabel:"Redact",redactIcon:'<g fill="none" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><path d="M 4 5 l 1 -1"/><path d="M 4 10 l 6 -6"/><path d="M 4 15 l 11 -11"/><path d="M 4 20 l 16 -16"/><path d="M 9 20 l 11 -11"/><path d="M 14 20 l 6 -6"/><path d="M 19 20 l 1 -1"/></g>'},bK=$G,xK=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return zG([jG({solid:AG,hook:DG,line:LG,edge:NG,polaroid:FG,nine:OG}),PG({arrow:kG,circle:EG,square:IG,bar:TG}),...e])},wK=function(){let e,t,n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Array.isArray(r.imageReader)||(t=r.imageReader,delete r.imageReader),Array.isArray(r.imageWriter)?e=UG():(e=TE(r.imageWriter)?r.imageWriter:UG(r.imageWriter),delete r.imageWriter),TE(r.imageScrambler)||(n=r.imageScrambler,delete r.imageScrambler),{imageReader:BG(t),imageWriter:e,imageOrienter:WG(),imageScrambler:VG(n)}},$K=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};EU(KG,YG,ZG,XG,QG,JG,eK,tK,nK,rK);const t=wK(e),n={...sK,...lK,...cK,...uK,...dK,...pK,...yK,...vK,...hK,...fK,...mK,...gK,...e.locale};delete e.locale;const r="function"==typeof e.shapePreprocessor?e.shapePreprocessor:xK(e.shapePreprocessor);return delete e.shapePreprocessor,e.markupEditorShapeStyleControls&&Object.entries(e.markupEditorShapeStyleControls).every((e=>{let[t,n]=e;return/Options$/.test(t)||!Array.isArray(n)}))&&(e.markupEditorShapeStyleControls=qG({...e.markupEditorShapeStyleControls})),e.markupEditorToolStyles&&Object.values(e.markupEditorToolStyles).every((e=>!Array.isArray(e)))&&(e.markupEditorToolStyles=Object.entries(e.markupEditorToolStyles).reduce(((e,t)=>{let[n,r]=t;return e[n]=YU(n,r),e}),HG())),jO([{...t,shapePreprocessor:r,utils:["trim","crop","filter","finetune","retouch","annotate","decorate","sticker","fill","frame","redact","resize"],...iK,...oK,...aK,...GG,stickerStickToImage:!0,locale:n},e])},SK=e=>/^on[A-Z]/.test(e),_K=e=>e.substr(2).toLowerCase(),CK=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;(e.unsubs||[]).filter((e=>{let[n]=e;return!t||t.includes(n)})).forEach((e=>{let[,t]=e;return t()}))},kK=(e,t)=>{CK(e,(e=>Object.keys(e).filter(SK).map(_K))(t)),e.unsubs=Object.keys(t).filter(SK).map((n=>{const r=_K(n);return[r,e.editor.on(r,t[n])]}))};class EK extends r.Component{constructor(e){super(e),this.elementRef=r.createRef(),this.editor=void 0}componentDidMount(){if(!this.elementRef.current)return;const e={...this.props};this.editor=bK(this.elementRef.current,e),kK(this,e)}componentDidUpdate(){const e={...this.props};Object.assign(this.editor,e),kK(this,e)}componentWillUnmount(){this.editor&&(CK(this),this.editor.destroy(),this.editor=void 0)}render(){return r.createElement("div",{className:`PinturaRootWrapper ${this.props.className?this.props.className:""}`.trim(),ref:this.elementRef})}}const TK=EK;r.Component;r.Component;function IK(){const e=Ce(),[t,n]=(0,r.useState)(!0),i=he((e=>e.page.uploadedPath));return t&&i?(0,Kt.jsx)("div",{className:"upload__editor",children:(0,Kt.jsx)(TK,{...$K(),src:i,imageCropAspectRatio:1,onProcess:t=>{const r=URL.createObjectURL(t.dest);e(Ia({path:r})),n(!1)},onClose:()=>n(!1)})}):(0,Kt.jsx)(Kt.Fragment,{})}function PK(e){let{onFileUpload:t,inputId:n,name:i}=e;const o=(0,r.useRef)(null),a=Ce(),s=Rw(us.MobileOnly),l=he((e=>e.page.uploadedPath)),c=(0,r.useCallback)((e=>{const n=e[0];if(n){const e=new FileReader;e.onload=()=>{const n=e.result;a(Ia({path:n})),t(n)},e.readAsDataURL(n)}}),[a,t]),{getRootProps:u,getInputProps:d}=Zk({accept:{"image/jpeg":[],"image/jpg":[],"image/png":[],"image/webp":[]},onDrop:c});return(0,Kt.jsxs)("div",{className:"upload",children:[l?(0,Kt.jsxs)("div",{className:"upload__preview-wrapper",children:[(0,Kt.jsx)("img",{className:"upload__preview",width:100,height:100,src:l,alt:"Processed"}),(0,Kt.jsx)("button",{className:"upload__preview-remove-btn",onClick:e=>{e.preventDefault(),a(Ia({path:null}))},type:"button",children:(0,Kt.jsx)(Qb,{})})]}):(0,Kt.jsxs)("div",{className:"upload__wrapper",...u(),tabIndex:-1,children:[s&&(0,Kt.jsx)("button",{className:"button upload__button",onClick:()=>{var e;null===(e=o.current)||void 0===e||e.click()},type:"button",children:(0,Kt.jsx)(KC,{})}),(0,Kt.jsx)("input",{...d(),className:"visually-hidden",name:i,id:n,ref:o}),!s&&(0,Kt.jsx)("div",{className:"upload__drop form__input",children:(0,Kt.jsx)("p",{className:"upload__description",children:"\u041f\u0435\u0440\u0435\u0442\u0430\u0449\u0438 \u0441\u044e\u0434\u0430 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435 \u0438\u043b\u0438 \u043a\u043b\u0438\u043a\u043d\u0438 \u0434\u043b\u044f \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438."})}),(0,Kt.jsx)("p",{className:"upload__description",children:"PNG, WEBP, JPG, JPEG. Max 1Gb."})]}),l&&(0,Kt.jsx)(IK,{})]})}function RK(e){let{type:t}=e;const n=Ce(),i=he((e=>e.data.meals)),o=he((e=>e.page.isNewMealFormOpened)),a=i.length.toString(),[s,l]=(0,r.useState)(!1),c=he((e=>e.auth.userInfo)),u=he((e=>e.data.users.find((e=>e.id===(null===c||void 0===c?void 0:c.id))))),d=he((e=>e.page.activeMealType)),[p,h]=(0,r.useState)(!0),[f,m]=(0,r.useState)(!1),g=Mw((()=>{n(Ua({isOpened:!1}))})),y={id:"breakfast"+a,name:"",ingredients:[""],type:t||d||Ka.Breakfast,recipe:"",picture:"",calories:0,proteins:0,fats:0,carbs:0},v=(e,t)=>{const n=e.filter((e=>e.type===t));if(0===n.length)return`${t.toLowerCase()}-1`;const r=Math.max(...n.map((e=>{const t=e.id.split("-");return parseInt(t[1],10)})));return`${t.toLowerCase()}-${r+1}`},[b,x]=(0,r.useState)({id:v(i,t||d||Ka.Breakfast),name:"",ingredients:[""],type:t||d||Ka.Breakfast,recipe:"",picture:"",calories:0,proteins:0,fats:0,carbs:0});(0,r.useEffect)((()=>{const e=t||d||Ka.Breakfast;x((t=>({...t,type:e,id:v(i,e)})))}),[t,d,i]);const w=e=>{const{name:t,value:n,files:r}=e.target;if("picture"===t&&r)x((e=>({...e,picture:URL.createObjectURL(r[0])})));else if("ingredients"===t){const e=n?n.split(",").map((e=>e)):[];x((t=>({...t,ingredients:e})))}else{const e=["calories","proteins","fats","carbs"];x((r=>({...r,[t]:e.includes(t)?""===n?"":parseFloat(n)||0:n})))}};return(0,Kt.jsx)("div",{className:"form__wrapper",children:(0,Kt.jsxs)("form",{className:"form",method:"post",action:"#",onSubmit:async e=>{var t;e.preventDefault(),l(!0),!f&&n(Ta({meal:b}));const r={...b,id:`${b.id}-${(null===u||void 0===u||null===(t=u.mealSchedule)||void 0===t?void 0:t.length)||"0"}`};try{!f&&await(async e=>{try{const t=Dg.ref(Ga.Meals);let n=(await t.once("value")).val();n||(n=[]),n.push(e),await t.set(n),console.log("Meal successfully added!")}catch(Eu){console.error("Error adding meal: ",Eu)}})(b),p&&u&&await Bg(u,r),x({...y,id:v(i,b.type)}),p&&u&&n(Ma({user:u,meal:b})),n(Ua({isOpened:!1})),n(Na(f?{message:hs.AddMeal}:{message:hs.AddNewMeal}))}catch(Eu){console.error("Error adding meal:",Eu)}finally{l(!1)}},ref:g,children:[(0,Kt.jsxs)("div",{className:"form__header",children:[(0,Kt.jsx)("h1",{className:"title title--2 form__title",children:"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043d\u043e\u0432\u043e\u0433\u043e \u0431\u043b\u044e\u0434\u0430"}),(0,Kt.jsx)("button",{className:"button form__button--close",onClick:()=>n(Ua({isOpened:!o})),children:(0,Kt.jsx)(Qb,{})})]}),(0,Kt.jsxs)("fieldset",{className:"form__fieldset",children:[(0,Kt.jsxs)("label",{className:"form__item",htmlFor:"meal-type",children:[(0,Kt.jsx)("span",{children:"\u0412\u044b\u0431\u0435\u0440\u0438 \u043f\u0440\u0438\u0435\u043c \u043f\u0438\u0449\u0438: "}),(0,Kt.jsx)("select",{className:"form__input form__input--select",name:"type",id:"meal-type",value:b.type,onChange:e=>{const{value:t}=e.target,n=t;x((e=>({...e,type:n,id:v(i,n)})))},required:!0,children:Object.values(Ka).map((e=>(0,Kt.jsx)("option",{value:e,children:Ya[e]},e)))})]}),(0,Kt.jsxs)("label",{className:"form__item",htmlFor:"meal-name",children:[(0,Kt.jsx)("span",{children:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0431\u043b\u044e\u0434\u0430: "}),(0,Kt.jsx)("input",{className:"form__input",type:"text",id:"meal-name",name:"name",value:b.name,onChange:w,placeholder:"\u0417\u0430\u043f\u0435\u0447\u0435\u043d\u0430\u044f \u043a\u0443\u0440\u0438\u043d\u0430\u044f \u0433\u0440\u0443\u0434\u043a\u0430",required:!0})]}),(0,Kt.jsxs)("label",{className:"form__item form__item--wild-grid",htmlFor:"meal-ingredients",children:[(0,Kt.jsx)("span",{children:"\u0418\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u044b: "}),(0,Kt.jsx)("input",{className:"form__input",type:"text",id:"meal-ingredients",name:"ingredients",value:b.ingredients.join(","),onChange:w,placeholder:"\u041a\u0443\u0440\u0438\u043d\u0430\u044f \u0433\u0440\u0443\u0434\u043a\u0430, \u043b\u0443\u043a, \u0447\u0435\u0441\u043d\u043e\u043a, \u0441\u043f\u0435\u0446\u0438\u0438...",required:!0})]}),(0,Kt.jsxs)("label",{className:"form__item form__item--wild-grid",htmlFor:"meal-recipe",children:[(0,Kt.jsx)("span",{children:"\u041e\u043f\u0438\u0448\u0438 \u0440\u0435\u0446\u0435\u043f\u0442 (\u043f\u043e\u0448\u0430\u0433\u043e\u0432\u043e): "}),(0,Kt.jsx)("textarea",{className:"form__input",id:"meal-recipe",name:"recipe",value:b.recipe,onChange:e=>{const{value:t}=e.target;x((e=>({...e,recipe:t})))},rows:3,placeholder:"\u0420\u0435\u0446\u0435\u043f\u0442..."})]}),(0,Kt.jsxs)("label",{className:"form__item",htmlFor:"meal-calories",children:[(0,Kt.jsx)("span",{children:"\u041a\u0430\u043b\u043e\u0440\u0438\u0438: "}),(0,Kt.jsx)("input",{className:"form__input",type:"number",id:"meal-calories",name:"calories",value:b.calories,onChange:w,min:0})]}),(0,Kt.jsxs)("label",{className:"form__item",htmlFor:"meal-proteins",children:[(0,Kt.jsx)("span",{children:"\u0411\u0435\u043b\u043a\u0438: "}),(0,Kt.jsx)("input",{className:"form__input",type:"number",id:"meal-proteins",name:"proteins",value:b.proteins,onChange:w,min:0,step:.1})]}),(0,Kt.jsxs)("label",{className:"form__item",htmlFor:"meal-fats",children:[(0,Kt.jsx)("span",{children:"\u0416\u0438\u0440\u044b: "}),(0,Kt.jsx)("input",{className:"form__input",type:"number",id:"meal-fats",name:"fats",value:b.fats,onChange:w,min:0,step:.1})]}),(0,Kt.jsxs)("label",{className:"form__item",htmlFor:"meal-carbs",children:[(0,Kt.jsx)("span",{children:"\u0423\u0433\u043b\u0435\u0432\u043e\u0434\u044b: "}),(0,Kt.jsx)("input",{className:"form__input",type:"number",id:"meal-carbs",name:"carbs",value:b.carbs,onChange:w,min:0,step:.1})]}),(0,Kt.jsx)("label",{className:"form__item form__item--wild-grid",htmlFor:"meal-picture",children:(0,Kt.jsx)(PK,{onFileUpload:e=>{x((t=>({...t,picture:e})))},inputId:"meal-picture",name:"picture"})}),(0,Kt.jsxs)("div",{className:"form__checkboxes",children:[(0,Kt.jsxs)("label",{className:"form__item form__item--checkbox",htmlFor:"add-to-user",children:[(0,Kt.jsx)("input",{className:"form__checkbox visually-hidden",type:"checkbox",name:"add-to-user",id:"add-to-user",checked:p,onChange:()=>h(!p)}),(0,Kt.jsx)("span",{className:"form__custom-checkbox"}),(0,Kt.jsx)("span",{children:"\u0415\u043c \u0441\u0435\u0439\u0447\u0430\u0441."}),(0,Kt.jsx)("p",{className:"form__checkbox-description",children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442 \u0431\u043b\u044e\u0434\u043e \u0432 \u0431\u0430\u0437\u0443 \u0440\u0435\u0446\u0435\u043f\u0442\u043e\u0432 \u0438 \u0432 \u0442\u0432\u043e\u0439 \u0441\u0435\u0433\u043e\u0434\u043d\u044f\u0448\u043d\u0438\u0439 \u0440\u0430\u0446\u0438\u043e\u043d."})]}),(0,Kt.jsxs)("label",{className:"form__item form__item--checkbox",htmlFor:"one-time-meal",children:[(0,Kt.jsx)("input",{className:"form__checkbox visually-hidden",type:"checkbox",name:"one-time-meal",id:"one-time-meal",checked:f,onChange:()=>(m(!f),void h(!1))}),(0,Kt.jsx)("span",{className:"form__custom-checkbox"}),(0,Kt.jsx)("span",{children:"\u0420\u0430\u0437\u043e\u0432\u0430\u044f \u0441\u043b\u0430\u0431\u043e\u0441\u0442\u044c."}),(0,Kt.jsx)("p",{className:"form__checkbox-description",children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442 \u0431\u043b\u044e\u0434\u043e \u0432 \u0442\u0432\u043e\u0439 \u0441\u0435\u0433\u043e\u0434\u043d\u044f\u0448\u043d\u0438\u0439 \u0440\u0430\u0446\u0438\u043e\u043d, \u043d\u0435 \u0441\u043e\u0445\u0440\u0430\u043d\u044f\u044f \u0435\u0433\u043e \u0432 \u0431\u0430\u0437\u0443."})]})]})]}),(0,Kt.jsx)("button",{className:"button button--submit form__submit",type:"submit",disabled:s,children:s?(0,Kt.jsx)(Vb,{size:"40",color:"white"}):"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0431\u043b\u044e\u0434\u043e!"})]})})}function MK(){const e=he((e=>e.data.users.length)),t=he((e=>e.page.registrationStep)),n=Ce(),[i,o]=(0,r.useState)(!1),a=he((e=>e.page.isRegisterFormOpened)),s=Mw((()=>{n(ja({isOpened:!1}))})),l={id:e.toString(),name:"",email:"",isAdmin:!1,mealSchedule:[],trainingSessions:[],activityLevel:es.Sedentary,avatar:"",gender:ls.Male,age:0,weight:0,height:0,target:ns.WeightMaintenance,password:"",confirmPassword:""},[c,u]=(0,r.useState)(l),[d,p]=(0,r.useState)(""),h=e=>{const{name:t,value:n,files:r}=e.target;u("avatar"===t&&r?e=>({...e,avatar:URL.createObjectURL(r[0])}):e=>({...e,[t]:n}))},f=e=>{const{name:t,value:n}=e.target;u((e=>({...e,[t]:n})))};(0,r.useEffect)((()=>{p(He(qa.UserPage,{id:c.id}))}),[d,n,c]);const m=async e=>{e.preventDefault(),o(!0);const r=OC();try{if(t===cs.AccountSetup)return n(za({step:cs.HealthGoals})),void o(!1);if(t===cs.HealthGoals){if(c.password!==c.confirmPassword)return n(Na({message:ps.RegisterPasswordNotMatch})),void o(!1);if(!ds.test(c.password))return n(Na({message:ps.PasswordError})),void o(!1);const e=await async function(e,t,n){if(Oc(e.app))return Promise.reject(S$(e));const r=IS(e),i=jS(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",s_,"EMAIL_PASSWORD_PROVIDER"),o=await i.catch((t=>{throw"auth/password-does-not-meet-requirements"===t.code&&g_(e),t})),a=await l_._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}(r,c.email,c.password),t=e.user,i=await t.getIdToken();u({id:t.uid,name:c.name,email:c.email,isAdmin:!1,mealSchedule:c.mealSchedule,trainingSessions:c.trainingSessions,avatar:c.avatar,password:c.password,confirmPassword:c.confirmPassword,gender:c.gender,age:c.age,weight:c.weight,height:c.height,target:c.target,activityLevel:c.activityLevel}),await zg({id:t.uid,name:c.name,email:c.email,isAdmin:!1,mealSchedule:c.mealSchedule,trainingSessions:c.trainingSessions,avatar:c.avatar,token:i,gender:c.gender,age:c.age,weight:c.weight,height:c.height,target:c.target,activityLevel:c.activityLevel},n);const a={email:t.email,id:t.uid,token:i};n(ys(a)),n($a({activeUser:a})),Ug({login:c.email,password:c.password}),n(Ra({userInformation:a})),d&&n(Da(d)),n(za({step:cs.None})),u(l),n(Fa({isOpened:!1})),n(ja({isOpened:!1})),n(Ia({path:null})),localStorage.setItem("nutrition-user",JSON.stringify(a))}}catch(Eu){console.error("Error registering user:",Eu),n(Na({message:ps.HasAccountError}))}finally{o(!1)}};return(0,Kt.jsx)("div",{className:"form__wrapper",children:(0,Kt.jsxs)("form",{className:"form",action:"",method:"post",onSubmit:m,ref:s,children:[(0,Kt.jsxs)("div",{className:"form__header",children:[(0,Kt.jsxs)("div",{children:[(0,Kt.jsx)("h1",{className:"title title--2",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),(0,Kt.jsx)("p",{className:"form__register-step-title",children:t})]}),(0,Kt.jsx)("button",{className:"button form__button--close",onClick:()=>n(ja({isOpened:!a})),children:(0,Kt.jsx)(Qb,{})})]}),t===cs.AccountSetup&&(0,Kt.jsxs)("fieldset",{className:"form__fieldset",children:[(0,Kt.jsxs)("label",{className:"form__item",htmlFor:"register-name",children:[(0,Kt.jsx)("span",{children:"\u0418\u043c\u044f \u0438\u043b\u0438 \u043d\u0438\u043a*: "}),(0,Kt.jsx)("input",{className:"form__input",type:"text",name:"name",id:"register-name",value:c.name,onChange:h,placeholder:"Peter",required:!0})]}),(0,Kt.jsxs)("label",{className:"form__item",htmlFor:"register-email",children:[(0,Kt.jsx)("span",{children:"\u0422\u0432\u043e\u0439 e-mail*: "}),(0,Kt.jsx)("input",{className:"form__input",type:"email",name:"email",id:"register-email",value:c.email,onChange:h,placeholder:"peter@yahoo.com",required:!0})]}),(0,Kt.jsxs)("label",{className:"form__item form__item--wild-grid",htmlFor:"register-avatar",children:[(0,Kt.jsx)("span",{children:"\u0417\u0430\u0433\u0440\u0443\u0437\u0438 \u0430\u0432\u0430\u0442\u0430\u0440: "}),(0,Kt.jsx)(PK,{onFileUpload:e=>{u((t=>({...t,avatar:e})))},inputId:"register-avatar",name:"avatar"})]}),(0,Kt.jsxs)("label",{className:"form__item form__item--wild-grid",htmlFor:"register-password",children:[(0,Kt.jsx)("span",{children:"\u0412\u044b\u0431\u0435\u0440\u0438 \u043f\u0430\u0440\u043e\u043b\u044c*: "}),(0,Kt.jsx)("input",{className:"form__input",type:"password",name:"password",id:"register-password",value:c.password,onChange:h,autoComplete:"off",placeholder:"Password",required:!0})]}),(0,Kt.jsxs)("label",{className:"form__item form__item--wild-grid",htmlFor:"register-confirm-password",children:[(0,Kt.jsx)("span",{children:"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438 \u043f\u0430\u0440\u043e\u043b\u044c*: "}),(0,Kt.jsx)("input",{className:"form__input",type:"password",name:"confirmPassword",id:"register-confirm-password",value:c.confirmPassword,onChange:h,autoComplete:"off",placeholder:"Confirm password",required:!0})]}),(0,Kt.jsx)("p",{className:"form__error",children:ps.PasswordError})]}),t===cs.HealthGoals&&(0,Kt.jsxs)("fieldset",{className:"form__fieldset",children:[(0,Kt.jsxs)("label",{className:"form__item",htmlFor:"register-gender",children:[(0,Kt.jsx)("span",{children:"\u041f\u043e\u043b*: "}),(0,Kt.jsx)("select",{className:"form__input form__input--select",value:c.gender,name:"gender","aria-label":"choose registration gender:",onChange:f,required:!0,children:Object.values(ls).map((e=>(0,Kt.jsx)("option",{value:e,children:e},`gender-${e}`)))})]}),(0,Kt.jsxs)("label",{className:"form__item",htmlFor:"register-age",children:[(0,Kt.jsx)("span",{children:"\u0412\u043e\u0437\u0440\u0430\u0441\u0442*: "}),(0,Kt.jsx)("input",{className:"form__input",type:"number",min:"0",max:"120",name:"age",id:"register-age",value:c.age,onChange:h,placeholder:"23",required:!0})]}),(0,Kt.jsxs)("label",{className:"form__item",htmlFor:"register-weight",children:[(0,Kt.jsx)("span",{children:"\u0422\u0432\u043e\u0439 \u0432\u0435\u0441*: "}),(0,Kt.jsx)("input",{className:"form__input",type:"number",min:"0",name:"weight",id:"register-weight",value:c.weight,onChange:h,required:!0})]}),(0,Kt.jsxs)("label",{className:"form__item",htmlFor:"register-height",children:[(0,Kt.jsx)("span",{children:"\u0422\u0432\u043e\u0439 \u0440\u043e\u0441\u0442*: "}),(0,Kt.jsx)("input",{className:"form__input",type:"number",min:"0",name:"height",id:"register-height",value:c.height,onChange:h,required:!0})]}),(0,Kt.jsxs)("label",{className:"form__item",htmlFor:"register-activity",children:[(0,Kt.jsx)("span",{children:"\u0423\u0440\u043e\u0432\u0435\u043d\u044c \u0430\u043a\u0442\u0438\u0432\u043d\u043e\u0441\u0442\u0438*: "}),(0,Kt.jsx)("select",{className:"form__input form__input--select",value:c.activityLevel,name:"activityLevel","aria-label":"choose activity level:",onChange:f,required:!0,children:Object.values(es).map((e=>{const t=ts[e];return t?(0,Kt.jsx)("option",{value:e,children:t},`activity-${e}`):null}))})]}),(0,Kt.jsxs)("label",{className:"form__item",htmlFor:"register-target",children:[(0,Kt.jsx)("span",{children:"\u0426\u0435\u043b\u044c \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u044b*: "}),(0,Kt.jsx)("select",{className:"form__input form__input--select",value:c.target,name:"target","aria-label":"choose nutrition target:",onChange:f,required:!0,children:Object.values(ns).map((e=>(0,Kt.jsx)("option",{value:e,children:e},`target-${e}`)))})]})]}),t===cs.HealthGoals&&(0,Kt.jsx)("button",{className:"button form__submit form__submit--navigation",type:"button",onClick:()=>n(za({step:cs.AccountSetup})),children:"\u041d\u0430\u0437\u0430\u0434"}),(0,Kt.jsx)("button",{className:"button form__submit "+(t===cs.HealthGoals?"button--submit":"form__submit--navigation"),type:t===cs.HealthGoals?"submit":"button",onClick:m,children:t===cs.AccountSetup?"\u0412\u043f\u0435\u0440\u0435\u0434":i?(0,Kt.jsx)(Vb,{color:t===cs.HealthGoals?"white":"black",size:"20"}):"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f!"}),(0,Kt.jsx)("p",{className:"form__require-description",children:"* - \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043f\u043e\u043b\u044f"})]})})}function AK(){const e=Ce(),t=Mw((()=>{e(Va({isOpened:!1}))}));return(0,Kt.jsx)("div",{className:"form__wrapper",children:(0,Kt.jsx)("div",{className:"form form--add-meal",ref:t,children:(0,Kt.jsx)(Jb,{isPopup:!0})})})}var OK;function LK(){return LK=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},LK.apply(null,arguments)}function NK(e,t){let{title:n,titleId:i,...o}=e;return r.createElement("svg",LK({width:126,height:156,viewBox:"0 0 126 156",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":i},o),n?r.createElement("title",{id:i},n):null,OK||(OK=r.createElement("path",{d:"M39.3134 18.3663L97.8632 106.96V17.5459C97.8632 11.7355 99.0938 7.39466 101.555 4.52346C104.084 1.58406 107.468 0.114258 111.706 0.114258C116.081 0.114258 119.533 1.58406 122.062 4.52346C124.592 7.39466 125.856 11.7355 125.856 17.5459V135.773C125.856 148.966 120.388 155.564 109.45 155.564C106.716 155.564 104.255 155.154 102.067 154.334C99.8798 153.582 97.8292 152.35 95.915 150.642C94.001 148.932 92.2236 146.95 90.583 144.694C88.9424 142.37 87.3018 140.012 85.6612 137.619L28.5468 50.0509V138.132C28.5468 143.874 27.2138 148.214 24.5478 151.154C21.8818 154.094 18.4638 155.564 14.294 155.564C9.98741 155.564 6.53521 154.094 3.93761 151.154C1.33981 148.146 0.0410156 143.806 0.0410156 138.132V22.1603C0.0410156 17.2383 0.587818 13.3761 1.68162 10.5733C2.98042 7.49706 5.13382 5.00206 8.14162 3.08786C11.1494 1.10546 14.3964 0.114258 17.8828 0.114258C20.6172 0.114258 22.9414 0.558658 24.8554 1.44726C26.8378 2.33606 28.5468 3.53226 29.9824 5.03626C31.4864 6.54006 32.9902 8.48826 34.4942 10.8809C36.0664 13.2735 37.6728 15.7687 39.3134 18.3663Z",fill:"currentColor"})))}const DK=r.forwardRef(NK);n.p;function FK(e){let{isPageLoading:t,onAnimationEnd:n}=e;(0,r.useEffect)((()=>{if(!t){const e=setTimeout(n,1e3);return()=>clearTimeout(e)}}),[t,n]);const i=Yb()("main-loader",{"main-loader--disappearing":!t}),o=Yb()("main-loader__icon",{"main-loader__icon--disappearing":!t});return(0,Kt.jsx)("div",{className:i,children:(0,Kt.jsx)("p",{className:o,children:(0,Kt.jsx)(DK,{})})})}const jK=e=>{let{children:t}=e;const n=Ce(),{type:i}=yt(),o=he((e=>e.page.statusMessage)),a=he((e=>e.data.isMealsDataLoading)),s=he((e=>e.data.isUsersDataLoading)),l=he((e=>e.auth.authorizationStatus===fs.Auth)),c=(0,r.useRef)(!1),[u,d]=(0,r.useState)(!0),p=a||s;(0,r.useEffect)((()=>{if(l){if(!(a||s)&&!c.current){const e=setTimeout((()=>{d(!1),c.current=!0}),1e3);return()=>clearTimeout(e)}}else d(!1)}),[l,a,s,i,n]);const h=he((e=>e.page.isLoginFormOpened)),f=he((e=>e.page.isRegisterFormOpened)),m=he((e=>e.page.isNewMealFormOpened)),g=he((e=>e.page.isTrainingFormOpened)),y=he((e=>e.page.isMealFormOpened)),v=he((e=>e.page.activeMealType)),b=()=>(0,Kt.jsxs)(Kt.Fragment,{children:[o&&(0,Kt.jsx)(u$,{message:o}),g&&(0,Kt.jsx)(p$,{}),m&&(0,Kt.jsx)(RK,{type:i||v||void 0}),y&&(0,Kt.jsx)(AK,{}),h&&(0,Kt.jsx)(WC,{}),f&&(0,Kt.jsx)(MK,{})]});return(0,Kt.jsxs)("div",{className:"page-container",children:[l&&u&&(0,Kt.jsx)(FK,{isPageLoading:p,onAnimationEnd:()=>d(!1)}),!u&&(0,Kt.jsxs)(Kt.Fragment,{children:[(0,Kt.jsx)(c$,{}),(0,Kt.jsx)("main",{className:"main",children:(0,Kt.jsx)("div",{className:"main__container",children:t})}),(0,Kt.jsx)(b,{})]})]})};const zK=function(){return(0,Kt.jsx)(G,{children:(0,Kt.jsx)(Yt,{history:Gt,basename:"/",children:(0,Kt.jsx)(xe,{store:_s,children:(0,Kt.jsx)(jK,{children:(0,Kt.jsxs)(Ot,{children:[(0,Kt.jsx)(Mt,{path:qa.Landing,element:(0,Kt.jsx)(Dw,{})}),(0,Kt.jsx)(Mt,{path:qa.Root,element:(0,Kt.jsx)(Yx,{element:(0,Kt.jsx)(Nx,{})})}),(0,Kt.jsx)(Mt,{path:qa.UserPage,element:(0,Kt.jsx)(Yx,{element:(0,Kt.jsx)(Ow,{})})}),(0,Kt.jsx)(Mt,{path:qa.MealPage,element:(0,Kt.jsx)(Yx,{element:(0,Kt.jsx)(Lw,{})})}),(0,Kt.jsx)(Mt,{path:qa.MealsByTypePage,element:(0,Kt.jsx)(Yx,{element:(0,Kt.jsx)(Uw,{})})}),(0,Kt.jsx)(Mt,{path:"*",element:(0,Kt.jsx)(Gx,{})})]})})})})})},BK=o.createRoot(document.getElementById("root"));_s.dispatch(jg()),_s.dispatch(Fg()),BK.render((0,Kt.jsx)(r.StrictMode,{children:(0,Kt.jsx)(zK,{})}))})()})();
//# sourceMappingURL=main.1684fcfd.js.map